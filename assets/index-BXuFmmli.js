(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(n){if(n.ep)return;n.ep=!0;const l=e(n);fetch(n.href,l)}})();function E1(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}var Qp={exports:{}},Na={};var fv;function h5(){if(fv)return Na;fv=1;var A=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,n,l){var a=null;if(l!==void 0&&(a=""+l),n.key!==void 0&&(a=""+n.key),"key"in n){l={};for(var c in n)c!=="key"&&(l[c]=n[c])}else l=n;return n=l.ref,{$$typeof:A,type:s,key:a,ref:n!==void 0?n:null,props:l}}return Na.Fragment=t,Na.jsx=e,Na.jsxs=e,Na}var pv;function u5(){return pv||(pv=1,Qp.exports=h5()),Qp.exports}var h=u5(),Fp={exports:{}},ye={};var gv;function d5(){if(gv)return ye;gv=1;var A=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),v=Symbol.iterator;function w(Q){return Q===null||typeof Q!="object"?null:(Q=v&&Q[v]||Q["@@iterator"],typeof Q=="function"?Q:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,S={};function x(Q,j,Z){this.props=Q,this.context=j,this.refs=S,this.updater=Z||y}x.prototype.isReactComponent={},x.prototype.setState=function(Q,j){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,j,"setState")},x.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function U(){}U.prototype=x.prototype;function M(Q,j,Z){this.props=Q,this.context=j,this.refs=S,this.updater=Z||y}var N=M.prototype=new U;N.constructor=M,b(N,x.prototype),N.isPureReactComponent=!0;var I=Array.isArray;function R(){}var D={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function lt(Q,j,Z){var rt=Z.ref;return{$$typeof:A,type:Q,key:j,ref:rt!==void 0?rt:null,props:Z}}function dt(Q,j){return lt(Q.type,j,Q.props)}function At(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===A}function ft(Q){var j={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(Z){return j[Z]})}var mt=/\/+/g;function at(Q,j){return typeof Q=="object"&&Q!==null&&Q.key!=null?ft(""+Q.key):j.toString(36)}function Ut(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(R,R):(Q.status="pending",Q.then(function(j){Q.status==="pending"&&(Q.status="fulfilled",Q.value=j)},function(j){Q.status==="pending"&&(Q.status="rejected",Q.reason=j)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function W(Q,j,Z,rt,Et){var xt=typeof Q;(xt==="undefined"||xt==="boolean")&&(Q=null);var Qt=!1;if(Q===null)Qt=!0;else switch(xt){case"bigint":case"string":case"number":Qt=!0;break;case"object":switch(Q.$$typeof){case A:case t:Qt=!0;break;case p:return Qt=Q._init,W(Qt(Q._payload),j,Z,rt,Et)}}if(Qt)return Et=Et(Q),Qt=rt===""?"."+at(Q,0):rt,I(Et)?(Z="",Qt!=null&&(Z=Qt.replace(mt,"$&/")+"/"),W(Et,j,Z,"",function(He){return He})):Et!=null&&(At(Et)&&(Et=dt(Et,Z+(Et.key==null||Q&&Q.key===Et.key?"":(""+Et.key).replace(mt,"$&/")+"/")+Qt)),j.push(Et)),1;Qt=0;var se=rt===""?".":rt+":";if(I(Q))for(var oe=0;oe<Q.length;oe++)rt=Q[oe],xt=se+at(rt,oe),Qt+=W(rt,j,Z,xt,Et);else if(oe=w(Q),typeof oe=="function")for(Q=oe.call(Q),oe=0;!(rt=Q.next()).done;)rt=rt.value,xt=se+at(rt,oe++),Qt+=W(rt,j,Z,xt,Et);else if(xt==="object"){if(typeof Q.then=="function")return W(Ut(Q),j,Z,rt,Et);throw j=String(Q),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return Qt}function E(Q,j,Z){if(Q==null)return Q;var rt=[],Et=0;return W(Q,rt,"","",function(xt){return j.call(Z,xt,Et++)}),rt}function K(Q){if(Q._status===-1){var j=Q._result;j=j(),j.then(function(Z){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=Z)},function(Z){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=Z)}),Q._status===-1&&(Q._status=0,Q._result=j)}if(Q._status===1)return Q._result.default;throw Q._result}var ot=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)},pt={map:E,forEach:function(Q,j,Z){E(Q,function(){j.apply(this,arguments)},Z)},count:function(Q){var j=0;return E(Q,function(){j++}),j},toArray:function(Q){return E(Q,function(j){return j})||[]},only:function(Q){if(!At(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}};return ye.Activity=m,ye.Children=pt,ye.Component=x,ye.Fragment=e,ye.Profiler=n,ye.PureComponent=M,ye.StrictMode=s,ye.Suspense=d,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,ye.__COMPILER_RUNTIME={__proto__:null,c:function(Q){return D.H.useMemoCache(Q)}},ye.cache=function(Q){return function(){return Q.apply(null,arguments)}},ye.cacheSignal=function(){return null},ye.cloneElement=function(Q,j,Z){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var rt=b({},Q.props),Et=Q.key;if(j!=null)for(xt in j.key!==void 0&&(Et=""+j.key),j)!V.call(j,xt)||xt==="key"||xt==="__self"||xt==="__source"||xt==="ref"&&j.ref===void 0||(rt[xt]=j[xt]);var xt=arguments.length-2;if(xt===1)rt.children=Z;else if(1<xt){for(var Qt=Array(xt),se=0;se<xt;se++)Qt[se]=arguments[se+2];rt.children=Qt}return lt(Q.type,Et,rt)},ye.createContext=function(Q){return Q={$$typeof:a,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:l,_context:Q},Q},ye.createElement=function(Q,j,Z){var rt,Et={},xt=null;if(j!=null)for(rt in j.key!==void 0&&(xt=""+j.key),j)V.call(j,rt)&&rt!=="key"&&rt!=="__self"&&rt!=="__source"&&(Et[rt]=j[rt]);var Qt=arguments.length-2;if(Qt===1)Et.children=Z;else if(1<Qt){for(var se=Array(Qt),oe=0;oe<Qt;oe++)se[oe]=arguments[oe+2];Et.children=se}if(Q&&Q.defaultProps)for(rt in Qt=Q.defaultProps,Qt)Et[rt]===void 0&&(Et[rt]=Qt[rt]);return lt(Q,xt,Et)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(Q){return{$$typeof:c,render:Q}},ye.isValidElement=At,ye.lazy=function(Q){return{$$typeof:p,_payload:{_status:-1,_result:Q},_init:K}},ye.memo=function(Q,j){return{$$typeof:f,type:Q,compare:j===void 0?null:j}},ye.startTransition=function(Q){var j=D.T,Z={};D.T=Z;try{var rt=Q(),Et=D.S;Et!==null&&Et(Z,rt),typeof rt=="object"&&rt!==null&&typeof rt.then=="function"&&rt.then(R,ot)}catch(xt){ot(xt)}finally{j!==null&&Z.types!==null&&(j.types=Z.types),D.T=j}},ye.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},ye.use=function(Q){return D.H.use(Q)},ye.useActionState=function(Q,j,Z){return D.H.useActionState(Q,j,Z)},ye.useCallback=function(Q,j){return D.H.useCallback(Q,j)},ye.useContext=function(Q){return D.H.useContext(Q)},ye.useDebugValue=function(){},ye.useDeferredValue=function(Q,j){return D.H.useDeferredValue(Q,j)},ye.useEffect=function(Q,j){return D.H.useEffect(Q,j)},ye.useEffectEvent=function(Q){return D.H.useEffectEvent(Q)},ye.useId=function(){return D.H.useId()},ye.useImperativeHandle=function(Q,j,Z){return D.H.useImperativeHandle(Q,j,Z)},ye.useInsertionEffect=function(Q,j){return D.H.useInsertionEffect(Q,j)},ye.useLayoutEffect=function(Q,j){return D.H.useLayoutEffect(Q,j)},ye.useMemo=function(Q,j){return D.H.useMemo(Q,j)},ye.useOptimistic=function(Q,j){return D.H.useOptimistic(Q,j)},ye.useReducer=function(Q,j,Z){return D.H.useReducer(Q,j,Z)},ye.useRef=function(Q){return D.H.useRef(Q)},ye.useState=function(Q){return D.H.useState(Q)},ye.useSyncExternalStore=function(Q,j,Z){return D.H.useSyncExternalStore(Q,j,Z)},ye.useTransition=function(){return D.H.useTransition()},ye.version="19.2.3",ye}var mv;function T1(){return mv||(mv=1,Fp.exports=d5()),Fp.exports}var B=T1();const ks=E1(B);var Up={exports:{}},La={},Mp={exports:{}},Ip={};var _v;function f5(){return _v||(_v=1,(function(A){function t(W,E){var K=W.length;W.push(E);t:for(;0<K;){var ot=K-1>>>1,pt=W[ot];if(0<n(pt,E))W[ot]=E,W[K]=pt,K=ot;else break t}}function e(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var E=W[0],K=W.pop();if(K!==E){W[0]=K;t:for(var ot=0,pt=W.length,Q=pt>>>1;ot<Q;){var j=2*(ot+1)-1,Z=W[j],rt=j+1,Et=W[rt];if(0>n(Z,K))rt<pt&&0>n(Et,Z)?(W[ot]=Et,W[rt]=K,ot=rt):(W[ot]=Z,W[j]=K,ot=j);else if(rt<pt&&0>n(Et,K))W[ot]=Et,W[rt]=K,ot=rt;else break t}}return E}function n(W,E){var K=W.sortIndex-E.sortIndex;return K!==0?K:W.id-E.id}if(A.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;A.unstable_now=function(){return l.now()}}else{var a=Date,c=a.now();A.unstable_now=function(){return a.now()-c}}var d=[],f=[],p=1,m=null,v=3,w=!1,y=!1,b=!1,S=!1,x=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function N(W){for(var E=e(f);E!==null;){if(E.callback===null)s(f);else if(E.startTime<=W)s(f),E.sortIndex=E.expirationTime,t(d,E);else break;E=e(f)}}function I(W){if(b=!1,N(W),!y)if(e(d)!==null)y=!0,R||(R=!0,ft());else{var E=e(f);E!==null&&Ut(I,E.startTime-W)}}var R=!1,D=-1,V=5,lt=-1;function dt(){return S?!0:!(A.unstable_now()-lt<V)}function At(){if(S=!1,R){var W=A.unstable_now();lt=W;var E=!0;try{t:{y=!1,b&&(b=!1,U(D),D=-1),w=!0;var K=v;try{e:{for(N(W),m=e(d);m!==null&&!(m.expirationTime>W&&dt());){var ot=m.callback;if(typeof ot=="function"){m.callback=null,v=m.priorityLevel;var pt=ot(m.expirationTime<=W);if(W=A.unstable_now(),typeof pt=="function"){m.callback=pt,N(W),E=!0;break e}m===e(d)&&s(d),N(W)}else s(d);m=e(d)}if(m!==null)E=!0;else{var Q=e(f);Q!==null&&Ut(I,Q.startTime-W),E=!1}}break t}finally{m=null,v=K,w=!1}E=void 0}}finally{E?ft():R=!1}}}var ft;if(typeof M=="function")ft=function(){M(At)};else if(typeof MessageChannel<"u"){var mt=new MessageChannel,at=mt.port2;mt.port1.onmessage=At,ft=function(){at.postMessage(null)}}else ft=function(){x(At,0)};function Ut(W,E){D=x(function(){W(A.unstable_now())},E)}A.unstable_IdlePriority=5,A.unstable_ImmediatePriority=1,A.unstable_LowPriority=4,A.unstable_NormalPriority=3,A.unstable_Profiling=null,A.unstable_UserBlockingPriority=2,A.unstable_cancelCallback=function(W){W.callback=null},A.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<W?Math.floor(1e3/W):5},A.unstable_getCurrentPriorityLevel=function(){return v},A.unstable_next=function(W){switch(v){case 1:case 2:case 3:var E=3;break;default:E=v}var K=v;v=E;try{return W()}finally{v=K}},A.unstable_requestPaint=function(){S=!0},A.unstable_runWithPriority=function(W,E){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var K=v;v=W;try{return E()}finally{v=K}},A.unstable_scheduleCallback=function(W,E,K){var ot=A.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ot+K:ot):K=ot,W){case 1:var pt=-1;break;case 2:pt=250;break;case 5:pt=1073741823;break;case 4:pt=1e4;break;default:pt=5e3}return pt=K+pt,W={id:p++,callback:E,priorityLevel:W,startTime:K,expirationTime:pt,sortIndex:-1},K>ot?(W.sortIndex=K,t(f,W),e(d)===null&&W===e(f)&&(b?(U(D),D=-1):b=!0,Ut(I,K-ot))):(W.sortIndex=pt,t(d,W),y||w||(y=!0,R||(R=!0,ft()))),W},A.unstable_shouldYield=dt,A.unstable_wrapCallback=function(W){var E=v;return function(){var K=v;v=E;try{return W.apply(this,arguments)}finally{v=K}}}})(Ip)),Ip}var vv;function p5(){return vv||(vv=1,Mp.exports=f5()),Mp.exports}var Np={exports:{}},Ki={};var Bv;function g5(){if(Bv)return Ki;Bv=1;var A=T1();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var s={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},n=Symbol.for("react.portal");function l(d,f,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:m==null?null:""+m,children:d,containerInfo:f,implementation:p}}var a=A.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ki.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ki.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return l(d,f,null,p)},Ki.flushSync=function(d){var f=a.T,p=s.p;try{if(a.T=null,s.p=2,d)return d()}finally{a.T=f,s.p=p,s.d.f()}},Ki.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(d,f))},Ki.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},Ki.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,m=c(p,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?s.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:w}):p==="script"&&s.d.X(d,{crossOrigin:m,integrity:v,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ki.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=c(f.as,f.crossOrigin);s.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(d)},Ki.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,m=c(p,f.crossOrigin);s.d.L(d,p,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ki.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=c(f.as,f.crossOrigin);s.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(d)},Ki.requestFormReset=function(d){s.d.r(d)},Ki.unstable_batchedUpdates=function(d,f){return d(f)},Ki.useFormState=function(d,f,p){return a.H.useFormState(d,f,p)},Ki.useFormStatus=function(){return a.H.useHostTransitionStatus()},Ki.version="19.2.3",Ki}var wv;function B2(){if(wv)return Np.exports;wv=1;function A(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(A)}catch(t){console.error(t)}}return A(),Np.exports=g5(),Np.exports}var yv;function m5(){if(yv)return La;yv=1;var A=p5(),t=T1(),e=B2();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,o=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(o=r.return),i=r.return;while(i)}return r.tag===3?o:null}function a(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function c(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(l(i)!==i)throw Error(s(188))}function f(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var o=i,u=r;;){var g=o.return;if(g===null)break;var _=g.alternate;if(_===null){if(u=g.return,u!==null){o=u;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===o)return d(g),i;if(_===u)return d(g),r;_=_.sibling}throw Error(s(188))}if(o.return!==u.return)o=g,u=_;else{for(var C=!1,T=g.child;T;){if(T===o){C=!0,o=g,u=_;break}if(T===u){C=!0,u=g,o=_;break}T=T.sibling}if(!C){for(T=_.child;T;){if(T===o){C=!0,o=_,u=g;break}if(T===u){C=!0,u=_,o=g;break}T=T.sibling}if(!C)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?i:r}function p(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=p(i),r!==null)return r;i=i.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),M=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),lt=Symbol.for("react.activity"),dt=Symbol.for("react.memo_cache_sentinel"),At=Symbol.iterator;function ft(i){return i===null||typeof i!="object"?null:(i=At&&i[At]||i["@@iterator"],typeof i=="function"?i:null)}var mt=Symbol.for("react.client.reference");function at(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===mt?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case b:return"Fragment";case x:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case R:return"SuspenseList";case lt:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case y:return"Portal";case M:return i.displayName||"Context";case U:return(i._context.displayName||"Context")+".Consumer";case N:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return r=i.displayName||null,r!==null?r:at(i.type)||"Memo";case V:r=i._payload,i=i._init;try{return at(i(r))}catch{}}return null}var Ut=Array.isArray,W=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,E=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},ot=[],pt=-1;function Q(i){return{current:i}}function j(i){0>pt||(i.current=ot[pt],ot[pt]=null,pt--)}function Z(i,r){pt++,ot[pt]=i.current,i.current=r}var rt=Q(null),Et=Q(null),xt=Q(null),Qt=Q(null);function se(i,r){switch(Z(xt,r),Z(Et,i),Z(rt,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?D_(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=D_(r),i=k_(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}j(rt),Z(rt,i)}function oe(){j(rt),j(Et),j(xt)}function He(i){i.memoizedState!==null&&Z(Qt,i);var r=rt.current,o=k_(r,i.type);r!==o&&(Z(Et,i),Z(rt,o))}function Nt(i){Et.current===i&&(j(rt),j(Et)),Qt.current===i&&(j(Qt),Fa._currentValue=K)}var Wt,Je;function tt(i){if(Wt===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Wt=r&&r[1]||"",Je=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wt+i+Je}var Ht=!1;function Ae(i,r){if(!i||Ht)return"";Ht=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var Ct=function(){throw Error()};if(Object.defineProperty(Ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ct,[])}catch(ct){var nt=ct}Reflect.construct(i,[],Ct)}else{try{Ct.call()}catch(ct){nt=ct}i.call(Ct.prototype)}}else{try{throw Error()}catch(ct){nt=ct}(Ct=i())&&typeof Ct.catch=="function"&&Ct.catch(function(){})}}catch(ct){if(ct&&nt&&typeof ct.stack=="string")return[ct.stack,nt.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),C=_[0],T=_[1];if(C&&T){var O=C.split(`
`),st=T.split(`
`);for(g=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;g<st.length&&!st[g].includes("DetermineComponentFrameRoot");)g++;if(u===O.length||g===st.length)for(u=O.length-1,g=st.length-1;1<=u&&0<=g&&O[u]!==st[g];)g--;for(;1<=u&&0<=g;u--,g--)if(O[u]!==st[g]){if(u!==1||g!==1)do if(u--,g--,0>g||O[u]!==st[g]){var gt=`
`+O[u].replace(" at new "," at ");return i.displayName&&gt.includes("<anonymous>")&&(gt=gt.replace("<anonymous>",i.displayName)),gt}while(1<=u&&0<=g);break}}}finally{Ht=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?tt(o):""}function te(i,r){switch(i.tag){case 26:case 27:case 5:return tt(i.type);case 16:return tt("Lazy");case 13:return i.child!==r&&r!==null?tt("Suspense Fallback"):tt("Suspense");case 19:return tt("SuspenseList");case 0:case 15:return Ae(i.type,!1);case 11:return Ae(i.type.render,!1);case 1:return Ae(i.type,!0);case 31:return tt("Activity");default:return""}}function le(i){try{var r="",o=null;do r+=te(i,o),o=i,i=i.return;while(i);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ft=Object.prototype.hasOwnProperty,Qe=A.unstable_scheduleCallback,qe=A.unstable_cancelCallback,Qs=A.unstable_shouldYield,Xs=A.unstable_requestPaint,Fe=A.unstable_now,ss=A.unstable_getCurrentPriorityLevel,Ss=A.unstable_ImmediatePriority,wt=A.unstable_UserBlockingPriority,jt=A.unstable_NormalPriority,he=A.unstable_LowPriority,Zt=A.unstable_IdlePriority,Ue=A.log,Ze=A.unstable_setDisableYieldValue,$e=null,ls=null;function Pt(i){if(typeof Ue=="function"&&Ze(i),ls&&typeof ls.setStrictMode=="function")try{ls.setStrictMode($e,i)}catch{}}var hs=Math.clz32?Math.clz32:Y,ke=Math.log,ui=Math.LN2;function Y(i){return i>>>=0,i===0?32:31-(ke(i)/ui|0)|0}var vt=256,Xt=262144,we=4194304;function ce(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function be(i,r,o){var u=i.pendingLanes;if(u===0)return 0;var g=0,_=i.suspendedLanes,C=i.pingedLanes;i=i.warmLanes;var T=u&134217727;return T!==0?(u=T&~_,u!==0?g=ce(u):(C&=T,C!==0?g=ce(C):o||(o=T&~i,o!==0&&(g=ce(o))))):(T=u&~_,T!==0?g=ce(T):C!==0?g=ce(C):o||(o=u&~i,o!==0&&(g=ce(o)))),g===0?0:r!==0&&r!==g&&(r&_)===0&&(_=g&-g,o=r&-r,_>=o||_===32&&(o&4194048)!==0)?r:g}function js(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function is(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oi(){var i=we;return we<<=1,(we&62914560)===0&&(we=4194304),i}function De(i){for(var r=[],o=0;31>o;o++)r.push(i);return r}function AA(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Os(i,r,o,u,g,_){var C=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var T=i.entanglements,O=i.expirationTimes,st=i.hiddenUpdates;for(o=C&~o;0<o;){var gt=31-hs(o),Ct=1<<gt;T[gt]=0,O[gt]=-1;var nt=st[gt];if(nt!==null)for(st[gt]=null,gt=0;gt<nt.length;gt++){var ct=nt[gt];ct!==null&&(ct.lane&=-536870913)}o&=~Ct}u!==0&&Rs(i,u,0),_!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=_&~(C&~r))}function Rs(i,r,o){i.pendingLanes|=r,i.suspendedLanes&=~r;var u=31-hs(r);i.entangledLanes|=r,i.entanglements[u]=i.entanglements[u]|1073741824|o&261930}function EA(i,r){var o=i.entangledLanes|=r;for(i=i.entanglements;o;){var u=31-hs(o),g=1<<u;g&r|i[u]&r&&(i[u]|=r),o&=~g}}function di(i,r){var o=r&-r;return o=(o&42)!==0?1:An(o),(o&(i.suspendedLanes|r))!==0?0:o}function An(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function bt(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function je(){var i=E.p;return i!==0?i:(i=window.event,i===void 0?32:lv(i.type))}function Se(i,r){var o=E.p;try{return E.p=i,r()}finally{E.p=o}}var us=Math.random().toString(36).slice(2),ue="__reactFiber$"+us,Ai="__reactProps$"+us,Ri="__reactContainer$"+us,VA="__reactEvents$"+us,fi="__reactListeners$"+us,nn="__reactHandles$"+us,TA="__reactResources$"+us,bn="__reactMarker$"+us;function xn(i){delete i[ue],delete i[Ai],delete i[VA],delete i[fi],delete i[nn]}function PA(i){var r=i[ue];if(r)return r;for(var o=i.parentNode;o;){if(r=o[Ri]||o[ue]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(i=K_(i);i!==null;){if(o=i[ue])return o;i=K_(i)}return r}i=o,o=i.parentNode}return null}function Ys(i){if(i=i[ue]||i[Ri]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function rn(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function ln(i){var r=i[TA];return r||(r=i[TA]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ks(i){i[bn]=!0}var Wr=new Set,$r={};function KA(i,r){zi(i,r),zi(i+"Capture",r)}function zi(i,r){for($r[i]=r,i=0;i<r.length;i++)Wr.add(r[i])}var Ll=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yi={},Hl={};function GA(i){return Ft.call(Hl,i)?!0:Ft.call(Yi,i)?!1:Ll.test(i)?Hl[i]=!0:(Yi[i]=!0,!1)}function er(i,r,o){if(GA(r))if(o===null)i.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+o)}}function sr(i,r,o){if(o===null)i.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+o)}}function ni(i,r,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(r,o,""+u)}}function yi(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function nA(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function WA(i,r,o){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,_=u.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return g.call(this)},set:function(C){o=""+C,_.call(this,C)}}),Object.defineProperty(i,r,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(C){o=""+C},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function pi(i){if(!i._valueTracker){var r=nA(i)?"checked":"value";i._valueTracker=WA(i,r,""+i[r])}}function Dl(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return i&&(u=nA(i)?i.checked?"true":"false":i.value),i=u,i!==o?(r.setValue(i),!0):!1}function ir(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Sn=/[\n"\\]/g;function Fs(i){return i.replace(Sn,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function H(i,r,o,u,g,_,C,T){i.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.type=C:i.removeAttribute("type"),r!=null?C==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+yi(r)):i.value!==""+yi(r)&&(i.value=""+yi(r)):C!=="submit"&&C!=="reset"||i.removeAttribute("value"),r!=null?J(i,C,yi(r)):o!=null?J(i,C,yi(o)):u!=null&&i.removeAttribute("value"),g==null&&_!=null&&(i.defaultChecked=!!_),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.name=""+yi(T):i.removeAttribute("name")}function k(i,r,o,u,g,_,C,T){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),r!=null||o!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){pi(i);return}o=o!=null?""+yi(o):"",r=r!=null?""+yi(r):o,T||r===i.value||(i.value=r),i.defaultValue=r}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=T?i.checked:!!u,i.defaultChecked=!!u,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.name=C),pi(i)}function J(i,r,o){r==="number"&&ir(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function X(i,r,o,u){if(i=i.options,r){r={};for(var g=0;g<o.length;g++)r["$"+o[g]]=!0;for(o=0;o<i.length;o++)g=r.hasOwnProperty("$"+i[o].value),i[o].selected!==g&&(i[o].selected=g),g&&u&&(i[o].defaultSelected=!0)}else{for(o=""+yi(o),r=null,g=0;g<i.length;g++){if(i[g].value===o){i[g].selected=!0,u&&(i[g].defaultSelected=!0);return}r!==null||i[g].disabled||(r=i[g])}r!==null&&(r.selected=!0)}}function ht(i,r,o){if(r!=null&&(r=""+yi(r),r!==i.value&&(i.value=r),o==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=o!=null?""+yi(o):""}function St(i,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(s(92));if(Ut(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=yi(r),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u),pi(i)}function Bt(i,r){if(r){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=r;return}}i.textContent=r}var It=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ot(i,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":u?i.setProperty(r,o):typeof o!="number"||o===0||It.has(r)?r==="float"?i.cssFloat=o:i[r]=(""+o).trim():i[r]=o+"px"}function it(i,r,o){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var g in r)u=r[g],r.hasOwnProperty(g)&&o[g]!==u&&Ot(i,g,u)}else for(var _ in r)r.hasOwnProperty(_)&&Ot(i,_,r[_])}function ne(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ee=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Me=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ie(i){return Me.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ge(){}var ve=null;function Ns(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Us=null,Js=null;function ri(i){var r=Ys(i);if(r&&(i=r.stateNode)){var o=i[Ai]||null;t:switch(i=r.stateNode,r.type){case"input":if(H(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Fs(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==i&&u.form===i.form){var g=u[Ai]||null;if(!g)throw Error(s(90));H(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===i.form&&Dl(u)}break t;case"textarea":ht(i,o.value,o.defaultValue);break t;case"select":r=o.value,r!=null&&X(i,!!o.multiple,r,!1)}}}var zs=!1;function Ci(i,r,o){if(zs)return i(r,o);zs=!0;try{var u=i(r);return u}finally{if(zs=!1,(Us!==null||Js!==null)&&(ah(),Us&&(r=Us,i=Js,Js=Us=null,ri(r),i)))for(r=0;r<i.length;r++)ri(i[r])}}function qs(i,r){var o=i.stateNode;if(o===null)return null;var u=o[Ai]||null;if(u===null)return null;o=u[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break t;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(s(231,r,typeof o));return o}var Vt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),os=!1;if(Vt)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){os=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch{os=!1}var Oe=null,$A=null,bi=null;function Ar(){if(bi)return bi;var i,r=$A,o=r.length,u,g="value"in Oe?Oe.value:Oe.textContent,_=g.length;for(i=0;i<o&&r[i]===g[i];i++);var C=o-i;for(u=1;u<=C&&r[o-u]===g[_-u];u++);return bi=g.slice(i,1<u?1-u:void 0)}function on(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function an(){return!0}function kl(){return!1}function _i(i){function r(o,u,g,_,C){this._reactName=o,this._targetInst=g,this.type=u,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var T in i)i.hasOwnProperty(T)&&(o=i[T],this[T]=o?o(_):_[T]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?an:kl,this.isPropagationStopped=kl,this}return m(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),r}var pA={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jl=_i(pA),Xr=m({},pA,{view:0,detail:0}),Yr=_i(Xr),Yo,Jo,Jr,Ol=m({},Xr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Jr&&(Jr&&i.type==="mousemove"?(Yo=i.screenX-Jr.screenX,Jo=i.screenY-Jr.screenY):Jo=Yo=0,Jr=i),Yo)},movementY:function(i){return"movementY"in i?i.movementY:Jo}}),xc=_i(Ol),md=m({},Ol,{dataTransfer:0}),_d=_i(md),vd=m({},Xr,{relatedTarget:0}),qo=_i(vd),Bd=m({},pA,{animationName:0,elapsedTime:0,pseudoElement:0}),wd=_i(Bd),yd=m({},pA,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Cd=_i(yd),bd=m({},pA,{data:0}),Sc=_i(bd),xd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ed={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Td(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Ed[i])?!!r[i]:!1}function Zo(){return Td}var Qd=m({},Xr,{key:function(i){if(i.key){var r=xd[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=on(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Sd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zo,charCode:function(i){return i.type==="keypress"?on(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?on(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Fd=_i(Qd),Ud=m({},Ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ec=_i(Ud),Md=m({},Xr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zo}),Id=_i(Md),Nd=m({},pA,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ld=_i(Nd),Hd=m({},Ol,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),q1=_i(Hd),F=m({},pA,{newState:0,oldState:0}),L=_i(F),z=[9,13,27,32],$=Vt&&"CompositionEvent"in window,yt=null;Vt&&"documentMode"in document&&(yt=document.documentMode);var Dt=Vt&&"TextEvent"in window&&!yt,Jt=Vt&&(!$||yt&&8<yt&&11>=yt),de=" ",Be=!1;function Ne(i,r){switch(i){case"keyup":return z.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vi(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var rA=!1;function ps(i,r){switch(i){case"compositionend":return Vi(r);case"keypress":return r.which!==32?null:(Be=!0,de);case"textInput":return i=r.data,i===de&&Be?null:i;default:return null}}function gA(i,r){if(rA)return i==="compositionend"||!$&&Ne(i,r)?(i=Ar(),bi=$A=Oe=null,rA=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Jt&&r.locale!=="ko"?null:r.data;default:return null}}var En={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xe(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!En[i.type]:r==="textarea"}function Pi(i,r,o,u){Us?Js?Js.push(u):Js=[u]:Us=u,r=gh(r,"onChange"),0<r.length&&(o=new jl("onChange","change",null,o,u),i.push({event:o,listeners:r}))}var Ji=null,xi=null;function Vs(i){U_(i,0)}function me(i){var r=rn(i);if(Dl(r))return i}function qr(i,r){if(i==="change")return r}var Rl=!1;if(Vt){var Zr;if(Vt){var Tc="oninput"in document;if(!Tc){var lA=document.createElement("div");lA.setAttribute("oninput","return;"),Tc=typeof lA.oninput=="function"}Zr=Tc}else Zr=!1;Rl=Zr&&(!document.documentMode||9<document.documentMode)}function Z1(){Ji&&(Ji.detachEvent("onpropertychange",tm),xi=Ji=null)}function tm(i){if(i.propertyName==="value"&&me(xi)){var r=[];Pi(r,xi,i,Ns(i)),Ci(Vs,r)}}function jb(i,r,o){i==="focusin"?(Z1(),Ji=r,xi=o,Ji.attachEvent("onpropertychange",tm)):i==="focusout"&&Z1()}function Ob(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return me(xi)}function Rb(i,r){if(i==="click")return me(r)}function zb(i,r){if(i==="input"||i==="change")return me(r)}function Vb(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var mA=typeof Object.is=="function"?Object.is:Vb;function ta(i,r){if(mA(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var o=Object.keys(i),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var g=o[u];if(!Ft.call(r,g)||!mA(i[g],r[g]))return!1}return!0}function em(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function sm(i,r){var o=em(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=r&&u>=r)return{node:o,offset:r-i};i=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=em(o)}}function im(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?im(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Am(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=ir(i.document);r instanceof i.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)i=r.contentWindow;else break;r=ir(i.document)}return r}function Dd(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var Pb=Vt&&"documentMode"in document&&11>=document.documentMode,zl=null,kd=null,ea=null,jd=!1;function nm(i,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;jd||zl==null||zl!==ir(u)||(u=zl,"selectionStart"in u&&Dd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),ea&&ta(ea,u)||(ea=u,u=gh(kd,"onSelect"),0<u.length&&(r=new jl("onSelect","select",null,r,o),i.push({event:r,listeners:u}),r.target=zl)))}function tl(i,r){var o={};return o[i.toLowerCase()]=r.toLowerCase(),o["Webkit"+i]="webkit"+r,o["Moz"+i]="moz"+r,o}var Vl={animationend:tl("Animation","AnimationEnd"),animationiteration:tl("Animation","AnimationIteration"),animationstart:tl("Animation","AnimationStart"),transitionrun:tl("Transition","TransitionRun"),transitionstart:tl("Transition","TransitionStart"),transitioncancel:tl("Transition","TransitionCancel"),transitionend:tl("Transition","TransitionEnd")},Od={},rm={};Vt&&(rm=document.createElement("div").style,"AnimationEvent"in window||(delete Vl.animationend.animation,delete Vl.animationiteration.animation,delete Vl.animationstart.animation),"TransitionEvent"in window||delete Vl.transitionend.transition);function el(i){if(Od[i])return Od[i];if(!Vl[i])return i;var r=Vl[i],o;for(o in r)if(r.hasOwnProperty(o)&&o in rm)return Od[i]=r[o];return i}var lm=el("animationend"),om=el("animationiteration"),am=el("animationstart"),Kb=el("transitionrun"),Gb=el("transitionstart"),Wb=el("transitioncancel"),cm=el("transitionend"),hm=new Map,Rd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rd.push("scrollEnd");function XA(i,r){hm.set(i,r),KA(r,[i])}var Qc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},QA=[],Pl=0,zd=0;function Fc(){for(var i=Pl,r=zd=Pl=0;r<i;){var o=QA[r];QA[r++]=null;var u=QA[r];QA[r++]=null;var g=QA[r];QA[r++]=null;var _=QA[r];if(QA[r++]=null,u!==null&&g!==null){var C=u.pending;C===null?g.next=g:(g.next=C.next,C.next=g),u.pending=g}_!==0&&um(o,g,_)}}function Uc(i,r,o,u){QA[Pl++]=i,QA[Pl++]=r,QA[Pl++]=o,QA[Pl++]=u,zd|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Vd(i,r,o,u){return Uc(i,r,o,u),Mc(i)}function sl(i,r){return Uc(i,null,null,r),Mc(i)}function um(i,r,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var g=!1,_=i.return;_!==null;)_.childLanes|=o,u=_.alternate,u!==null&&(u.childLanes|=o),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(g=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,g&&r!==null&&(g=31-hs(o),i=_.hiddenUpdates,u=i[g],u===null?i[g]=[r]:u.push(r),r.lane=o|536870912),_):null}function Mc(i){if(50<Ca)throw Ca=0,Zf=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Kl={};function $b(i,r,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _A(i,r,o,u){return new $b(i,r,o,u)}function Pd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Tn(i,r){var o=i.alternate;return o===null?(o=_A(i.tag,r,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=r,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,r=i.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function dm(i,r){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,r=o.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Ic(i,r,o,u,g,_){var C=0;if(u=i,typeof i=="function")Pd(i)&&(C=1);else if(typeof i=="string")C=Zx(i,o,rt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case lt:return i=_A(31,o,r,g),i.elementType=lt,i.lanes=_,i;case b:return il(o.children,g,_,r);case S:C=8,g|=24;break;case x:return i=_A(12,o,r,g|2),i.elementType=x,i.lanes=_,i;case I:return i=_A(13,o,r,g),i.elementType=I,i.lanes=_,i;case R:return i=_A(19,o,r,g),i.elementType=R,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case M:C=10;break t;case U:C=9;break t;case N:C=11;break t;case D:C=14;break t;case V:C=16,u=null;break t}C=29,o=Error(s(130,i===null?"null":typeof i,"")),u=null}return r=_A(C,o,r,g),r.elementType=i,r.type=u,r.lanes=_,r}function il(i,r,o,u){return i=_A(7,i,u,r),i.lanes=o,i}function Kd(i,r,o){return i=_A(6,i,null,r),i.lanes=o,i}function fm(i){var r=_A(18,null,null,0);return r.stateNode=i,r}function Gd(i,r,o){return r=_A(4,i.children!==null?i.children:[],i.key,r),r.lanes=o,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var pm=new WeakMap;function FA(i,r){if(typeof i=="object"&&i!==null){var o=pm.get(i);return o!==void 0?o:(r={value:i,source:r,stack:le(r)},pm.set(i,r),r)}return{value:i,source:r,stack:le(r)}}var Gl=[],Wl=0,Nc=null,sa=0,UA=[],MA=0,nr=null,cn=1,hn="";function Qn(i,r){Gl[Wl++]=sa,Gl[Wl++]=Nc,Nc=i,sa=r}function gm(i,r,o){UA[MA++]=cn,UA[MA++]=hn,UA[MA++]=nr,nr=i;var u=cn;i=hn;var g=32-hs(u)-1;u&=~(1<<g),o+=1;var _=32-hs(r)+g;if(30<_){var C=g-g%5;_=(u&(1<<C)-1).toString(32),u>>=C,g-=C,cn=1<<32-hs(r)+g|o<<g|u,hn=_+i}else cn=1<<_|o<<g|u,hn=i}function Wd(i){i.return!==null&&(Qn(i,1),gm(i,1,0))}function $d(i){for(;i===Nc;)Nc=Gl[--Wl],Gl[Wl]=null,sa=Gl[--Wl],Gl[Wl]=null;for(;i===nr;)nr=UA[--MA],UA[MA]=null,hn=UA[--MA],UA[MA]=null,cn=UA[--MA],UA[MA]=null}function mm(i,r){UA[MA++]=cn,UA[MA++]=hn,UA[MA++]=nr,cn=r.id,hn=r.overflow,nr=i}var Si=null,Ms=null,Ye=!1,rr=null,IA=!1,Xd=Error(s(519));function lr(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ia(FA(r,i)),Xd}function _m(i){var r=i.stateNode,o=i.type,u=i.memoizedProps;switch(r[ue]=i,r[Ai]=u,o){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(o=0;o<xa.length;o++)ze(xa[o],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":ze("invalid",r),k(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ze("invalid",r);break;case"textarea":ze("invalid",r),St(r,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||L_(r.textContent,o)?(u.popover!=null&&(ze("beforetoggle",r),ze("toggle",r)),u.onScroll!=null&&ze("scroll",r),u.onScrollEnd!=null&&ze("scrollend",r),u.onClick!=null&&(r.onclick=ge),r=!0):r=!1,r||lr(i,!0)}function vm(i){for(Si=i.return;Si;)switch(Si.tag){case 5:case 31:case 13:IA=!1;return;case 27:case 3:IA=!0;return;default:Si=Si.return}}function $l(i){if(i!==Si)return!1;if(!Ye)return vm(i),Ye=!0,!1;var r=i.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||fp(i.type,i.memoizedProps)),o=!o),o&&Ms&&lr(i),vm(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Ms=P_(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Ms=P_(i)}else r===27?(r=Ms,wr(i.type)?(i=vp,vp=null,Ms=i):Ms=r):Ms=Si?LA(i.stateNode.nextSibling):null;return!0}function Al(){Ms=Si=null,Ye=!1}function Yd(){var i=rr;return i!==null&&(hA===null?hA=i:hA.push.apply(hA,i),rr=null),i}function ia(i){rr===null?rr=[i]:rr.push(i)}var Jd=Q(null),nl=null,Fn=null;function or(i,r,o){Z(Jd,r._currentValue),r._currentValue=o}function Un(i){i._currentValue=Jd.current,j(Jd)}function qd(i,r,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),i===o)break;i=i.return}}function Zd(i,r,o,u){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var _=g.dependencies;if(_!==null){var C=g.child;_=_.firstContext;t:for(;_!==null;){var T=_;_=g;for(var O=0;O<r.length;O++)if(T.context===r[O]){_.lanes|=o,T=_.alternate,T!==null&&(T.lanes|=o),qd(_.return,o,i),u||(C=null);break t}_=T.next}}else if(g.tag===18){if(C=g.return,C===null)throw Error(s(341));C.lanes|=o,_=C.alternate,_!==null&&(_.lanes|=o),qd(C,o,i),C=null}else C=g.child;if(C!==null)C.return=g;else for(C=g;C!==null;){if(C===i){C=null;break}if(g=C.sibling,g!==null){g.return=C.return,C=g;break}C=C.return}g=C}}function Xl(i,r,o,u){i=null;for(var g=r,_=!1;g!==null;){if(!_){if((g.flags&524288)!==0)_=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var C=g.alternate;if(C===null)throw Error(s(387));if(C=C.memoizedProps,C!==null){var T=g.type;mA(g.pendingProps.value,C.value)||(i!==null?i.push(T):i=[T])}}else if(g===Qt.current){if(C=g.alternate,C===null)throw Error(s(387));C.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Fa):i=[Fa])}g=g.return}i!==null&&Zd(r,i,o,u),r.flags|=262144}function Lc(i){for(i=i.firstContext;i!==null;){if(!mA(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function rl(i){nl=i,Fn=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Ei(i){return Bm(nl,i)}function Hc(i,r){return nl===null&&rl(i),Bm(i,r)}function Bm(i,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},Fn===null){if(i===null)throw Error(s(308));Fn=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Fn=Fn.next=r;return o}var Xb=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){r.aborted=!0,i.forEach(function(o){return o()})}},Yb=A.unstable_scheduleCallback,Jb=A.unstable_NormalPriority,li={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tf(){return{controller:new Xb,data:new Map,refCount:0}}function Aa(i){i.refCount--,i.refCount===0&&Yb(Jb,function(){i.controller.abort()})}var na=null,ef=0,Yl=0,Jl=null;function qb(i,r){if(na===null){var o=na=[];ef=0,Yl=np(),Jl={status:"pending",value:void 0,then:function(u){o.push(u)}}}return ef++,r.then(wm,wm),r}function wm(){if(--ef===0&&na!==null){Jl!==null&&(Jl.status="fulfilled");var i=na;na=null,Yl=0,Jl=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function Zb(i,r){var o=[],u={status:"pending",value:null,reason:null,then:function(g){o.push(g)}};return i.then(function(){u.status="fulfilled",u.value=r;for(var g=0;g<o.length;g++)(0,o[g])(r)},function(g){for(u.status="rejected",u.reason=g,g=0;g<o.length;g++)(0,o[g])(void 0)}),u}var ym=W.S;W.S=function(i,r){n_=Fe(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&qb(i,r),ym!==null&&ym(i,r)};var ll=Q(null);function sf(){var i=ll.current;return i!==null?i:Cs.pooledCache}function Dc(i,r){r===null?Z(ll,ll.current):Z(ll,r.pool)}function Cm(){var i=sf();return i===null?null:{parent:li._currentValue,pool:i}}var ql=Error(s(460)),Af=Error(s(474)),kc=Error(s(542)),jc={then:function(){}};function bm(i){return i=i.status,i==="fulfilled"||i==="rejected"}function xm(i,r,o){switch(o=i[o],o===void 0?i.push(r):o!==r&&(r.then(ge,ge),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Em(i),i;default:if(typeof r.status=="string")r.then(ge,ge);else{if(i=Cs,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(u){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=u}},function(u){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Em(i),i}throw al=r,ql}}function ol(i){try{var r=i._init;return r(i._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(al=o,ql):o}}var al=null;function Sm(){if(al===null)throw Error(s(459));var i=al;return al=null,i}function Em(i){if(i===ql||i===kc)throw Error(s(483))}var Zl=null,ra=0;function Oc(i){var r=ra;return ra+=1,Zl===null&&(Zl=[]),xm(Zl,i,r)}function la(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Rc(i,r){throw r.$$typeof===v?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Tm(i){function r(q,G){if(i){var et=q.deletions;et===null?(q.deletions=[G],q.flags|=16):et.push(G)}}function o(q,G){if(!i)return null;for(;G!==null;)r(q,G),G=G.sibling;return null}function u(q){for(var G=new Map;q!==null;)q.key!==null?G.set(q.key,q):G.set(q.index,q),q=q.sibling;return G}function g(q,G){return q=Tn(q,G),q.index=0,q.sibling=null,q}function _(q,G,et){return q.index=et,i?(et=q.alternate,et!==null?(et=et.index,et<G?(q.flags|=67108866,G):et):(q.flags|=67108866,G)):(q.flags|=1048576,G)}function C(q){return i&&q.alternate===null&&(q.flags|=67108866),q}function T(q,G,et,_t){return G===null||G.tag!==6?(G=Kd(et,q.mode,_t),G.return=q,G):(G=g(G,et),G.return=q,G)}function O(q,G,et,_t){var ae=et.type;return ae===b?gt(q,G,et.props.children,_t,et.key):G!==null&&(G.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===V&&ol(ae)===G.type)?(G=g(G,et.props),la(G,et),G.return=q,G):(G=Ic(et.type,et.key,et.props,null,q.mode,_t),la(G,et),G.return=q,G)}function st(q,G,et,_t){return G===null||G.tag!==4||G.stateNode.containerInfo!==et.containerInfo||G.stateNode.implementation!==et.implementation?(G=Gd(et,q.mode,_t),G.return=q,G):(G=g(G,et.children||[]),G.return=q,G)}function gt(q,G,et,_t,ae){return G===null||G.tag!==7?(G=il(et,q.mode,_t,ae),G.return=q,G):(G=g(G,et),G.return=q,G)}function Ct(q,G,et){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Kd(""+G,q.mode,et),G.return=q,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return et=Ic(G.type,G.key,G.props,null,q.mode,et),la(et,G),et.return=q,et;case y:return G=Gd(G,q.mode,et),G.return=q,G;case V:return G=ol(G),Ct(q,G,et)}if(Ut(G)||ft(G))return G=il(G,q.mode,et,null),G.return=q,G;if(typeof G.then=="function")return Ct(q,Oc(G),et);if(G.$$typeof===M)return Ct(q,Hc(q,G),et);Rc(q,G)}return null}function nt(q,G,et,_t){var ae=G!==null?G.key:null;if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return ae!==null?null:T(q,G,""+et,_t);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case w:return et.key===ae?O(q,G,et,_t):null;case y:return et.key===ae?st(q,G,et,_t):null;case V:return et=ol(et),nt(q,G,et,_t)}if(Ut(et)||ft(et))return ae!==null?null:gt(q,G,et,_t,null);if(typeof et.then=="function")return nt(q,G,Oc(et),_t);if(et.$$typeof===M)return nt(q,G,Hc(q,et),_t);Rc(q,et)}return null}function ct(q,G,et,_t,ae){if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return q=q.get(et)||null,T(G,q,""+_t,ae);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case w:return q=q.get(_t.key===null?et:_t.key)||null,O(G,q,_t,ae);case y:return q=q.get(_t.key===null?et:_t.key)||null,st(G,q,_t,ae);case V:return _t=ol(_t),ct(q,G,et,_t,ae)}if(Ut(_t)||ft(_t))return q=q.get(et)||null,gt(G,q,_t,ae,null);if(typeof _t.then=="function")return ct(q,G,et,Oc(_t),ae);if(_t.$$typeof===M)return ct(q,G,et,Hc(G,_t),ae);Rc(G,_t)}return null}function Yt(q,G,et,_t){for(var ae=null,As=null,ie=G,Te=G=0,Ge=null;ie!==null&&Te<et.length;Te++){ie.index>Te?(Ge=ie,ie=null):Ge=ie.sibling;var ns=nt(q,ie,et[Te],_t);if(ns===null){ie===null&&(ie=Ge);break}i&&ie&&ns.alternate===null&&r(q,ie),G=_(ns,G,Te),As===null?ae=ns:As.sibling=ns,As=ns,ie=Ge}if(Te===et.length)return o(q,ie),Ye&&Qn(q,Te),ae;if(ie===null){for(;Te<et.length;Te++)ie=Ct(q,et[Te],_t),ie!==null&&(G=_(ie,G,Te),As===null?ae=ie:As.sibling=ie,As=ie);return Ye&&Qn(q,Te),ae}for(ie=u(ie);Te<et.length;Te++)Ge=ct(ie,q,Te,et[Te],_t),Ge!==null&&(i&&Ge.alternate!==null&&ie.delete(Ge.key===null?Te:Ge.key),G=_(Ge,G,Te),As===null?ae=Ge:As.sibling=Ge,As=Ge);return i&&ie.forEach(function(Sr){return r(q,Sr)}),Ye&&Qn(q,Te),ae}function fe(q,G,et,_t){if(et==null)throw Error(s(151));for(var ae=null,As=null,ie=G,Te=G=0,Ge=null,ns=et.next();ie!==null&&!ns.done;Te++,ns=et.next()){ie.index>Te?(Ge=ie,ie=null):Ge=ie.sibling;var Sr=nt(q,ie,ns.value,_t);if(Sr===null){ie===null&&(ie=Ge);break}i&&ie&&Sr.alternate===null&&r(q,ie),G=_(Sr,G,Te),As===null?ae=Sr:As.sibling=Sr,As=Sr,ie=Ge}if(ns.done)return o(q,ie),Ye&&Qn(q,Te),ae;if(ie===null){for(;!ns.done;Te++,ns=et.next())ns=Ct(q,ns.value,_t),ns!==null&&(G=_(ns,G,Te),As===null?ae=ns:As.sibling=ns,As=ns);return Ye&&Qn(q,Te),ae}for(ie=u(ie);!ns.done;Te++,ns=et.next())ns=ct(ie,q,Te,ns.value,_t),ns!==null&&(i&&ns.alternate!==null&&ie.delete(ns.key===null?Te:ns.key),G=_(ns,G,Te),As===null?ae=ns:As.sibling=ns,As=ns);return i&&ie.forEach(function(c5){return r(q,c5)}),Ye&&Qn(q,Te),ae}function Bs(q,G,et,_t){if(typeof et=="object"&&et!==null&&et.type===b&&et.key===null&&(et=et.props.children),typeof et=="object"&&et!==null){switch(et.$$typeof){case w:t:{for(var ae=et.key;G!==null;){if(G.key===ae){if(ae=et.type,ae===b){if(G.tag===7){o(q,G.sibling),_t=g(G,et.props.children),_t.return=q,q=_t;break t}}else if(G.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===V&&ol(ae)===G.type){o(q,G.sibling),_t=g(G,et.props),la(_t,et),_t.return=q,q=_t;break t}o(q,G);break}else r(q,G);G=G.sibling}et.type===b?(_t=il(et.props.children,q.mode,_t,et.key),_t.return=q,q=_t):(_t=Ic(et.type,et.key,et.props,null,q.mode,_t),la(_t,et),_t.return=q,q=_t)}return C(q);case y:t:{for(ae=et.key;G!==null;){if(G.key===ae)if(G.tag===4&&G.stateNode.containerInfo===et.containerInfo&&G.stateNode.implementation===et.implementation){o(q,G.sibling),_t=g(G,et.children||[]),_t.return=q,q=_t;break t}else{o(q,G);break}else r(q,G);G=G.sibling}_t=Gd(et,q.mode,_t),_t.return=q,q=_t}return C(q);case V:return et=ol(et),Bs(q,G,et,_t)}if(Ut(et))return Yt(q,G,et,_t);if(ft(et)){if(ae=ft(et),typeof ae!="function")throw Error(s(150));return et=ae.call(et),fe(q,G,et,_t)}if(typeof et.then=="function")return Bs(q,G,Oc(et),_t);if(et.$$typeof===M)return Bs(q,G,Hc(q,et),_t);Rc(q,et)}return typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint"?(et=""+et,G!==null&&G.tag===6?(o(q,G.sibling),_t=g(G,et),_t.return=q,q=_t):(o(q,G),_t=Kd(et,q.mode,_t),_t.return=q,q=_t),C(q)):o(q,G)}return function(q,G,et,_t){try{ra=0;var ae=Bs(q,G,et,_t);return Zl=null,ae}catch(ie){if(ie===ql||ie===kc)throw ie;var As=_A(29,ie,null,q.mode);return As.lanes=_t,As.return=q,As}}}var cl=Tm(!0),Qm=Tm(!1),ar=!1;function nf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rf(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function cr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function hr(i,r,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(as&2)!==0){var g=u.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),u.pending=r,r=Mc(i),um(i,null,o),r}return Uc(i,u,r,o),Mc(i)}function oa(i,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=i.pendingLanes,o|=u,r.lanes=o,EA(i,o)}}function lf(i,r){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var g=null,_=null;if(o=o.firstBaseUpdate,o!==null){do{var C={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};_===null?g=_=C:_=_.next=C,o=o.next}while(o!==null);_===null?g=_=r:_=_.next=r}else g=_=r;o={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=r:i.next=r,o.lastBaseUpdate=r}var of=!1;function aa(){if(of){var i=Jl;if(i!==null)throw i}}function ca(i,r,o,u){of=!1;var g=i.updateQueue;ar=!1;var _=g.firstBaseUpdate,C=g.lastBaseUpdate,T=g.shared.pending;if(T!==null){g.shared.pending=null;var O=T,st=O.next;O.next=null,C===null?_=st:C.next=st,C=O;var gt=i.alternate;gt!==null&&(gt=gt.updateQueue,T=gt.lastBaseUpdate,T!==C&&(T===null?gt.firstBaseUpdate=st:T.next=st,gt.lastBaseUpdate=O))}if(_!==null){var Ct=g.baseState;C=0,gt=st=O=null,T=_;do{var nt=T.lane&-536870913,ct=nt!==T.lane;if(ct?(Ke&nt)===nt:(u&nt)===nt){nt!==0&&nt===Yl&&(of=!0),gt!==null&&(gt=gt.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var Yt=i,fe=T;nt=r;var Bs=o;switch(fe.tag){case 1:if(Yt=fe.payload,typeof Yt=="function"){Ct=Yt.call(Bs,Ct,nt);break t}Ct=Yt;break t;case 3:Yt.flags=Yt.flags&-65537|128;case 0:if(Yt=fe.payload,nt=typeof Yt=="function"?Yt.call(Bs,Ct,nt):Yt,nt==null)break t;Ct=m({},Ct,nt);break t;case 2:ar=!0}}nt=T.callback,nt!==null&&(i.flags|=64,ct&&(i.flags|=8192),ct=g.callbacks,ct===null?g.callbacks=[nt]:ct.push(nt))}else ct={lane:nt,tag:T.tag,payload:T.payload,callback:T.callback,next:null},gt===null?(st=gt=ct,O=Ct):gt=gt.next=ct,C|=nt;if(T=T.next,T===null){if(T=g.shared.pending,T===null)break;ct=T,T=ct.next,ct.next=null,g.lastBaseUpdate=ct,g.shared.pending=null}}while(!0);gt===null&&(O=Ct),g.baseState=O,g.firstBaseUpdate=st,g.lastBaseUpdate=gt,_===null&&(g.shared.lanes=0),gr|=C,i.lanes=C,i.memoizedState=Ct}}function Fm(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function Um(i,r){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)Fm(o[i],r)}var to=Q(null),zc=Q(0);function Mm(i,r){i=On,Z(zc,i),Z(to,r),On=i|r.baseLanes}function af(){Z(zc,On),Z(to,to.current)}function cf(){On=zc.current,j(to),j(zc)}var vA=Q(null),NA=null;function ur(i){var r=i.alternate;Z(Zs,Zs.current&1),Z(vA,i),NA===null&&(r===null||to.current!==null||r.memoizedState!==null)&&(NA=i)}function hf(i){Z(Zs,Zs.current),Z(vA,i),NA===null&&(NA=i)}function Im(i){i.tag===22?(Z(Zs,Zs.current),Z(vA,i),NA===null&&(NA=i)):dr()}function dr(){Z(Zs,Zs.current),Z(vA,vA.current)}function BA(i){j(vA),NA===i&&(NA=null),j(Zs)}var Zs=Q(0);function Vc(i){for(var r=i;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||mp(o)||_p(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Mn=0,xe=null,_s=null,oi=null,Pc=!1,eo=!1,hl=!1,Kc=0,ha=0,so=null,tx=0;function Gs(){throw Error(s(321))}function uf(i,r){if(r===null)return!1;for(var o=0;o<r.length&&o<i.length;o++)if(!mA(i[o],r[o]))return!1;return!0}function df(i,r,o,u,g,_){return Mn=_,xe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,W.H=i===null||i.memoizedState===null?g0:Tf,hl=!1,_=o(u,g),hl=!1,eo&&(_=Lm(r,o,u,g)),Nm(i),_}function Nm(i){W.H=fa;var r=_s!==null&&_s.next!==null;if(Mn=0,oi=_s=xe=null,Pc=!1,ha=0,so=null,r)throw Error(s(300));i===null||ai||(i=i.dependencies,i!==null&&Lc(i)&&(ai=!0))}function Lm(i,r,o,u){xe=i;var g=0;do{if(eo&&(so=null),ha=0,eo=!1,25<=g)throw Error(s(301));if(g+=1,oi=_s=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}W.H=m0,_=r(o,u)}while(eo);return _}function ex(){var i=W.H,r=i.useState()[0];return r=typeof r.then=="function"?ua(r):r,i=i.useState()[0],(_s!==null?_s.memoizedState:null)!==i&&(xe.flags|=1024),r}function ff(){var i=Kc!==0;return Kc=0,i}function pf(i,r,o){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~o}function gf(i){if(Pc){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Pc=!1}Mn=0,oi=_s=xe=null,eo=!1,ha=Kc=0,so=null}function qi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oi===null?xe.memoizedState=oi=i:oi=oi.next=i,oi}function ti(){if(_s===null){var i=xe.alternate;i=i!==null?i.memoizedState:null}else i=_s.next;var r=oi===null?xe.memoizedState:oi.next;if(r!==null)oi=r,_s=i;else{if(i===null)throw xe.alternate===null?Error(s(467)):Error(s(310));_s=i,i={memoizedState:_s.memoizedState,baseState:_s.baseState,baseQueue:_s.baseQueue,queue:_s.queue,next:null},oi===null?xe.memoizedState=oi=i:oi=oi.next=i}return oi}function Gc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ua(i){var r=ha;return ha+=1,so===null&&(so=[]),i=xm(so,i,r),r=xe,(oi===null?r.memoizedState:oi.next)===null&&(r=r.alternate,W.H=r===null||r.memoizedState===null?g0:Tf),i}function Wc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ua(i);if(i.$$typeof===M)return Ei(i)}throw Error(s(438,String(i)))}function mf(i){var r=null,o=xe.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=xe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Gc(),xe.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(i),u=0;u<i;u++)o[u]=dt;return r.index++,o}function In(i,r){return typeof r=="function"?r(i):r}function $c(i){var r=ti();return _f(r,_s,i)}function _f(i,r,o){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var g=i.baseQueue,_=u.pending;if(_!==null){if(g!==null){var C=g.next;g.next=_.next,_.next=C}r.baseQueue=g=_,u.pending=null}if(_=i.baseState,g===null)i.memoizedState=_;else{r=g.next;var T=C=null,O=null,st=r,gt=!1;do{var Ct=st.lane&-536870913;if(Ct!==st.lane?(Ke&Ct)===Ct:(Mn&Ct)===Ct){var nt=st.revertLane;if(nt===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),Ct===Yl&&(gt=!0);else if((Mn&nt)===nt){st=st.next,nt===Yl&&(gt=!0);continue}else Ct={lane:0,revertLane:st.revertLane,gesture:null,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},O===null?(T=O=Ct,C=_):O=O.next=Ct,xe.lanes|=nt,gr|=nt;Ct=st.action,hl&&o(_,Ct),_=st.hasEagerState?st.eagerState:o(_,Ct)}else nt={lane:Ct,revertLane:st.revertLane,gesture:st.gesture,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},O===null?(T=O=nt,C=_):O=O.next=nt,xe.lanes|=Ct,gr|=Ct;st=st.next}while(st!==null&&st!==r);if(O===null?C=_:O.next=T,!mA(_,i.memoizedState)&&(ai=!0,gt&&(o=Jl,o!==null)))throw o;i.memoizedState=_,i.baseState=C,i.baseQueue=O,u.lastRenderedState=_}return g===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function vf(i){var r=ti(),o=r.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var u=o.dispatch,g=o.pending,_=r.memoizedState;if(g!==null){o.pending=null;var C=g=g.next;do _=i(_,C.action),C=C.next;while(C!==g);mA(_,r.memoizedState)||(ai=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),o.lastRenderedState=_}return[_,u]}function Hm(i,r,o){var u=xe,g=ti(),_=Ye;if(_){if(o===void 0)throw Error(s(407));o=o()}else o=r();var C=!mA((_s||g).memoizedState,o);if(C&&(g.memoizedState=o,ai=!0),g=g.queue,yf(jm.bind(null,u,g,i),[i]),g.getSnapshot!==r||C||oi!==null&&oi.memoizedState.tag&1){if(u.flags|=2048,io(9,{destroy:void 0},km.bind(null,u,g,o,r),null),Cs===null)throw Error(s(349));_||(Mn&127)!==0||Dm(u,r,o)}return o}function Dm(i,r,o){i.flags|=16384,i={getSnapshot:r,value:o},r=xe.updateQueue,r===null?(r=Gc(),xe.updateQueue=r,r.stores=[i]):(o=r.stores,o===null?r.stores=[i]:o.push(i))}function km(i,r,o,u){r.value=o,r.getSnapshot=u,Om(r)&&Rm(i)}function jm(i,r,o){return o(function(){Om(r)&&Rm(i)})}function Om(i){var r=i.getSnapshot;i=i.value;try{var o=r();return!mA(i,o)}catch{return!0}}function Rm(i){var r=sl(i,2);r!==null&&uA(r,i,2)}function Bf(i){var r=qi();if(typeof i=="function"){var o=i;if(i=o(),hl){Pt(!0);try{o()}finally{Pt(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:In,lastRenderedState:i},r}function zm(i,r,o,u){return i.baseState=o,_f(i,_s,typeof u=="function"?u:In)}function sx(i,r,o,u,g){if(Jc(i))throw Error(s(485));if(i=r.action,i!==null){var _={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){_.listeners.push(C)}};W.T!==null?o(!0):_.isTransition=!1,u(_),o=r.pending,o===null?(_.next=r.pending=_,Vm(r,_)):(_.next=o.next,r.pending=o.next=_)}}function Vm(i,r){var o=r.action,u=r.payload,g=i.state;if(r.isTransition){var _=W.T,C={};W.T=C;try{var T=o(g,u),O=W.S;O!==null&&O(C,T),Pm(i,r,T)}catch(st){wf(i,r,st)}finally{_!==null&&C.types!==null&&(_.types=C.types),W.T=_}}else try{_=o(g,u),Pm(i,r,_)}catch(st){wf(i,r,st)}}function Pm(i,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Km(i,r,u)},function(u){return wf(i,r,u)}):Km(i,r,o)}function Km(i,r,o){r.status="fulfilled",r.value=o,Gm(r),i.state=o,r=i.pending,r!==null&&(o=r.next,o===r?i.pending=null:(o=o.next,r.next=o,Vm(i,o)))}function wf(i,r,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,Gm(r),r=r.next;while(r!==u)}i.action=null}function Gm(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function Wm(i,r){return r}function $m(i,r){if(Ye){var o=Cs.formState;if(o!==null){t:{var u=xe;if(Ye){if(Ms){e:{for(var g=Ms,_=IA;g.nodeType!==8;){if(!_){g=null;break e}if(g=LA(g.nextSibling),g===null){g=null;break e}}_=g.data,g=_==="F!"||_==="F"?g:null}if(g){Ms=LA(g.nextSibling),u=g.data==="F!";break t}}lr(u)}u=!1}u&&(r=o[0])}}return o=qi(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wm,lastRenderedState:r},o.queue=u,o=d0.bind(null,xe,u),u.dispatch=o,u=Bf(!1),_=Ef.bind(null,xe,!1,u.queue),u=qi(),g={state:r,dispatch:null,action:i,pending:null},u.queue=g,o=sx.bind(null,xe,g,_,o),g.dispatch=o,u.memoizedState=i,[r,o,!1]}function Xm(i){var r=ti();return Ym(r,_s,i)}function Ym(i,r,o){if(r=_f(i,r,Wm)[0],i=$c(In)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=ua(r)}catch(C){throw C===ql?kc:C}else u=r;r=ti();var g=r.queue,_=g.dispatch;return o!==r.memoizedState&&(xe.flags|=2048,io(9,{destroy:void 0},ix.bind(null,g,o),null)),[u,_,i]}function ix(i,r){i.action=r}function Jm(i){var r=ti(),o=_s;if(o!==null)return Ym(r,o,i);ti(),r=r.memoizedState,o=ti();var u=o.queue.dispatch;return o.memoizedState=i,[r,u,!1]}function io(i,r,o,u){return i={tag:i,create:o,deps:u,inst:r,next:null},r=xe.updateQueue,r===null&&(r=Gc(),xe.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,r.lastEffect=i),i}function qm(){return ti().memoizedState}function Xc(i,r,o,u){var g=qi();xe.flags|=i,g.memoizedState=io(1|r,{destroy:void 0},o,u===void 0?null:u)}function Yc(i,r,o,u){var g=ti();u=u===void 0?null:u;var _=g.memoizedState.inst;_s!==null&&u!==null&&uf(u,_s.memoizedState.deps)?g.memoizedState=io(r,_,o,u):(xe.flags|=i,g.memoizedState=io(1|r,_,o,u))}function Zm(i,r){Xc(8390656,8,i,r)}function yf(i,r){Yc(2048,8,i,r)}function Ax(i){xe.flags|=4;var r=xe.updateQueue;if(r===null)r=Gc(),xe.updateQueue=r,r.events=[i];else{var o=r.events;o===null?r.events=[i]:o.push(i)}}function t0(i){var r=ti().memoizedState;return Ax({ref:r,nextImpl:i}),function(){if((as&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function e0(i,r){return Yc(4,2,i,r)}function s0(i,r){return Yc(4,4,i,r)}function i0(i,r){if(typeof r=="function"){i=i();var o=r(i);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function A0(i,r,o){o=o!=null?o.concat([i]):null,Yc(4,4,i0.bind(null,r,i),o)}function Cf(){}function n0(i,r){var o=ti();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&uf(r,u[1])?u[0]:(o.memoizedState=[i,r],i)}function r0(i,r){var o=ti();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&uf(r,u[1]))return u[0];if(u=i(),hl){Pt(!0);try{i()}finally{Pt(!1)}}return o.memoizedState=[u,r],u}function bf(i,r,o){return o===void 0||(Mn&1073741824)!==0&&(Ke&261930)===0?i.memoizedState=r:(i.memoizedState=o,i=l_(),xe.lanes|=i,gr|=i,o)}function l0(i,r,o,u){return mA(o,r)?o:to.current!==null?(i=bf(i,o,u),mA(i,r)||(ai=!0),i):(Mn&42)===0||(Mn&1073741824)!==0&&(Ke&261930)===0?(ai=!0,i.memoizedState=o):(i=l_(),xe.lanes|=i,gr|=i,r)}function o0(i,r,o,u,g){var _=E.p;E.p=_!==0&&8>_?_:8;var C=W.T,T={};W.T=T,Ef(i,!1,r,o);try{var O=g(),st=W.S;if(st!==null&&st(T,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var gt=Zb(O,u);da(i,r,gt,CA(i))}else da(i,r,u,CA(i))}catch(Ct){da(i,r,{then:function(){},status:"rejected",reason:Ct},CA())}finally{E.p=_,C!==null&&T.types!==null&&(C.types=T.types),W.T=C}}function nx(){}function xf(i,r,o,u){if(i.tag!==5)throw Error(s(476));var g=a0(i).queue;o0(i,g,r,K,o===null?nx:function(){return c0(i),o(u)})}function a0(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:In,lastRenderedState:K},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:In,lastRenderedState:o},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function c0(i){var r=a0(i);r.next===null&&(r=i.alternate.memoizedState),da(i,r.next.queue,{},CA())}function Sf(){return Ei(Fa)}function h0(){return ti().memoizedState}function u0(){return ti().memoizedState}function rx(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var o=CA();i=cr(o);var u=hr(r,i,o);u!==null&&(uA(u,r,o),oa(u,r,o)),r={cache:tf()},i.payload=r;return}r=r.return}}function lx(i,r,o){var u=CA();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Jc(i)?f0(r,o):(o=Vd(i,r,o,u),o!==null&&(uA(o,i,u),p0(o,r,u)))}function d0(i,r,o){var u=CA();da(i,r,o,u)}function da(i,r,o,u){var g={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Jc(i))f0(r,g);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var C=r.lastRenderedState,T=_(C,o);if(g.hasEagerState=!0,g.eagerState=T,mA(T,C))return Uc(i,r,g,0),Cs===null&&Fc(),!1}catch{}if(o=Vd(i,r,g,u),o!==null)return uA(o,i,u),p0(o,r,u),!0}return!1}function Ef(i,r,o,u){if(u={lane:2,revertLane:np(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Jc(i)){if(r)throw Error(s(479))}else r=Vd(i,o,u,2),r!==null&&uA(r,i,2)}function Jc(i){var r=i.alternate;return i===xe||r!==null&&r===xe}function f0(i,r){eo=Pc=!0;var o=i.pending;o===null?r.next=r:(r.next=o.next,o.next=r),i.pending=r}function p0(i,r,o){if((o&4194048)!==0){var u=r.lanes;u&=i.pendingLanes,o|=u,r.lanes=o,EA(i,o)}}var fa={readContext:Ei,use:Wc,useCallback:Gs,useContext:Gs,useEffect:Gs,useImperativeHandle:Gs,useLayoutEffect:Gs,useInsertionEffect:Gs,useMemo:Gs,useReducer:Gs,useRef:Gs,useState:Gs,useDebugValue:Gs,useDeferredValue:Gs,useTransition:Gs,useSyncExternalStore:Gs,useId:Gs,useHostTransitionStatus:Gs,useFormState:Gs,useActionState:Gs,useOptimistic:Gs,useMemoCache:Gs,useCacheRefresh:Gs};fa.useEffectEvent=Gs;var g0={readContext:Ei,use:Wc,useCallback:function(i,r){return qi().memoizedState=[i,r===void 0?null:r],i},useContext:Ei,useEffect:Zm,useImperativeHandle:function(i,r,o){o=o!=null?o.concat([i]):null,Xc(4194308,4,i0.bind(null,r,i),o)},useLayoutEffect:function(i,r){return Xc(4194308,4,i,r)},useInsertionEffect:function(i,r){Xc(4,2,i,r)},useMemo:function(i,r){var o=qi();r=r===void 0?null:r;var u=i();if(hl){Pt(!0);try{i()}finally{Pt(!1)}}return o.memoizedState=[u,r],u},useReducer:function(i,r,o){var u=qi();if(o!==void 0){var g=o(r);if(hl){Pt(!0);try{o(r)}finally{Pt(!1)}}}else g=r;return u.memoizedState=u.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},u.queue=i,i=i.dispatch=lx.bind(null,xe,i),[u.memoizedState,i]},useRef:function(i){var r=qi();return i={current:i},r.memoizedState=i},useState:function(i){i=Bf(i);var r=i.queue,o=d0.bind(null,xe,r);return r.dispatch=o,[i.memoizedState,o]},useDebugValue:Cf,useDeferredValue:function(i,r){var o=qi();return bf(o,i,r)},useTransition:function(){var i=Bf(!1);return i=o0.bind(null,xe,i.queue,!0,!1),qi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,o){var u=xe,g=qi();if(Ye){if(o===void 0)throw Error(s(407));o=o()}else{if(o=r(),Cs===null)throw Error(s(349));(Ke&127)!==0||Dm(u,r,o)}g.memoizedState=o;var _={value:o,getSnapshot:r};return g.queue=_,Zm(jm.bind(null,u,_,i),[i]),u.flags|=2048,io(9,{destroy:void 0},km.bind(null,u,_,o,r),null),o},useId:function(){var i=qi(),r=Cs.identifierPrefix;if(Ye){var o=hn,u=cn;o=(u&~(1<<32-hs(u)-1)).toString(32)+o,r="_"+r+"R_"+o,o=Kc++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=tx++,r="_"+r+"r_"+o.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:Sf,useFormState:$m,useActionState:$m,useOptimistic:function(i){var r=qi();r.memoizedState=r.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Ef.bind(null,xe,!0,o),o.dispatch=r,[i,r]},useMemoCache:mf,useCacheRefresh:function(){return qi().memoizedState=rx.bind(null,xe)},useEffectEvent:function(i){var r=qi(),o={impl:i};return r.memoizedState=o,function(){if((as&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},Tf={readContext:Ei,use:Wc,useCallback:n0,useContext:Ei,useEffect:yf,useImperativeHandle:A0,useInsertionEffect:e0,useLayoutEffect:s0,useMemo:r0,useReducer:$c,useRef:qm,useState:function(){return $c(In)},useDebugValue:Cf,useDeferredValue:function(i,r){var o=ti();return l0(o,_s.memoizedState,i,r)},useTransition:function(){var i=$c(In)[0],r=ti().memoizedState;return[typeof i=="boolean"?i:ua(i),r]},useSyncExternalStore:Hm,useId:h0,useHostTransitionStatus:Sf,useFormState:Xm,useActionState:Xm,useOptimistic:function(i,r){var o=ti();return zm(o,_s,i,r)},useMemoCache:mf,useCacheRefresh:u0};Tf.useEffectEvent=t0;var m0={readContext:Ei,use:Wc,useCallback:n0,useContext:Ei,useEffect:yf,useImperativeHandle:A0,useInsertionEffect:e0,useLayoutEffect:s0,useMemo:r0,useReducer:vf,useRef:qm,useState:function(){return vf(In)},useDebugValue:Cf,useDeferredValue:function(i,r){var o=ti();return _s===null?bf(o,i,r):l0(o,_s.memoizedState,i,r)},useTransition:function(){var i=vf(In)[0],r=ti().memoizedState;return[typeof i=="boolean"?i:ua(i),r]},useSyncExternalStore:Hm,useId:h0,useHostTransitionStatus:Sf,useFormState:Jm,useActionState:Jm,useOptimistic:function(i,r){var o=ti();return _s!==null?zm(o,_s,i,r):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:mf,useCacheRefresh:u0};m0.useEffectEvent=t0;function Qf(i,r,o,u){r=i.memoizedState,o=o(u,r),o=o==null?r:m({},r,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var Ff={enqueueSetState:function(i,r,o){i=i._reactInternals;var u=CA(),g=cr(u);g.payload=r,o!=null&&(g.callback=o),r=hr(i,g,u),r!==null&&(uA(r,i,u),oa(r,i,u))},enqueueReplaceState:function(i,r,o){i=i._reactInternals;var u=CA(),g=cr(u);g.tag=1,g.payload=r,o!=null&&(g.callback=o),r=hr(i,g,u),r!==null&&(uA(r,i,u),oa(r,i,u))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var o=CA(),u=cr(o);u.tag=2,r!=null&&(u.callback=r),r=hr(i,u,o),r!==null&&(uA(r,i,o),oa(r,i,o))}};function _0(i,r,o,u,g,_,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,_,C):r.prototype&&r.prototype.isPureReactComponent?!ta(o,u)||!ta(g,_):!0}function v0(i,r,o,u){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==i&&Ff.enqueueReplaceState(r,r.state,null)}function ul(i,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(i=i.defaultProps){o===r&&(o=m({},o));for(var g in i)o[g]===void 0&&(o[g]=i[g])}return o}function B0(i){Qc(i)}function w0(i){console.error(i)}function y0(i){Qc(i)}function qc(i,r){try{var o=i.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function C0(i,r,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Uf(i,r,o){return o=cr(o),o.tag=3,o.payload={element:null},o.callback=function(){qc(i,r)},o}function b0(i){return i=cr(i),i.tag=3,i}function x0(i,r,o,u){var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var _=u.value;i.payload=function(){return g(_)},i.callback=function(){C0(r,o,u)}}var C=o.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(i.callback=function(){C0(r,o,u),typeof g!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function ox(i,r,o,u,g){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&Xl(r,o,g,!0),o=vA.current,o!==null){switch(o.tag){case 31:case 13:return NA===null?ch():o.alternate===null&&Ws===0&&(Ws=3),o.flags&=-257,o.flags|=65536,o.lanes=g,u===jc?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),sp(i,u,g)),!1;case 22:return o.flags|=65536,u===jc?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),sp(i,u,g)),!1}throw Error(s(435,o.tag))}return sp(i,u,g),ch(),!1}if(Ye)return r=vA.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,u!==Xd&&(i=Error(s(422),{cause:u}),ia(FA(i,o)))):(u!==Xd&&(r=Error(s(423),{cause:u}),ia(FA(r,o))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,u=FA(u,o),g=Uf(i.stateNode,u,g),lf(i,g),Ws!==4&&(Ws=2)),!1;var _=Error(s(520),{cause:u});if(_=FA(_,o),ya===null?ya=[_]:ya.push(_),Ws!==4&&(Ws=2),r===null)return!0;u=FA(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,i=g&-g,o.lanes|=i,i=Uf(o.stateNode,u,i),lf(o,i),!1;case 1:if(r=o.type,_=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(mr===null||!mr.has(_))))return o.flags|=65536,g&=-g,o.lanes|=g,g=b0(g),x0(g,i,o,u),lf(o,g),!1}o=o.return}while(o!==null);return!1}var Mf=Error(s(461)),ai=!1;function Ti(i,r,o,u){r.child=i===null?Qm(r,null,o,u):cl(r,i.child,o,u)}function S0(i,r,o,u,g){o=o.render;var _=r.ref;if("ref"in u){var C={};for(var T in u)T!=="ref"&&(C[T]=u[T])}else C=u;return rl(r),u=df(i,r,o,C,_,g),T=ff(),i!==null&&!ai?(pf(i,r,g),Nn(i,r,g)):(Ye&&T&&Wd(r),r.flags|=1,Ti(i,r,u,g),r.child)}function E0(i,r,o,u,g){if(i===null){var _=o.type;return typeof _=="function"&&!Pd(_)&&_.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=_,T0(i,r,_,u,g)):(i=Ic(o.type,null,u,r,r.mode,g),i.ref=r.ref,i.return=r,r.child=i)}if(_=i.child,!Of(i,g)){var C=_.memoizedProps;if(o=o.compare,o=o!==null?o:ta,o(C,u)&&i.ref===r.ref)return Nn(i,r,g)}return r.flags|=1,i=Tn(_,u),i.ref=r.ref,i.return=r,r.child=i}function T0(i,r,o,u,g){if(i!==null){var _=i.memoizedProps;if(ta(_,u)&&i.ref===r.ref)if(ai=!1,r.pendingProps=u=_,Of(i,g))(i.flags&131072)!==0&&(ai=!0);else return r.lanes=i.lanes,Nn(i,r,g)}return If(i,r,o,u,g)}function Q0(i,r,o,u){var g=u.children,_=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|o:o,i!==null){for(u=r.child=i.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~_}else u=0,r.child=null;return F0(i,r,_,o,u)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Dc(r,_!==null?_.cachePool:null),_!==null?Mm(r,_):af(),Im(r);else return u=r.lanes=536870912,F0(i,r,_!==null?_.baseLanes|o:o,o,u)}else _!==null?(Dc(r,_.cachePool),Mm(r,_),dr(),r.memoizedState=null):(i!==null&&Dc(r,null),af(),dr());return Ti(i,r,g,o),r.child}function pa(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function F0(i,r,o,u,g){var _=sf();return _=_===null?null:{parent:li._currentValue,pool:_},r.memoizedState={baseLanes:o,cachePool:_},i!==null&&Dc(r,null),af(),Im(r),i!==null&&Xl(i,r,u,!0),r.childLanes=g,null}function Zc(i,r){return r=eh({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function U0(i,r,o){return cl(r,i.child,null,o),i=Zc(r,r.pendingProps),i.flags|=2,BA(r),r.memoizedState=null,i}function ax(i,r,o){var u=r.pendingProps,g=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Ye){if(u.mode==="hidden")return i=Zc(r,u),r.lanes=536870912,pa(null,i);if(hf(r),(i=Ms)?(i=V_(i,IA),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:nr!==null?{id:cn,overflow:hn}:null,retryLane:536870912,hydrationErrors:null},o=fm(i),o.return=r,r.child=o,Si=r,Ms=null)):i=null,i===null)throw lr(r);return r.lanes=536870912,null}return Zc(r,u)}var _=i.memoizedState;if(_!==null){var C=_.dehydrated;if(hf(r),g)if(r.flags&256)r.flags&=-257,r=U0(i,r,o);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(ai||Xl(i,r,o,!1),g=(o&i.childLanes)!==0,ai||g){if(u=Cs,u!==null&&(C=di(u,o),C!==0&&C!==_.retryLane))throw _.retryLane=C,sl(i,C),uA(u,i,C),Mf;ch(),r=U0(i,r,o)}else i=_.treeContext,Ms=LA(C.nextSibling),Si=r,Ye=!0,rr=null,IA=!1,i!==null&&mm(r,i),r=Zc(r,u),r.flags|=4096;return r}return i=Tn(i.child,{mode:u.mode,children:u.children}),i.ref=r.ref,r.child=i,i.return=r,i}function th(i,r){var o=r.ref;if(o===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(i===null||i.ref!==o)&&(r.flags|=4194816)}}function If(i,r,o,u,g){return rl(r),o=df(i,r,o,u,void 0,g),u=ff(),i!==null&&!ai?(pf(i,r,g),Nn(i,r,g)):(Ye&&u&&Wd(r),r.flags|=1,Ti(i,r,o,g),r.child)}function M0(i,r,o,u,g,_){return rl(r),r.updateQueue=null,o=Lm(r,u,o,g),Nm(i),u=ff(),i!==null&&!ai?(pf(i,r,_),Nn(i,r,_)):(Ye&&u&&Wd(r),r.flags|=1,Ti(i,r,o,_),r.child)}function I0(i,r,o,u,g){if(rl(r),r.stateNode===null){var _=Kl,C=o.contextType;typeof C=="object"&&C!==null&&(_=Ei(C)),_=new o(u,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Ff,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=u,_.state=r.memoizedState,_.refs={},nf(r),C=o.contextType,_.context=typeof C=="object"&&C!==null?Ei(C):Kl,_.state=r.memoizedState,C=o.getDerivedStateFromProps,typeof C=="function"&&(Qf(r,o,C,u),_.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(C=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),C!==_.state&&Ff.enqueueReplaceState(_,_.state,null),ca(r,u,_,g),aa(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(i===null){_=r.stateNode;var T=r.memoizedProps,O=ul(o,T);_.props=O;var st=_.context,gt=o.contextType;C=Kl,typeof gt=="object"&&gt!==null&&(C=Ei(gt));var Ct=o.getDerivedStateFromProps;gt=typeof Ct=="function"||typeof _.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,gt||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T||st!==C)&&v0(r,_,u,C),ar=!1;var nt=r.memoizedState;_.state=nt,ca(r,u,_,g),aa(),st=r.memoizedState,T||nt!==st||ar?(typeof Ct=="function"&&(Qf(r,o,Ct,u),st=r.memoizedState),(O=ar||_0(r,o,O,u,nt,st,C))?(gt||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=st),_.props=u,_.state=st,_.context=C,u=O):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,rf(i,r),C=r.memoizedProps,gt=ul(o,C),_.props=gt,Ct=r.pendingProps,nt=_.context,st=o.contextType,O=Kl,typeof st=="object"&&st!==null&&(O=Ei(st)),T=o.getDerivedStateFromProps,(st=typeof T=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==Ct||nt!==O)&&v0(r,_,u,O),ar=!1,nt=r.memoizedState,_.state=nt,ca(r,u,_,g),aa();var ct=r.memoizedState;C!==Ct||nt!==ct||ar||i!==null&&i.dependencies!==null&&Lc(i.dependencies)?(typeof T=="function"&&(Qf(r,o,T,u),ct=r.memoizedState),(gt=ar||_0(r,o,gt,u,nt,ct,O)||i!==null&&i.dependencies!==null&&Lc(i.dependencies))?(st||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,ct,O),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,ct,O)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||C===i.memoizedProps&&nt===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&nt===i.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=ct),_.props=u,_.state=ct,_.context=O,u=gt):(typeof _.componentDidUpdate!="function"||C===i.memoizedProps&&nt===i.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&nt===i.memoizedState||(r.flags|=1024),u=!1)}return _=u,th(i,r),u=(r.flags&128)!==0,_||u?(_=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,i!==null&&u?(r.child=cl(r,i.child,null,g),r.child=cl(r,null,o,g)):Ti(i,r,o,g),r.memoizedState=_.state,i=r.child):i=Nn(i,r,g),i}function N0(i,r,o,u){return Al(),r.flags|=256,Ti(i,r,o,u),r.child}var Nf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lf(i){return{baseLanes:i,cachePool:Cm()}}function Hf(i,r,o){return i=i!==null?i.childLanes&~o:0,r&&(i|=yA),i}function L0(i,r,o){var u=r.pendingProps,g=!1,_=(r.flags&128)!==0,C;if((C=_)||(C=i!==null&&i.memoizedState===null?!1:(Zs.current&2)!==0),C&&(g=!0,r.flags&=-129),C=(r.flags&32)!==0,r.flags&=-33,i===null){if(Ye){if(g?ur(r):dr(),(i=Ms)?(i=V_(i,IA),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:nr!==null?{id:cn,overflow:hn}:null,retryLane:536870912,hydrationErrors:null},o=fm(i),o.return=r,r.child=o,Si=r,Ms=null)):i=null,i===null)throw lr(r);return _p(i)?r.lanes=32:r.lanes=536870912,null}var T=u.children;return u=u.fallback,g?(dr(),g=r.mode,T=eh({mode:"hidden",children:T},g),u=il(u,g,o,null),T.return=r,u.return=r,T.sibling=u,r.child=T,u=r.child,u.memoizedState=Lf(o),u.childLanes=Hf(i,C,o),r.memoizedState=Nf,pa(null,u)):(ur(r),Df(r,T))}var O=i.memoizedState;if(O!==null&&(T=O.dehydrated,T!==null)){if(_)r.flags&256?(ur(r),r.flags&=-257,r=kf(i,r,o)):r.memoizedState!==null?(dr(),r.child=i.child,r.flags|=128,r=null):(dr(),T=u.fallback,g=r.mode,u=eh({mode:"visible",children:u.children},g),T=il(T,g,o,null),T.flags|=2,u.return=r,T.return=r,u.sibling=T,r.child=u,cl(r,i.child,null,o),u=r.child,u.memoizedState=Lf(o),u.childLanes=Hf(i,C,o),r.memoizedState=Nf,r=pa(null,u));else if(ur(r),_p(T)){if(C=T.nextSibling&&T.nextSibling.dataset,C)var st=C.dgst;C=st,u=Error(s(419)),u.stack="",u.digest=C,ia({value:u,source:null,stack:null}),r=kf(i,r,o)}else if(ai||Xl(i,r,o,!1),C=(o&i.childLanes)!==0,ai||C){if(C=Cs,C!==null&&(u=di(C,o),u!==0&&u!==O.retryLane))throw O.retryLane=u,sl(i,u),uA(C,i,u),Mf;mp(T)||ch(),r=kf(i,r,o)}else mp(T)?(r.flags|=192,r.child=i.child,r=null):(i=O.treeContext,Ms=LA(T.nextSibling),Si=r,Ye=!0,rr=null,IA=!1,i!==null&&mm(r,i),r=Df(r,u.children),r.flags|=4096);return r}return g?(dr(),T=u.fallback,g=r.mode,O=i.child,st=O.sibling,u=Tn(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,st!==null?T=Tn(st,T):(T=il(T,g,o,null),T.flags|=2),T.return=r,u.return=r,u.sibling=T,r.child=u,pa(null,u),u=r.child,T=i.child.memoizedState,T===null?T=Lf(o):(g=T.cachePool,g!==null?(O=li._currentValue,g=g.parent!==O?{parent:O,pool:O}:g):g=Cm(),T={baseLanes:T.baseLanes|o,cachePool:g}),u.memoizedState=T,u.childLanes=Hf(i,C,o),r.memoizedState=Nf,pa(i.child,u)):(ur(r),o=i.child,i=o.sibling,o=Tn(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,i!==null&&(C=r.deletions,C===null?(r.deletions=[i],r.flags|=16):C.push(i)),r.child=o,r.memoizedState=null,o)}function Df(i,r){return r=eh({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function eh(i,r){return i=_A(22,i,null,r),i.lanes=0,i}function kf(i,r,o){return cl(r,i.child,null,o),i=Df(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function H0(i,r,o){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r),qd(i.return,r,o)}function jf(i,r,o,u,g,_){var C=i.memoizedState;C===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:g,treeForkCount:_}:(C.isBackwards=r,C.rendering=null,C.renderingStartTime=0,C.last=u,C.tail=o,C.tailMode=g,C.treeForkCount=_)}function D0(i,r,o){var u=r.pendingProps,g=u.revealOrder,_=u.tail;u=u.children;var C=Zs.current,T=(C&2)!==0;if(T?(C=C&1|2,r.flags|=128):C&=1,Z(Zs,C),Ti(i,r,u,o),u=Ye?sa:0,!T&&i!==null&&(i.flags&128)!==0)t:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&H0(i,o,r);else if(i.tag===19)H0(i,o,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break t;for(;i.sibling===null;){if(i.return===null||i.return===r)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(o=r.child,g=null;o!==null;)i=o.alternate,i!==null&&Vc(i)===null&&(g=o),o=o.sibling;o=g,o===null?(g=r.child,r.child=null):(g=o.sibling,o.sibling=null),jf(r,!1,g,o,_,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,g=r.child,r.child=null;g!==null;){if(i=g.alternate,i!==null&&Vc(i)===null){r.child=g;break}i=g.sibling,g.sibling=o,o=g,g=i}jf(r,!0,o,null,_,u);break;case"together":jf(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function Nn(i,r,o){if(i!==null&&(r.dependencies=i.dependencies),gr|=r.lanes,(o&r.childLanes)===0)if(i!==null){if(Xl(i,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,o=Tn(i,i.pendingProps),r.child=o,o.return=r;i.sibling!==null;)i=i.sibling,o=o.sibling=Tn(i,i.pendingProps),o.return=r;o.sibling=null}return r.child}function Of(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Lc(i)))}function cx(i,r,o){switch(r.tag){case 3:se(r,r.stateNode.containerInfo),or(r,li,i.memoizedState.cache),Al();break;case 27:case 5:He(r);break;case 4:se(r,r.stateNode.containerInfo);break;case 10:or(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,hf(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(ur(r),r.flags|=128,null):(o&r.child.childLanes)!==0?L0(i,r,o):(ur(r),i=Nn(i,r,o),i!==null?i.sibling:null);ur(r);break;case 19:var g=(i.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(Xl(i,r,o,!1),u=(o&r.childLanes)!==0),g){if(u)return D0(i,r,o);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Z(Zs,Zs.current),u)break;return null;case 22:return r.lanes=0,Q0(i,r,o,r.pendingProps);case 24:or(r,li,i.memoizedState.cache)}return Nn(i,r,o)}function k0(i,r,o){if(i!==null)if(i.memoizedProps!==r.pendingProps)ai=!0;else{if(!Of(i,o)&&(r.flags&128)===0)return ai=!1,cx(i,r,o);ai=(i.flags&131072)!==0}else ai=!1,Ye&&(r.flags&1048576)!==0&&gm(r,sa,r.index);switch(r.lanes=0,r.tag){case 16:t:{var u=r.pendingProps;if(i=ol(r.elementType),r.type=i,typeof i=="function")Pd(i)?(u=ul(i,u),r.tag=1,r=I0(null,r,i,u,o)):(r.tag=0,r=If(null,r,i,u,o));else{if(i!=null){var g=i.$$typeof;if(g===N){r.tag=11,r=S0(null,r,i,u,o);break t}else if(g===D){r.tag=14,r=E0(null,r,i,u,o);break t}}throw r=at(i)||i,Error(s(306,r,""))}}return r;case 0:return If(i,r,r.type,r.pendingProps,o);case 1:return u=r.type,g=ul(u,r.pendingProps),I0(i,r,u,g,o);case 3:t:{if(se(r,r.stateNode.containerInfo),i===null)throw Error(s(387));u=r.pendingProps;var _=r.memoizedState;g=_.element,rf(i,r),ca(r,u,null,o);var C=r.memoizedState;if(u=C.cache,or(r,li,u),u!==_.cache&&Zd(r,[li],o,!0),aa(),u=C.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:C.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=N0(i,r,u,o);break t}else if(u!==g){g=FA(Error(s(424)),r),ia(g),r=N0(i,r,u,o);break t}else for(i=r.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,Ms=LA(i.firstChild),Si=r,Ye=!0,rr=null,IA=!0,o=Qm(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Al(),u===g){r=Nn(i,r,o);break t}Ti(i,r,u,o)}r=r.child}return r;case 26:return th(i,r),i===null?(o=X_(r.type,null,r.pendingProps,null))?r.memoizedState=o:Ye||(o=r.type,i=r.pendingProps,u=mh(xt.current).createElement(o),u[ue]=r,u[Ai]=i,Qi(u,o,i),Ks(u),r.stateNode=u):r.memoizedState=X_(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return He(r),i===null&&Ye&&(u=r.stateNode=G_(r.type,r.pendingProps,xt.current),Si=r,IA=!0,g=Ms,wr(r.type)?(vp=g,Ms=LA(u.firstChild)):Ms=g),Ti(i,r,r.pendingProps.children,o),th(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Ye&&((g=u=Ms)&&(u=Ox(u,r.type,r.pendingProps,IA),u!==null?(r.stateNode=u,Si=r,Ms=LA(u.firstChild),IA=!1,g=!0):g=!1),g||lr(r)),He(r),g=r.type,_=r.pendingProps,C=i!==null?i.memoizedProps:null,u=_.children,fp(g,_)?u=null:C!==null&&fp(g,C)&&(r.flags|=32),r.memoizedState!==null&&(g=df(i,r,ex,null,null,o),Fa._currentValue=g),th(i,r),Ti(i,r,u,o),r.child;case 6:return i===null&&Ye&&((i=o=Ms)&&(o=Rx(o,r.pendingProps,IA),o!==null?(r.stateNode=o,Si=r,Ms=null,i=!0):i=!1),i||lr(r)),null;case 13:return L0(i,r,o);case 4:return se(r,r.stateNode.containerInfo),u=r.pendingProps,i===null?r.child=cl(r,null,u,o):Ti(i,r,u,o),r.child;case 11:return S0(i,r,r.type,r.pendingProps,o);case 7:return Ti(i,r,r.pendingProps,o),r.child;case 8:return Ti(i,r,r.pendingProps.children,o),r.child;case 12:return Ti(i,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,or(r,r.type,u.value),Ti(i,r,u.children,o),r.child;case 9:return g=r.type._context,u=r.pendingProps.children,rl(r),g=Ei(g),u=u(g),r.flags|=1,Ti(i,r,u,o),r.child;case 14:return E0(i,r,r.type,r.pendingProps,o);case 15:return T0(i,r,r.type,r.pendingProps,o);case 19:return D0(i,r,o);case 31:return ax(i,r,o);case 22:return Q0(i,r,o,r.pendingProps);case 24:return rl(r),u=Ei(li),i===null?(g=sf(),g===null&&(g=Cs,_=tf(),g.pooledCache=_,_.refCount++,_!==null&&(g.pooledCacheLanes|=o),g=_),r.memoizedState={parent:u,cache:g},nf(r),or(r,li,g)):((i.lanes&o)!==0&&(rf(i,r),ca(r,null,null,o),aa()),g=i.memoizedState,_=r.memoizedState,g.parent!==u?(g={parent:u,cache:u},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),or(r,li,u)):(u=_.cache,or(r,li,u),u!==g.cache&&Zd(r,[li],o,!0))),Ti(i,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Ln(i){i.flags|=4}function Rf(i,r,o,u,g){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(h_())i.flags|=8192;else throw al=jc,Af}else i.flags&=-16777217}function j0(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!tv(r))if(h_())i.flags|=8192;else throw al=jc,Af}function sh(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Oi():536870912,i.lanes|=r,lo|=r)}function ga(i,r){if(!Ye)switch(i.tailMode){case"hidden":r=i.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function Is(i){var r=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(r)for(var g=i.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)o|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=u,i.childLanes=o,r}function hx(i,r,o){var u=r.pendingProps;switch($d(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Is(r),null;case 1:return Is(r),null;case 3:return o=r.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Un(li),oe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&($l(r)?Ln(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Yd())),Is(r),null;case 26:var g=r.type,_=r.memoizedState;return i===null?(Ln(r),_!==null?(Is(r),j0(r,_)):(Is(r),Rf(r,g,null,u,o))):_?_!==i.memoizedState?(Ln(r),Is(r),j0(r,_)):(Is(r),r.flags&=-16777217):(i=i.memoizedProps,i!==u&&Ln(r),Is(r),Rf(r,g,i,u,o)),null;case 27:if(Nt(r),o=xt.current,g=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Ln(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return Is(r),null}i=rt.current,$l(r)?_m(r):(i=G_(g,u,o),r.stateNode=i,Ln(r))}return Is(r),null;case 5:if(Nt(r),g=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Ln(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return Is(r),null}if(_=rt.current,$l(r))_m(r);else{var C=mh(xt.current);switch(_){case 1:_=C.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:_=C.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":_=C.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":_=C.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":_=C.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?C.createElement("select",{is:u.is}):C.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?C.createElement(g,{is:u.is}):C.createElement(g)}}_[ue]=r,_[Ai]=u;t:for(C=r.child;C!==null;){if(C.tag===5||C.tag===6)_.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===r)break t;for(;C.sibling===null;){if(C.return===null||C.return===r)break t;C=C.return}C.sibling.return=C.return,C=C.sibling}r.stateNode=_;t:switch(Qi(_,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&Ln(r)}}return Is(r),Rf(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,o),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==u&&Ln(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(i=xt.current,$l(r)){if(i=r.stateNode,o=r.memoizedProps,u=null,g=Si,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}i[ue]=r,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||L_(i.nodeValue,o)),i||lr(r,!0)}else i=mh(i).createTextNode(u),i[ue]=r,r.stateNode=i}return Is(r),null;case 31:if(o=r.memoizedState,i===null||i.memoizedState!==null){if(u=$l(r),o!==null){if(i===null){if(!u)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[ue]=r}else Al(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Is(r),i=!1}else o=Yd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=o),i=!0;if(!i)return r.flags&256?(BA(r),r):(BA(r),null);if((r.flags&128)!==0)throw Error(s(558))}return Is(r),null;case 13:if(u=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=$l(r),u!==null&&u.dehydrated!==null){if(i===null){if(!g)throw Error(s(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[ue]=r}else Al(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Is(r),g=!1}else g=Yd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(BA(r),r):(BA(r),null)}return BA(r),(r.flags&128)!==0?(r.lanes=o,r):(o=u!==null,i=i!==null&&i.memoizedState!==null,o&&(u=r.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==g&&(u.flags|=2048)),o!==i&&o&&(r.child.flags|=8192),sh(r,r.updateQueue),Is(r),null);case 4:return oe(),i===null&&ap(r.stateNode.containerInfo),Is(r),null;case 10:return Un(r.type),Is(r),null;case 19:if(j(Zs),u=r.memoizedState,u===null)return Is(r),null;if(g=(r.flags&128)!==0,_=u.rendering,_===null)if(g)ga(u,!1);else{if(Ws!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(_=Vc(i),_!==null){for(r.flags|=128,ga(u,!1),i=_.updateQueue,r.updateQueue=i,sh(r,i),r.subtreeFlags=0,i=o,o=r.child;o!==null;)dm(o,i),o=o.sibling;return Z(Zs,Zs.current&1|2),Ye&&Qn(r,u.treeForkCount),r.child}i=i.sibling}u.tail!==null&&Fe()>lh&&(r.flags|=128,g=!0,ga(u,!1),r.lanes=4194304)}else{if(!g)if(i=Vc(_),i!==null){if(r.flags|=128,g=!0,i=i.updateQueue,r.updateQueue=i,sh(r,i),ga(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!Ye)return Is(r),null}else 2*Fe()-u.renderingStartTime>lh&&o!==536870912&&(r.flags|=128,g=!0,ga(u,!1),r.lanes=4194304);u.isBackwards?(_.sibling=r.child,r.child=_):(i=u.last,i!==null?i.sibling=_:r.child=_,u.last=_)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=Fe(),i.sibling=null,o=Zs.current,Z(Zs,g?o&1|2:o&1),Ye&&Qn(r,u.treeForkCount),i):(Is(r),null);case 22:case 23:return BA(r),cf(),u=r.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(Is(r),r.subtreeFlags&6&&(r.flags|=8192)):Is(r),o=r.updateQueue,o!==null&&sh(r,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),i!==null&&j(ll),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Un(li),Is(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function ux(i,r){switch($d(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Un(li),oe(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Nt(r),null;case 31:if(r.memoizedState!==null){if(BA(r),r.alternate===null)throw Error(s(340));Al()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(BA(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Al()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return j(Zs),null;case 4:return oe(),null;case 10:return Un(r.type),null;case 22:case 23:return BA(r),cf(),i!==null&&j(ll),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Un(li),null;case 25:return null;default:return null}}function O0(i,r){switch($d(r),r.tag){case 3:Un(li),oe();break;case 26:case 27:case 5:Nt(r);break;case 4:oe();break;case 31:r.memoizedState!==null&&BA(r);break;case 13:BA(r);break;case 19:j(Zs);break;case 10:Un(r.type);break;case 22:case 23:BA(r),cf(),i!==null&&j(ll);break;case 24:Un(li)}}function ma(i,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var g=u.next;o=g;do{if((o.tag&i)===i){u=void 0;var _=o.create,C=o.inst;u=_(),C.destroy=u}o=o.next}while(o!==g)}}catch(T){ms(r,r.return,T)}}function fr(i,r,o){try{var u=r.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var _=g.next;u=_;do{if((u.tag&i)===i){var C=u.inst,T=C.destroy;if(T!==void 0){C.destroy=void 0,g=r;var O=o,st=T;try{st()}catch(gt){ms(g,O,gt)}}}u=u.next}while(u!==_)}}catch(gt){ms(r,r.return,gt)}}function R0(i){var r=i.updateQueue;if(r!==null){var o=i.stateNode;try{Um(r,o)}catch(u){ms(i,i.return,u)}}}function z0(i,r,o){o.props=ul(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){ms(i,r,u)}}function _a(i,r){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(g){ms(i,r,g)}}function un(i,r){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(g){ms(i,r,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(g){ms(i,r,g)}else o.current=null}function V0(i){var r=i.type,o=i.memoizedProps,u=i.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(g){ms(i,i.return,g)}}function zf(i,r,o){try{var u=i.stateNode;Nx(u,i.type,o,r),u[Ai]=r}catch(g){ms(i,i.return,g)}}function P0(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&wr(i.type)||i.tag===4}function Vf(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||P0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&wr(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Pf(i,r,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(i),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=ge));else if(u!==4&&(u===27&&wr(i.type)&&(o=i.stateNode,r=null),i=i.child,i!==null))for(Pf(i,r,o),i=i.sibling;i!==null;)Pf(i,r,o),i=i.sibling}function ih(i,r,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?o.insertBefore(i,r):o.appendChild(i);else if(u!==4&&(u===27&&wr(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(ih(i,r,o),i=i.sibling;i!==null;)ih(i,r,o),i=i.sibling}function K0(i){var r=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);Qi(r,u,o),r[ue]=i,r[Ai]=o}catch(_){ms(i,i.return,_)}}var Hn=!1,ci=!1,Kf=!1,G0=typeof WeakSet=="function"?WeakSet:Set,vi=null;function dx(i,r){if(i=i.containerInfo,up=bh,i=Am(i),Dd(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var g=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{o.nodeType,_.nodeType}catch{o=null;break t}var C=0,T=-1,O=-1,st=0,gt=0,Ct=i,nt=null;e:for(;;){for(var ct;Ct!==o||g!==0&&Ct.nodeType!==3||(T=C+g),Ct!==_||u!==0&&Ct.nodeType!==3||(O=C+u),Ct.nodeType===3&&(C+=Ct.nodeValue.length),(ct=Ct.firstChild)!==null;)nt=Ct,Ct=ct;for(;;){if(Ct===i)break e;if(nt===o&&++st===g&&(T=C),nt===_&&++gt===u&&(O=C),(ct=Ct.nextSibling)!==null)break;Ct=nt,nt=Ct.parentNode}Ct=ct}o=T===-1||O===-1?null:{start:T,end:O}}else o=null}o=o||{start:0,end:0}}else o=null;for(dp={focusedElem:i,selectionRange:o},bh=!1,vi=r;vi!==null;)if(r=vi,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,vi=i;else for(;vi!==null;){switch(r=vi,_=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(o=0;o<i.length;o++)g=i[o],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,o=r,g=_.memoizedProps,_=_.memoizedState,u=o.stateNode;try{var Yt=ul(o.type,g);i=u.getSnapshotBeforeUpdate(Yt,_),u.__reactInternalSnapshotBeforeUpdate=i}catch(fe){ms(o,o.return,fe)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,o=i.nodeType,o===9)gp(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":gp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,vi=i;break}vi=r.return}}function W0(i,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:kn(i,o),u&4&&ma(5,o);break;case 1:if(kn(i,o),u&4)if(i=o.stateNode,r===null)try{i.componentDidMount()}catch(C){ms(o,o.return,C)}else{var g=ul(o.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(g,r,i.__reactInternalSnapshotBeforeUpdate)}catch(C){ms(o,o.return,C)}}u&64&&R0(o),u&512&&_a(o,o.return);break;case 3:if(kn(i,o),u&64&&(i=o.updateQueue,i!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{Um(i,r)}catch(C){ms(o,o.return,C)}}break;case 27:r===null&&u&4&&K0(o);case 26:case 5:kn(i,o),r===null&&u&4&&V0(o),u&512&&_a(o,o.return);break;case 12:kn(i,o);break;case 31:kn(i,o),u&4&&Y0(i,o);break;case 13:kn(i,o),u&4&&J0(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=yx.bind(null,o),zx(i,o))));break;case 22:if(u=o.memoizedState!==null||Hn,!u){r=r!==null&&r.memoizedState!==null||ci,g=Hn;var _=ci;Hn=u,(ci=r)&&!_?jn(i,o,(o.subtreeFlags&8772)!==0):kn(i,o),Hn=g,ci=_}break;case 30:break;default:kn(i,o)}}function $0(i){var r=i.alternate;r!==null&&(i.alternate=null,$0(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&xn(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ls=null,oA=!1;function Dn(i,r,o){for(o=o.child;o!==null;)X0(i,r,o),o=o.sibling}function X0(i,r,o){if(ls&&typeof ls.onCommitFiberUnmount=="function")try{ls.onCommitFiberUnmount($e,o)}catch{}switch(o.tag){case 26:ci||un(o,r),Dn(i,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ci||un(o,r);var u=Ls,g=oA;wr(o.type)&&(Ls=o.stateNode,oA=!1),Dn(i,r,o),Ea(o.stateNode),Ls=u,oA=g;break;case 5:ci||un(o,r);case 6:if(u=Ls,g=oA,Ls=null,Dn(i,r,o),Ls=u,oA=g,Ls!==null)if(oA)try{(Ls.nodeType===9?Ls.body:Ls.nodeName==="HTML"?Ls.ownerDocument.body:Ls).removeChild(o.stateNode)}catch(_){ms(o,r,_)}else try{Ls.removeChild(o.stateNode)}catch(_){ms(o,r,_)}break;case 18:Ls!==null&&(oA?(i=Ls,R_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),go(i)):R_(Ls,o.stateNode));break;case 4:u=Ls,g=oA,Ls=o.stateNode.containerInfo,oA=!0,Dn(i,r,o),Ls=u,oA=g;break;case 0:case 11:case 14:case 15:fr(2,o,r),ci||fr(4,o,r),Dn(i,r,o);break;case 1:ci||(un(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&z0(o,r,u)),Dn(i,r,o);break;case 21:Dn(i,r,o);break;case 22:ci=(u=ci)||o.memoizedState!==null,Dn(i,r,o),ci=u;break;default:Dn(i,r,o)}}function Y0(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{go(i)}catch(o){ms(r,r.return,o)}}}function J0(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{go(i)}catch(o){ms(r,r.return,o)}}function fx(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new G0),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new G0),r;default:throw Error(s(435,i.tag))}}function Ah(i,r){var o=fx(i);r.forEach(function(u){if(!o.has(u)){o.add(u);var g=Cx.bind(null,i,u);u.then(g,g)}})}function aA(i,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var g=o[u],_=i,C=r,T=C;t:for(;T!==null;){switch(T.tag){case 27:if(wr(T.type)){Ls=T.stateNode,oA=!1;break t}break;case 5:Ls=T.stateNode,oA=!1;break t;case 3:case 4:Ls=T.stateNode.containerInfo,oA=!0;break t}T=T.return}if(Ls===null)throw Error(s(160));X0(_,C,g),Ls=null,oA=!1,_=g.alternate,_!==null&&(_.return=null),g.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)q0(r,i),r=r.sibling}var YA=null;function q0(i,r){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:aA(r,i),cA(i),u&4&&(fr(3,i,i.return),ma(3,i),fr(5,i,i.return));break;case 1:aA(r,i),cA(i),u&512&&(ci||o===null||un(o,o.return)),u&64&&Hn&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var g=YA;if(aA(r,i),cA(i),u&512&&(ci||o===null||un(o,o.return)),u&4){var _=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){t:{u=i.type,o=i.memoizedProps,g=g.ownerDocument||g;e:switch(u){case"title":_=g.getElementsByTagName("title")[0],(!_||_[bn]||_[ue]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=g.createElement(u),g.head.insertBefore(_,g.querySelector("head > title"))),Qi(_,u,o),_[ue]=i,Ks(_),u=_;break t;case"link":var C=q_("link","href",g).get(u+(o.href||""));if(C){for(var T=0;T<C.length;T++)if(_=C[T],_.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&_.getAttribute("rel")===(o.rel==null?null:o.rel)&&_.getAttribute("title")===(o.title==null?null:o.title)&&_.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){C.splice(T,1);break e}}_=g.createElement(u),Qi(_,u,o),g.head.appendChild(_);break;case"meta":if(C=q_("meta","content",g).get(u+(o.content||""))){for(T=0;T<C.length;T++)if(_=C[T],_.getAttribute("content")===(o.content==null?null:""+o.content)&&_.getAttribute("name")===(o.name==null?null:o.name)&&_.getAttribute("property")===(o.property==null?null:o.property)&&_.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&_.getAttribute("charset")===(o.charSet==null?null:o.charSet)){C.splice(T,1);break e}}_=g.createElement(u),Qi(_,u,o),g.head.appendChild(_);break;default:throw Error(s(468,u))}_[ue]=i,Ks(_),u=_}i.stateNode=u}else Z_(g,i.type,i.stateNode);else i.stateNode=J_(g,u,i.memoizedProps);else _!==u?(_===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):_.count--,u===null?Z_(g,i.type,i.stateNode):J_(g,u,i.memoizedProps)):u===null&&i.stateNode!==null&&zf(i,i.memoizedProps,o.memoizedProps)}break;case 27:aA(r,i),cA(i),u&512&&(ci||o===null||un(o,o.return)),o!==null&&u&4&&zf(i,i.memoizedProps,o.memoizedProps);break;case 5:if(aA(r,i),cA(i),u&512&&(ci||o===null||un(o,o.return)),i.flags&32){g=i.stateNode;try{Bt(g,"")}catch(Yt){ms(i,i.return,Yt)}}u&4&&i.stateNode!=null&&(g=i.memoizedProps,zf(i,g,o!==null?o.memoizedProps:g)),u&1024&&(Kf=!0);break;case 6:if(aA(r,i),cA(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(Yt){ms(i,i.return,Yt)}}break;case 3:if(Bh=null,g=YA,YA=_h(r.containerInfo),aA(r,i),YA=g,cA(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{go(r.containerInfo)}catch(Yt){ms(i,i.return,Yt)}Kf&&(Kf=!1,Z0(i));break;case 4:u=YA,YA=_h(i.stateNode.containerInfo),aA(r,i),cA(i),YA=u;break;case 12:aA(r,i),cA(i);break;case 31:aA(r,i),cA(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Ah(i,u)));break;case 13:aA(r,i),cA(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(rh=Fe()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Ah(i,u)));break;case 22:g=i.memoizedState!==null;var O=o!==null&&o.memoizedState!==null,st=Hn,gt=ci;if(Hn=st||g,ci=gt||O,aA(r,i),ci=gt,Hn=st,cA(i),u&8192)t:for(r=i.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(o===null||O||Hn||ci||dl(i)),o=null,r=i;;){if(r.tag===5||r.tag===26){if(o===null){O=o=r;try{if(_=O.stateNode,g)C=_.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{T=O.stateNode;var Ct=O.memoizedProps.style,nt=Ct!=null&&Ct.hasOwnProperty("display")?Ct.display:null;T.style.display=nt==null||typeof nt=="boolean"?"":(""+nt).trim()}}catch(Yt){ms(O,O.return,Yt)}}}else if(r.tag===6){if(o===null){O=r;try{O.stateNode.nodeValue=g?"":O.memoizedProps}catch(Yt){ms(O,O.return,Yt)}}}else if(r.tag===18){if(o===null){O=r;try{var ct=O.stateNode;g?z_(ct,!0):z_(O.stateNode,!1)}catch(Yt){ms(O,O.return,Yt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break t;for(;r.sibling===null;){if(r.return===null||r.return===i)break t;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Ah(i,o))));break;case 19:aA(r,i),cA(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Ah(i,u)));break;case 30:break;case 21:break;default:aA(r,i),cA(i)}}function cA(i){var r=i.flags;if(r&2){try{for(var o,u=i.return;u!==null;){if(P0(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var g=o.stateNode,_=Vf(i);ih(i,_,g);break;case 5:var C=o.stateNode;o.flags&32&&(Bt(C,""),o.flags&=-33);var T=Vf(i);ih(i,T,C);break;case 3:case 4:var O=o.stateNode.containerInfo,st=Vf(i);Pf(i,st,O);break;default:throw Error(s(161))}}catch(gt){ms(i,i.return,gt)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function Z0(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;Z0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function kn(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)W0(i,r.alternate,r),r=r.sibling}function dl(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:fr(4,r,r.return),dl(r);break;case 1:un(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&z0(r,r.return,o),dl(r);break;case 27:Ea(r.stateNode);case 26:case 5:un(r,r.return),dl(r);break;case 22:r.memoizedState===null&&dl(r);break;case 30:dl(r);break;default:dl(r)}i=i.sibling}}function jn(i,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,g=i,_=r,C=_.flags;switch(_.tag){case 0:case 11:case 15:jn(g,_,o),ma(4,_);break;case 1:if(jn(g,_,o),u=_,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(st){ms(u,u.return,st)}if(u=_,g=u.updateQueue,g!==null){var T=u.stateNode;try{var O=g.shared.hiddenCallbacks;if(O!==null)for(g.shared.hiddenCallbacks=null,g=0;g<O.length;g++)Fm(O[g],T)}catch(st){ms(u,u.return,st)}}o&&C&64&&R0(_),_a(_,_.return);break;case 27:K0(_);case 26:case 5:jn(g,_,o),o&&u===null&&C&4&&V0(_),_a(_,_.return);break;case 12:jn(g,_,o);break;case 31:jn(g,_,o),o&&C&4&&Y0(g,_);break;case 13:jn(g,_,o),o&&C&4&&J0(g,_);break;case 22:_.memoizedState===null&&jn(g,_,o),_a(_,_.return);break;case 30:break;default:jn(g,_,o)}r=r.sibling}}function Gf(i,r){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&Aa(o))}function Wf(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Aa(i))}function JA(i,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)t_(i,r,o,u),r=r.sibling}function t_(i,r,o,u){var g=r.flags;switch(r.tag){case 0:case 11:case 15:JA(i,r,o,u),g&2048&&ma(9,r);break;case 1:JA(i,r,o,u);break;case 3:JA(i,r,o,u),g&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Aa(i)));break;case 12:if(g&2048){JA(i,r,o,u),i=r.stateNode;try{var _=r.memoizedProps,C=_.id,T=_.onPostCommit;typeof T=="function"&&T(C,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(O){ms(r,r.return,O)}}else JA(i,r,o,u);break;case 31:JA(i,r,o,u);break;case 13:JA(i,r,o,u);break;case 23:break;case 22:_=r.stateNode,C=r.alternate,r.memoizedState!==null?_._visibility&2?JA(i,r,o,u):va(i,r):_._visibility&2?JA(i,r,o,u):(_._visibility|=2,Ao(i,r,o,u,(r.subtreeFlags&10256)!==0||!1)),g&2048&&Gf(C,r);break;case 24:JA(i,r,o,u),g&2048&&Wf(r.alternate,r);break;default:JA(i,r,o,u)}}function Ao(i,r,o,u,g){for(g=g&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=i,C=r,T=o,O=u,st=C.flags;switch(C.tag){case 0:case 11:case 15:Ao(_,C,T,O,g),ma(8,C);break;case 23:break;case 22:var gt=C.stateNode;C.memoizedState!==null?gt._visibility&2?Ao(_,C,T,O,g):va(_,C):(gt._visibility|=2,Ao(_,C,T,O,g)),g&&st&2048&&Gf(C.alternate,C);break;case 24:Ao(_,C,T,O,g),g&&st&2048&&Wf(C.alternate,C);break;default:Ao(_,C,T,O,g)}r=r.sibling}}function va(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=i,u=r,g=u.flags;switch(u.tag){case 22:va(o,u),g&2048&&Gf(u.alternate,u);break;case 24:va(o,u),g&2048&&Wf(u.alternate,u);break;default:va(o,u)}r=r.sibling}}var Ba=8192;function no(i,r,o){if(i.subtreeFlags&Ba)for(i=i.child;i!==null;)e_(i,r,o),i=i.sibling}function e_(i,r,o){switch(i.tag){case 26:no(i,r,o),i.flags&Ba&&i.memoizedState!==null&&t5(o,YA,i.memoizedState,i.memoizedProps);break;case 5:no(i,r,o);break;case 3:case 4:var u=YA;YA=_h(i.stateNode.containerInfo),no(i,r,o),YA=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Ba,Ba=16777216,no(i,r,o),Ba=u):no(i,r,o));break;default:no(i,r,o)}}function s_(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function wa(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];vi=u,A_(u,i)}s_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)i_(i),i=i.sibling}function i_(i){switch(i.tag){case 0:case 11:case 15:wa(i),i.flags&2048&&fr(9,i,i.return);break;case 3:wa(i);break;case 12:wa(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,nh(i)):wa(i);break;default:wa(i)}}function nh(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];vi=u,A_(u,i)}s_(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:fr(8,r,r.return),nh(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,nh(r));break;default:nh(r)}i=i.sibling}}function A_(i,r){for(;vi!==null;){var o=vi;switch(o.tag){case 0:case 11:case 15:fr(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Aa(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,vi=u;else t:for(o=i;vi!==null;){u=vi;var g=u.sibling,_=u.return;if($0(u),u===o){vi=null;break t}if(g!==null){g.return=_,vi=g;break t}vi=_}}}var px={getCacheForType:function(i){var r=Ei(li),o=r.data.get(i);return o===void 0&&(o=i(),r.data.set(i,o)),o},cacheSignal:function(){return Ei(li).controller.signal}},gx=typeof WeakMap=="function"?WeakMap:Map,as=0,Cs=null,Re=null,Ke=0,gs=0,wA=null,pr=!1,ro=!1,$f=!1,On=0,Ws=0,gr=0,fl=0,Xf=0,yA=0,lo=0,ya=null,hA=null,Yf=!1,rh=0,n_=0,lh=1/0,oh=null,mr=null,gi=0,_r=null,oo=null,Rn=0,Jf=0,qf=null,r_=null,Ca=0,Zf=null;function CA(){return(as&2)!==0&&Ke!==0?Ke&-Ke:W.T!==null?np():je()}function l_(){if(yA===0)if((Ke&536870912)===0||Ye){var i=Xt;Xt<<=1,(Xt&3932160)===0&&(Xt=262144),yA=i}else yA=536870912;return i=vA.current,i!==null&&(i.flags|=32),yA}function uA(i,r,o){(i===Cs&&(gs===2||gs===9)||i.cancelPendingCommit!==null)&&(ao(i,0),vr(i,Ke,yA,!1)),AA(i,o),((as&2)===0||i!==Cs)&&(i===Cs&&((as&2)===0&&(fl|=o),Ws===4&&vr(i,Ke,yA,!1)),dn(i))}function o_(i,r,o){if((as&6)!==0)throw Error(s(327));var u=!o&&(r&127)===0&&(r&i.expiredLanes)===0||js(i,r),g=u?vx(i,r):ep(i,r,!0),_=u;do{if(g===0){ro&&!u&&vr(i,r,0,!1);break}else{if(o=i.current.alternate,_&&!mx(o)){g=ep(i,r,!1),_=!1;continue}if(g===2){if(_=r,i.errorRecoveryDisabledLanes&_)var C=0;else C=i.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){r=C;t:{var T=i;g=ya;var O=T.current.memoizedState.isDehydrated;if(O&&(ao(T,C).flags|=256),C=ep(T,C,!1),C!==2){if($f&&!O){T.errorRecoveryDisabledLanes|=_,fl|=_,g=4;break t}_=hA,hA=g,_!==null&&(hA===null?hA=_:hA.push.apply(hA,_))}g=C}if(_=!1,g!==2)continue}}if(g===1){ao(i,0),vr(i,r,0,!0);break}t:{switch(u=i,_=g,_){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:vr(u,r,yA,!pr);break t;case 2:hA=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(g=rh+300-Fe(),10<g)){if(vr(u,r,yA,!pr),be(u,0,!0)!==0)break t;Rn=r,u.timeoutHandle=j_(a_.bind(null,u,o,hA,oh,Yf,r,yA,fl,lo,pr,_,"Throttled",-0,0),g);break t}a_(u,o,hA,oh,Yf,r,yA,fl,lo,pr,_,null,-0,0)}}break}while(!0);dn(i)}function a_(i,r,o,u,g,_,C,T,O,st,gt,Ct,nt,ct){if(i.timeoutHandle=-1,Ct=r.subtreeFlags,Ct&8192||(Ct&16785408)===16785408){Ct={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ge},e_(r,_,Ct);var Yt=(_&62914560)===_?rh-Fe():(_&4194048)===_?n_-Fe():0;if(Yt=e5(Ct,Yt),Yt!==null){Rn=_,i.cancelPendingCommit=Yt(m_.bind(null,i,r,_,o,u,g,C,T,O,gt,Ct,null,nt,ct)),vr(i,_,C,!st);return}}m_(i,r,_,o,u,g,C,T,O)}function mx(i){for(var r=i;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var g=o[u],_=g.getSnapshot;g=g.value;try{if(!mA(_(),g))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function vr(i,r,o,u){r&=~Xf,r&=~fl,i.suspendedLanes|=r,i.pingedLanes&=~r,u&&(i.warmLanes|=r),u=i.expirationTimes;for(var g=r;0<g;){var _=31-hs(g),C=1<<_;u[_]=-1,g&=~C}o!==0&&Rs(i,o,r)}function ah(){return(as&6)===0?(ba(0),!1):!0}function tp(){if(Re!==null){if(gs===0)var i=Re.return;else i=Re,Fn=nl=null,gf(i),Zl=null,ra=0,i=Re;for(;i!==null;)O0(i.alternate,i),i=i.return;Re=null}}function ao(i,r){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,Dx(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Rn=0,tp(),Cs=i,Re=o=Tn(i.current,null),Ke=r,gs=0,wA=null,pr=!1,ro=js(i,r),$f=!1,lo=yA=Xf=fl=gr=Ws=0,hA=ya=null,Yf=!1,(r&8)!==0&&(r|=r&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=r;0<u;){var g=31-hs(u),_=1<<g;r|=i[g],u&=~_}return On=r,Fc(),o}function c_(i,r){xe=null,W.H=fa,r===ql||r===kc?(r=Sm(),gs=3):r===Af?(r=Sm(),gs=4):gs=r===Mf?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,wA=r,Re===null&&(Ws=1,qc(i,FA(r,i.current)))}function h_(){var i=vA.current;return i===null?!0:(Ke&4194048)===Ke?NA===null:(Ke&62914560)===Ke||(Ke&536870912)!==0?i===NA:!1}function u_(){var i=W.H;return W.H=fa,i===null?fa:i}function d_(){var i=W.A;return W.A=px,i}function ch(){Ws=4,pr||(Ke&4194048)!==Ke&&vA.current!==null||(ro=!0),(gr&134217727)===0&&(fl&134217727)===0||Cs===null||vr(Cs,Ke,yA,!1)}function ep(i,r,o){var u=as;as|=2;var g=u_(),_=d_();(Cs!==i||Ke!==r)&&(oh=null,ao(i,r)),r=!1;var C=Ws;t:do try{if(gs!==0&&Re!==null){var T=Re,O=wA;switch(gs){case 8:tp(),C=6;break t;case 3:case 2:case 9:case 6:vA.current===null&&(r=!0);var st=gs;if(gs=0,wA=null,co(i,T,O,st),o&&ro){C=0;break t}break;default:st=gs,gs=0,wA=null,co(i,T,O,st)}}_x(),C=Ws;break}catch(gt){c_(i,gt)}while(!0);return r&&i.shellSuspendCounter++,Fn=nl=null,as=u,W.H=g,W.A=_,Re===null&&(Cs=null,Ke=0,Fc()),C}function _x(){for(;Re!==null;)f_(Re)}function vx(i,r){var o=as;as|=2;var u=u_(),g=d_();Cs!==i||Ke!==r?(oh=null,lh=Fe()+500,ao(i,r)):ro=js(i,r);t:do try{if(gs!==0&&Re!==null){r=Re;var _=wA;e:switch(gs){case 1:gs=0,wA=null,co(i,r,_,1);break;case 2:case 9:if(bm(_)){gs=0,wA=null,p_(r);break}r=function(){gs!==2&&gs!==9||Cs!==i||(gs=7),dn(i)},_.then(r,r);break t;case 3:gs=7;break t;case 4:gs=5;break t;case 7:bm(_)?(gs=0,wA=null,p_(r)):(gs=0,wA=null,co(i,r,_,7));break;case 5:var C=null;switch(Re.tag){case 26:C=Re.memoizedState;case 5:case 27:var T=Re;if(C?tv(C):T.stateNode.complete){gs=0,wA=null;var O=T.sibling;if(O!==null)Re=O;else{var st=T.return;st!==null?(Re=st,hh(st)):Re=null}break e}}gs=0,wA=null,co(i,r,_,5);break;case 6:gs=0,wA=null,co(i,r,_,6);break;case 8:tp(),Ws=6;break t;default:throw Error(s(462))}}Bx();break}catch(gt){c_(i,gt)}while(!0);return Fn=nl=null,W.H=u,W.A=g,as=o,Re!==null?0:(Cs=null,Ke=0,Fc(),Ws)}function Bx(){for(;Re!==null&&!Qs();)f_(Re)}function f_(i){var r=k0(i.alternate,i,On);i.memoizedProps=i.pendingProps,r===null?hh(i):Re=r}function p_(i){var r=i,o=r.alternate;switch(r.tag){case 15:case 0:r=M0(o,r,r.pendingProps,r.type,void 0,Ke);break;case 11:r=M0(o,r,r.pendingProps,r.type.render,r.ref,Ke);break;case 5:gf(r);default:O0(o,r),r=Re=dm(r,On),r=k0(o,r,On)}i.memoizedProps=i.pendingProps,r===null?hh(i):Re=r}function co(i,r,o,u){Fn=nl=null,gf(r),Zl=null,ra=0;var g=r.return;try{if(ox(i,g,r,o,Ke)){Ws=1,qc(i,FA(o,i.current)),Re=null;return}}catch(_){if(g!==null)throw Re=g,_;Ws=1,qc(i,FA(o,i.current)),Re=null;return}r.flags&32768?(Ye||u===1?i=!0:ro||(Ke&536870912)!==0?i=!1:(pr=i=!0,(u===2||u===9||u===3||u===6)&&(u=vA.current,u!==null&&u.tag===13&&(u.flags|=16384))),g_(r,i)):hh(r)}function hh(i){var r=i;do{if((r.flags&32768)!==0){g_(r,pr);return}i=r.return;var o=hx(r.alternate,r,On);if(o!==null){Re=o;return}if(r=r.sibling,r!==null){Re=r;return}Re=r=i}while(r!==null);Ws===0&&(Ws=5)}function g_(i,r){do{var o=ux(i.alternate,i);if(o!==null){o.flags&=32767,Re=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(i=i.sibling,i!==null)){Re=i;return}Re=i=o}while(i!==null);Ws=6,Re=null}function m_(i,r,o,u,g,_,C,T,O){i.cancelPendingCommit=null;do uh();while(gi!==0);if((as&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(_=r.lanes|r.childLanes,_|=zd,Os(i,o,_,C,T,O),i===Cs&&(Re=Cs=null,Ke=0),oo=r,_r=i,Rn=o,Jf=_,qf=g,r_=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,bx(jt,function(){return y_(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=W.T,W.T=null,g=E.p,E.p=2,C=as,as|=4;try{dx(i,r,o)}finally{as=C,E.p=g,W.T=u}}gi=1,__(),v_(),B_()}}function __(){if(gi===1){gi=0;var i=_r,r=oo,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=W.T,W.T=null;var u=E.p;E.p=2;var g=as;as|=4;try{q0(r,i);var _=dp,C=Am(i.containerInfo),T=_.focusedElem,O=_.selectionRange;if(C!==T&&T&&T.ownerDocument&&im(T.ownerDocument.documentElement,T)){if(O!==null&&Dd(T)){var st=O.start,gt=O.end;if(gt===void 0&&(gt=st),"selectionStart"in T)T.selectionStart=st,T.selectionEnd=Math.min(gt,T.value.length);else{var Ct=T.ownerDocument||document,nt=Ct&&Ct.defaultView||window;if(nt.getSelection){var ct=nt.getSelection(),Yt=T.textContent.length,fe=Math.min(O.start,Yt),Bs=O.end===void 0?fe:Math.min(O.end,Yt);!ct.extend&&fe>Bs&&(C=Bs,Bs=fe,fe=C);var q=sm(T,fe),G=sm(T,Bs);if(q&&G&&(ct.rangeCount!==1||ct.anchorNode!==q.node||ct.anchorOffset!==q.offset||ct.focusNode!==G.node||ct.focusOffset!==G.offset)){var et=Ct.createRange();et.setStart(q.node,q.offset),ct.removeAllRanges(),fe>Bs?(ct.addRange(et),ct.extend(G.node,G.offset)):(et.setEnd(G.node,G.offset),ct.addRange(et))}}}}for(Ct=[],ct=T;ct=ct.parentNode;)ct.nodeType===1&&Ct.push({element:ct,left:ct.scrollLeft,top:ct.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<Ct.length;T++){var _t=Ct[T];_t.element.scrollLeft=_t.left,_t.element.scrollTop=_t.top}}bh=!!up,dp=up=null}finally{as=g,E.p=u,W.T=o}}i.current=r,gi=2}}function v_(){if(gi===2){gi=0;var i=_r,r=oo,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=W.T,W.T=null;var u=E.p;E.p=2;var g=as;as|=4;try{W0(i,r.alternate,r)}finally{as=g,E.p=u,W.T=o}}gi=3}}function B_(){if(gi===4||gi===3){gi=0,Xs();var i=_r,r=oo,o=Rn,u=r_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?gi=5:(gi=0,oo=_r=null,w_(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(mr=null),bt(o),r=r.stateNode,ls&&typeof ls.onCommitFiberRoot=="function")try{ls.onCommitFiberRoot($e,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=W.T,g=E.p,E.p=2,W.T=null;try{for(var _=i.onRecoverableError,C=0;C<u.length;C++){var T=u[C];_(T.value,{componentStack:T.stack})}}finally{W.T=r,E.p=g}}(Rn&3)!==0&&uh(),dn(i),g=i.pendingLanes,(o&261930)!==0&&(g&42)!==0?i===Zf?Ca++:(Ca=0,Zf=i):Ca=0,ba(0)}}function w_(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Aa(r)))}function uh(){return __(),v_(),B_(),y_()}function y_(){if(gi!==5)return!1;var i=_r,r=Jf;Jf=0;var o=bt(Rn),u=W.T,g=E.p;try{E.p=32>o?32:o,W.T=null,o=qf,qf=null;var _=_r,C=Rn;if(gi=0,oo=_r=null,Rn=0,(as&6)!==0)throw Error(s(331));var T=as;if(as|=4,i_(_.current),t_(_,_.current,C,o),as=T,ba(0,!1),ls&&typeof ls.onPostCommitFiberRoot=="function")try{ls.onPostCommitFiberRoot($e,_)}catch{}return!0}finally{E.p=g,W.T=u,w_(i,r)}}function C_(i,r,o){r=FA(o,r),r=Uf(i.stateNode,r,2),i=hr(i,r,2),i!==null&&(AA(i,2),dn(i))}function ms(i,r,o){if(i.tag===3)C_(i,i,o);else for(;r!==null;){if(r.tag===3){C_(r,i,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(mr===null||!mr.has(u))){i=FA(o,i),o=b0(2),u=hr(r,o,2),u!==null&&(x0(o,u,r,i),AA(u,2),dn(u));break}}r=r.return}}function sp(i,r,o){var u=i.pingCache;if(u===null){u=i.pingCache=new gx;var g=new Set;u.set(r,g)}else g=u.get(r),g===void 0&&(g=new Set,u.set(r,g));g.has(o)||($f=!0,g.add(o),i=wx.bind(null,i,r,o),r.then(i,i))}function wx(i,r,o){var u=i.pingCache;u!==null&&u.delete(r),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,Cs===i&&(Ke&o)===o&&(Ws===4||Ws===3&&(Ke&62914560)===Ke&&300>Fe()-rh?(as&2)===0&&ao(i,0):Xf|=o,lo===Ke&&(lo=0)),dn(i)}function b_(i,r){r===0&&(r=Oi()),i=sl(i,r),i!==null&&(AA(i,r),dn(i))}function yx(i){var r=i.memoizedState,o=0;r!==null&&(o=r.retryLane),b_(i,o)}function Cx(i,r){var o=0;switch(i.tag){case 31:case 13:var u=i.stateNode,g=i.memoizedState;g!==null&&(o=g.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),b_(i,o)}function bx(i,r){return Qe(i,r)}var dh=null,ho=null,ip=!1,fh=!1,Ap=!1,Br=0;function dn(i){i!==ho&&i.next===null&&(ho===null?dh=ho=i:ho=ho.next=i),fh=!0,ip||(ip=!0,Sx())}function ba(i,r){if(!Ap&&fh){Ap=!0;do for(var o=!1,u=dh;u!==null;){if(i!==0){var g=u.pendingLanes;if(g===0)var _=0;else{var C=u.suspendedLanes,T=u.pingedLanes;_=(1<<31-hs(42|i)+1)-1,_&=g&~(C&~T),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(o=!0,T_(u,_))}else _=Ke,_=be(u,u===Cs?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||js(u,_)||(o=!0,T_(u,_));u=u.next}while(o);Ap=!1}}function xx(){x_()}function x_(){fh=ip=!1;var i=0;Br!==0&&Hx()&&(i=Br);for(var r=Fe(),o=null,u=dh;u!==null;){var g=u.next,_=S_(u,r);_===0?(u.next=null,o===null?dh=g:o.next=g,g===null&&(ho=o)):(o=u,(i!==0||(_&3)!==0)&&(fh=!0)),u=g}gi!==0&&gi!==5||ba(i),Br!==0&&(Br=0)}function S_(i,r){for(var o=i.suspendedLanes,u=i.pingedLanes,g=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var C=31-hs(_),T=1<<C,O=g[C];O===-1?((T&o)===0||(T&u)!==0)&&(g[C]=is(T,r)):O<=r&&(i.expiredLanes|=T),_&=~T}if(r=Cs,o=Ke,o=be(i,i===r?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===r&&(gs===2||gs===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&qe(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||js(i,o)){if(r=o&-o,r===i.callbackPriority)return r;switch(u!==null&&qe(u),bt(o)){case 2:case 8:o=wt;break;case 32:o=jt;break;case 268435456:o=Zt;break;default:o=jt}return u=E_.bind(null,i),o=Qe(o,u),i.callbackPriority=r,i.callbackNode=o,r}return u!==null&&u!==null&&qe(u),i.callbackPriority=2,i.callbackNode=null,2}function E_(i,r){if(gi!==0&&gi!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(uh()&&i.callbackNode!==o)return null;var u=Ke;return u=be(i,i===Cs?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(o_(i,u,r),S_(i,Fe()),i.callbackNode!=null&&i.callbackNode===o?E_.bind(null,i):null)}function T_(i,r){if(uh())return null;o_(i,r,!0)}function Sx(){kx(function(){(as&6)!==0?Qe(Ss,xx):x_()})}function np(){if(Br===0){var i=Yl;i===0&&(i=vt,vt<<=1,(vt&261888)===0&&(vt=256)),Br=i}return Br}function Q_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ie(""+i)}function F_(i,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,i.id&&o.setAttribute("form",i.id),r.parentNode.insertBefore(o,r),i=new FormData(i),o.parentNode.removeChild(o),i}function Ex(i,r,o,u,g){if(r==="submit"&&o&&o.stateNode===g){var _=Q_((g[Ai]||null).action),C=u.submitter;C&&(r=(r=C[Ai]||null)?Q_(r.formAction):C.getAttribute("formAction"),r!==null&&(_=r,C=null));var T=new jl("action","action",null,u,g);i.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Br!==0){var O=C?F_(g,C):new FormData(g);xf(o,{pending:!0,data:O,method:g.method,action:_},null,O)}}else typeof _=="function"&&(T.preventDefault(),O=C?F_(g,C):new FormData(g),xf(o,{pending:!0,data:O,method:g.method,action:_},_,O))},currentTarget:g}]})}}for(var rp=0;rp<Rd.length;rp++){var lp=Rd[rp],Tx=lp.toLowerCase(),Qx=lp[0].toUpperCase()+lp.slice(1);XA(Tx,"on"+Qx)}XA(lm,"onAnimationEnd"),XA(om,"onAnimationIteration"),XA(am,"onAnimationStart"),XA("dblclick","onDoubleClick"),XA("focusin","onFocus"),XA("focusout","onBlur"),XA(Kb,"onTransitionRun"),XA(Gb,"onTransitionStart"),XA(Wb,"onTransitionCancel"),XA(cm,"onTransitionEnd"),zi("onMouseEnter",["mouseout","mouseover"]),zi("onMouseLeave",["mouseout","mouseover"]),zi("onPointerEnter",["pointerout","pointerover"]),zi("onPointerLeave",["pointerout","pointerover"]),KA("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),KA("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),KA("onBeforeInput",["compositionend","keypress","textInput","paste"]),KA("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),KA("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),KA("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xa));function U_(i,r){r=(r&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],g=u.event;u=u.listeners;t:{var _=void 0;if(r)for(var C=u.length-1;0<=C;C--){var T=u[C],O=T.instance,st=T.currentTarget;if(T=T.listener,O!==_&&g.isPropagationStopped())break t;_=T,g.currentTarget=st;try{_(g)}catch(gt){Qc(gt)}g.currentTarget=null,_=O}else for(C=0;C<u.length;C++){if(T=u[C],O=T.instance,st=T.currentTarget,T=T.listener,O!==_&&g.isPropagationStopped())break t;_=T,g.currentTarget=st;try{_(g)}catch(gt){Qc(gt)}g.currentTarget=null,_=O}}}}function ze(i,r){var o=r[VA];o===void 0&&(o=r[VA]=new Set);var u=i+"__bubble";o.has(u)||(M_(r,i,2,!1),o.add(u))}function op(i,r,o){var u=0;r&&(u|=4),M_(o,i,u,r)}var ph="_reactListening"+Math.random().toString(36).slice(2);function ap(i){if(!i[ph]){i[ph]=!0,Wr.forEach(function(o){o!=="selectionchange"&&(Fx.has(o)||op(o,!1,i),op(o,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[ph]||(r[ph]=!0,op("selectionchange",!1,r))}}function M_(i,r,o,u){switch(lv(r)){case 2:var g=A5;break;case 8:g=n5;break;default:g=bp}o=g.bind(null,r,o,i),g=void 0,!os||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),u?g!==void 0?i.addEventListener(r,o,{capture:!0,passive:g}):i.addEventListener(r,o,!0):g!==void 0?i.addEventListener(r,o,{passive:g}):i.addEventListener(r,o,!1)}function cp(i,r,o,u,g){var _=u;if((r&1)===0&&(r&2)===0&&u!==null)t:for(;;){if(u===null)return;var C=u.tag;if(C===3||C===4){var T=u.stateNode.containerInfo;if(T===g)break;if(C===4)for(C=u.return;C!==null;){var O=C.tag;if((O===3||O===4)&&C.stateNode.containerInfo===g)return;C=C.return}for(;T!==null;){if(C=PA(T),C===null)return;if(O=C.tag,O===5||O===6||O===26||O===27){u=_=C;continue t}T=T.parentNode}}u=u.return}Ci(function(){var st=_,gt=Ns(o),Ct=[];t:{var nt=hm.get(i);if(nt!==void 0){var ct=jl,Yt=i;switch(i){case"keypress":if(on(o)===0)break t;case"keydown":case"keyup":ct=Fd;break;case"focusin":Yt="focus",ct=qo;break;case"focusout":Yt="blur",ct=qo;break;case"beforeblur":case"afterblur":ct=qo;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ct=xc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ct=_d;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ct=Id;break;case lm:case om:case am:ct=wd;break;case cm:ct=Ld;break;case"scroll":case"scrollend":ct=Yr;break;case"wheel":ct=q1;break;case"copy":case"cut":case"paste":ct=Cd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ct=Ec;break;case"toggle":case"beforetoggle":ct=L}var fe=(r&4)!==0,Bs=!fe&&(i==="scroll"||i==="scrollend"),q=fe?nt!==null?nt+"Capture":null:nt;fe=[];for(var G=st,et;G!==null;){var _t=G;if(et=_t.stateNode,_t=_t.tag,_t!==5&&_t!==26&&_t!==27||et===null||q===null||(_t=qs(G,q),_t!=null&&fe.push(Sa(G,_t,et))),Bs)break;G=G.return}0<fe.length&&(nt=new ct(nt,Yt,null,o,gt),Ct.push({event:nt,listeners:fe}))}}if((r&7)===0){t:{if(nt=i==="mouseover"||i==="pointerover",ct=i==="mouseout"||i==="pointerout",nt&&o!==ve&&(Yt=o.relatedTarget||o.fromElement)&&(PA(Yt)||Yt[Ri]))break t;if((ct||nt)&&(nt=gt.window===gt?gt:(nt=gt.ownerDocument)?nt.defaultView||nt.parentWindow:window,ct?(Yt=o.relatedTarget||o.toElement,ct=st,Yt=Yt?PA(Yt):null,Yt!==null&&(Bs=l(Yt),fe=Yt.tag,Yt!==Bs||fe!==5&&fe!==27&&fe!==6)&&(Yt=null)):(ct=null,Yt=st),ct!==Yt)){if(fe=xc,_t="onMouseLeave",q="onMouseEnter",G="mouse",(i==="pointerout"||i==="pointerover")&&(fe=Ec,_t="onPointerLeave",q="onPointerEnter",G="pointer"),Bs=ct==null?nt:rn(ct),et=Yt==null?nt:rn(Yt),nt=new fe(_t,G+"leave",ct,o,gt),nt.target=Bs,nt.relatedTarget=et,_t=null,PA(gt)===st&&(fe=new fe(q,G+"enter",Yt,o,gt),fe.target=et,fe.relatedTarget=Bs,_t=fe),Bs=_t,ct&&Yt)e:{for(fe=Ux,q=ct,G=Yt,et=0,_t=q;_t;_t=fe(_t))et++;_t=0;for(var ae=G;ae;ae=fe(ae))_t++;for(;0<et-_t;)q=fe(q),et--;for(;0<_t-et;)G=fe(G),_t--;for(;et--;){if(q===G||G!==null&&q===G.alternate){fe=q;break e}q=fe(q),G=fe(G)}fe=null}else fe=null;ct!==null&&I_(Ct,nt,ct,fe,!1),Yt!==null&&Bs!==null&&I_(Ct,Bs,Yt,fe,!0)}}t:{if(nt=st?rn(st):window,ct=nt.nodeName&&nt.nodeName.toLowerCase(),ct==="select"||ct==="input"&&nt.type==="file")var As=qr;else if(Xe(nt))if(Rl)As=zb;else{As=Ob;var ie=jb}else ct=nt.nodeName,!ct||ct.toLowerCase()!=="input"||nt.type!=="checkbox"&&nt.type!=="radio"?st&&ne(st.elementType)&&(As=qr):As=Rb;if(As&&(As=As(i,st))){Pi(Ct,As,o,gt);break t}ie&&ie(i,nt,st),i==="focusout"&&st&&nt.type==="number"&&st.memoizedProps.value!=null&&J(nt,"number",nt.value)}switch(ie=st?rn(st):window,i){case"focusin":(Xe(ie)||ie.contentEditable==="true")&&(zl=ie,kd=st,ea=null);break;case"focusout":ea=kd=zl=null;break;case"mousedown":jd=!0;break;case"contextmenu":case"mouseup":case"dragend":jd=!1,nm(Ct,o,gt);break;case"selectionchange":if(Pb)break;case"keydown":case"keyup":nm(Ct,o,gt)}var Te;if($)t:{switch(i){case"compositionstart":var Ge="onCompositionStart";break t;case"compositionend":Ge="onCompositionEnd";break t;case"compositionupdate":Ge="onCompositionUpdate";break t}Ge=void 0}else rA?Ne(i,o)&&(Ge="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Ge="onCompositionStart");Ge&&(Jt&&o.locale!=="ko"&&(rA||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&rA&&(Te=Ar()):(Oe=gt,$A="value"in Oe?Oe.value:Oe.textContent,rA=!0)),ie=gh(st,Ge),0<ie.length&&(Ge=new Sc(Ge,i,null,o,gt),Ct.push({event:Ge,listeners:ie}),Te?Ge.data=Te:(Te=Vi(o),Te!==null&&(Ge.data=Te)))),(Te=Dt?ps(i,o):gA(i,o))&&(Ge=gh(st,"onBeforeInput"),0<Ge.length&&(ie=new Sc("onBeforeInput","beforeinput",null,o,gt),Ct.push({event:ie,listeners:Ge}),ie.data=Te)),Ex(Ct,i,st,o,gt)}U_(Ct,r)})}function Sa(i,r,o){return{instance:i,listener:r,currentTarget:o}}function gh(i,r){for(var o=r+"Capture",u=[];i!==null;){var g=i,_=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||_===null||(g=qs(i,o),g!=null&&u.unshift(Sa(i,g,_)),g=qs(i,r),g!=null&&u.push(Sa(i,g,_))),i.tag===3)return u;i=i.return}return[]}function Ux(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function I_(i,r,o,u,g){for(var _=r._reactName,C=[];o!==null&&o!==u;){var T=o,O=T.alternate,st=T.stateNode;if(T=T.tag,O!==null&&O===u)break;T!==5&&T!==26&&T!==27||st===null||(O=st,g?(st=qs(o,_),st!=null&&C.unshift(Sa(o,st,O))):g||(st=qs(o,_),st!=null&&C.push(Sa(o,st,O)))),o=o.return}C.length!==0&&i.push({event:r,listeners:C})}var Mx=/\r\n?/g,Ix=/\u0000|\uFFFD/g;function N_(i){return(typeof i=="string"?i:""+i).replace(Mx,`
`).replace(Ix,"")}function L_(i,r){return r=N_(r),N_(i)===r}function vs(i,r,o,u,g,_){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||Bt(i,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&Bt(i,""+u);break;case"className":sr(i,"class",u);break;case"tabIndex":sr(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":sr(i,o,u);break;case"style":it(i,u,_);break;case"data":if(r!=="object"){sr(i,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Ie(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(o==="formAction"?(r!=="input"&&vs(i,r,"name",g.name,g,null),vs(i,r,"formEncType",g.formEncType,g,null),vs(i,r,"formMethod",g.formMethod,g,null),vs(i,r,"formTarget",g.formTarget,g,null)):(vs(i,r,"encType",g.encType,g,null),vs(i,r,"method",g.method,g,null),vs(i,r,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Ie(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=ge);break;case"onScroll":u!=null&&ze("scroll",i);break;case"onScrollEnd":u!=null&&ze("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=Ie(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":ze("beforetoggle",i),ze("toggle",i),er(i,"popover",u);break;case"xlinkActuate":ni(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":ni(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":ni(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":ni(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":ni(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":ni(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":ni(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":ni(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":ni(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":er(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Ee.get(o)||o,er(i,o,u))}}function hp(i,r,o,u,g,_){switch(o){case"style":it(i,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"children":typeof u=="string"?Bt(i,u):(typeof u=="number"||typeof u=="bigint")&&Bt(i,""+u);break;case"onScroll":u!=null&&ze("scroll",i);break;case"onScrollEnd":u!=null&&ze("scrollend",i);break;case"onClick":u!=null&&(i.onclick=ge);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$r.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(g=o.endsWith("Capture"),r=o.slice(2,g?o.length-7:void 0),_=i[Ai]||null,_=_!=null?_[o]:null,typeof _=="function"&&i.removeEventListener(r,_,g),typeof u=="function")){typeof _!="function"&&_!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(r,u,g);break t}o in i?i[o]=u:u===!0?i.setAttribute(o,""):er(i,o,u)}}}function Qi(i,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",i),ze("load",i);var u=!1,g=!1,_;for(_ in o)if(o.hasOwnProperty(_)){var C=o[_];if(C!=null)switch(_){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:vs(i,r,_,C,o,null)}}g&&vs(i,r,"srcSet",o.srcSet,o,null),u&&vs(i,r,"src",o.src,o,null);return;case"input":ze("invalid",i);var T=_=C=g=null,O=null,st=null;for(u in o)if(o.hasOwnProperty(u)){var gt=o[u];if(gt!=null)switch(u){case"name":g=gt;break;case"type":C=gt;break;case"checked":O=gt;break;case"defaultChecked":st=gt;break;case"value":_=gt;break;case"defaultValue":T=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(s(137,r));break;default:vs(i,r,u,gt,o,null)}}k(i,_,T,O,st,C,g,!1);return;case"select":ze("invalid",i),u=C=_=null;for(g in o)if(o.hasOwnProperty(g)&&(T=o[g],T!=null))switch(g){case"value":_=T;break;case"defaultValue":C=T;break;case"multiple":u=T;default:vs(i,r,g,T,o,null)}r=_,o=C,i.multiple=!!u,r!=null?X(i,!!u,r,!1):o!=null&&X(i,!!u,o,!0);return;case"textarea":ze("invalid",i),_=g=u=null;for(C in o)if(o.hasOwnProperty(C)&&(T=o[C],T!=null))switch(C){case"value":u=T;break;case"defaultValue":g=T;break;case"children":_=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:vs(i,r,C,T,o,null)}St(i,u,g,_);return;case"option":for(O in o)o.hasOwnProperty(O)&&(u=o[O],u!=null)&&(O==="selected"?i.selected=u&&typeof u!="function"&&typeof u!="symbol":vs(i,r,O,u,o,null));return;case"dialog":ze("beforetoggle",i),ze("toggle",i),ze("cancel",i),ze("close",i);break;case"iframe":case"object":ze("load",i);break;case"video":case"audio":for(u=0;u<xa.length;u++)ze(xa[u],i);break;case"image":ze("error",i),ze("load",i);break;case"details":ze("toggle",i);break;case"embed":case"source":case"link":ze("error",i),ze("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(st in o)if(o.hasOwnProperty(st)&&(u=o[st],u!=null))switch(st){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:vs(i,r,st,u,o,null)}return;default:if(ne(r)){for(gt in o)o.hasOwnProperty(gt)&&(u=o[gt],u!==void 0&&hp(i,r,gt,u,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(u=o[T],u!=null&&vs(i,r,T,u,o,null))}function Nx(i,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,_=null,C=null,T=null,O=null,st=null,gt=null;for(ct in o){var Ct=o[ct];if(o.hasOwnProperty(ct)&&Ct!=null)switch(ct){case"checked":break;case"value":break;case"defaultValue":O=Ct;default:u.hasOwnProperty(ct)||vs(i,r,ct,null,u,Ct)}}for(var nt in u){var ct=u[nt];if(Ct=o[nt],u.hasOwnProperty(nt)&&(ct!=null||Ct!=null))switch(nt){case"type":_=ct;break;case"name":g=ct;break;case"checked":st=ct;break;case"defaultChecked":gt=ct;break;case"value":C=ct;break;case"defaultValue":T=ct;break;case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(s(137,r));break;default:ct!==Ct&&vs(i,r,nt,ct,u,Ct)}}H(i,C,T,O,st,gt,_,g);return;case"select":ct=C=T=nt=null;for(_ in o)if(O=o[_],o.hasOwnProperty(_)&&O!=null)switch(_){case"value":break;case"multiple":ct=O;default:u.hasOwnProperty(_)||vs(i,r,_,null,u,O)}for(g in u)if(_=u[g],O=o[g],u.hasOwnProperty(g)&&(_!=null||O!=null))switch(g){case"value":nt=_;break;case"defaultValue":T=_;break;case"multiple":C=_;default:_!==O&&vs(i,r,g,_,u,O)}r=T,o=C,u=ct,nt!=null?X(i,!!o,nt,!1):!!u!=!!o&&(r!=null?X(i,!!o,r,!0):X(i,!!o,o?[]:"",!1));return;case"textarea":ct=nt=null;for(T in o)if(g=o[T],o.hasOwnProperty(T)&&g!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:vs(i,r,T,null,u,g)}for(C in u)if(g=u[C],_=o[C],u.hasOwnProperty(C)&&(g!=null||_!=null))switch(C){case"value":nt=g;break;case"defaultValue":ct=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==_&&vs(i,r,C,g,u,_)}ht(i,nt,ct);return;case"option":for(var Yt in o)nt=o[Yt],o.hasOwnProperty(Yt)&&nt!=null&&!u.hasOwnProperty(Yt)&&(Yt==="selected"?i.selected=!1:vs(i,r,Yt,null,u,nt));for(O in u)nt=u[O],ct=o[O],u.hasOwnProperty(O)&&nt!==ct&&(nt!=null||ct!=null)&&(O==="selected"?i.selected=nt&&typeof nt!="function"&&typeof nt!="symbol":vs(i,r,O,nt,u,ct));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fe in o)nt=o[fe],o.hasOwnProperty(fe)&&nt!=null&&!u.hasOwnProperty(fe)&&vs(i,r,fe,null,u,nt);for(st in u)if(nt=u[st],ct=o[st],u.hasOwnProperty(st)&&nt!==ct&&(nt!=null||ct!=null))switch(st){case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(s(137,r));break;default:vs(i,r,st,nt,u,ct)}return;default:if(ne(r)){for(var Bs in o)nt=o[Bs],o.hasOwnProperty(Bs)&&nt!==void 0&&!u.hasOwnProperty(Bs)&&hp(i,r,Bs,void 0,u,nt);for(gt in u)nt=u[gt],ct=o[gt],!u.hasOwnProperty(gt)||nt===ct||nt===void 0&&ct===void 0||hp(i,r,gt,nt,u,ct);return}}for(var q in o)nt=o[q],o.hasOwnProperty(q)&&nt!=null&&!u.hasOwnProperty(q)&&vs(i,r,q,null,u,nt);for(Ct in u)nt=u[Ct],ct=o[Ct],!u.hasOwnProperty(Ct)||nt===ct||nt==null&&ct==null||vs(i,r,Ct,nt,u,ct)}function H_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Lx(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var g=o[u],_=g.transferSize,C=g.initiatorType,T=g.duration;if(_&&T&&H_(C)){for(C=0,T=g.responseEnd,u+=1;u<o.length;u++){var O=o[u],st=O.startTime;if(st>T)break;var gt=O.transferSize,Ct=O.initiatorType;gt&&H_(Ct)&&(O=O.responseEnd,C+=gt*(O<T?1:(T-st)/(O-st)))}if(--u,r+=8*(_+C)/(g.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var up=null,dp=null;function mh(i){return i.nodeType===9?i:i.ownerDocument}function D_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function k_(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function fp(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var pp=null;function Hx(){var i=window.event;return i&&i.type==="popstate"?i===pp?!1:(pp=i,!0):(pp=null,!1)}var j_=typeof setTimeout=="function"?setTimeout:void 0,Dx=typeof clearTimeout=="function"?clearTimeout:void 0,O_=typeof Promise=="function"?Promise:void 0,kx=typeof queueMicrotask=="function"?queueMicrotask:typeof O_<"u"?function(i){return O_.resolve(null).then(i).catch(jx)}:j_;function jx(i){setTimeout(function(){throw i})}function wr(i){return i==="head"}function R_(i,r){var o=r,u=0;do{var g=o.nextSibling;if(i.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"||o==="/&"){if(u===0){i.removeChild(g),go(r);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Ea(i.ownerDocument.documentElement);else if(o==="head"){o=i.ownerDocument.head,Ea(o);for(var _=o.firstChild;_;){var C=_.nextSibling,T=_.nodeName;_[bn]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&_.rel.toLowerCase()==="stylesheet"||o.removeChild(_),_=C}}else o==="body"&&Ea(i.ownerDocument.body);o=g}while(o);go(r)}function z_(i,r){var o=i;i=0;do{var u=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(i===0)break;i--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||i++;o=u}while(o)}function gp(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":gp(o),xn(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function Ox(i,r,o,u){for(;i.nodeType===1;){var g=o;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[bn])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var _=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=LA(i.nextSibling),i===null)break}return null}function Rx(i,r,o){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=LA(i.nextSibling),i===null))return null;return i}function V_(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=LA(i.nextSibling),i===null))return null;return i}function mp(i){return i.data==="$?"||i.data==="$~"}function _p(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function zx(i,r){var o=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||o.readyState!=="loading")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function LA(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var vp=null;function P_(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var o=i.data;if(o==="/$"||o==="/&"){if(r===0)return LA(i.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}i=i.nextSibling}return null}function K_(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return i;r--}else o!=="/$"&&o!=="/&"||r++}i=i.previousSibling}return null}function G_(i,r,o){switch(r=mh(o),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Ea(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);xn(i)}var HA=new Map,W_=new Set;function _h(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var zn=E.d;E.d={f:Vx,r:Px,D:Kx,C:Gx,L:Wx,m:$x,X:Yx,S:Xx,M:Jx};function Vx(){var i=zn.f(),r=ah();return i||r}function Px(i){var r=Ys(i);r!==null&&r.tag===5&&r.type==="form"?c0(r):zn.r(i)}var uo=typeof document>"u"?null:document;function $_(i,r,o){var u=uo;if(u&&typeof r=="string"&&r){var g=Fs(r);g='link[rel="'+i+'"][href="'+g+'"]',typeof o=="string"&&(g+='[crossorigin="'+o+'"]'),W_.has(g)||(W_.add(g),i={rel:i,crossOrigin:o,href:r},u.querySelector(g)===null&&(r=u.createElement("link"),Qi(r,"link",i),Ks(r),u.head.appendChild(r)))}}function Kx(i){zn.D(i),$_("dns-prefetch",i,null)}function Gx(i,r){zn.C(i,r),$_("preconnect",i,r)}function Wx(i,r,o){zn.L(i,r,o);var u=uo;if(u&&i&&r){var g='link[rel="preload"][as="'+Fs(r)+'"]';r==="image"&&o&&o.imageSrcSet?(g+='[imagesrcset="'+Fs(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(g+='[imagesizes="'+Fs(o.imageSizes)+'"]')):g+='[href="'+Fs(i)+'"]';var _=g;switch(r){case"style":_=fo(i);break;case"script":_=po(i)}HA.has(_)||(i=m({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:i,as:r},o),HA.set(_,i),u.querySelector(g)!==null||r==="style"&&u.querySelector(Ta(_))||r==="script"&&u.querySelector(Qa(_))||(r=u.createElement("link"),Qi(r,"link",i),Ks(r),u.head.appendChild(r)))}}function $x(i,r){zn.m(i,r);var o=uo;if(o&&i){var u=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+Fs(u)+'"][href="'+Fs(i)+'"]',_=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=po(i)}if(!HA.has(_)&&(i=m({rel:"modulepreload",href:i},r),HA.set(_,i),o.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Qa(_)))return}u=o.createElement("link"),Qi(u,"link",i),Ks(u),o.head.appendChild(u)}}}function Xx(i,r,o){zn.S(i,r,o);var u=uo;if(u&&i){var g=ln(u).hoistableStyles,_=fo(i);r=r||"default";var C=g.get(_);if(!C){var T={loading:0,preload:null};if(C=u.querySelector(Ta(_)))T.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":r},o),(o=HA.get(_))&&Bp(i,o);var O=C=u.createElement("link");Ks(O),Qi(O,"link",i),O._p=new Promise(function(st,gt){O.onload=st,O.onerror=gt}),O.addEventListener("load",function(){T.loading|=1}),O.addEventListener("error",function(){T.loading|=2}),T.loading|=4,vh(C,r,u)}C={type:"stylesheet",instance:C,count:1,state:T},g.set(_,C)}}}function Yx(i,r){zn.X(i,r);var o=uo;if(o&&i){var u=ln(o).hoistableScripts,g=po(i),_=u.get(g);_||(_=o.querySelector(Qa(g)),_||(i=m({src:i,async:!0},r),(r=HA.get(g))&&wp(i,r),_=o.createElement("script"),Ks(_),Qi(_,"link",i),o.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function Jx(i,r){zn.M(i,r);var o=uo;if(o&&i){var u=ln(o).hoistableScripts,g=po(i),_=u.get(g);_||(_=o.querySelector(Qa(g)),_||(i=m({src:i,async:!0,type:"module"},r),(r=HA.get(g))&&wp(i,r),_=o.createElement("script"),Ks(_),Qi(_,"link",i),o.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function X_(i,r,o,u){var g=(g=xt.current)?_h(g):null;if(!g)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=fo(o.href),o=ln(g).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=fo(o.href);var _=ln(g).hoistableStyles,C=_.get(i);if(C||(g=g.ownerDocument||g,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,C),(_=g.querySelector(Ta(i)))&&!_._p&&(C.instance=_,C.state.loading=5),HA.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},HA.set(i,o),_||qx(g,i,o,C.state))),r&&u===null)throw Error(s(528,""));return C}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=po(o),o=ln(g).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function fo(i){return'href="'+Fs(i)+'"'}function Ta(i){return'link[rel="stylesheet"]['+i+"]"}function Y_(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function qx(i,r,o,u){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=i.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),Qi(r,"link",o),Ks(r),i.head.appendChild(r))}function po(i){return'[src="'+Fs(i)+'"]'}function Qa(i){return"script[async]"+i}function J_(i,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=i.querySelector('style[data-href~="'+Fs(o.href)+'"]');if(u)return r.instance=u,Ks(u),u;var g=m({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Ks(u),Qi(u,"style",g),vh(u,o.precedence,i),r.instance=u;case"stylesheet":g=fo(o.href);var _=i.querySelector(Ta(g));if(_)return r.state.loading|=4,r.instance=_,Ks(_),_;u=Y_(o),(g=HA.get(g))&&Bp(u,g),_=(i.ownerDocument||i).createElement("link"),Ks(_);var C=_;return C._p=new Promise(function(T,O){C.onload=T,C.onerror=O}),Qi(_,"link",u),r.state.loading|=4,vh(_,o.precedence,i),r.instance=_;case"script":return _=po(o.src),(g=i.querySelector(Qa(_)))?(r.instance=g,Ks(g),g):(u=o,(g=HA.get(_))&&(u=m({},o),wp(u,g)),i=i.ownerDocument||i,g=i.createElement("script"),Ks(g),Qi(g,"link",u),i.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,vh(u,o.precedence,i));return r.instance}function vh(i,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,_=g,C=0;C<u.length;C++){var T=u[C];if(T.dataset.precedence===r)_=T;else if(_!==g)break}_?_.parentNode.insertBefore(i,_.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(i,r.firstChild))}function Bp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function wp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Bh=null;function q_(i,r,o){if(Bh===null){var u=new Map,g=Bh=new Map;g.set(o,u)}else g=Bh,u=g.get(o),u||(u=new Map,g.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),g=0;g<o.length;g++){var _=o[g];if(!(_[bn]||_[ue]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var C=_.getAttribute(r)||"";C=i+C;var T=u.get(C);T?T.push(_):u.set(C,[_])}}return u}function Z_(i,r,o){i=i.ownerDocument||i,i.head.insertBefore(o,r==="title"?i.querySelector("head > title"):null)}function Zx(i,r,o){if(o===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(i=r.disabled,typeof r.precedence=="string"&&i==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function tv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function t5(i,r,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=fo(u.href),_=r.querySelector(Ta(g));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=wh.bind(i),r.then(i,i)),o.state.loading|=4,o.instance=_,Ks(_);return}_=r.ownerDocument||r,u=Y_(u),(g=HA.get(g))&&Bp(u,g),_=_.createElement("link"),Ks(_);var C=_;C._p=new Promise(function(T,O){C.onload=T,C.onerror=O}),Qi(_,"link",u),o.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(i.count++,o=wh.bind(i),r.addEventListener("load",o),r.addEventListener("error",o))}}var yp=0;function e5(i,r){return i.stylesheets&&i.count===0&&Ch(i,i.stylesheets),0<i.count||0<i.imgCount?function(o){var u=setTimeout(function(){if(i.stylesheets&&Ch(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+r);0<i.imgBytes&&yp===0&&(yp=62500*Lx());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Ch(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>yp?50:800)+r);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function wh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ch(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var yh=null;function Ch(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,yh=new Map,r.forEach(s5,i),yh=null,wh.call(i))}function s5(i,r){if(!(r.state.loading&4)){var o=yh.get(i);if(o)var u=o.get(null);else{o=new Map,yh.set(i,o);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<g.length;_++){var C=g[_];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(o.set(C.dataset.precedence,C),u=C)}u&&o.set(null,u)}g=r.instance,C=g.getAttribute("data-precedence"),_=o.get(C)||u,_===u&&o.set(null,g),o.set(C,g),this.count++,u=wh.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),_?_.parentNode.insertBefore(g,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),r.state.loading|=4}}var Fa={$$typeof:M,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function i5(i,r,o,u,g,_,C,T,O){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=De(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=De(0),this.hiddenUpdates=De(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=_,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function ev(i,r,o,u,g,_,C,T,O,st,gt,Ct){return i=new i5(i,r,o,C,O,st,gt,Ct,T),r=1,_===!0&&(r|=24),_=_A(3,null,null,r),i.current=_,_.stateNode=i,r=tf(),r.refCount++,i.pooledCache=r,r.refCount++,_.memoizedState={element:u,isDehydrated:o,cache:r},nf(_),i}function sv(i){return i?(i=Kl,i):Kl}function iv(i,r,o,u,g,_){g=sv(g),u.context===null?u.context=g:u.pendingContext=g,u=cr(r),u.payload={element:o},_=_===void 0?null:_,_!==null&&(u.callback=_),o=hr(i,u,r),o!==null&&(uA(o,i,r),oa(o,i,r))}function Av(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<r?o:r}}function Cp(i,r){Av(i,r),(i=i.alternate)&&Av(i,r)}function nv(i){if(i.tag===13||i.tag===31){var r=sl(i,67108864);r!==null&&uA(r,i,67108864),Cp(i,67108864)}}function rv(i){if(i.tag===13||i.tag===31){var r=CA();r=An(r);var o=sl(i,r);o!==null&&uA(o,i,r),Cp(i,r)}}var bh=!0;function A5(i,r,o,u){var g=W.T;W.T=null;var _=E.p;try{E.p=2,bp(i,r,o,u)}finally{E.p=_,W.T=g}}function n5(i,r,o,u){var g=W.T;W.T=null;var _=E.p;try{E.p=8,bp(i,r,o,u)}finally{E.p=_,W.T=g}}function bp(i,r,o,u){if(bh){var g=xp(u);if(g===null)cp(i,r,u,xh,o),ov(i,u);else if(l5(g,i,r,o,u))u.stopPropagation();else if(ov(i,u),r&4&&-1<r5.indexOf(i)){for(;g!==null;){var _=Ys(g);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var C=ce(_.pendingLanes);if(C!==0){var T=_;for(T.pendingLanes|=2,T.entangledLanes|=2;C;){var O=1<<31-hs(C);T.entanglements[1]|=O,C&=~O}dn(_),(as&6)===0&&(lh=Fe()+500,ba(0))}}break;case 31:case 13:T=sl(_,2),T!==null&&uA(T,_,2),ah(),Cp(_,2)}if(_=xp(u),_===null&&cp(i,r,u,xh,o),_===g)break;g=_}g!==null&&u.stopPropagation()}else cp(i,r,u,null,o)}}function xp(i){return i=Ns(i),Sp(i)}var xh=null;function Sp(i){if(xh=null,i=PA(i),i!==null){var r=l(i);if(r===null)i=null;else{var o=r.tag;if(o===13){if(i=a(r),i!==null)return i;i=null}else if(o===31){if(i=c(r),i!==null)return i;i=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return xh=i,null}function lv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ss()){case Ss:return 2;case wt:return 8;case jt:case he:return 32;case Zt:return 268435456;default:return 32}default:return 32}}var Ep=!1,yr=null,Cr=null,br=null,Ua=new Map,Ma=new Map,xr=[],r5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ov(i,r){switch(i){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":Cr=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":Ua.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ma.delete(r.pointerId)}}function Ia(i,r,o,u,g,_){return i===null||i.nativeEvent!==_?(i={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:_,targetContainers:[g]},r!==null&&(r=Ys(r),r!==null&&nv(r)),i):(i.eventSystemFlags|=u,r=i.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),i)}function l5(i,r,o,u,g){switch(r){case"focusin":return yr=Ia(yr,i,r,o,u,g),!0;case"dragenter":return Cr=Ia(Cr,i,r,o,u,g),!0;case"mouseover":return br=Ia(br,i,r,o,u,g),!0;case"pointerover":var _=g.pointerId;return Ua.set(_,Ia(Ua.get(_)||null,i,r,o,u,g)),!0;case"gotpointercapture":return _=g.pointerId,Ma.set(_,Ia(Ma.get(_)||null,i,r,o,u,g)),!0}return!1}function av(i){var r=PA(i.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=a(o),r!==null){i.blockedOn=r,Se(i.priority,function(){rv(o)});return}}else if(r===31){if(r=c(o),r!==null){i.blockedOn=r,Se(i.priority,function(){rv(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Sh(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var o=xp(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);ve=u,o.target.dispatchEvent(u),ve=null}else return r=Ys(o),r!==null&&nv(r),i.blockedOn=o,!1;r.shift()}return!0}function cv(i,r,o){Sh(i)&&o.delete(r)}function o5(){Ep=!1,yr!==null&&Sh(yr)&&(yr=null),Cr!==null&&Sh(Cr)&&(Cr=null),br!==null&&Sh(br)&&(br=null),Ua.forEach(cv),Ma.forEach(cv)}function Eh(i,r){i.blockedOn===r&&(i.blockedOn=null,Ep||(Ep=!0,A.unstable_scheduleCallback(A.unstable_NormalPriority,o5)))}var Th=null;function hv(i){Th!==i&&(Th=i,A.unstable_scheduleCallback(A.unstable_NormalPriority,function(){Th===i&&(Th=null);for(var r=0;r<i.length;r+=3){var o=i[r],u=i[r+1],g=i[r+2];if(typeof u!="function"){if(Sp(u||o)===null)continue;break}var _=Ys(o);_!==null&&(i.splice(r,3),r-=3,xf(_,{pending:!0,data:g,method:o.method,action:u},u,g))}}))}function go(i){function r(O){return Eh(O,i)}yr!==null&&Eh(yr,i),Cr!==null&&Eh(Cr,i),br!==null&&Eh(br,i),Ua.forEach(r),Ma.forEach(r);for(var o=0;o<xr.length;o++){var u=xr[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<xr.length&&(o=xr[0],o.blockedOn===null);)av(o),o.blockedOn===null&&xr.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var g=o[u],_=o[u+1],C=g[Ai]||null;if(typeof _=="function")C||hv(o);else if(C){var T=null;if(_&&_.hasAttribute("formAction")){if(g=_,C=_[Ai]||null)T=C.formAction;else if(Sp(g)!==null)continue}else T=C.action;typeof T=="function"?o[u+1]=T:(o.splice(u,3),u-=3),hv(o)}}}function uv(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(C){return g=C})},focusReset:"manual",scroll:"manual"})}function r(){g!==null&&(g(),g=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),g!==null&&(g(),g=null)}}}function Tp(i){this._internalRoot=i}Qh.prototype.render=Tp.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var o=r.current,u=CA();iv(o,u,i,r,null,null)},Qh.prototype.unmount=Tp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;iv(i.current,2,null,i,null,null),ah(),r[Ri]=null}};function Qh(i){this._internalRoot=i}Qh.prototype.unstable_scheduleHydration=function(i){if(i){var r=je();i={blockedOn:null,target:i,priority:r};for(var o=0;o<xr.length&&r!==0&&r<xr[o].priority;o++);xr.splice(o,0,i),o===0&&av(i)}};var dv=t.version;if(dv!=="19.2.3")throw Error(s(527,dv,"19.2.3"));E.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=f(r),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var a5={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fh.isDisabled&&Fh.supportsFiber)try{$e=Fh.inject(a5),ls=Fh}catch{}}return La.createRoot=function(i,r){if(!n(i))throw Error(s(299));var o=!1,u="",g=B0,_=w0,C=y0;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError)),r=ev(i,1,!1,null,null,o,u,null,g,_,C,uv),i[Ri]=r.current,ap(i),new Tp(r)},La.hydrateRoot=function(i,r,o){if(!n(i))throw Error(s(299));var u=!1,g="",_=B0,C=w0,T=y0,O=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(_=o.onUncaughtError),o.onCaughtError!==void 0&&(C=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.formState!==void 0&&(O=o.formState)),r=ev(i,1,!0,r,o??null,u,g,O,_,C,T,uv),r.context=sv(null),o=r.current,u=CA(),u=An(u),g=cr(u),g.callback=null,hr(o,g,u),o=u,r.current.lanes=o,AA(r,o),dn(r),i[Ri]=r.current,ap(i),new Qh(r)},La.version="19.2.3",La}var Cv;function _5(){if(Cv)return Up.exports;Cv=1;function A(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(A)}catch(t){console.error(t)}}return A(),Up.exports=m5(),Up.exports}var v5=_5();const B5="_container_ip541_1",w5="_mobile_ip541_19",y5="_topbarArea_ip541_33",C5="_mainArea_ip541_47",b5="_leftToolbarArea_ip541_61",x5="_leftToolbarHidden_ip541_85",S5="_centerArea_ip541_97",E5="_chartArea_ip541_115",T5="_bottomBarArea_ip541_137",Q5="_watchlistArea_ip541_151",F5="_resizeHandle_ip541_171",U5="_resizeHandleActive_ip541_223",M5="_watchlistMobile_ip541_243",I5="_watchlistHidden_ip541_269",N5="_watchlistOverlay_ip541_279",L5="_optionsPanelArea_ip541_299",H5="_rightToolbarArea_ip541_313",Fi={container:B5,mobile:w5,topbarArea:y5,mainArea:C5,leftToolbarArea:b5,leftToolbarHidden:x5,centerArea:S5,chartArea:E5,bottomBarArea:T5,watchlistArea:Q5,resizeHandle:F5,resizeHandleActive:U5,watchlistMobile:M5,watchlistHidden:I5,watchlistOverlay:N5,optionsPanelArea:L5,rightToolbarArea:H5},D5=({leftToolbar:A,drawingPropertiesPanel:t,topbar:e,chart:s,bottomBar:n,watchlist:l,optionsPanel:a,rightToolbar:c,mobileNav:d,isLeftToolbarVisible:f=!0,isMobile:p=!1,isWatchlistVisible:m=!0,onWatchlistOverlayClick:v,watchlistWidth:w,onWatchlistWidthChange:y})=>{const[b,S]=B.useState(()=>{const V=localStorage.getItem("tv_watchlist_width");return V?parseInt(V,10):320}),[x,U]=B.useState(!1),M=B.useRef(0),N=B.useRef(0),I=w??b,R=y??S,D=B.useCallback(V=>{V.preventDefault(),U(!0),M.current=V.clientX,N.current=I,document.body.style.cursor="ew-resize",document.body.style.userSelect="none"},[I]);return B.useEffect(()=>{if(!x)return;const V=dt=>{const At=M.current-dt.clientX,ft=Math.min(600,Math.max(200,N.current+At));R(ft)},lt=()=>{U(!1),document.body.style.cursor="",document.body.style.userSelect="",localStorage.setItem("tv_watchlist_width",I.toString())};return document.addEventListener("mousemove",V),document.addEventListener("mouseup",lt),()=>{document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",lt)}},[x,R,I]),h.jsxs("div",{className:`${Fi.container} ${p?Fi.mobile:""}`,children:[h.jsx("a",{href:"#main-chart",className:"skip-link",children:"Skip to chart"}),h.jsx("div",{className:Fi.topbarArea,children:e}),h.jsxs("div",{className:Fi.mainArea,children:[!p&&h.jsx("div",{className:`${Fi.leftToolbarArea} ${f?"":Fi.leftToolbarHidden}`,children:A}),!p&&t,h.jsxs("div",{className:Fi.centerArea,children:[h.jsx("div",{id:"main-chart",className:Fi.chartArea,tabIndex:"-1",children:s}),!p&&h.jsx("div",{className:Fi.bottomBarArea,children:n})]}),l&&h.jsxs(h.Fragment,{children:[p&&m&&h.jsx("div",{className:Fi.watchlistOverlay,onClick:v,"aria-hidden":"true"}),h.jsxs("div",{className:`${Fi.watchlistArea} ${p?Fi.watchlistMobile:""} ${p&&!m?Fi.watchlistHidden:""}`,style:p?void 0:{width:I},children:[!p&&h.jsx("div",{className:`${Fi.resizeHandle} ${x?Fi.resizeHandleActive:""}`,onMouseDown:D,title:"Drag to resize"}),l]})]}),a&&h.jsx("div",{className:Fi.optionsPanelArea,children:a}),!p&&c&&h.jsx("div",{className:Fi.rightToolbarArea,children:c})]}),p&&d]})},k5="_layoutAreaTop_8mdt4_1",j5="_toolbar_8mdt4_21",O5="_overflowWrap_8mdt4_33",R5="_inner_8mdt4_43",z5="_wrapOverflow_8mdt4_59",V5="_wrap_8mdt4_59",P5="_scrollWrap_8mdt4_83",K5="_content_8mdt4_113",G5="_innerWrap_8mdt4_127",W5="_group_8mdt4_141",$5="_separatorWrap_8mdt4_153",X5="_separator_8mdt4_153",Y5="_button_8mdt4_181",J5="_isActive_8mdt4_235",q5="_iconButton_8mdt4_245",Z5="_menuButton_8mdt4_255",tS="_text_8mdt4_265",eS="_uppercase_8mdt4_275",sS="_symbolButton_8mdt4_285",iS="_intervalGroup_8mdt4_305",AS="_radioGroup_8mdt4_321",nS="_intervalButton_8mdt4_335",rS="_isGrouped_8mdt4_347",lS="_buttonText_8mdt4_381",oS="_value_8mdt4_393",aS="_intervalMenuButton_8mdt4_403",cS="_chartTypeSection_8mdt4_421",hS="_indicatorBtn_8mdt4_423",uS="_addCustomBtn_8mdt4_435",dS="_indicatorDropdown_8mdt4_467",fS="_dropdownSection_8mdt4_493",pS="_dropdownDivider_8mdt4_511",gS="_dropdown_8mdt4_493",mS="_dropdownItem_8mdt4_547",_S="_active_8mdt4_575",vS="_settingsItem_8mdt4_585",BS="_withIcon_8mdt4_623",wS="_icon_8mdt4_245",yS="_rightSection_8mdt4_647",CS="_fill_8mdt4_663",bS="_arrow_8mdt4_685",xS="_customInputForm_8mdt4_709",SS="_customHeader_8mdt4_721",ES="_closeIcon_8mdt4_739",TS="_customBody_8mdt4_757",QS="_numInput_8mdt4_767",FS="_unitSelect_8mdt4_785",US="_addBtn_8mdt4_801",MS="_scrollableList_8mdt4_829",IS="_sectionHeader_8mdt4_841",NS="_caret_8mdt4_875",LS="_expanded_8mdt4_891",HS="_itemActions_8mdt4_941",DS="_itemLabel_8mdt4_953",kS="_starIcon_8mdt4_961",jS="_filled_8mdt4_981",OS="_trashIcon_8mdt4_1313",RS="_themeToggle_8mdt4_1341",zS="_snapshotSection_8mdt4_1367",VS="_snapshotDropdown_8mdt4_1379",PS="_snapshotHeader_8mdt4_1401",KS="_snapshotItem_8mdt4_1417",P={layoutAreaTop:k5,toolbar:j5,overflowWrap:O5,inner:R5,wrapOverflow:z5,wrap:V5,scrollWrap:P5,content:K5,innerWrap:G5,group:W5,separatorWrap:$5,separator:X5,button:Y5,isActive:J5,iconButton:q5,menuButton:Z5,text:tS,uppercase:eS,symbolButton:sS,intervalGroup:iS,radioGroup:AS,intervalButton:nS,isGrouped:rS,buttonText:lS,value:oS,intervalMenuButton:aS,chartTypeSection:cS,indicatorBtn:hS,addCustomBtn:uS,indicatorDropdown:dS,dropdownSection:fS,dropdownDivider:pS,dropdown:gS,dropdownItem:mS,active:_S,settingsItem:vS,withIcon:BS,icon:wS,rightSection:yS,fill:CS,arrow:bS,customInputForm:xS,customHeader:SS,closeIcon:ES,customBody:TS,numInput:QS,unitSelect:FS,addBtn:US,scrollableList:MS,sectionHeader:IS,caret:NS,expanded:LS,itemActions:HS,itemLabel:DS,starIcon:kS,filled:jS,trashIcon:OS,themeToggle:RS,snapshotSection:zS,snapshotDropdown:VS,snapshotHeader:PS,snapshotItem:KS};var Lp={exports:{}};var bv;function GS(){return bv||(bv=1,(function(A){(function(){var t={}.hasOwnProperty;function e(){for(var l="",a=0;a<arguments.length;a++){var c=arguments[a];c&&(l=n(l,s(c)))}return l}function s(l){if(typeof l=="string"||typeof l=="number")return l;if(typeof l!="object")return"";if(Array.isArray(l))return e.apply(null,l);if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]"))return l.toString();var a="";for(var c in l)t.call(l,c)&&l[c]&&(a=n(a,c));return a}function n(l,a){return a?l?l+" "+a:l+a:l}A.exports?(e.default=e,A.exports=e):window.classNames=e})()})(Lp)),Lp.exports}var WS=GS();const Tt=E1(WS),Za=A=>{if(!A||typeof A!="string")return 60;const t=A.trim(),e=t.slice(-1),s=parseFloat(t.slice(0,-1));if(Number.isNaN(s)||s<=0)return 60;const n={m:60,h:3600,d:86400,w:604800,M:2592e3},l=n[e]?e:e.toLowerCase(),a=n[l]??60;return s*a},Xi={DEBUG:0,INFO:1,WARN:2,ERROR:3,NONE:4},w2={[Xi.DEBUG]:"Debug (All logs)",[Xi.INFO]:"Info",[Xi.WARN]:"Warnings only",[Xi.ERROR]:"Errors only",[Xi.NONE]:"None (Silent)"},$S=()=>{const A=localStorage.getItem("oa_log_level");if(A!==null){const t=parseInt(A,10);if(!isNaN(t)&&t>=0&&t<=4)return t}return Xi.WARN};let Nr=$S();const XS=A=>{A>=Xi.DEBUG&&A<=Xi.NONE&&(Nr=A,localStorage.setItem("oa_log_level",A.toString()),A<Xi.NONE&&console.log(`[Logger] Log level set to: ${w2[A]}`))},YS=()=>Nr,kt={debug:(...A)=>{Nr<=Xi.DEBUG&&console.log(...A)},info:(...A)=>{Nr<=Xi.INFO&&console.log(...A)},warn:(...A)=>{Nr<=Xi.WARN&&console.warn(...A)},error:(...A)=>{Nr<=Xi.ERROR&&console.error(...A)},group:A=>{Nr<=Xi.DEBUG&&console.group(A)},groupEnd:()=>{Nr<=Xi.DEBUG&&console.groupEnd()}},mn={CONNECTING:"connecting",CONNECTED:"connected",RECONNECTING:"reconnecting",DISCONNECTED:"disconnected"};let Pg=mn.DISCONNECTED;const Kg=new Set,mo=A=>{Pg!==A&&(Pg=A,Kg.forEach(t=>t(A)))},JS=A=>(Kg.add(A),A(Pg),()=>{Kg.delete(A)}),qS="http://127.0.0.1:5000",ZS="127.0.0.1:8765",_n=new Set,t4=()=>{kt.debug("[WebSocket] Closing all active connections:",_n.size),_n.forEach(A=>{try{A&&typeof A.close=="function"&&A.close()}catch(t){kt.debug("[WebSocket] Error closing connection:",t)}}),_n.clear()},xv=()=>{kt.debug("[WebSocket] Force closing all active connections:",_n.size),_n.forEach(A=>{try{A&&typeof A.forceClose=="function"?A.forceClose():A&&typeof A.close=="function"&&A.close()}catch{}}),_n.clear()},Q1=()=>localStorage.getItem("oa_host_url")||qS,e4=()=>!1,qn=()=>e4()?"/api/v1":`${Q1()}/api/v1`,$o=()=>`${Q1()}/auth/login`,y2=()=>{const A=localStorage.getItem("oa_ws_url")||ZS;let s=`${Q1().startsWith("https://")?"wss://":"ws://"}${A}`;return!s.endsWith("/ws")&&!s.endsWith("/ws/")&&(s=`${s}/ws`),s},C2=async()=>{try{const A=localStorage.getItem("oa_apikey");return!(!A||A.trim()==="")}catch(A){return console.error("Auth check failed:",A),!1}},Bn=()=>localStorage.getItem("oa_apikey")||"",Mu=A=>({"1d":"D","1w":"W","1M":"M",D:"D",W:"W",M:"M"})[A]||A,b2=(A,t)=>{const{onMessage:e,subscriptions:s=[],mode:n=2}=t;let l=null,a=!1,c=0,d=!1;const f=5,p=Bn(),m=()=>{!l||l.readyState!==WebSocket.OPEN||!d||s.forEach(b=>{const S={action:"subscribe",symbol:b.symbol,exchange:b.exchange||"NSE",mode:n};kt.debug("[WebSocket] Subscribing:",S),l.send(JSON.stringify(S))})},v=()=>{!l||l.readyState!==WebSocket.OPEN||s.forEach(b=>{const S={action:"unsubscribe",symbol:b.symbol,exchange:b.exchange||"NSE"};kt.debug("[WebSocket] Unsubscribing:",S);try{l.send(JSON.stringify(S))}catch(x){kt.debug("[WebSocket] Error sending unsubscribe (expected during close):",x)}})},w=()=>{const b=typeof A=="function"?A():A;d=!1,mo(c>0?mn.RECONNECTING:mn.CONNECTING);try{l=new WebSocket(b)}catch(S){console.error("[WebSocket] Failed to create WebSocket:",S),mo(mn.DISCONNECTED);return}l.onopen=()=>{kt.debug("[WebSocket] Connected, authenticating..."),c=0;const S={action:"authenticate",api_key:p};kt.debug("[WebSocket] Sending auth:",{action:"authenticate",api_key:"***"}),l.send(JSON.stringify(S))},l.onmessage=S=>{try{const x=JSON.parse(S.data);if(kt.debug("[WebSocket] Received message:",x),x.type==="ping"){l.send(JSON.stringify({type:"pong"}));return}if(x.type==="auth"&&x.status==="success"||x.type==="authenticated"||x.status==="authenticated"){kt.debug("[WebSocket] Authenticated successfully, broker:",x.broker),d=!0,mo(mn.CONNECTED),m();return}if(x.type==="error"||x.type==="auth"&&x.status!=="success"){console.error("[WebSocket] Error:",x.message||x.code);return}e&&e(x)}catch(x){console.error("[WebSocket] Error parsing message:",x)}},l.onerror=S=>{console.error("[WebSocket] Error:",S)},l.onclose=S=>{if(d=!1,a){mo(mn.DISCONNECTED);return}if(!S.wasClean&&c<f){const x=Math.min(1e3*2**c,1e4);kt.debug(`[WebSocket] Reconnecting in ${x}ms (attempt ${c+1}/${f})`),mo(mn.RECONNECTING),c+=1,setTimeout(w,x)}else mo(mn.DISCONNECTED)}};w();const y={close:()=>{a=!0,_n.delete(y),l&&l.readyState===WebSocket.OPEN?(kt.debug("[WebSocket] Sending unsubscribe messages before close..."),v(),setTimeout(()=>{l&&(l.readyState===WebSocket.OPEN||l.readyState===WebSocket.CONNECTING)&&l.close()},100)):l&&l.readyState===WebSocket.CONNECTING&&l.close()},forceClose:()=>{a=!0,_n.delete(y),l&&(l.readyState===WebSocket.OPEN||l.readyState===WebSocket.CONNECTING)&&l.close()},unsubscribe:b=>{!l||l.readyState!==WebSocket.OPEN||b.forEach(S=>{const x={action:"unsubscribe",symbol:typeof S=="string"?S:S.symbol,exchange:typeof S=="string"?"NSE":S.exchange||"NSE"};kt.debug("[WebSocket] Unsubscribing:",x);try{l.send(JSON.stringify(x))}catch(U){console.error("[WebSocket] Error sending unsubscribe:",U)}})},get readyState(){return l?l.readyState:WebSocket.CLOSED},get isAuthenticated(){return d}};return _n.add(y),kt.debug("[WebSocket] Registered in global registry. Total active:",_n.size),y},yu=async(A,t="NSE",e="1d",s=1e3,n)=>{try{const l=new Date,a=new Date;e.includes("h")?a.setDate(a.getDate()-180):e.includes("m")?a.setDate(a.getDate()-10):/^(W|1w|M|1M)$/i.test(e)?a.setFullYear(a.getFullYear()-10):a.setFullYear(a.getFullYear()-2);const c=m=>m.toISOString().split("T")[0],d=await fetch(`${qn()}/history`,{method:"POST",headers:{"Content-Type":"application/json"},signal:n,body:JSON.stringify({apikey:Bn(),symbol:A,exchange:t,interval:Mu(e),start_date:c(a),end_date:c(l)})});if(kt.debug("[OpenAlgo] History request:",{symbol:A,exchange:t,interval:Mu(e),start_date:c(a),end_date:c(l)}),!d.ok){if(d.status===401)return window.location.href=$o(),[];throw new Error(`OpenAlgo history error: ${d.status} ${d.statusText}`)}const f=await d.json();kt.debug("[OpenAlgo] History response:",f);const p=19800;return f&&f.data&&Array.isArray(f.data)?f.data.map(m=>{let v;return typeof m.timestamp=="number"?v=m.timestamp+p:m.date||m.datetime?v=new Date(m.date||m.datetime).getTime()/1e3+p:v=0,{time:v,open:parseFloat(m.open),high:parseFloat(m.high),low:parseFloat(m.low),close:parseFloat(m.close),volume:parseFloat(m.volume||0)}}).filter(m=>m.time>0&&[m.open,m.high,m.low,m.close].every(v=>Number.isFinite(v))):[]}catch(l){return l.name!=="AbortError"&&console.error("Error fetching klines:",l),[]}},x2=async(A,t="NSE",e)=>{try{const s=await fetch(`${qn()}/quotes`,{method:"POST",headers:{"Content-Type":"application/json"},signal:e,body:JSON.stringify({apikey:Bn(),symbol:A,exchange:t})});if(!s.ok){if(s.status===401)return window.location.href=$o(),null;throw new Error(`OpenAlgo quotes error: ${s.status} ${s.statusText}`)}const n=await s.json();if(kt.debug("[OpenAlgo] Quotes request:",{symbol:A,exchange:t}),kt.debug("[OpenAlgo] Quotes response:",n),n&&n.data){const l=n.data,a=parseFloat(l.ltp||l.last_price||0);let c=parseFloat(l.prev_close||l.previous_close||0);c<=0&&(c=parseFloat(l.open||a),kt.debug("[OpenAlgo] prev_close unavailable, using open as fallback:",c));const d=a-c,f=c>0?d/c*100:0;return window._prevCloseCache||(window._prevCloseCache={}),window._prevCloseCache[`${A}:${t}`]=c,{lastPrice:a.toString(),priceChange:d.toFixed(2),priceChangePercent:f.toFixed(2),symbol:A}}return null}catch(s){return s.name!=="AbortError"&&console.error("Error fetching ticker price:",s),null}},Sv=19800,Gg=(A,t="NSE",e,s)=>b2(y2,{subscriptions:[{symbol:A,exchange:t}],mode:2,onMessage:l=>{if(l.type!=="market_data"||l.symbol!==A)return;const a=l.data||{},c=parseFloat(a.ltp||a.last_price||0);if(c>0){let d,f;a.timestamp?(f=Math.floor(a.timestamp/1e3),d=f+Sv):(f=Math.floor(Date.now()/1e3),d=f+Sv);const p={time:d,brokerTimestamp:f,open:parseFloat(a.open||c),high:parseFloat(a.high||c),low:parseFloat(a.low||c),close:c,volume:parseFloat(a.volume||0)};kt.debug("[WebSocket] Quote for",A,":",{time:p.time,brokerTimestamp:p.brokerTimestamp,ltp:c}),s(p)}}}),uc=(A,t)=>{if(!A||A.length===0)return null;const e=A.map(s=>typeof s=="string"?{symbol:s,exchange:"NSE"}:{symbol:s.symbol,exchange:s.exchange||"NSE"});return b2(y2,{subscriptions:e,mode:2,onMessage:s=>{if(s.type!=="market_data"||!s.symbol)return;const n=s.data||{},l=parseFloat(n.ltp||n.last_price||0),a=s.exchange||"NSE";if(l>0){const c=`${s.symbol}:${a}`,f=window._prevCloseCache?.[c]||parseFloat(n.open||l),p=l-f,m=f>0?p/f*100:0;t({symbol:s.symbol,exchange:a,last:l,open:parseFloat(n.open||f),volume:parseFloat(n.volume||0),chg:p,chgP:m})}}})},F1=async(A,t,e)=>{try{const s={apikey:Bn(),query:A};t&&(s.exchange=t),e&&(s.instrumenttype=e);const n=await fetch(`${qn()}/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){if(n.status===401)return window.location.href=$o(),[];throw new Error(`OpenAlgo search error: ${n.status}`)}const l=await n.json();return l.data||l||[]}catch(s){return console.error("Error searching symbols:",s),[]}},S2=async()=>{try{const A=await fetch(`${qn()}/intervals`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apikey:Bn()})});if(!A.ok)return console.warn("[OpenAlgo] Intervals API returned:",A.status),null;const t=await A.json();return kt.debug("[OpenAlgo] Intervals response:",t),t&&t.data&&t.status==="success"?t.data:null}catch(A){return console.error("Error fetching intervals:",A),null}},E2=async(A,t="NSE",e="1d",s,n,l)=>{try{const a=await fetch(`${qn()}/history`,{method:"POST",headers:{"Content-Type":"application/json"},signal:l,body:JSON.stringify({apikey:Bn(),symbol:A,exchange:t,interval:Mu(e),start_date:s,end_date:n})});if(kt.debug("[OpenAlgo] Historical request:",{symbol:A,exchange:t,interval:Mu(e),start_date:s,end_date:n}),!a.ok){if(a.status===401)return window.location.href=$o(),[];throw new Error(`OpenAlgo history error: ${a.status} ${a.statusText}`)}const c=await a.json();kt.debug("[OpenAlgo] Historical response:",c);const d=19800;return c&&c.data&&Array.isArray(c.data)?c.data.map(f=>{let p;return typeof f.timestamp=="number"?p=f.timestamp+d:f.date||f.datetime?p=new Date(f.date||f.datetime).getTime()/1e3+d:p=0,{time:p,open:parseFloat(f.open),high:parseFloat(f.high),low:parseFloat(f.low),close:parseFloat(f.close),volume:parseFloat(f.volume||0)}}).filter(f=>f.time>0&&[f.open,f.high,f.low,f.close].every(p=>Number.isFinite(p))):[]}catch(a){return a.name!=="AbortError"&&console.error("Error fetching historical klines:",a),[]}},s4=async()=>{try{const A=Bn(),t=qn();if(kt.info("[OpenAlgo] fetchUserPreferences called"),kt.debug("[OpenAlgo] API Key present:",!!A,"API Base:",t),!A)return kt.warn("[OpenAlgo] fetchUserPreferences: No API key found"),{data:null,invalidApiKey:!0};const e=`${t}/chart?apikey=${encodeURIComponent(A)}`;kt.info("[OpenAlgo] Fetching preferences from:",e);const s=await fetch(e,{method:"GET",credentials:"include"});if(kt.info("[OpenAlgo] fetchUserPreferences response status:",s.status),!s.ok)return kt.warn("[OpenAlgo] Fetch preferences failed:",s.status,s.statusText),s.status===400||s.status===401||s.status===403?{data:null,invalidApiKey:!0}:{data:null,invalidApiKey:!1};const n=await s.json(),l=n.data||n;return kt.info("[OpenAlgo] fetchUserPreferences received data:",Object.keys(l||{})),{data:l,invalidApiKey:!1}}catch(A){return kt.error("[OpenAlgo] Error fetching user preferences:",A),{data:null,invalidApiKey:!1}}},T2=async A=>{try{const t=Bn(),e=qn();if(kt.info("[OpenAlgo] saveUserPreferences called with keys:",Object.keys(A||{})),kt.debug("[OpenAlgo] API Key present:",!!t,"API Base:",e),!t)return kt.warn("[OpenAlgo] saveUserPreferences: No API key found, returning false"),!1;const s=`${e}/chart`;kt.info("[OpenAlgo] Saving preferences to:",s);const n=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apikey:t,...A})});return kt.info("[OpenAlgo] saveUserPreferences response status:",n.status),n.ok?(kt.info("[OpenAlgo] saveUserPreferences success!"),!0):(kt.warn("[OpenAlgo] Save preferences failed:",n.status,n.statusText),!1)}catch(t){return kt.error("[OpenAlgo] Error saving user preferences:",t),!1}},Q2=async(A,t="NFO",e=null,s=10)=>{try{const n={apikey:Bn(),underlying:A,exchange:t,strike_count:s};e&&(n.expiry_date=e),kt.debug("[OpenAlgo] Option Chain request:",n);const l=await fetch(`${qn()}/optionchain`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!l.ok){if(l.status===401)return window.location.href=$o(),null;throw new Error(`OpenAlgo optionchain error: ${l.status} ${l.statusText}`)}const a=await l.json();return kt.debug("[OpenAlgo] Option Chain response:",a),a&&a.status==="success"?{underlying:a.underlying,underlyingLTP:parseFloat(a.underlying_ltp||0),underlyingPrevClose:parseFloat(a.underlying_prev_close||0),expiryDate:a.expiry_date,atmStrike:parseFloat(a.atm_strike||0),chain:a.chain||[]}:null}catch(n){return console.error("Error fetching option chain:",n),null}},F2=async(A,t="NFO",e={})=>{try{const s={apikey:Bn(),symbol:A,exchange:t,...e};kt.debug("[OpenAlgo] Option Greeks request:",s);const n=await fetch(`${qn()}/optiongreeks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!n.ok){if(n.status===401)return window.location.href=$o(),null;throw new Error(`OpenAlgo optiongreeks error: ${n.status} ${n.statusText}`)}const l=await n.json();return kt.debug("[OpenAlgo] Option Greeks response:",l),l&&l.status==="success"?{symbol:l.symbol,underlying:l.underlying,strike:parseFloat(l.strike||0),optionType:l.option_type,expiryDate:l.expiry_date,daysToExpiry:l.days_to_expiry,spotPrice:parseFloat(l.spot_price||0),optionPrice:parseFloat(l.option_price||0),iv:parseFloat(l.implied_volatility||0),greeks:l.greeks||{}}:null}catch(s){return console.error("Error fetching option greeks:",s),null}},Ev={checkAuth:C2,getKlines:yu,getHistoricalKlines:E2,getTickerPrice:x2,subscribeToTicker:Gg,subscribeToMultiTicker:uc,searchSymbols:F1,getIntervals:S2,fetchUserPreferences:s4,saveUserPreferences:T2,getOptionChain:Q2,getOptionGreeks:F2};var Hp={exports:{}},Dp,Tv;function i4(){if(Tv)return Dp;Tv=1;var A="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Dp=A,Dp}var kp,Qv;function A4(){if(Qv)return kp;Qv=1;var A=i4();function t(){}function e(){}return e.resetWarningCache=t,kp=function(){function s(a,c,d,f,p,m){if(m!==A){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}s.isRequired=s;function n(){return s}var l={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:n,element:s,elementType:s,instanceOf:n,node:s,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:e,resetWarningCache:t};return l.PropTypes=l,l},kp}var Fv;function n4(){return Fv||(Fv=1,Hp.exports=A4()()),Hp.exports}var r4=n4();const _e=E1(r4),l4="_tooltipWrapper_1m3mc_1",o4="_tooltip_1m3mc_1",a4="_fadeIn_1m3mc_1",c4="_content_1m3mc_65",h4="_shortcut_1m3mc_77",u4="_top_1m3mc_103",d4="_bottom_1m3mc_119",f4="_left_1m3mc_135",p4="_right_1m3mc_151",Ha={tooltipWrapper:l4,tooltip:o4,fadeIn:a4,content:c4,shortcut:h4,top:u4,bottom:d4,left:f4,right:p4},Ur=({children:A,content:t,shortcut:e,position:s="top",delay:n=200,disabled:l=!1})=>{const[a,c]=B.useState(!1),[d,f]=B.useState(s),p=B.useRef(null),m=B.useRef(null),v=B.useRef(null),w=B.useCallback(()=>{if(!m.current||!v.current)return s;const S=v.current.getBoundingClientRect(),x=m.current.getBoundingClientRect(),U={width:window.innerWidth,height:window.innerHeight},M=S.top,N=U.height-S.bottom,I=S.left,R=U.width-S.right;let D=s;return s==="top"&&M<x.height+8?D="bottom":s==="bottom"&&N<x.height+8?D="top":s==="left"&&I<x.width+8?D="right":s==="right"&&R<x.width+8&&(D="left"),D},[s]),y=B.useCallback(()=>{l||(p.current=setTimeout(()=>{c(!0)},n))},[n,l]),b=B.useCallback(()=>{p.current&&clearTimeout(p.current),c(!1)},[]);return B.useEffect(()=>{if(a){const S=w();f(S)}},[a,w]),B.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]),!t&&!e?A:h.jsxs("div",{className:Ha.tooltipWrapper,ref:v,onMouseEnter:y,onMouseLeave:b,children:[A,a&&h.jsxs("div",{ref:m,className:Tt(Ha.tooltip,Ha[d]),role:"tooltip",children:[h.jsx("span",{className:Ha.content,children:t}),e&&h.jsx("span",{className:Ha.shortcut,children:e})]})]})};Ur.propTypes={children:_e.node.isRequired,content:_e.string,shortcut:_e.string,position:_e.oneOf(["top","bottom","left","right"]),delay:_e.number,disabled:_e.bool};const g4=A=>A.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),m4=A=>A.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,s)=>s?s.toUpperCase():e.toLowerCase()),Uv=A=>{const t=m4(A);return t.charAt(0).toUpperCase()+t.slice(1)},U2=(...A)=>A.filter((t,e,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===e).join(" ").trim(),_4=A=>{for(const t in A)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var v4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const B4=B.forwardRef(({color:A="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:s,className:n="",children:l,iconNode:a,...c},d)=>B.createElement("svg",{ref:d,...v4,width:t,height:t,stroke:A,strokeWidth:s?Number(e)*24/Number(t):e,className:U2("lucide",n),...!l&&!_4(c)&&{"aria-hidden":"true"},...c},[...a.map(([f,p])=>B.createElement(f,p)),...Array.isArray(l)?l:[l]]));const pe=(A,t)=>{const e=B.forwardRef(({className:s,...n},l)=>B.createElement(B4,{ref:l,iconNode:t,className:U2(`lucide-${g4(Uv(A))}`,`lucide-${A}`,s),...n}));return e.displayName=Uv(A),e};const w4=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],M2=pe("arrow-down",w4);const y4=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],I2=pe("arrow-up",y4);const C4=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],U1=pe("chart-no-axes-column",C4);const b4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],jo=pe("check",b4);const x4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Bc=pe("chevron-down",x4);const S4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],N2=pe("chevron-right",S4);const E4=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Wg=pe("chevron-left",E4);const T4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Q4=pe("circle-alert",T4);const F4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],U4=pe("circle-check-big",F4);const M4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]],I4=pe("circle-pause",M4);const N4=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],L4=pe("circle-play",N4);const H4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],M1=pe("clock",H4);const D4=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],k4=pe("command",D4);const j4=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],O4=pe("copy",j4);const R4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],L2=pe("download",R4);const z4=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],Mv=pe("eraser",z4);const V4=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],H2=pe("eye-off",V4);const P4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],D2=pe("eye",P4);const K4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],G4=pe("grid-3x3",K4);const W4=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],$4=pe("grip-vertical",W4);const X4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Y4=pe("info",X4);const J4=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],k2=pe("keyboard",J4);const q4=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],j2=pe("layers",q4);const Z4=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],tE=pe("list",Z4);const eE=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],O2=pe("loader-circle",eE);const sE=[["path",{d:"M5 12h14",key:"1ays0h"}]],iE=pe("minus",sE);const AE=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],nE=pe("navigation",AE);const rE=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],I1=pe("panels-top-left",rE);const lE=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],oE=pe("pause",lE);const aE=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],cE=pe("pen-tool",aE);const hE=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Iv=pe("pen",hE);const uE=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],dE=pe("pencil",uE);const fE=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],pE=pe("play",fE);const gE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ql=pe("plus",gE);const mE=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],R2=pe("refresh-cw",mE);const _E=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],vE=pe("rotate-ccw",_E);const BE=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],wE=pe("save",BE);const yE=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],CE=pe("scissors",yE);const bE=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],N1=pe("search",bE);const xE=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],SE=pe("settings-2",xE);const EE=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],TE=pe("settings",EE);const QE=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],FE=pe("skip-forward",QE);const UE=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Hr=pe("star",UE);const ME=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Il=pe("trash-2",ME);const IE=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],wc=pe("trending-up",IE);const NE=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],LE=pe("triangle-alert",NE);const HE=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],z2=pe("upload",HE);const DE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ji=pe("x",DE);const kE=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],jE=pe("zoom-in",kE);const OE=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],V2=pe("zap",OE),RE=({symbol:A,interval:t,chartType:e,indicators:s,favoriteIntervals:n,customIntervals:l,lastNonFavoriteInterval:a,onSymbolClick:c,onIntervalChange:d,onChartTypeChange:f,onToggleIndicator:p,onToggleFavorite:m,onAddCustomInterval:v,onRemoveCustomInterval:w,onUndo:y,onRedo:b,onMenuClick:S,theme:x,onToggleTheme:U,onDownloadImage:M,onCopyImage:N,onFullScreen:I,layout:R,onLayoutChange:D,onSaveLayout:V,onAlertClick:lt,onCompareClick:dt,onReplayClick:At,isReplayMode:ft=!1,onSettingsClick:mt,onTemplatesClick:at,onStraddleClick:Ut,strategyConfig:W=null,onIndicatorSettingsClick:E,onOptionsClick:K})=>{const[ot,pt]=B.useState(!1),[Q,j]=B.useState(!1),[Z,rt]=B.useState(!1),[Et,xt]=B.useState(!1),[Qt,se]=B.useState(!1),[oe,He]=B.useState(!1),[Nt,Wt]=B.useState("1"),[Je,tt]=B.useState("m"),[Ht,Ae]=B.useState(null),[te,le]=B.useState(!0),[Ft,Qe]=B.useState(null),[qe,Qs]=B.useState({Ticks:!0,Seconds:!0,Minutes:!0,Hours:!0,Days:!0,Custom:!0}),Xs=bt=>{Qs(je=>({...je,[bt]:!je[bt]}))},Fe=B.useRef(null),ss=B.useRef(null),Ss=B.useRef(null),wt=B.useRef(null),jt=B.useRef(null),he=bt=>({1:"1 tick",10:"10 ticks",100:"100 ticks",1e3:"1000 ticks","1s":"1 second","5s":"5 seconds","10s":"10 seconds","15s":"15 seconds","30s":"30 seconds","45s":"45 seconds","1m":"1 minute","2m":"2 minutes","3m":"3 minutes","5m":"5 minutes","10m":"10 minutes","15m":"15 minutes","30m":"30 minutes","45m":"45 minutes","1h":"1 hour","2h":"2 hours","3h":"3 hours","4h":"4 hours","1d":"1 day","1w":"1 week","1M":"1 month","3M":"3 months","6M":"6 months","12M":"12 months"})[bt]||bt,Zt=bt=>({"1d":"D","1w":"W","1M":"M"})[bt]||bt,Ue=[{value:"candlestick",label:"Candles",icon:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",fill:"currentColor",children:[h.jsx("path",{d:"M17 11v6h3v-6h-3zm-.5-1h4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .5-.5z"}),h.jsx("path",{d:"M18 7h1v3.5h-1zm0 10.5h1V21h-1z"}),h.jsx("path",{d:"M9 8v12h3V8H9zm-.5-1h4a.5.5 0 0 1 .5.5v13a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-13a.5.5 0 0 1 .5-.5z"}),h.jsx("path",{d:"M10 4h1v3.5h-1zm0 16.5h1V24h-1z"})]})},{value:"bar",label:"Bars",icon:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",children:h.jsx("path",{fill:"currentColor",d:"M19 6h-1v7h-3v1h3v8h1v-3h3v-1h-3V6ZM11 7h-1v13H7v1h3v2h1V10h3V9h-3V7Z"})})},{value:"hollow-candlestick",label:"Hollow candles",icon:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",fill:"currentColor",children:[h.jsx("path",{d:"M17 11v6h3v-6h-3zm-.5-1h4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .5-.5z"}),h.jsx("path",{d:"M18 7h1v3.5h-1zm0 10.5h1V21h-1z"}),h.jsx("path",{d:"M9 8v11h3V8H9zm-.5-1h4a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-12a.5.5 0 0 1 .5-.5z"}),h.jsx("path",{d:"M10 4h1v5h-1zm0 14h1v5h-1z"})]})},{value:"line",label:"Line",icon:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",children:h.jsx("path",{fill:"currentColor",d:"m25.39 7.31-8.83 10.92-6.02-5.47-7.16 8.56-.76-.64 7.82-9.36 6 5.45L24.61 6.7l.78.62Z"})})},{value:"area",label:"Area",icon:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",children:h.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"m25.35 5.35-9.5 9.5-.35.36-.35-.36-4.65-4.64-8.15 8.14-.7-.7 8.5-8.5.35-.36.35.36 4.65 4.64 9.15-9.14.7.7Z"})})},{value:"baseline",label:"Baseline",icon:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",children:h.jsx("path",{fill:"currentColor",d:"m10.49 7.55-.42.7-2.1 3.5.86.5 1.68-2.8 1.8 2.82.84-.54-2.23-3.5-.43-.68ZM3 14v1h1v-1H3Zm2 0h1v1H5v-1Zm2 0v1h1v-1H7Z"})})},{value:"heikin-ashi",label:"Heikin Ashi",icon:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",fill:"currentColor",children:[h.jsx("path",{d:"M9 8v12h3V8H9zm-1-.502C8 7.223 8.215 7 8.498 7h4.004c.275 0 .498.22.498.498v13.004a.493.493 0 0 1-.498.498H8.498A.496.496 0 0 1 8 20.502V7.498z"}),h.jsx("path",{d:"M10 4h1v3.5h-1z"})]})},{value:"renko",label:"Renko",icon:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",fill:"currentColor",children:h.jsx("path",{d:"M4 18h5v5H4v-5zm5-5h5v5H9v-5zm5-5h5v5h-5V8zm5-5h5v5h-5V3z"})})}],Ze=[{label:"1 tick",value:"1",type:"Ticks"},{label:"10 ticks",value:"10",type:"Ticks"},{label:"100 ticks",value:"100",type:"Ticks"},{label:"1000 ticks",value:"1000",type:"Ticks"},{label:"1 second",value:"1s",type:"Seconds"},{label:"5 seconds",value:"5s",type:"Seconds"},{label:"10 seconds",value:"10s",type:"Seconds"},{label:"15 seconds",value:"15s",type:"Seconds"},{label:"30 seconds",value:"30s",type:"Seconds"},{label:"45 seconds",value:"45s",type:"Seconds"},{label:"1 minute",value:"1m",type:"Minutes"},{label:"2 minutes",value:"2m",type:"Minutes"},{label:"3 minutes",value:"3m",type:"Minutes"},{label:"5 minutes",value:"5m",type:"Minutes"},{label:"10 minutes",value:"10m",type:"Minutes"},{label:"15 minutes",value:"15m",type:"Minutes"},{label:"30 minutes",value:"30m",type:"Minutes"},{label:"45 minutes",value:"45m",type:"Minutes"},{label:"1 hour",value:"1h",type:"Hours"},{label:"2 hours",value:"2h",type:"Hours"},{label:"3 hours",value:"3h",type:"Hours"},{label:"4 hours",value:"4h",type:"Hours"},{label:"1 day",value:"1d",type:"Days"},{label:"1 week",value:"1w",type:"Days"},{label:"1 month",value:"1M",type:"Days"}];B.useEffect(()=>{let bt=!0;return(async()=>{try{le(!0),Qe(null);const Se=await S2();if(!bt)return;if(Se){const us=new Set;Se.seconds&&Se.seconds.forEach(ue=>us.add(ue)),Se.minutes&&Se.minutes.forEach(ue=>us.add(ue)),Se.hours&&Se.hours.forEach(ue=>us.add(ue)),Se.days&&Se.days.forEach(ue=>{us.add(ue==="D"?"1d":ue)}),Se.weeks&&Se.weeks.forEach(ue=>{us.add(ue==="W"?"1w":ue)}),Se.months&&Se.months.forEach(ue=>{us.add(ue==="M"?"1M":ue)}),Ae(us),kt.debug("[Topbar] Broker supported intervals:",[...us])}else Qe("Could not fetch broker intervals")}catch(Se){bt&&(kt.error("Error fetching intervals:",Se),Qe("Failed to load intervals"))}finally{bt&&le(!1)}})(),()=>{bt=!1}},[]);const $e=bt=>Ht?/^\d+$/.test(bt)?!1:Ht.has(bt):!0,Pt=[...Ht?Ze.filter(bt=>$e(bt.value)):Ze,...l.map(bt=>({...bt,type:"Custom"}))],hs={Ticks:Pt.filter(bt=>bt.type==="Ticks"),Seconds:Pt.filter(bt=>bt.type==="Seconds"),Minutes:Pt.filter(bt=>bt.type==="Minutes"),Hours:Pt.filter(bt=>bt.type==="Hours"),Days:Pt.filter(bt=>bt.type==="Days"),Custom:Pt.filter(bt=>bt.type==="Custom")},ke=bt=>{bt.preventDefault(),v(Nt,Je),He(!1)},[ui,Y]=B.useState({top:0,left:0}),[vt,Xt]=B.useState({top:0,left:0}),[we,ce]=B.useState({top:0,left:0}),[be,js]=B.useState({top:0,right:0}),[is,Oi]=B.useState({top:0,left:0}),De=bt=>{if(bt.current){const je=bt.current.getBoundingClientRect();return{top:je.bottom+4,left:je.left}}return{top:0,left:0}},AA=bt=>{if(bt.current){const je=bt.current.getBoundingClientRect(),Se=window.innerWidth-je.right;return{top:je.bottom+4,right:Se}}return{top:0,right:0}},Os=()=>{Q||Y(De(Fe)),j(!Q),rt(!1),pt(!1)},Rs=()=>{Z||Xt(De(ss)),rt(!Z),j(!1),pt(!1)},EA=()=>{ot||ce(De(Ss)),pt(!ot),j(!1),rt(!1),xt(!1)},di=()=>{Et||js(AA(wt)),xt(!Et),j(!1),rt(!1),pt(!1)},An=()=>{Qt||Oi(De(jt)),se(!Qt),j(!1),rt(!1),pt(!1),xt(!1)};return B.useEffect(()=>{const bt=je=>{Fe.current&&!Fe.current.contains(je.target)&&!je.target.closest(`.${P.dropdown}`)&&j(!1),ss.current&&!ss.current.contains(je.target)&&!je.target.closest(`.${P.dropdown}`)&&rt(!1),Ss.current&&!Ss.current.contains(je.target)&&!je.target.closest(`.${P.indicatorDropdown}`)&&pt(!1),wt.current&&!wt.current.contains(je.target)&&!je.target.closest(`.${P.snapshotDropdown}`)&&xt(!1),jt.current&&!jt.current.contains(je.target)&&!je.target.closest(`.${P.dropdown}`)&&se(!1)};return document.addEventListener("mousedown",bt),()=>{document.removeEventListener("mousedown",bt)}},[]),B.useEffect(()=>{const bt=()=>{Q&&Y(De(Fe)),Z&&Xt(De(ss)),ot&&ce(De(Ss)),Et&&js(AA(wt)),Qt&&Oi(De(jt))};return window.addEventListener("scroll",bt,!0),window.addEventListener("resize",bt),()=>{window.removeEventListener("scroll",bt,!0),window.removeEventListener("resize",bt)}},[Q,Z,ot,Et]),h.jsx("div",{className:P.layoutAreaTop,children:h.jsx("div",{className:P.toolbar,children:h.jsx("div",{className:P.overflowWrap,children:h.jsx("div",{className:P.inner,children:h.jsx("div",{className:P.wrapOverflow,children:h.jsx("div",{className:P.wrap,children:h.jsx("div",{className:P.scrollWrap,children:h.jsx("div",{className:P.content,children:h.jsxs("div",{className:P.innerWrap,children:[h.jsx("div",{className:P.group,children:h.jsx("button",{className:Tt(P.button,P.iconButton),"aria-label":"Menu",onClick:S,children:h.jsx("div",{className:P.icon,children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",children:h.jsx("path",{fill:"currentColor",d:"M4 7h20v1H4V7zm0 6h20v1H4v-1zm0 6h20v1H4v-1z"})})})})}),h.jsx("div",{className:P.separatorWrap,children:h.jsx("div",{className:P.separator})}),h.jsxs("div",{className:P.group,children:[h.jsxs("button",{className:Tt(P.button,P.symbolButton),onClick:c,"aria-label":"Symbol Search",children:[h.jsx("div",{className:P.icon,children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",width:"18",height:"18",children:h.jsx("path",{fill:"currentColor",d:"M3.5 8a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM8 2a6 6 0 1 0 3.65 10.76l3.58 3.58 1.06-1.06-3.57-3.57A6 6 0 0 0 8 2Z"})})}),h.jsx("div",{className:Tt(P.text,P.uppercase),children:A})]}),h.jsx("button",{className:Tt(P.button,P.iconButton),"aria-label":"Compare or Add Symbol",onClick:dt,children:h.jsx("div",{className:P.icon,children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",children:[h.jsx("path",{fill:"currentColor",d:"M13.5 6a8.5 8.5 0 1 0 0 17 8.5 8.5 0 0 0 0-17zM4 14.5a9.5 9.5 0 1 1 19 0 9.5 9.5 0 0 1-19 0z"}),h.jsx("path",{fill:"currentColor",d:"M9 14h4v-4h1v4h4v1h-4v4h-1v-4H9v-1z"})]})})}),h.jsx(Ur,{content:W?W.displayName:"Create Option Strategy Chart",position:"bottom",children:h.jsx("button",{className:Tt(P.button,P.iconButton,{[P.isActive]:!!W}),"aria-label":"Option Strategy Chart",onClick:Ut,children:h.jsx("div",{className:P.icon,children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M3 17l6-6 4 4 8-8"}),h.jsx("path",{d:"M17 7h4v4"}),h.jsx("path",{d:"M3 7l6 6 4-4 8 8"}),h.jsx("path",{d:"M17 17h4v-4"})]})})})})]}),h.jsx("div",{className:P.separatorWrap,children:h.jsx("div",{className:P.separator})}),h.jsxs("div",{className:P.intervalGroup,ref:Fe,children:[n.length===0?h.jsx("button",{className:Tt(P.button,P.intervalButton,P.menuButton),onClick:Os,title:"Select Interval","aria-haspopup":"menu","aria-expanded":Q,children:h.jsx("div",{className:P.buttonText,children:h.jsx("div",{className:P.value,children:Zt(t)})})}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:P.radioGroup,role:"radiogroup","aria-orientation":"horizontal",children:(()=>{const bt=n.includes(t)?a:t,je=bt&&!n.includes(bt),us=[...[...n].sort((ue,Ai)=>Za(ue)-Za(Ai))];return je&&us.push(bt),us.map(ue=>h.jsx("button",{className:Tt(P.button,P.intervalButton,P.isGrouped,{[P.isActive]:t===ue}),onClick:()=>{d(ue),j(!1)},role:"radio","aria-checked":t===ue,title:he(ue),tabIndex:-1,children:h.jsx("div",{className:P.buttonText,children:h.jsx("div",{className:P.value,children:Zt(ue)})})},ue))})()}),h.jsx("button",{className:Tt(P.button,P.menuButton,P.intervalMenuButton),onClick:Os,"aria-label":"Chart interval","aria-haspopup":"menu",tabIndex:-1,children:h.jsx("div",{className:P.arrow,children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 6",width:"10",height:"6",children:h.jsx("path",{fill:"currentColor",d:"M.59.91 5 5.32 9.41.91.91.91z"})})})})]}),Q&&h.jsxs("div",{className:P.dropdown,onClick:bt=>bt.stopPropagation(),style:{top:ui.top,left:ui.left},children:[h.jsxs("div",{className:P.addCustomBtn,onClick:()=>He(!0),children:[h.jsx(Ql,{size:14}),h.jsx("span",{children:"Add custom interval..."})]}),oe&&h.jsxs("div",{className:P.customInputForm,children:[h.jsxs("div",{className:P.customHeader,children:[h.jsx("span",{children:"Add interval"}),h.jsx(ji,{size:14,className:P.closeIcon,onClick:()=>He(!1)})]}),h.jsxs("div",{className:P.customBody,children:[h.jsx("input",{type:"number",value:Nt,onChange:bt=>Wt(bt.target.value),className:P.numInput,min:"1"}),h.jsxs("select",{value:Je,onChange:bt=>tt(bt.target.value),className:P.unitSelect,children:[h.jsx("option",{value:"m",children:"Minutes"}),h.jsx("option",{value:"h",children:"Hours"}),h.jsx("option",{value:"d",children:"Days"}),h.jsx("option",{value:"w",children:"Weeks"}),h.jsx("option",{value:"M",children:"Months"})]}),h.jsx("button",{className:P.addBtn,onClick:ke,children:"Add"})]})]}),h.jsx("div",{className:P.separator}),h.jsx("div",{className:P.scrollableList,children:Object.entries(hs).map(([bt,je])=>je.length>0&&h.jsxs("div",{children:[h.jsxs("div",{className:P.sectionHeader,onClick:()=>Xs(bt),role:"row","aria-expanded":qe[bt],"aria-level":"1","data-role":"menuitem",tabIndex:-1,children:[h.jsx("span",{children:bt.toUpperCase()}),h.jsx("span",{className:Tt(P.caret,{[P.expanded]:qe[bt]}),children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 8",width:"16",height:"8",children:h.jsx("path",{fill:"currentColor",d:"M0 1.475l7.396 6.04.596.485.593-.49L16 1.39 14.807 0 7.393 6.122 8.58 6.12 1.186.08z"})})})]}),qe[bt]&&h.jsx("div",{children:je.map(Se=>h.jsxs("div",{className:Tt(P.dropdownItem,{[P.active]:t===Se.value}),onClick:()=>{d(Se.value),j(!1)},role:"row","aria-level":"2","aria-selected":t===Se.value,"data-value":Se.value,"data-role":"menuitem",tabIndex:-1,children:[h.jsx("span",{className:P.itemLabel,children:Se.label}),h.jsxs("div",{className:P.itemActions,children:[h.jsx(Hr,{size:14,className:Tt(P.starIcon,{[P.filled]:n.includes(Se.value)}),onClick:us=>{us.stopPropagation(),m(Se.value)}}),Se.type==="Custom"&&h.jsx(Il,{size:14,className:P.trashIcon,onClick:us=>{us.stopPropagation(),w(Se.value)}})]})]},Se.value))}),h.jsx("div",{className:P.separator})]},bt))})]})]}),h.jsx("div",{className:P.separatorWrap,children:h.jsx("div",{className:P.separator})}),h.jsx("div",{className:P.group,children:h.jsxs("div",{className:P.chartTypeSection,ref:ss,children:[h.jsx("button",{className:Tt(P.button,P.menuButton),onClick:Rs,children:h.jsx("div",{className:P.icon,children:Ue.find(bt=>bt.value===e)?.icon||Ue[0].icon})}),Z&&h.jsx("div",{className:P.dropdown,onClick:bt=>bt.stopPropagation(),style:{top:vt.top,left:vt.left},children:Ue.map(bt=>h.jsxs("div",{className:Tt(P.dropdownItem,P.withIcon,{[P.active]:e===bt.value}),onClick:()=>{f(bt.value),rt(!1)},children:[h.jsx("span",{className:P.icon,children:bt.icon}),h.jsx("span",{children:bt.label})]},bt.value))})]})}),h.jsx("div",{className:P.separatorWrap,children:h.jsx("div",{className:P.separator})}),h.jsx("div",{className:P.group,children:h.jsxs("div",{className:P.indicatorBtn,ref:Ss,children:[h.jsxs("button",{className:Tt(P.button),"aria-label":"Indicators",onClick:EA,children:[h.jsx("div",{className:P.icon,children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",fill:"none",children:[h.jsx("path",{stroke:"currentColor",d:"M6 12l4.8-4.8a1 1 0 0 1 1.4 0l2.7 2.7a1 1 0 0 0 1.3.1L23 5"}),h.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M19 12a1 1 0 0 0-1 1v4h-3v-1a1 1 0 0 0-1-1h-3a1 1 0 0 0-1 1v2H7a1 1 0 0 0-1 1v4h17V13a1 1 0 0 0-1-1h-3zm0 10h3v-9h-3v9zm-1 0v-4h-3v4h3zm-4-4.5V22h-3v-6h3v1.5zM10 22v-3H7v3h3z"})]})}),h.jsx("div",{className:P.text,children:"Indicators"})]}),ot&&h.jsxs("div",{className:P.indicatorDropdown,style:{top:we.top,left:we.left},children:[h.jsx("div",{className:P.dropdownSection,children:"Moving Averages"}),h.jsxs("div",{className:Tt(P.dropdownItem,{[P.active]:s.sma?.enabled}),onClick:bt=>{bt.stopPropagation(),p("sma")},children:["SMA (",s.sma?.period||20,")"]}),h.jsxs("div",{className:Tt(P.dropdownItem,{[P.active]:s.ema?.enabled}),onClick:bt=>{bt.stopPropagation(),p("ema")},children:["EMA (",s.ema?.period||20,")"]}),h.jsx("div",{className:P.dropdownDivider}),h.jsx("div",{className:P.dropdownSection,children:"Oscillators"}),h.jsxs("div",{className:Tt(P.dropdownItem,{[P.active]:s.rsi?.enabled}),onClick:bt=>{bt.stopPropagation(),p("rsi")},children:["RSI (",s.rsi?.period||14,")"]}),h.jsxs("div",{className:Tt(P.dropdownItem,{[P.active]:s.stochastic?.enabled}),onClick:bt=>{bt.stopPropagation(),p("stochastic")},children:["Stochastic (",s.stochastic?.kPeriod||14,", ",s.stochastic?.dPeriod||3,")"]}),h.jsx("div",{className:P.dropdownDivider}),h.jsx("div",{className:P.dropdownSection,children:"Momentum"}),h.jsxs("div",{className:Tt(P.dropdownItem,{[P.active]:s.macd?.enabled}),onClick:bt=>{bt.stopPropagation(),p("macd")},children:["MACD (",s.macd?.fast||12,", ",s.macd?.slow||26,", ",s.macd?.signal||9,")"]}),h.jsx("div",{className:P.dropdownDivider}),h.jsx("div",{className:P.dropdownSection,children:"Volatility"}),h.jsxs("div",{className:Tt(P.dropdownItem,{[P.active]:s.bollingerBands?.enabled}),onClick:bt=>{bt.stopPropagation(),p("bollingerBands")},children:["Bollinger Bands (",s.bollingerBands?.period||20,", ",s.bollingerBands?.stdDev||2,")"]}),h.jsxs("div",{className:Tt(P.dropdownItem,{[P.active]:s.atr?.enabled}),onClick:bt=>{bt.stopPropagation(),p("atr")},children:["ATR (",s.atr?.period||14,")"]}),h.jsx("div",{className:P.dropdownDivider}),h.jsx("div",{className:P.dropdownSection,children:"Trend"}),h.jsxs("div",{className:Tt(P.dropdownItem,{[P.active]:s.supertrend?.enabled}),onClick:bt=>{bt.stopPropagation(),p("supertrend")},children:["Supertrend (",s.supertrend?.period||10,", ",s.supertrend?.multiplier||3,")"]}),h.jsx("div",{className:P.dropdownDivider}),h.jsx("div",{className:P.dropdownSection,children:"Volume"}),h.jsx("div",{className:Tt(P.dropdownItem,{[P.active]:s.volume?.enabled}),onClick:bt=>{bt.stopPropagation(),p("volume")},children:"Volume"}),h.jsx("div",{className:Tt(P.dropdownItem,{[P.active]:s.vwap?.enabled}),onClick:bt=>{bt.stopPropagation(),p("vwap")},children:"VWAP"}),h.jsx("div",{className:P.dropdownDivider}),h.jsx("div",{className:P.dropdownSection,children:"Market Profile"}),h.jsx("div",{className:Tt(P.dropdownItem,{[P.active]:s.tpo?.enabled}),onClick:bt=>{bt.stopPropagation(),p("tpo")},children:"TPO Profile (30m)"}),h.jsx("div",{className:P.dropdownDivider}),h.jsxs("div",{className:Tt(P.dropdownItem,P.settingsItem),onClick:bt=>{bt.stopPropagation(),pt(!1),E?.()},children:[h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("circle",{cx:"12",cy:"12",r:"3"}),h.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),"Indicator Settings"]})]})]})}),h.jsx("div",{className:P.separatorWrap,children:h.jsx("div",{className:P.separator})}),h.jsxs("div",{className:P.group,children:[h.jsxs("button",{className:Tt(P.button),"aria-label":"Create Alert",onClick:lt,children:[h.jsx("div",{className:P.icon,children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",children:[h.jsx("path",{fill:"currentColor",d:"m19.54 4.5 3.96 4.32-.74.68-3.96-4.32.74-.68ZM7.46 4.5 3.5 8.82l.74.68L8.2 5.18l-.74-.68ZM19.74 10.33A7.5 7.5 0 0 1 21 14.5v.5h1v-.5a8.5 8.5 0 1 0-8.5 8.5h.5v-1h-.5a7.5 7.5 0 1 1 6.24-11.67Z"}),h.jsx("path",{fill:"currentColor",d:"M13 9v5h-3v1h4V9h-1ZM19 20v-4h1v4h4v1h-4v4h-1v-4h-4v-1h4Z"})]})}),h.jsx("div",{className:P.text,children:"Alert"})]}),h.jsxs("button",{className:Tt(P.button,{[P.isActive]:ft}),"aria-label":"Bar Replay",onClick:At,children:[h.jsx("div",{className:P.icon,children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",children:h.jsx("path",{fill:"none",stroke:"currentColor",d:"M13.5 20V9l-6 5.5 6 5.5zM21.5 20V9l-6 5.5 6 5.5z"})})}),h.jsx("div",{className:P.text,children:"Replay"})]}),h.jsxs("button",{className:P.button,"aria-label":"Option Chain",onClick:K,children:[h.jsx("div",{className:P.icon,children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",children:h.jsx("path",{fill:"currentColor",d:"M4 7h2v2H4V7zm4 0h16v2H8V7zM4 13h2v2H4v-2zm4 0h16v2H8v-2zM4 19h2v2H4v-2zm4 0h16v2H8v-2z"})})}),h.jsx("div",{className:P.text,children:"Options"})]})]}),h.jsx("div",{className:P.separatorWrap,children:h.jsx("div",{className:P.separator})}),h.jsxs("div",{className:P.group,children:[h.jsx(Ur,{content:"Undo",shortcut:"Ctrl+Z",position:"bottom",children:h.jsx("button",{className:Tt(P.button,P.iconButton),onClick:y,"aria-label":"Undo",children:h.jsx("div",{className:P.icon,children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",children:h.jsx("path",{fill:"currentColor",d:"M8.707 13l2.647 2.646-.707.708L6.792 12.5l3.853-3.854.708.708L8.707 12H14.5a5.5 5.5 0 0 1 5.5 5.5V19h-1v-1.5a4.5 4.5 0 0 0-4.5-4.5H8.707z"})})})})}),h.jsx(Ur,{content:"Redo",shortcut:"Ctrl+Y",position:"bottom",children:h.jsx("button",{className:Tt(P.button,P.iconButton),onClick:b,"aria-label":"Redo",children:h.jsx("div",{className:P.icon,children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",children:h.jsx("path",{fill:"currentColor",d:"M18.293 13l-2.647 2.646.707.708 3.854-3.854-3.854-3.854-.707.708L18.293 12H12.5A5.5 5.5 0 0 0 7 17.5V19h1v-1.5a4.5 4.5 0 0 1 4.5-4.5h5.793z"})})})})})]}),h.jsx("div",{className:P.fill}),h.jsxs("div",{className:P.rightSection,children:[h.jsxs("div",{className:P.layoutSection,ref:jt,children:[h.jsx("button",{className:Tt(P.button,P.menuButton),"aria-label":"Layout setup",onClick:An,children:h.jsx("div",{className:P.icon,children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-1 -1 21 19",width:"21",height:"19",children:h.jsx("path",{fill:"currentColor",d:"M2.5 1C1.67 1 1 1.67 1 2.5v12c0 .83.67 1.5 1.5 1.5h14c.83 0 1.5-.67 1.5-1.5v-12c0-.83-.67-1.5-1.5-1.5h-14ZM0 2.5A2.5 2.5 0 0 1 2.5 0h14A2.5 2.5 0 0 1 19 2.5v12a2.5 2.5 0 0 1-2.5 2.5h-14A2.5 2.5 0 0 1 0 14.5v-12Z"})})})}),Qt&&h.jsxs("div",{className:P.dropdown,style:{top:is.top,left:is.left},onClick:bt=>bt.stopPropagation(),children:[h.jsxs("div",{className:Tt(P.dropdownItem,P.withIcon,{[P.active]:R==="1"}),onClick:()=>{D("1"),se(!1)},children:[h.jsx("span",{className:P.icon,children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",children:h.jsx("path",{fill:"currentColor",d:"M3 3h22v22H3V3z"})})}),h.jsx("span",{children:"Single Chart"})]}),h.jsxs("div",{className:Tt(P.dropdownItem,P.withIcon,{[P.active]:R==="2"}),onClick:()=>{D("2"),se(!1)},children:[h.jsx("span",{className:P.icon,children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",children:h.jsx("path",{fill:"currentColor",d:"M3 3h10v22H3V3zm12 0h10v22H15V3z"})})}),h.jsx("span",{children:"2 Charts"})]}),h.jsxs("div",{className:Tt(P.dropdownItem,P.withIcon,{[P.active]:R==="3"}),onClick:()=>{D("3"),se(!1)},children:[h.jsx("span",{className:P.icon,children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",children:h.jsx("path",{fill:"currentColor",d:"M3 3h6v22H3V3zm8 0h6v22h-6V3zm8 0h6v22h-6V3z"})})}),h.jsx("span",{children:"3 Charts"})]}),h.jsxs("div",{className:Tt(P.dropdownItem,P.withIcon,{[P.active]:R==="4"}),onClick:()=>{D("4"),se(!1)},children:[h.jsx("span",{className:P.icon,children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",children:h.jsx("path",{fill:"currentColor",d:"M3 3h10v10H3V3zm12 0h10v10H15V3zM3 15h10v10H3V15zm12 0h10v10H15V15z"})})}),h.jsx("span",{children:"4 Charts"})]})]})]}),h.jsx("button",{className:Tt(P.button),"aria-label":"Save",onClick:V,children:h.jsx("div",{className:P.text,children:"Save"})}),h.jsx(Ur,{content:"Layout Templates",position:"bottom",children:h.jsx("button",{className:Tt(P.button,P.iconButton),"aria-label":"Templates",onClick:at,children:h.jsx("div",{className:P.icon,children:h.jsx(I1,{size:20,strokeWidth:1.5})})})}),h.jsx("div",{className:P.separatorWrap,children:h.jsx("div",{className:P.separator})}),h.jsx("button",{className:Tt(P.button,P.iconButton,P.themeToggle),onClick:U,"aria-label":x==="dark"?"Switch to Light Mode":"Switch to Dark Mode",title:x==="dark"?"Switch to Light Mode":"Switch to Dark Mode",children:h.jsx("div",{className:P.icon,children:x==="dark"?h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",fill:"currentColor",children:h.jsx("path",{d:"M14 5a1 1 0 0 1-1-1V2a1 1 0 0 1 2 0v2a1 1 0 0 1-1 1ZM14 27a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v2a1 1 0 0 1-1 1ZM27 14a1 1 0 0 1-1 1h-2a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1ZM5 14a1 1 0 0 1-1 1H2a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1ZM23.19 5.81a1 1 0 0 1 0 1.42l-1.42 1.41a1 1 0 0 1-1.41-1.41l1.41-1.42a1 1 0 0 1 1.42 0ZM7.64 21.36a1 1 0 0 1 0 1.41l-1.42 1.42a1 1 0 0 1-1.41-1.42l1.41-1.41a1 1 0 0 1 1.42 0ZM5.81 4.81a1 1 0 0 1 1.42 0l1.41 1.42a1 1 0 1 1-1.41 1.41L5.81 6.23a1 1 0 0 1 0-1.42ZM21.36 20.36a1 1 0 0 1 1.41 0l1.42 1.41a1 1 0 0 1-1.42 1.42l-1.41-1.42a1 1 0 0 1 0-1.41ZM14 8a6 6 0 1 0 0 12 6 6 0 0 0 0-12Zm-5 6a5 5 0 1 1 10 0 5 5 0 0 1-10 0Z"})}):h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})}),h.jsx("div",{className:P.separatorWrap,children:h.jsx("div",{className:P.separator})}),h.jsx(Ur,{content:"Settings",position:"bottom",children:h.jsx("button",{className:Tt(P.button,P.iconButton),"aria-label":"Settings",onClick:mt,children:h.jsx("div",{className:P.icon,children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",fill:"currentColor",children:[h.jsx("path",{fillRule:"evenodd",d:"M18 14a4 4 0 1 1-8 0 4 4 0 0 1 8 0Zm-1 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),h.jsx("path",{fillRule:"evenodd",d:"M8.5 5h11l5 9-5 9h-11l-5-9 5-9Zm-3.86 9L9.1 6h9.82l4.45 8-4.45 8H9.1l-4.45-8Z"})]})})})}),h.jsx(Ur,{content:"Fullscreen",shortcut:"F11",position:"bottom",children:h.jsx("button",{className:Tt(P.button,P.iconButton),"aria-label":"Fullscreen",onClick:I,children:h.jsx("div",{className:P.icon,children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"28",height:"28",children:h.jsx("path",{fill:"currentColor",d:"M8.5 6A2.5 2.5 0 0 0 6 8.5V11h1V8.5C7 7.67 7.67 7 8.5 7H11V6H8.5zM6 17v2.5A2.5 2.5 0 0 0 8.5 22H11v-1H8.5A1.5 1.5 0 0 1 7 19.5V17H6zM19.5 7H17V6h2.5A2.5 2.5 0 0 1 22 8.5V11h-1V8.5c0-.83-.67-1.5-1.5-1.5zM22 19.5V17h-1v2.5c0 .83-.67 1.5-1.5 1.5H17v1h2.5a2.5 2.5 0 0 0 2.5-2.5z"})})})})}),h.jsxs("div",{className:P.snapshotSection,ref:wt,children:[h.jsx(Ur,{content:"Chart Snapshot",position:"bottom",children:h.jsx("button",{className:Tt(P.button,P.iconButton),"aria-label":"Snapshot",onClick:di,children:h.jsx("div",{className:P.icon,children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",fill:"currentColor",children:[h.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.118 6a.5.5 0 0 0-.447.276L9.809 8H5.5A1.5 1.5 0 0 0 4 9.5v10A1.5 1.5 0 0 0 5.5 21h16a1.5 1.5 0 0 0 1.5-1.5v-10A1.5 1.5 0 0 0 21.5 8h-4.309l-.862-1.724A.5.5 0 0 0 15.882 6h-4.764zm-1.342-.17A1.5 1.5 0 0 1 11.118 5h4.764a1.5 1.5 0 0 1 1.342.83L17.809 7H21.5A2.5 2.5 0 0 1 24 9.5v10a2.5 2.5 0 0 1-2.5 2.5h-16A2.5 2.5 0 0 1 3 19.5v-10A2.5 2.5 0 0 1 5.5 7h3.691l.585-1.17z"}),h.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 18a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7zm0 1a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9z"})]})})})}),Et&&h.jsxs("div",{className:P.snapshotDropdown,style:{top:be.top,right:be.right},onClick:bt=>bt.stopPropagation(),children:[h.jsx("div",{className:P.snapshotHeader,children:"CHART SNAPSHOT"}),h.jsxs("div",{className:P.snapshotItem,onClick:()=>{M?.(),xt(!1)},children:[h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"18",height:"18",fill:"currentColor",children:[h.jsx("path",{d:"M14 18.5l-5-5h3.5V5h3v8.5H19l-5 5z"}),h.jsx("path",{d:"M6 20h16v2H6v-2z"})]}),h.jsx("span",{children:"Download image"})]}),h.jsxs("div",{className:P.snapshotItem,onClick:()=>{N?.(),xt(!1)},children:[h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"18",height:"18",fill:"currentColor",children:[h.jsx("path",{d:"M8 6h10v2H8V6zm12 4H8v12h12V10zm-2 10H10V12h8v8z"}),h.jsx("path",{d:"M6 8v14h14v-2H8V8H6z"})]}),h.jsx("span",{children:"Copy image"})]})]})]})]})]})})})})})})})})})},zE="_toolbar_caqx3_1",VE="_toolGroupContainer_caqx3_45",PE="_controlWrapper_caqx3_61",KE="_toolButton_caqx3_85",GE="_hasArrow_caqx3_115",WE="_active_caqx3_131",$E="_toolIcon_caqx3_139",XE="_arrowButton_caqx3_167",YE="_popover_caqx3_231",JE="_popoverItem_caqx3_269",qE="_popoverIcon_caqx3_309",ZE="_popoverLabel_caqx3_325",t3="_favoriteButton_caqx3_337",e3="_separator_caqx3_389",$s={toolbar:zE,toolGroupContainer:VE,controlWrapper:PE,toolButton:KE,hasArrow:GE,active:WE,toolIcon:$E,arrowButton:XE,popover:YE,popoverItem:JE,popoverIcon:qE,popoverLabel:ZE,favoriteButton:t3,separator:e3},Pe={size:_e.oneOfType([_e.string,_e.number]),color:_e.string,className:_e.string,style:_e.object},P2=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsxs("g",{fill:"currentColor",fillRule:"nonzero",children:[h.jsx("path",{d:"M7.354 21.354l14-14-.707-.707-14 14z"}),h.jsx("path",{d:"M22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"})]})});P2.propTypes=Pe;const K2=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsxs("g",{fill:"currentColor",children:[h.jsx("path",{fillRule:"nonzero",d:"M7.354 21.354l14-14-.707-.707-14 14z"}),h.jsx("path",{d:"M21 7l-8 3 5 5z"}),h.jsx("path",{fillRule:"nonzero",d:"M22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"})]})});K2.propTypes=Pe;const G2=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsxs("g",{fill:"currentColor",fillRule:"nonzero",children:[h.jsx("path",{d:"M8.354 20.354l5-5-.707-.707-5 5z"}),h.jsx("path",{d:"M16.354 12.354l8-8-.707-.707-8 8z"}),h.jsx("path",{d:"M14.5 15c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM6.5 23c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"})]})});G2.propTypes=Pe;const W2=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsxs("g",{fill:"currentColor",fillRule:"nonzero",children:[h.jsx("path",{d:"M4.354 25.354l5-5-.707-.707-5 5z"}),h.jsx("path",{d:"M12.354 17.354l5-5-.707-.707-5 5z"}),h.jsx("path",{d:"M20.354 9.354l5-5-.707-.707-5 5z"}),h.jsx("path",{d:"M18.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM10.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"})]})});W2.propTypes=Pe;const $2=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsxs("g",{fill:"currentColor",fillRule:"nonzero",children:[h.jsx("path",{d:"M4 15h8.5v-1h-8.5zM16.5 15h8.5v-1h-8.5z"}),h.jsx("path",{d:"M14.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"})]})});$2.propTypes=Pe;const X2=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsxs("g",{fill:"currentColor",fillRule:"nonzero",children:[h.jsx("path",{d:"M8.5 15h16.5v-1h-16.5z"}),h.jsx("path",{d:"M6.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"})]})});X2.propTypes=Pe;const Y2=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsxs("g",{fill:"currentColor",fillRule:"nonzero",children:[h.jsx("path",{d:"M15 12.5v-8.5h-1v8.5zM14 16.5v8.5h1v-8.5z"}),h.jsx("path",{d:"M14.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"})]})});Y2.propTypes=Pe;const J2=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsxs("g",{fill:"currentColor",fillRule:"nonzero",children:[h.jsx("path",{d:"M4 15h8.5v-1h-8.5zM16.5 15h8.5v-1h-8.5z"}),h.jsx("path",{d:"M15 12v-8.5h-1v8.5zM14 16.5v8.5h1v-8.5z"}),h.jsx("path",{d:"M14.5 16c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"})]})});J2.propTypes=Pe;const q2=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsxs("g",{fill:"currentColor",fillRule:"nonzero",children:[h.jsx("path",{d:"M7.5 6h13v-1h-13z"}),h.jsx("path",{d:"M7.5 23h13v-1h-13z"}),h.jsx("path",{d:"M5 7.5v13h1v-13z"}),h.jsx("path",{d:"M22 7.5v13h1v-13z"}),h.jsx("path",{d:"M5.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 7c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM5.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"})]})});q2.propTypes=Pe;const Z2=({size:A=28,...t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,fill:"none",...t,children:[h.jsx("path",{stroke:"currentColor",d:"M16 14a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"}),h.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.5 14a9.5 9.5 0 0 1 18.7-2.37 2.5 2.5 0 0 0 0 4.74A9.5 9.5 0 0 1 4.5 14Zm19.7 2.5a10.5 10.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5ZM22.5 14a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z"})]});Z2.propTypes=Pe;const ty=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsxs("g",{fill:"currentColor",fillRule:"nonzero",children:[h.jsx("path",{d:"M8.5 23h11v-1h-11zM6 8.5v12h1v-12zM7.483 8.28l12.293 13.112.73-.684-12.293-13.112z"}),h.jsx("path",{d:"M6.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM6.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM21.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"})]})});ty.propTypes=Pe;const ey=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsxs("g",{fill:"currentColor",fillRule:"nonzero",children:[h.jsx("path",{d:"M8.354 18.354l10-10-.707-.707-10 10zM12.354 25.354l5-5-.707-.707-5 5z"}),h.jsx("path",{d:"M20.354 17.354l5-5-.707-.707-5 5z"}),h.jsx("path",{d:"M19.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM6.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM18.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"})]})});ey.propTypes=Pe;const sy=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsxs("g",{fill:"currentColor",fillRule:"nonzero",children:[h.jsx("path",{d:"M3 5h22v-1h-22z"}),h.jsx("path",{d:"M3 17h22v-1h-22z"}),h.jsx("path",{d:"M3 11h19.5v-1h-19.5z"}),h.jsx("path",{d:"M5.5 23h19.5v-1h-19.5z"}),h.jsx("path",{d:"M3.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"})]})});sy.propTypes=Pe;const iy=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsxs("g",{fill:"currentColor",fillRule:"nonzero",children:[h.jsx("path",{d:"M4 25h22v-1h-22z"}),h.jsx("path",{d:"M4 21h22v-1h-22z"}),h.jsx("path",{d:"M6.5 17h19.5v-1h-19.5z"}),h.jsx("path",{d:"M5 14.5v-3h-1v3zM6.617 9.275l10.158-3.628-.336-.942-10.158 3.628z"}),h.jsx("path",{d:"M18.5 6c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM4.5 11c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM4.5 18c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"})]})});iy.propTypes=Pe;const Ay=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsxs("g",{fill:"currentColor",children:[h.jsx("path",{fillRule:"nonzero",d:"M4 5h16.5v-1h-16.5zM25 24h-16.5v1h16.5z"}),h.jsx("path",{fillRule:"nonzero",d:"M6.5 26c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 6c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"}),h.jsx("path",{fillRule:"nonzero",d:"M14 9v14h1v-14z"}),h.jsx("path",{d:"M14.5 6l2.5 3h-5z"})]})});Ay.propTypes=Pe;const ny=({size:A=28,...t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,fill:"none",...t,children:[h.jsx("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M4.5 5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM2 6.5A2.5 2.5 0 0 1 6.95 6H24v1H6.95A2.5 2.5 0 0 1 2 6.5zM4.5 15a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM2 16.5a2.5 2.5 0 0 1 4.95-.5h13.1a2.5 2.5 0 1 1 0 1H6.95A2.5 2.5 0 0 1 2 16.5zM22.5 15a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm-18 6a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM2 22.5a2.5 2.5 0 0 1 4.95-.5H24v1H6.95A2.5 2.5 0 0 1 2 22.5z"}),h.jsx("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M22.4 8.94l-1.39.63-.41-.91 1.39-.63.41.91zm-4 1.8l-1.39.63-.41-.91 1.39-.63.41.91zm-4 1.8l-1.4.63-.4-.91 1.39-.63.41.91zm-4 1.8l-1.4.63-.4-.91 1.39-.63.41.91z"})]});ny.propTypes=Pe;const ry=({size:A=28,...t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,fill:"none",...t,children:[h.jsx("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M4.5 24a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM2 22.5a2.5 2.5 0 0 0 4.95.5H24v-1H6.95a2.5 2.5 0 0 0-4.95.5zM4.5 14a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM2 12.5a2.5 2.5 0 0 0 4.95.5h13.1a2.5 2.5 0 1 0 0-1H6.95a2.5 2.5 0 0 0-4.95.5zM22.5 14a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm-18-6a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM2 6.5a2.5 2.5 0 0 0 4.95.5H24V6H6.95A2.5 2.5 0 0 0 2 6.5z"}),h.jsx("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M22.4 20.06l-1.39-.63-.41.91 1.39.63.41-.91zm-4-1.8l-1.39-.63-.41.91 1.39.63.41-.91zm-4-1.8l-1.4-.63-.4.91 1.39.63.41-.91zm-4-1.8L9 14.03l-.4.91 1.39.63.41-.91z"})]});ry.propTypes=Pe;const ly=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsxs("g",{fill:"currentColor",children:[h.jsx("path",{fillRule:"nonzero",d:"M5.238 18.469l4.17-4.17-.707-.707-4.17 4.17zM16.47 17.763l-.707.707-4.265-4.265.707-.707zM22.747 13.546l-4.192 4.192.707.707 4.192-4.192z"}),h.jsx("path",{fillRule:"nonzero",d:"M10.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM17.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"}),h.jsx("path",{d:"M11.148 7h-1.098v-4.137c-.401.375-.874.652-1.418.832v-.996c.286-.094.598-.271.934-.533.336-.262.566-.567.691-.916h.891v5.75z"}),h.jsx("path",{d:"M23.355 5.527l1.094-.113c.031.247.124.443.277.588.154.145.331.217.531.217.229 0 .423-.093.582-.279.159-.186.238-.467.238-.842 0-.352-.079-.615-.236-.791-.158-.176-.363-.264-.615-.264-.315 0-.598.139-.848.418l-.891-.129.563-2.98h2.902v1.027h-2.07l-.172.973c.245-.122.495-.184.75-.184.487 0 .9.177 1.238.531.339.354.508.814.508 1.379 0 .471-.137.892-.41 1.262-.372.505-.889.758-1.551.758-.529 0-.96-.142-1.293-.426-.333-.284-.533-.665-.598-1.145z"})]})});ly.propTypes=Pe;const oy=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsxs("g",{fill:"currentColor",children:[h.jsx("path",{fillRule:"nonzero",d:"M5.238 18.469l4.17-4.17-.707-.707-4.17 4.17zM16.47 17.763l-.707.707-4.265-4.265.707-.707zM22.747 13.546l-4.192 4.192.707.707 4.192-4.192z"}),h.jsx("path",{fillRule:"nonzero",d:"M10.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM17.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 14c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 21c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"}),h.jsx("path",{d:"M13.746 7h-1.258l-.5-1.301h-2.289l-.473 1.301h-1.227l2.23-5.727h1.223l2.293 5.727zm-2.129-2.266l-.789-2.125-.773 2.125h1.563z"}),h.jsx("path",{d:"M26.246 4.895l1.121.355c-.172.625-.458 1.089-.857 1.393-.4.303-.907.455-1.521.455-.76 0-1.385-.26-1.875-.779-.49-.52-.734-1.23-.734-2.131 0-.953.246-1.693.738-2.221.492-.527 1.139-.791 1.941-.791.701 0 1.27.207 1.707.621.26.245.456.596.586 1.055l-1.145.273c-.068-.297-.209-.531-.424-.703-.215-.172-.476-.258-.783-.258-.424 0-.769.152-1.033.457-.264.305-.396.798-.396 1.48 0 .724.13 1.24.391 1.547.26.307.599.461 1.016.461.307 0 .572-.098.793-.293.221-.195.38-.503.477-.922z"})]})});oy.propTypes=Pe;const Nv=ly,ay=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsxs("g",{fill:"currentColor",children:[h.jsx("path",{fillRule:"nonzero",d:"M20 14h-14v1h14z"}),h.jsx("path",{d:"M20 17v-5l3 2.5z"}),h.jsx("path",{fillRule:"nonzero",d:"M24 8.5v16.5h1v-16.5zM4 4v16.5h1v-16.5z"}),h.jsx("path",{fillRule:"nonzero",d:"M4.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM24.5 8c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"})]})});ay.propTypes=Pe;const cy=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsxs("g",{fill:"currentColor",children:[h.jsx("path",{"fill-rule":"nonzero",d:"M6.5 23v1h17.5v-17.5h-1v16.5z"}),h.jsx("path",{"fill-rule":"nonzero",d:"M21.5 5v-1h-17.5v17.5h1v-16.5z"}),h.jsx("path",{"fill-rule":"nonzero",d:"M4.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM23.5 6c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"}),h.jsx("path",{"fill-rule":"nonzero",d:"M13 9v13h1v-13z",id:"Line"}),h.jsx("path",{d:"M13.5 6l2.5 3h-5z"}),h.jsx("path",{"fill-rule":"nonzero",d:"M19 14h-13v1h13z"}),h.jsx("path",{d:"M19 17v-5l3 2.5z"})]})});cy.propTypes=Pe;const hy=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsxs("g",{fill:"currentColor",fillRule:"nonzero",children:[h.jsx("path",{d:"M1.789 23l.859-.854.221-.228c.18-.19.38-.409.597-.655.619-.704 1.238-1.478 1.815-2.298.982-1.396 1.738-2.776 2.177-4.081 1.234-3.667 5.957-4.716 8.923-1.263 3.251 3.785-.037 9.38-5.379 9.38h-9.211zm9.211-1c4.544 0 7.272-4.642 4.621-7.728-2.45-2.853-6.225-2.015-7.216.931-.474 1.408-1.273 2.869-2.307 4.337-.599.852-1.241 1.653-1.882 2.383l-.068.078h6.853z"}),h.jsx("path",{d:"M18.182 6.002l-1.419 1.286c-1.031.935-1.075 2.501-.096 3.48l1.877 1.877c.976.976 2.553.954 3.513-.045l5.65-5.874-.721-.693-5.65 5.874c-.574.596-1.507.609-2.086.031l-1.877-1.877c-.574-.574-.548-1.48.061-2.032l1.419-1.286-.672-.741z"})]})});hy.propTypes=Pe;const uy=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 23",width:A,height:A,...t,children:h.jsx("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M13.402 0L6.78144 6.71532C6.67313 6.82518 6.5917 6.95862 6.54354 7.10518L5.13578 11.3889C4.89843 12.1111 5.08375 12.9074 5.61449 13.4458L5.68264 13.5149L0 19.2789L8.12695 22.4056L11.2874 19.1999L11.3556 19.269C11.8863 19.8073 12.6713 19.9953 13.3834 19.7546L17.6013 18.3285C17.7493 18.2784 17.8835 18.1945 17.9931 18.0832L24.6912 11.2892L23.9857 10.5837L17.515 17.147L7.70658 7.19818L14.1076 0.705575L13.402 0ZM6.07573 11.7067L7.24437 8.15061L16.576 17.6158L13.0701 18.8012C12.7141 18.9215 12.3215 18.8275 12.0562 18.5584L6.31509 12.7351C6.04972 12.466 5.95706 12.0678 6.07573 11.7067ZM6.30539 14.3045L10.509 18.5682L7.87935 21.2355L1.78414 18.8904L6.30539 14.3045Z"})});uy.propTypes=Pe;const dy=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsx("path",{fill:"currentColor",d:"M11 10.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm4 7a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0zm11-8.8V13h1V7h-6v1h4.3l-7.42 7.41a2.49 2.49 0 0 0-2.76 0l-3.53-3.53a2.5 2.5 0 1 0-4.17 0L1 18.29l.7.71 6.42-6.41a2.49 2.49 0 0 0 2.76 0l3.53 3.53a2.5 2.5 0 1 0 4.17 0z"})});dy.propTypes=Pe;const $g=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsx("path",{fill:"currentColor",d:"M8 6.5c0-.28.22-.5.5-.5H14v16h-2v1h5v-1h-2V6h5.5c.28 0 .5.22.5.5V9h1V6.5c0-.83-.67-1.5-1.5-1.5h-12C7.67 5 7 5.67 7 6.5V9h1V6.5Z"})});$g.propTypes=Pe;const fy=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsx("path",{fill:"currentColor",fillRule:"nonzero",d:"M6 21.586l3.586-3.586h13.407c.004 0 .007-11.993.007-11.993 0-.007-17-.007-17-.007v15.586zm-1 2.414v-18.005c0-.549.451-.995.995-.995h17.01c.549 0 .995.45.995 1.007v11.986c0 .556-.45 1.007-1.007 1.007h-12.993l-5 5z"})});fy.propTypes=Pe;const py=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsx("path",{fill:"currentColor",d:"M18 7h5v1h-2.01l-1.33 14.64a1.5 1.5 0 0 1-1.5 1.36H9.84a1.5 1.5 0 0 1-1.49-1.36L7.01 8H5V7h5V6c0-1.1.9-2 2-2h4a2 2 0 0 1 2 2v1Zm-6-2a1 1 0 0 0-1 1v1h6V6a1 1 0 0 0-1-1h-4ZM8.02 8l1.32 14.54a.5.5 0 0 0 .5.46h8.33a.5.5 0 0 0 .5-.46L19.99 8H8.02Z"})});py.propTypes=Pe;const gy=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsxs("g",{fill:"currentColor",children:[h.jsx("path",{d:"M18 15h8v-1h-8z"}),h.jsx("path",{d:"M14 18v8h1v-8zM14 3v8h1v-8zM3 15h8v-1h-8z"})]})});gy.propTypes=Pe;const my=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 29 31",width:A,height:A,...t,children:h.jsxs("g",{fill:"currentColor",fillRule:"nonzero",children:[h.jsx("path",{d:"M15.3 22l8.187-8.187c.394-.394.395-1.028.004-1.418l-4.243-4.243c-.394-.394-1.019-.395-1.407-.006l-11.325 11.325c-.383.383-.383 1.018.007 1.407l1.121 1.121h7.656zm-9.484-.414c-.781-.781-.779-2.049-.007-2.821l11.325-11.325c.777-.777 2.035-.78 2.821.006l4.243 4.243c.781.781.78 2.048-.004 2.832l-8.48 8.48h-8.484l-1.414-1.414z"}),h.jsx("path",{d:"M13.011 22.999h7.999v-1h-7.999zM13.501 11.294l6.717 6.717.707-.707-6.717-6.717z"})]})});my.propTypes=Pe;const _y=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:A,height:A,viewBox:"0 0 28 28",...t,children:h.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M5 10.76l-.41-.72-.03-.04.03-.04a15 15 0 012.09-2.9c1.47-1.6 3.6-3.12 6.32-3.12 2.73 0 4.85 1.53 6.33 3.12a15.01 15.01 0 012.08 2.9l.03.04-.03.04a15 15 0 01-2.09 2.9c-1.47 1.6-3.6 3.12-6.32 3.12-2.73 0-4.85-1.53-6.33-3.12a15 15 0 01-1.66-2.18zm17.45-.98L22 10l.45.22-.01.02a5.04 5.04 0 01-.15.28 16.01 16.01 0 01-2.23 3.1c-1.56 1.69-3.94 3.44-7.06 3.44-3.12 0-5.5-1.75-7.06-3.44a16 16 0 01-2.38-3.38v-.02h-.01L4 10l-.45-.22.01-.02a5.4 5.4 0 01.15-.28 16 16 0 012.23-3.1C7.5 4.69 9.88 2.94 13 2.94c3.12 0 5.5 1.75 7.06 3.44a16.01 16.01 0 012.38 3.38v.02h.01zM22 10l.45-.22.1.22-.1.22L22 10zM3.55 9.78L4 10l-.45.22-.1-.22.1-.22zm6.8.22A2.6 2.6 0 0113 7.44 2.6 2.6 0 0115.65 10 2.6 2.6 0 0113 12.56 2.6 2.6 0 0110.35 10zM13 6.44A3.6 3.6 0 009.35 10 3.6 3.6 0 0013 13.56c2 0 3.65-1.58 3.65-3.56A3.6 3.6 0 0013 6.44zm7.85 12l.8-.8.7.71-.79.8a.5.5 0 000 .7l.59.59c.2.2.5.2.7 0l1.8-1.8.7.71-1.79 1.8a1.5 1.5 0 01-2.12 0l-.59-.59a1.5 1.5 0 010-2.12zM16.5 21.5l-.35-.35a.5.5 0 00-.07.07l-1 1.5-1 1.5a.5.5 0 00.42.78h4a2.5 2.5 0 001.73-.77A2.5 2.5 0 0021 22.5a2.5 2.5 0 00-.77-1.73A2.5 2.5 0 0018.5 20a3.1 3.1 0 00-1.65.58 5.28 5.28 0 00-.69.55v.01h-.01l.35.36zm.39.32l-.97 1.46-.49.72h3.07c.34 0 .72-.17 1.02-.48.3-.3.48-.68.48-1.02 0-.34-.17-.72-.48-1.02-.3-.3-.68-.48-1.02-.48-.35 0-.75.18-1.1.42a4.27 4.27 0 00-.51.4z"})});_y.propTypes=Pe;const vy=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,...t,children:h.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M14 6a3 3 0 0 0-3 3v3h8.5a2.5 2.5 0 0 1 2.5 2.5v7a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 6 21.5v-7A2.5 2.5 0 0 1 8.5 12H10V9a4 4 0 0 1 8 0h-1a3 3 0 0 0-3-3zm-1 11a1 1 0 1 1 2 0v2a1 1 0 1 1-2 0v-2zm-6-2.5c0-.83.67-1.5 1.5-1.5h11c.83 0 1.5.67 1.5 1.5v7c0 .83-.67 1.5-1.5 1.5h-11A1.5 1.5 0 0 1 7 21.5v-7z"})});vy.propTypes=Pe;const By=({size:A=28,...t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,fill:"currentColor",...t,children:[h.jsx("path",{d:"M17.646 18.354l4 4 .708-.708-4-4z"}),h.jsx("path",{d:"M12.5 21a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17zm0-1a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15z"}),h.jsx("path",{d:"M9 13h7v-1H9z"}),h.jsx("path",{d:"M13 16V9h-1v7z"})]});By.propTypes=Pe;const wy=({size:A=28,...t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,fill:"currentColor",...t,children:[h.jsx("path",{d:"M17.646 18.354l4 4 .708-.708-4-4z"}),h.jsx("path",{d:"M12.5 21a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17zm0-1a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15z"}),h.jsx("path",{d:"M9 13h7v-1H9z"})]});wy.propTypes=Pe;const yy=({size:A=28,...t})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:A,height:A,viewBox:"0 0 28 28",...t,children:h.jsx("path",{fill:"currentColor",d:"M2 9.75a1.5 1.5 0 0 0-1.5 1.5v5.5a1.5 1.5 0 0 0 1.5 1.5h24a1.5 1.5 0 0 0 1.5-1.5v-5.5a1.5 1.5 0 0 0-1.5-1.5zm0 1h3v2.5h1v-2.5h3.25v3.9h1v-3.9h3.25v2.5h1v-2.5h3.25v3.9h1v-3.9H22v2.5h1v-2.5h3a.5.5 0 0 1 .5.5v5.5a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-5.5a.5.5 0 0 1 .5-.5z",transform:"rotate(-45 14 14)"})});yy.propTypes=Pe;const Cy=({size:A=28,...t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:A,height:A,viewBox:"0 0 28 28",fill:"currentColor",...t,children:[h.jsx("path",{d:"M14 5a9 9 0 1 0 0 18 9 9 0 0 0 0-18zm0 1a8 8 0 1 1 0 16 8 8 0 0 1 0-16z"}),h.jsx("path",{d:"M14.5 8v6h4v1h-5V8h1z"}),h.jsx("path",{d:"M12 3h4v1h-4z"})]});Cy.propTypes=Pe;const by=({size:A=18,filled:t=!1,...e})=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:A,height:A,viewBox:"0 0 18 18",...e,children:t?h.jsx("path",{fill:"#FFB800",d:"M9 1l2.47 5.01L17 6.76l-4 3.9.94 5.5L9 13.77l-4.94 2.39.94-5.5-4-3.9 5.53-.75L9 1z"}):h.jsx("path",{fill:"currentColor",d:"M9 1l2.47 5.01L17 6.76l-4 3.9.94 5.5L9 13.77l-4.94 2.39.94-5.5-4-3.9 5.53-.75L9 1zm0 2.24L7.18 7.11l-4.01.58 2.9 2.83-.69 4 3.62-1.9 3.62 1.9-.69-4 2.9-2.83-4.01-.58L9 3.24z"})});by.propTypes={...Pe,filled:_e.bool};const xy=({size:A=28,...t})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:A,height:A,fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:[h.jsx("path",{d:"M4 20 Q 14 4, 24 20",strokeLinecap:"round"}),h.jsx("circle",{cx:"4",cy:"20",r:"2",fill:"currentColor",stroke:"none"}),h.jsx("circle",{cx:"24",cy:"20",r:"2",fill:"currentColor",stroke:"none"})]});xy.propTypes=Pe;var L1=B2();const s3="_floatingToolbar_bi1sz_1",i3="_widgetWrapper_bi1sz_21",A3="_dragHandle_bi1sz_35",n3="_content_bi1sz_71",r3="_widget_bi1sz_21",l3="_active_bi1sz_119",o3="_tooltip_bi1sz_139",Er={floatingToolbar:s3,widgetWrapper:i3,dragHandle:A3,content:n3,widget:r3,active:l3,tooltip:o3},Sy=({favoriteTools:A,activeTool:t,onToolChange:e,toolGroups:s})=>{const[n,l]=B.useState(()=>{const x=localStorage.getItem("tv_floating_toolbar_pos");if(x)try{return JSON.parse(x)}catch{return{x:window.innerWidth-800,y:100}}return{x:window.innerWidth-800,y:100}}),[a,c]=B.useState(!1),[d,f]=B.useState(null),p=B.useRef({x:0,y:0}),m=B.useRef(null),v=B.useMemo(()=>{const x=[];return s.forEach(U=>{U.items.forEach(M=>{x.push(M)})}),x},[s]),w=B.useMemo(()=>!A||A.length===0?[]:A.map(x=>v.find(U=>U.id===x)).filter(Boolean),[A,v]),y=B.useCallback(x=>{if(!a)return;const U=x.clientX-p.current.x,M=x.clientY-p.current.y,N=window.innerWidth-(m.current?.offsetWidth||200),I=window.innerHeight-(m.current?.offsetHeight||50);l({x:Math.max(0,Math.min(U,N)),y:Math.max(0,Math.min(M,I))})},[a]),b=B.useCallback(()=>{a&&(c(!1),localStorage.setItem("tv_floating_toolbar_pos",JSON.stringify(n)))},[a,n]);B.useEffect(()=>{if(a)return document.addEventListener("mousemove",y),document.addEventListener("mouseup",b),()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",b)}},[a,y,b]);const S=x=>{if(x.target.closest(`.${Er.dragHandle}`)){c(!0);const U=m.current.getBoundingClientRect();p.current={x:x.clientX-U.left,y:x.clientY-U.top},x.preventDefault()}};return!A||A.length===0?null:L1.createPortal(h.jsx("div",{ref:m,className:Er.floatingToolbar,style:{left:n.x,top:n.y,cursor:a?"grabbing":"default"},onMouseDown:S,children:h.jsxs("div",{className:Er.widgetWrapper,children:[h.jsx("div",{className:Er.dragHandle,children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8 12",width:"8",height:"12",fill:"currentColor",children:[h.jsx("rect",{width:"2",height:"2",rx:"1"}),h.jsx("rect",{width:"2",height:"2",rx:"1",y:"5"}),h.jsx("rect",{width:"2",height:"2",rx:"1",y:"10"}),h.jsx("rect",{width:"2",height:"2",rx:"1",x:"6"}),h.jsx("rect",{width:"2",height:"2",rx:"1",x:"6",y:"5"}),h.jsx("rect",{width:"2",height:"2",rx:"1",x:"6",y:"10"})]})}),h.jsx("div",{className:Er.content,children:w.map(x=>h.jsxs("div",{className:`${Er.widget} ${t===x.id?Er.active:""}`,onClick:()=>e(x.id),onMouseEnter:()=>f(x.id),onMouseLeave:()=>f(null),children:[h.jsx(x.icon,{size:28}),d===x.id&&h.jsx("div",{className:Er.tooltip,children:x.label})]},x.id))})]})}),document.body)};Sy.propTypes={favoriteTools:_e.arrayOf(_e.string).isRequired,activeTool:_e.string,onToolChange:_e.func.isRequired,toolGroups:_e.array.isRequired};const Ey=({activeTool:A,onToolChange:t,isDrawingsLocked:e=!1,isDrawingsHidden:s=!1,isTimerVisible:n=!1})=>{const l=[{id:"cursor_group",items:[{id:"cursor",icon:gy,label:"Cross"},{id:"eraser",icon:my,label:"Eraser"}]},{id:"lines_group",items:[{id:"trendline",icon:P2,label:"Trend Line"},{id:"arrow",icon:K2,label:"Arrow"},{id:"ray",icon:G2,label:"Ray"},{id:"extended_line",icon:W2,label:"Extended Line"},{id:"horizontal_ray",icon:X2,label:"Horizontal Ray"},{id:"horizontal",icon:$2,label:"Horizontal Line"},{id:"vertical",icon:Y2,label:"Vertical Line"},{id:"cross_line",icon:J2,label:"Cross Line"},{id:"parallel_channel",icon:ey,label:"Parallel Channel"}]},{id:"fib_group",items:[{id:"fibonacci",icon:sy,label:"Fib Retracement"},{id:"fib_extension",icon:iy,label:"Trend-Based Fib Extension"}]},{id:"shapes_group",items:[{id:"brush",icon:hy,label:"Brush"},{id:"highlighter",icon:uy,label:"Highlighter"},{id:"rectangle",icon:q2,label:"Rectangle"},{id:"circle",icon:Z2,label:"Circle"},{id:"triangle",icon:ty,label:"Triangle"},{id:"arc",icon:xy,label:"Arc"},{id:"path",icon:dy,label:"Path"}]},{id:"text_group",items:[{id:"text",icon:$g,label:"Text"},{id:"callout",icon:fy,label:"Callout"},{id:"price_label",icon:$g,label:"Price Label"}]},{id:"patterns_group",items:[{id:"elliott_impulse",icon:Nv,label:"Elliott Impulse Wave (12345)"},{id:"elliott_correction",icon:oy,label:"Elliott Correction Wave (ABC)"},{id:"head_and_shoulders",icon:Nv,label:"Head & Shoulders"}]},{id:"prediction_group",items:[{id:"prediction",icon:ny,label:"Long Position"},{id:"prediction_short",icon:ry,label:"Short Position"},{id:"date_range",icon:ay,label:"Date Range"},{id:"price_range",icon:Ay,label:"Price Range"},{id:"date_price_range",icon:cy,label:"Date & Price Range"}]},{id:"measure_group",items:[{id:"measure",icon:yy,label:"Measure"}]},{id:"zoom_group",items:[{id:"zoom_in",icon:By,label:"Zoom In"}],hasZoomOut:!0},{id:"timer_group",items:[{id:"show_timer",icon:Cy,label:"Show Timer"}]},{id:"lock_group",items:[{id:"lock_all",icon:vy,label:"Lock All Drawing Tools"}]},{id:"visibility_group",items:[{id:"hide_drawings",icon:_y,label:"Hide All Drawings"}]},{id:"delete_group",items:[{id:"clear_all",icon:py,label:"Remove Objects"}]}],[a,c]=B.useState(()=>{const N={};return l.forEach(I=>{N[I.id]=I.items[0]}),N}),[d,f]=B.useState(!1),[p,m]=B.useState({top:0,left:0}),[v,w]=B.useState(null),y=B.useRef(null),[b,S]=B.useState(()=>{const N=localStorage.getItem("tv_favorite_drawing_tools");if(N)try{return JSON.parse(N)}catch{return[]}return[]});B.useEffect(()=>{localStorage.setItem("tv_favorite_drawing_tools",JSON.stringify(b))},[b]);const x=(N,I)=>{I.stopPropagation(),S(R=>R.includes(N)?R.filter(D=>D!==N):[...R,N])},U=(N,I)=>{if(I.target.closest(`.${$s.arrow}`)){if(I.stopPropagation(),v===N.id)w(null);else{const D=I.currentTarget.getBoundingClientRect();m({top:D.top,left:D.right+6}),w(N.id)}return}const R=a[N.id];t(R.id),w(null)},M=(N,I)=>{c(R=>({...R,[N]:I})),t(I.id),w(null)};return B.useEffect(()=>{const N=I=>{y.current&&!y.current.contains(I.target)&&!I.target.closest(`.${$s.popover}`)&&w(null)};return document.addEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}},[]),B.useEffect(()=>{const N=()=>{v&&w(null)};return window.addEventListener("scroll",N,!0),()=>window.removeEventListener("scroll",N,!0)},[v]),B.useEffect(()=>{A==="zoom_in"||A==="zoom_out"?f(!0):A!==null&&A!=="cursor"&&f(!1)},[A]),h.jsxs("div",{className:$s.toolbar,ref:y,children:[l.map((N,I)=>{const R=a[N.id],V=R.id==="lock_all"&&e||R.id==="hide_drawings"&&s||R.id==="show_timer"&&n||A===R.id||N.items.some(dt=>dt.id===A),lt=N.items.length>1;return h.jsxs(ks.Fragment,{children:[h.jsx("div",{className:$s.toolGroupContainer,children:h.jsxs("div",{className:$s.controlWrapper,children:[h.jsx("div",{className:`${$s.toolButton} ${V?$s.active:""} ${lt?$s.hasArrow:""}`,onClick:dt=>U(N,dt),title:R.label,children:h.jsx("div",{className:$s.toolIcon,children:h.jsx(R.icon,{})})}),lt&&h.jsx("div",{className:$s.arrowButton,onClick:dt=>{if(dt.stopPropagation(),v===N.id)w(null);else{const At=dt.currentTarget.getBoundingClientRect();m({top:At.top,left:At.right}),w(N.id)}},children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 16",width:"10",height:"16",children:h.jsx("path",{d:"M.6 1.4l1.4-1.4 8 8-8 8-1.4-1.4 6.389-6.532-6.389-6.668z"})})})]})}),N.hasZoomOut&&d&&h.jsx("div",{className:$s.toolGroupContainer,children:h.jsx("div",{className:$s.controlWrapper,children:h.jsx("div",{className:`${$s.toolButton} ${A==="zoom_out"?$s.active:""}`,onClick:()=>t("zoom_out"),title:"Zoom Out",children:h.jsx("div",{className:$s.toolIcon,children:h.jsx(wy,{})})})})}),(I===0||I===1||I===2||I===3||I===4||I===5||I===6||I===8||I===11)&&h.jsx("div",{className:$s.separator})]},N.id)}),v&&h.jsx("div",{className:$s.popover,style:{position:"fixed",top:p.top,left:p.left},children:l.find(N=>N.id===v)?.items.map(N=>h.jsxs("div",{className:`${$s.popoverItem} ${A===N.id?$s.active:""}`,onClick:()=>M(v,N),children:[h.jsx("div",{className:$s.popoverIcon,children:h.jsx(N.icon,{size:20})}),h.jsx("span",{className:$s.popoverLabel,children:N.label}),h.jsx("div",{className:$s.favoriteButton,onClick:I=>x(N.id,I),title:b.includes(N.id)?"Remove from favorites":"Add to favorites",children:h.jsx(by,{size:16,filled:b.includes(N.id)})})]},N.id))}),h.jsx(Sy,{favoriteTools:b,activeTool:A,onToolChange:t,toolGroups:l})]})};Ey.propTypes={activeTool:_e.string,onToolChange:_e.func.isRequired,isDrawingsLocked:_e.bool,isDrawingsHidden:_e.bool,isTimerVisible:_e.bool};const a3="_panel_1xd0n_1",c3="_header_1xd0n_27",h3="_title_1xd0n_43",u3="_resetBtn_1xd0n_57",d3="_content_1xd0n_105",f3="_field_1xd0n_119",p3="_sliderHeader_1xd0n_127",g3="_sliderLabel_1xd0n_141",m3="_sliderValue_1xd0n_157",_3="_slider_1xd0n_127",v3="_footer_1xd0n_273",B3="_toolIndicator_1xd0n_285",Bi={panel:a3,header:c3,title:h3,resetBtn:u3,content:d3,field:f3,sliderHeader:p3,sliderLabel:g3,sliderValue:m3,slider:_3,footer:v3,toolIndicator:B3},w3="_container_1rfdd_1",y3="_label_1rfdd_13",C3="_inputWrapper_1rfdd_29",b3="_colorButton_1rfdd_37",x3="_colorPreview_1rfdd_83",S3="_colorValue_1rfdd_99",E3="_dropdown_1rfdd_113",T3="_presets_1rfdd_141",Q3="_swatch_1rfdd_155",F3="_swatchActive_1rfdd_193",U3="_customColor_1rfdd_203",M3="_customLabel_1rfdd_213",I3="_colorInput_1rfdd_231",bA={container:w3,label:y3,inputWrapper:C3,colorButton:b3,colorPreview:x3,colorValue:S3,dropdown:E3,presets:T3,swatch:Q3,swatchActive:F3,customColor:U3,customLabel:M3,colorInput:I3},fn=[{value:0,label:"Solid",pattern:[]},{value:1,label:"Dotted",pattern:[2,2]},{value:2,label:"Dashed",pattern:[6,6]},{value:3,label:"Large Dashed",pattern:[10,10]},{value:4,label:"Sparse Dotted",pattern:[2,10]}],N3=["#2962FF","#089981","#F23645","#FF9800","#9C27B0","#00BCD4","#FFEB3B","#795548","#607D8B","#FFFFFF"],Ty=({value:A,onChange:t,label:e,presets:s=N3})=>{const[n,l]=B.useState(!1),a=B.useRef(null),c=B.useRef(null);B.useEffect(()=>{const m=v=>{a.current&&!a.current.contains(v.target)&&l(!1)};return n&&document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[n]);const d=B.useCallback(m=>{t(m),l(!1)},[t]),f=B.useCallback(m=>{t(m.target.value)},[t]),p=B.useCallback(m=>{m.key==="Escape"?l(!1):(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),l(!n))},[n]);return h.jsxs("div",{className:bA.container,ref:a,children:[e&&h.jsx("span",{className:bA.label,children:e}),h.jsxs("div",{className:bA.inputWrapper,children:[h.jsxs("button",{type:"button",className:bA.colorButton,onClick:()=>l(!n),onKeyDown:p,"aria-label":`Select color, current: ${A}`,"aria-expanded":n,"aria-haspopup":"listbox",children:[h.jsx("span",{className:bA.colorPreview,style:{backgroundColor:A}}),h.jsx("span",{className:bA.colorValue,children:A})]}),n&&h.jsxs("div",{className:bA.dropdown,role:"listbox","aria-label":"Color options",children:[h.jsx("div",{className:bA.presets,children:s.map(m=>h.jsx("button",{type:"button",className:`${bA.swatch} ${A===m?bA.swatchActive:""}`,style:{backgroundColor:m},onClick:()=>d(m),"aria-label":`Select ${m}`,"aria-selected":A===m,role:"option"},m))}),h.jsx("div",{className:bA.customColor,children:h.jsxs("label",{className:bA.customLabel,children:["Custom:",h.jsx("input",{ref:c,type:"color",value:A,onChange:f,className:bA.colorInput,"aria-label":"Choose custom color"})]})})]})]})]})};Ty.propTypes={value:_e.string.isRequired,onChange:_e.func.isRequired,label:_e.string,presets:_e.arrayOf(_e.string)};const L3="_container_1itmw_1",H3="_label_1itmw_15",D3="_selector_1itmw_31",k3="_selectedValue_1itmw_77",j3="_styleName_1itmw_89",O3="_linePreview_1itmw_99",R3="_chevron_1itmw_107",z3="_chevronOpen_1itmw_119",V3="_dropdown_1itmw_127",P3="_option_1itmw_153",K3="_optionActive_1itmw_197",G3="_optionLabel_1itmw_213",DA={container:L3,label:H3,selector:D3,selectedValue:k3,styleName:j3,linePreview:O3,chevron:R3,chevronOpen:z3,dropdown:V3,option:P3,optionActive:K3,optionLabel:G3},Qy=({value:A,onChange:t,label:e})=>{const[s,n]=B.useState(!1),l=B.useRef(null),a=fn.find(p=>p.value===A)||fn[0];B.useEffect(()=>{const p=m=>{l.current&&!l.current.contains(m.target)&&n(!1)};return s&&document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[s]);const c=B.useCallback(p=>{t(p),n(!1)},[t]),d=B.useCallback(p=>{if(p.key==="Escape")n(!1);else if(p.key==="Enter"||p.key===" ")p.preventDefault(),n(!s);else if(p.key==="ArrowDown"&&s){p.preventDefault();const v=(fn.findIndex(w=>w.value===A)+1)%fn.length;t(fn[v].value)}else if(p.key==="ArrowUp"&&s){p.preventDefault();const v=(fn.findIndex(w=>w.value===A)-1+fn.length)%fn.length;t(fn[v].value)}},[s,A,t]),f=(p,m=!1)=>{const v=m?"var(--tv-color-brand)":"var(--tv-color-text-primary)",w=p.length>0?p.join(" "):"none";return h.jsx("svg",{width:"60",height:"12",viewBox:"0 0 60 12",className:DA.linePreview,children:h.jsx("line",{x1:"0",y1:"6",x2:"60",y2:"6",stroke:v,strokeWidth:"2",strokeDasharray:w})})};return h.jsxs("div",{className:DA.container,ref:l,children:[e&&h.jsx("span",{className:DA.label,children:e}),h.jsxs("button",{type:"button",className:DA.selector,onClick:()=>n(!s),onKeyDown:d,"aria-label":`Line style: ${a.label}`,"aria-expanded":s,"aria-haspopup":"listbox",children:[h.jsxs("div",{className:DA.selectedValue,children:[f(a.pattern,!0),h.jsx("span",{className:DA.styleName,children:a.label})]}),h.jsx(Bc,{size:14,className:`${DA.chevron} ${s?DA.chevronOpen:""}`})]}),s&&h.jsx("div",{className:DA.dropdown,role:"listbox","aria-label":"Line style options",children:fn.map(p=>h.jsxs("button",{type:"button",className:`${DA.option} ${A===p.value?DA.optionActive:""}`,onClick:()=>c(p.value),role:"option","aria-selected":A===p.value,children:[f(p.pattern,A===p.value),h.jsx("span",{className:DA.optionLabel,children:p.label})]},p.value))})]})};Qy.propTypes={value:_e.number.isRequired,onChange:_e.func.isRequired,label:_e.string};const Fy=({defaults:A,onPropertyChange:t,onReset:e,isVisible:s,activeTool:n})=>{if(!s)return null;const l=B.useCallback(p=>{t("lineColor",p);const m=p.slice(1),v=parseInt(m.slice(0,2),16),w=parseInt(m.slice(2,4),16),y=parseInt(m.slice(4,6),16);t("backgroundColor",`rgba(${v}, ${w}, ${y}, 0.2)`)},[t]),a=B.useCallback(p=>{t("width",parseInt(p.target.value,10))},[t]),c=B.useCallback(p=>{t("globalAlpha",parseFloat(p.target.value))},[t]),d=B.useCallback(p=>{t("lineStyle",p)},[t]),f=Math.round(A.globalAlpha*100);return h.jsxs("div",{className:Bi.panel,role:"region","aria-label":"Drawing properties",children:[h.jsxs("div",{className:Bi.header,children:[h.jsx("h3",{className:Bi.title,children:"Style"}),h.jsx("button",{type:"button",className:Bi.resetBtn,onClick:e,"aria-label":"Reset to defaults",title:"Reset to defaults",children:h.jsx(vE,{size:14})})]}),h.jsxs("div",{className:Bi.content,children:[h.jsx(Ty,{value:A.lineColor,onChange:l,label:"Color"}),h.jsx("div",{className:Bi.field,children:h.jsx(Qy,{value:A.lineStyle,onChange:d,label:"Style"})}),h.jsxs("div",{className:Bi.field,children:[h.jsxs("div",{className:Bi.sliderHeader,children:[h.jsx("label",{htmlFor:"drawing-width",className:Bi.sliderLabel,children:"Width"}),h.jsxs("span",{className:Bi.sliderValue,children:[A.width,"px"]})]}),h.jsx("input",{id:"drawing-width",type:"range",min:"1",max:"10",step:"1",value:A.width,onChange:a,className:Bi.slider,"aria-label":`Line width: ${A.width} pixels`})]}),h.jsxs("div",{className:Bi.field,children:[h.jsxs("div",{className:Bi.sliderHeader,children:[h.jsx("label",{htmlFor:"drawing-opacity",className:Bi.sliderLabel,children:"Opacity"}),h.jsxs("span",{className:Bi.sliderValue,children:[f,"%"]})]}),h.jsx("input",{id:"drawing-opacity",type:"range",min:"0.1",max:"1",step:"0.1",value:A.globalAlpha,onChange:c,className:Bi.slider,"aria-label":`Opacity: ${f} percent`})]})]}),n&&h.jsx("div",{className:Bi.footer,children:h.jsxs("span",{className:Bi.toolIndicator,children:["Active: ",W3(n)]})})]})},W3=A=>A.replace(/([A-Z])/g," $1").trim();Fy.propTypes={defaults:_e.shape({lineColor:_e.string.isRequired,backgroundColor:_e.string,width:_e.number.isRequired,lineStyle:_e.number.isRequired,globalAlpha:_e.number.isRequired}).isRequired,onPropertyChange:_e.func.isRequired,onReset:_e.func.isRequired,isVisible:_e.bool.isRequired,activeTool:_e.string};const $3="_watchlist_hm60k_1",X3="_header_hm60k_21",Y3="_title_hm60k_37",J3="_actions_hm60k_47",q3="_icon_hm60k_59",Z3="_columnHeaders_hm60k_145",tT="_resizeHandle_hm60k_165",eT="_isResizing_hm60k_209",sT="_colSymbol_hm60k_225",iT="_colLast_hm60k_239",AT="_colChg_hm60k_251",nT="_colChgP_hm60k_263",rT="_list_hm60k_275",lT="_active_hm60k_117",oT="_skeletonItem_hm60k_493",aT="_skeletonCell_hm60k_509",cT="_skeletonSymbol_hm60k_535",hT="_skeletonPrice_hm60k_543",uT="_skeletonChange_hm60k_553",dT="_skeletonPercent_hm60k_561",fT="_emptyState_hm60k_569",pT="_quickAccessRow_hm60k_601",gT="_quickAccessBtn_hm60k_637",ws={watchlist:$3,header:X3,title:Y3,actions:J3,icon:q3,columnHeaders:Z3,resizeHandle:tT,isResizing:eT,colSymbol:sT,colLast:iT,colChg:AT,colChgP:nT,list:rT,active:lT,skeletonItem:oT,skeletonCell:aT,skeletonSymbol:cT,skeletonPrice:hT,skeletonChange:uT,skeletonPercent:dT,emptyState:fT,quickAccessRow:pT,quickAccessBtn:gT},mT="_selector_zmgg4_1",_T="_selectorButton_zmgg4_9",vT="_watchlistName_zmgg4_49",BT="_chevron_zmgg4_63",wT="_chevronOpen_zmgg4_75",yT="_dropdown_zmgg4_83",CT="_menuSection_zmgg4_111",bT="_menuItem_zmgg4_119",xT="_confirmRow_zmgg4_195",ST="_confirmBtn_zmgg4_211",ET="_cancelBtn_zmgg4_213",TT="_divider_zmgg4_273",QT="_menuDivider_zmgg4_285",FT="_dropdownList_zmgg4_297",UT="_dropdownItem_zmgg4_307",MT="_active_zmgg4_333",IT="_itemName_zmgg4_361",NT="_itemCount_zmgg4_379",LT="_itemActions_zmgg4_395",HT="_showActions_zmgg4_425",DT="_iconButton_zmgg4_441",kT="_deleteButton_zmgg4_491",jT="_starButton_zmgg4_501",OT="_starActive_zmgg4_517",RT="_starContainer_zmgg4_527",zT="_emojiPicker_zmgg4_537",VT="_emojiOption_zmgg4_571",PT="_createRow_zmgg4_661",KT="_editRow_zmgg4_663",GT="_createInput_zmgg4_679",WT="_editInput_zmgg4_681",Ce={selector:mT,selectorButton:_T,watchlistName:vT,chevron:BT,chevronOpen:wT,dropdown:yT,menuSection:CT,menuItem:bT,confirmRow:xT,confirmBtn:ST,cancelBtn:ET,divider:TT,menuDivider:QT,dropdownList:FT,dropdownItem:UT,active:MT,itemName:IT,itemCount:NT,itemActions:LT,showActions:HT,iconButton:DT,deleteButton:kT,starButton:jT,starActive:OT,starContainer:RT,emojiPicker:zT,emojiOption:VT,createRow:PT,editRow:KT,createInput:GT,editInput:WT},$T=["","","","","","","","","","","","","","",""],XT=({watchlists:A,activeId:t,onSwitch:e,onCreate:s,onRename:n,onDelete:l,onClear:a,onCopy:c,onAddSection:d,onExport:f,onImport:p,onToggleFavorite:m})=>{const[v,w]=B.useState(!1),[y,b]=B.useState(!1),[S,x]=B.useState(""),[U,M]=B.useState(null),[N,I]=B.useState(""),[R,D]=B.useState(!1),[V,lt]=B.useState(null),dt=B.useRef(null),At=B.useRef(null),ft=B.useRef(null),mt=B.useRef(null),at=A.find(Nt=>Nt.id===t)||A[0],Ut=B.useMemo(()=>[...A].sort((Nt,Wt)=>Nt.id==="wl_favorites"?-1:Wt.id==="wl_favorites"?1:0),[A]);B.useEffect(()=>{const Nt=Wt=>{dt.current&&!dt.current.contains(Wt.target)&&(w(!1),b(!1),M(null),D(!1),lt(null))};return v&&document.addEventListener("mousedown",Nt),()=>{document.removeEventListener("mousedown",Nt)}},[v]),B.useEffect(()=>{y&&At.current&&At.current.focus()},[y]),B.useEffect(()=>{U&&ft.current&&(ft.current.focus(),ft.current.select())},[U]);const W=()=>{w(!v),v&&(b(!1),M(null),D(!1))},E=Nt=>{e(Nt),w(!1)},K=()=>{b(!0),x("")},ot=()=>{const Nt=S.trim();Nt&&(s(Nt),b(!1),x(""),w(!1))},pt=Nt=>{Nt.key==="Enter"?ot():Nt.key==="Escape"&&(b(!1),x(""))},Q=(Nt,Wt)=>{Nt.stopPropagation(),M(Wt.id),I(Wt.name)},j=Nt=>{const Wt=N.trim();Wt&&Wt!==A.find(Je=>Je.id===Nt)?.name&&n(Nt,Wt),M(null),I("")},Z=(Nt,Wt)=>{Nt.key==="Enter"?j(Wt):Nt.key==="Escape"&&(M(null),I(""))},rt=(Nt,Wt)=>{Nt.stopPropagation(),l(Wt)},Et=()=>{R?(a?.(t),D(!1),w(!1)):D(!0)},xt=()=>{if(c){const Nt=`${at?.name||"Watchlist"} (Copy)`;c(t,Nt),w(!1)}},Qt=()=>{d?.(),w(!1)},se=()=>{if(f)f(t);else{const Wt=(at?.symbols||[]).filter(Ae=>typeof Ae!="string"||!Ae.startsWith("###")).map(Ae=>{const te=typeof Ae=="string"?Ae:Ae.symbol,le=typeof Ae=="string"?"NSE":Ae.exchange||"NSE";return`${te},${le}`}).join(`
`),Je=new Blob([`symbol,exchange
${Wt}`],{type:"text/csv"}),tt=URL.createObjectURL(Je),Ht=document.createElement("a");Ht.href=tt,Ht.download=`${at?.name||"watchlist"}.csv`,document.body.appendChild(Ht),Ht.click(),document.body.removeChild(Ht),URL.revokeObjectURL(tt)}w(!1)},oe=()=>{mt.current?.click()},He=Nt=>{const Wt=Nt.target.files?.[0];if(!Wt)return;const Je=new FileReader;Je.onload=tt=>{const Ht=tt.target?.result;if(typeof Ht!="string")return;const Ae=Ht.split(`
`).filter(le=>le.trim()),te=[];Ae.forEach((le,Ft)=>{if(Ft===0&&le.toLowerCase().includes("symbol"))return;const Qe=le.split(",").map(qe=>qe.trim());Qe[0]&&te.push({symbol:Qe[0].toUpperCase(),exchange:Qe[1]?.toUpperCase()||"NSE"})}),te.length>0&&p&&p(te,t)},Je.readAsText(Wt),Nt.target.value="",w(!1)};return h.jsxs("div",{className:Ce.selector,ref:dt,children:[h.jsxs("button",{className:Ce.selectorButton,onClick:W,children:[h.jsx("span",{className:Ce.watchlistName,children:at?.name||"Watchlist"}),h.jsx(Bc,{size:14,className:Tt(Ce.chevron,{[Ce.chevronOpen]:v})})]}),v&&h.jsxs("div",{className:Ce.dropdown,children:[h.jsxs("div",{className:Ce.menuSection,children:[h.jsxs("button",{className:Ce.menuItem,onClick:K,children:[h.jsx(Ql,{size:14}),h.jsx("span",{children:"Create new list..."})]}),c&&h.jsxs("button",{className:Ce.menuItem,onClick:xt,children:[h.jsx(O4,{size:14}),h.jsx("span",{children:"Make a copy..."})]}),h.jsxs("button",{className:Ce.menuItem,onClick:()=>{at&&at.id!=="wl_favorites"&&(M(at.id),I(at.name))},disabled:at?.id==="wl_favorites",children:[h.jsx(Iv,{size:14}),h.jsx("span",{children:"Rename"})]}),a&&(R?h.jsxs("div",{className:Tt(Ce.menuItem,Ce.confirmRow),children:[h.jsx(Mv,{size:14}),h.jsx("span",{children:"Clear list"}),h.jsx("button",{className:Ce.confirmBtn,onClick:Nt=>{Nt.stopPropagation(),a?.(t),D(!1),w(!1)},title:"Confirm",children:h.jsx(jo,{size:14,strokeWidth:3})}),h.jsx("button",{className:Ce.cancelBtn,onClick:Nt=>{Nt.stopPropagation(),D(!1)},title:"Cancel",children:h.jsx(ji,{size:14,strokeWidth:3})})]}):h.jsxs("button",{className:Ce.menuItem,onClick:Et,children:[h.jsx(Mv,{size:14}),h.jsx("span",{children:"Clear list"})]})),d&&h.jsxs("button",{className:Ce.menuItem,onClick:Qt,children:[h.jsx(j2,{size:14}),h.jsx("span",{children:"Add section"})]}),h.jsx("div",{className:Ce.menuDivider}),h.jsxs("button",{className:Ce.menuItem,onClick:se,children:[h.jsx(L2,{size:14}),h.jsx("span",{children:"Export to CSV"})]}),h.jsxs("button",{className:Ce.menuItem,onClick:oe,children:[h.jsx(z2,{size:14}),h.jsx("span",{children:"Import from CSV"})]})]}),h.jsx("div",{className:Ce.divider}),y&&h.jsxs("div",{className:Ce.createRow,children:[h.jsx("input",{ref:At,type:"text",value:S,onChange:Nt=>x(Nt.target.value),onKeyDown:pt,className:Ce.createInput,placeholder:"New watchlist name"}),h.jsx("button",{className:Ce.iconButton,onClick:ot,disabled:!S.trim(),children:h.jsx(jo,{size:14})}),h.jsx("button",{className:Ce.iconButton,onClick:()=>b(!1),children:h.jsx(ji,{size:14})})]}),h.jsx("div",{className:Ce.dropdownList,children:Ut.map(Nt=>h.jsx("div",{className:Tt(Ce.dropdownItem,{[Ce.active]:Nt.id===t,[Ce.showActions]:V===Nt.id}),onClick:()=>!U&&E(Nt.id),children:U===Nt.id?h.jsxs("div",{className:Ce.editRow,children:[h.jsx("input",{ref:ft,type:"text",value:N,onChange:Wt=>I(Wt.target.value),onKeyDown:Wt=>Z(Wt,Nt.id),className:Ce.editInput,placeholder:"Watchlist name"}),h.jsx("button",{className:Ce.iconButton,onClick:()=>j(Nt.id),children:h.jsx(jo,{size:14})}),h.jsx("button",{className:Ce.iconButton,onClick:()=>M(null),children:h.jsx(ji,{size:14})})]}):h.jsxs(h.Fragment,{children:[h.jsx("span",{className:Ce.itemName,children:Nt.name}),h.jsx("span",{className:Ce.itemCount,children:Nt.symbols?.length||0}),h.jsxs("div",{className:Ce.itemActions,children:[m&&h.jsxs("div",{className:Ce.starContainer,children:[h.jsx("button",{className:Tt(Ce.iconButton,Ce.starButton,{[Ce.starActive]:Nt.isFavorite}),onClick:Wt=>{Wt.stopPropagation(),Nt.isFavorite?m(Nt.id,null):lt(Nt.id)},title:Nt.isFavorite?"Remove from favorites":"Add to favorites",children:h.jsx(Hr,{size:12,fill:Nt.isFavorite?"currentColor":"none"})}),V===Nt.id&&h.jsx("div",{className:Ce.emojiPicker,onClick:Wt=>Wt.stopPropagation(),children:$T.map(Wt=>h.jsx("button",{className:Ce.emojiOption,onClick:Je=>{Je.stopPropagation(),m(Nt.id,Wt),lt(null)},children:Wt},Wt))})]}),h.jsx("button",{className:Ce.iconButton,onClick:Wt=>Q(Wt,Nt),title:"Rename",children:h.jsx(Iv,{size:12})}),A.length>1&&h.jsx("button",{className:Tt(Ce.iconButton,Ce.deleteButton),onClick:Wt=>rt(Wt,Nt.id),title:"Delete",children:h.jsx(Il,{size:12})})]})]})},Nt.id))})]}),h.jsx("input",{ref:mt,type:"file",accept:".csv,.txt",onChange:He,style:{display:"none"}})]})},YT=ks.memo(XT),JT="_item_zw209_1",qT="_active_zw209_39",ZT="_dragging_zw209_49",tQ="_dragHandle_zw209_61",eQ="_symbolName_zw209_119",sQ="_last_zw209_139",iQ="_chg_zw209_141",AQ="_chgP_zw209_143",nQ="_up_zw209_161",rQ="_down_zw209_169",lQ="_removeBtn_zw209_179",Zi={item:JT,active:qT,dragging:ZT,dragHandle:tQ,symbolName:eQ,last:sQ,chg:iQ,chgP:AQ,up:nQ,down:rQ,removeBtn:lQ},oQ=({item:A,isActive:t,isDragging:e,columnWidths:s,minColumnWidth:n,sortEnabled:l,index:a,onSelect:c,onRemove:d,onDragStart:f,onDragOver:p,onDragEnd:m,onDrop:v,onContextMenu:w,onMouseEnter:y,onMouseLeave:b,onMouseMove:S})=>{const x=B.useRef(null),U=B.useCallback(()=>{c({symbol:A.symbol,exchange:A.exchange})},[A.symbol,A.exchange,c]),M=B.useCallback(V=>{V.stopPropagation(),d({symbol:A.symbol,exchange:A.exchange})},[A.symbol,A.exchange,d]),N=B.useCallback(V=>{V.preventDefault(),w&&w(V,A,a)},[w,A,a]),I=B.useCallback(V=>{if(y){const lt=x.current?.getBoundingClientRect();y(V,A,lt)}},[y,A]),R=B.useCallback(()=>{b&&b()},[b]),D=B.useCallback(V=>{S&&S(V)},[S]);return h.jsxs("div",{ref:x,className:Tt(Zi.item,{[Zi.active]:t,[Zi.dragging]:e}),onClick:U,onContextMenu:N,onMouseEnter:I,onMouseLeave:R,onMouseMove:D,draggable:!l,onDragStart:V=>f?.(V,a),onDragOver:V=>p?.(V,a),onDragEnd:m,onDrop:V=>v?.(V,a),children:[h.jsx("div",{className:Zi.dragHandle,children:h.jsx($4,{size:12})}),h.jsx("span",{className:Zi.symbolName,style:{width:s.symbol,minWidth:s.symbol},children:A.symbol}),h.jsx("span",{className:Tt(Zi.last,{[Zi.up]:A.up,[Zi.down]:!A.up&&A.chg!==0}),style:{width:s.last,minWidth:n},children:A.last}),h.jsx("span",{className:Tt(Zi.chg,{[Zi.up]:A.up,[Zi.down]:!A.up&&A.chg!==0}),style:{width:s.chg,minWidth:n},children:A.chg}),h.jsx("span",{className:Tt(Zi.chgP,{[Zi.up]:A.up,[Zi.down]:!A.up&&A.chg!==0}),style:{width:s.chgP,minWidth:n},children:A.chgP}),h.jsx("button",{className:Zi.removeBtn,onClick:M,title:"Remove from watchlist",children:h.jsx(ji,{size:12})})]})},Lv=ks.memo(oQ),aQ="_section_12lo0_1",cQ="_sectionHeader_12lo0_17",hQ="_dragOver_12lo0_45",uQ="_chevron_12lo0_71",dQ="_dragHandle_12lo0_87",fQ="_dragging_12lo0_123",pQ="_collapsed_12lo0_131",gQ="_sectionTitle_12lo0_139",mQ="_deleteBtn_12lo0_177",_Q="_editRow_12lo0_233",vQ="_editInput_12lo0_245",kA={section:aQ,sectionHeader:cQ,dragOver:hQ,chevron:uQ,dragHandle:dQ,dragging:fQ,collapsed:pQ,sectionTitle:gQ,deleteBtn:mQ,editRow:_Q,editInput:vQ},BQ=({title:A,isCollapsed:t,isDragging:e,onToggle:s,onRename:n,onDelete:l,onDragStart:a,onDragOver:c,onDragEnd:d,onDrop:f,sectionIndex:p,children:m})=>{const[v,w]=B.useState(!1),[y,b]=B.useState(A),[S,x]=B.useState(!1),U=B.useRef(null),M=B.useRef(null),N=B.useRef(0);B.useEffect(()=>{v&&U.current&&(U.current.focus(),U.current.select())},[v]),B.useEffect(()=>()=>{M.current&&clearTimeout(M.current)},[]);const I=at=>{at.target.closest(`.${kA.dragHandle}`)||(N.current+=1,N.current===1?M.current=setTimeout(()=>{N.current===1&&s?.(),N.current=0},250):N.current===2&&(clearTimeout(M.current),N.current=0,w(!0),b(A)))},R=at=>{at.key==="Enter"?D():at.key==="Escape"&&(w(!1),b(A))},D=()=>{const at=y.trim().toUpperCase();at&&at!==A&&n?.(A,at),w(!1)},V=at=>{at.stopPropagation(),l?.(A)},lt=at=>{at.dataTransfer.effectAllowed="move",at.dataTransfer.setData("text/plain",`section:${A}`),a&&a(at,A,p)},dt=at=>{at.preventDefault(),at.stopPropagation(),x(!0),at.dataTransfer.dropEffect="move",c&&c(at,p)},At=at=>{x(!1)},ft=at=>{at.preventDefault(),at.stopPropagation(),x(!1),f&&f(at,p,A)},mt=()=>{d&&d()};return h.jsxs("div",{className:Tt(kA.section,{[kA.dragging]:e}),children:[h.jsxs("div",{className:Tt(kA.sectionHeader,{[kA.dragOver]:S}),onClick:I,role:"button","aria-expanded":!t,tabIndex:0,onKeyDown:at=>{(at.key==="Enter"||at.key===" ")&&(at.preventDefault(),s?.())},draggable:!0,onDragStart:lt,onDragOver:dt,onDragLeave:At,onDrop:ft,onDragEnd:mt,children:[h.jsx(Bc,{size:14,className:Tt(kA.chevron,{[kA.collapsed]:t})}),v?h.jsx("div",{className:kA.editRow,onClick:at=>at.stopPropagation(),children:h.jsx("input",{ref:U,type:"text",value:y,onChange:at=>b(at.target.value),onKeyDown:R,onBlur:D,className:kA.editInput,placeholder:"Section name"})}):h.jsxs(h.Fragment,{children:[h.jsx("span",{className:kA.sectionTitle,children:A}),h.jsx("button",{className:kA.deleteBtn,onClick:V,title:"Delete section",children:h.jsx(Il,{size:12})})]})]}),!t&&h.jsx("div",{className:kA.sectionContent,children:m})]})},wQ=ks.memo(BQ),yQ="_tooltip_1oznn_1",CQ="_tooltipName_1oznn_49",bQ="_tooltipDetails_1oznn_69",xQ="_tooltipDot_1oznn_87",SQ="_marketOpen_1oznn_105",EQ="_marketStatus_1oznn_117",pl={tooltip:yQ,tooltipName:CQ,tooltipDetails:bQ,tooltipDot:xQ,marketOpen:SQ,marketStatus:EQ},TQ=({isVisible:A,content:t,position:e})=>{if(!A||!t)return null;const{fullName:s,symbol:n,exchange:l,dataType:a="Real-time",isMarketOpen:c=!1}=t,d={left:Math.min(e.x,window.innerWidth-250),top:e.y+20};d.top+80>window.innerHeight&&(d.top=e.y-80);const f=h.jsxs("div",{className:pl.tooltip,style:d,children:[h.jsx("div",{className:pl.tooltipName,children:s||n}),h.jsxs("div",{className:Tt(pl.tooltipDetails,{[pl.marketOpen]:c}),children:[h.jsx("span",{children:l}),h.jsx("span",{className:pl.tooltipDot}),h.jsx("span",{children:a}),h.jsx("span",{className:pl.tooltipDot}),h.jsx("span",{className:pl.marketStatus,children:c?"Market open":"Market closed"})]})]});return L1.createPortal(f,document.body)},QQ=ks.memo(TQ),FQ="_backdrop_xh5v5_1",UQ="_menu_xh5v5_19",MQ="_menuItem_xh5v5_67",IQ="_danger_xh5v5_115",NQ="_divider_xh5v5_131",Vn={backdrop:FQ,menu:UQ,menuItem:MQ,danger:IQ,divider:NQ},LQ=({isVisible:A,position:t,onClose:e,onAddSection:s,onMoveToTop:n,onMoveToBottom:l,onRemove:a})=>{if(!A)return null;const c={left:Math.min(t.x,window.innerWidth-200),top:Math.min(t.y,window.innerHeight-200)},d=p=>m=>{m.stopPropagation(),p(),e()},f=h.jsxs(h.Fragment,{children:[h.jsx("div",{className:Vn.backdrop,onClick:e}),h.jsxs("div",{className:Vn.menu,style:c,children:[h.jsxs("button",{className:Vn.menuItem,onClick:d(s),children:[h.jsx(j2,{size:14}),h.jsx("span",{children:"Add section above"})]}),h.jsx("div",{className:Vn.divider}),h.jsxs("button",{className:Vn.menuItem,onClick:d(n),children:[h.jsx(I2,{size:14}),h.jsx("span",{children:"Move to top"})]}),h.jsxs("button",{className:Vn.menuItem,onClick:d(l),children:[h.jsx(M2,{size:14}),h.jsx("span",{children:"Move to bottom"})]}),h.jsx("div",{className:Vn.divider}),h.jsxs("button",{className:`${Vn.menuItem} ${Vn.danger}`,onClick:d(a),children:[h.jsx(Il,{size:14}),h.jsx("span",{children:"Remove from watchlist"})]})]})]});return L1.createPortal(f,document.body)},HQ=ks.memo(LQ),DQ=2e3,kQ=50,jQ=3e4;function OQ(){const[A,t]=B.useState(!1),[e,s]=B.useState(!1),[n,l]=B.useState(null),[a,c]=B.useState({x:0,y:0}),d=B.useRef(null),f=B.useRef(null),p=B.useRef(null);B.useEffect(()=>()=>{d.current&&clearTimeout(d.current),f.current&&clearTimeout(f.current)},[]);const m=B.useCallback((b,S,x,U)=>{f.current&&(clearTimeout(f.current),f.current=null),d.current&&clearTimeout(d.current),p.current=U;const M=e?kQ:DQ;d.current=setTimeout(()=>{l(b),c({x:S,y:x}),t(!0),s(!0)},M)},[e]),v=B.useCallback(()=>{d.current&&(clearTimeout(d.current),d.current=null),t(!1),p.current=null,f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{s(!1)},jQ)},[]),w=B.useCallback((b,S)=>{c({x:b,y:S})},[]),y=B.useCallback(()=>{d.current&&(clearTimeout(d.current),d.current=null),f.current&&(clearTimeout(f.current),f.current=null),t(!1),s(!1),p.current=null},[]);return{isVisible:A,content:n,position:a,showTooltip:m,hideTooltip:v,updatePosition:w,reset:y,hasActivated:e}}const RQ={symbol:80,last:65,chg:55,chgP:55},_o=40,zQ={NIFTY:"Nifty 50 Index",BANKNIFTY:"Bank Nifty Index",NIFTY50:"Nifty 50 Index",SENSEX:"BSE Sensex",RELIANCE:"Reliance Industries Limited",TCS:"Tata Consultancy Services",INFY:"Infosys Limited",HDFCBANK:"HDFC Bank Limited",ICICIBANK:"ICICI Bank Limited",SBIN:"State Bank of India",BHARTIARTL:"Bharti Airtel Limited",ITC:"ITC Limited",HINDUNILVR:"Hindustan Unilever Limited",KOTAKBANK:"Kotak Mahindra Bank",LT:"Larsen & Toubro Limited",AXISBANK:"Axis Bank Limited",BAJFINANCE:"Bajaj Finance Limited",MARUTI:"Maruti Suzuki India Limited",ASIANPAINT:"Asian Paints Limited",TITAN:"Titan Company Limited",SUNPHARMA:"Sun Pharmaceutical Industries",WIPRO:"Wipro Limited",ULTRACEMCO:"UltraTech Cement Limited",NESTLEIND:"Nestle India Limited",POWERGRID:"Power Grid Corporation",NTPC:"NTPC Limited",ONGC:"Oil and Natural Gas Corporation",JSWSTEEL:"JSW Steel Limited",TATASTEEL:"Tata Steel Limited","M&M":"Mahindra & Mahindra Limited",HCLTECH:"HCL Technologies Limited",ADANIENT:"Adani Enterprises Limited",ADANIPORTS:"Adani Ports and SEZ Limited",COALINDIA:"Coal India Limited",BPCL:"Bharat Petroleum Corporation",GRASIM:"Grasim Industries Limited",TECHM:"Tech Mahindra Limited",INDUSINDBK:"IndusInd Bank Limited",EICHERMOT:"Eicher Motors Limited",DIVISLAB:"Divi's Laboratories Limited",DRREDDY:"Dr. Reddy's Laboratories",CIPLA:"Cipla Limited",APOLLOHOSP:"Apollo Hospitals Enterprise",BRITANNIA:"Britannia Industries Limited",HEROMOTOCO:"Hero MotoCorp Limited","BAJAJ-AUTO":"Bajaj Auto Limited",TATACONSUM:"Tata Consumer Products Limited",SBILIFE:"SBI Life Insurance Company",HDFCLIFE:"HDFC Life Insurance Company"},VQ=()=>h.jsxs("div",{className:ws.skeletonItem,children:[h.jsx("div",{className:Tt(ws.skeletonCell,ws.skeletonSymbol)}),h.jsx("div",{className:Tt(ws.skeletonCell,ws.skeletonPrice)}),h.jsx("div",{className:Tt(ws.skeletonCell,ws.skeletonChange)}),h.jsx("div",{className:Tt(ws.skeletonCell,ws.skeletonPercent)})]}),PQ=({currentSymbol:A,currentExchange:t="NSE",items:e,onSymbolSelect:s,onAddClick:n,onRemoveClick:l,onReorder:a,isLoading:c=!1,watchlists:d=[],activeWatchlistId:f=null,onSwitchWatchlist:p,onCreateWatchlist:m,onRenameWatchlist:v,onDeleteWatchlist:w,onClearWatchlist:y,onCopyWatchlist:b,onAddSection:S,onRenameSection:x,onDeleteSection:U,collapsedSections:M=[],onToggleSection:N,selectedSymbolIndex:I=null,onExport:R,onImport:D,favoriteWatchlists:V=[],onToggleFavorite:lt})=>{const dt=d.length>0&&p,[At,ft]=B.useState({key:null,direction:"asc"}),[mt,at]=B.useState(null),[Ut,W]=B.useState(null),[E,K]=B.useState(RQ),[ot,pt]=B.useState(null),Q=B.useRef(0),j=B.useRef(0),Z=OQ(),[rt,Et]=B.useState({isVisible:!1,position:{x:0,y:0},item:null,index:null}),xt=B.useCallback((wt,jt)=>{wt.preventDefault(),wt.stopPropagation(),pt(jt),Q.current=wt.clientX,j.current=E[jt]},[E]);B.useEffect(()=>{if(!ot)return;const wt=he=>{const Zt=he.clientX-Q.current,Ue=Math.max(_o,j.current+Zt);K(Ze=>({...Ze,[ot]:Ue}))},jt=()=>{pt(null)};return document.addEventListener("mousemove",wt),document.addEventListener("mouseup",jt),()=>{document.removeEventListener("mousemove",wt),document.removeEventListener("mouseup",jt)}},[ot]);const Qt=B.useCallback(wt=>{let jt="asc";if(At.key===wt)if(At.direction==="asc")jt="desc";else{ft({key:null,direction:"asc"});return}ft({key:wt,direction:jt})},[At]),se=B.useCallback((wt,jt)=>{at(jt),wt.dataTransfer.effectAllowed="move",wt.dataTransfer.setData("text/plain",jt.toString())},[]),oe=B.useCallback((wt,jt)=>{wt.preventDefault(),wt.stopPropagation(),wt.dataTransfer.dropEffect="move"},[]),He=B.useCallback(()=>{at(null)},[]),Nt=B.useCallback((wt,jt)=>{if(wt.preventDefault(),wt.stopPropagation(),mt===null||mt===jt){at(null);return}const he=[...e],[Zt]=he.splice(mt,1);he.splice(jt,0,Zt),a&&a(he),at(null)},[mt,e,a]),Wt=B.useCallback((wt,jt,he)=>{W(jt),at(he),wt.dataTransfer.effectAllowed="move",wt.dataTransfer.setData("text/plain",he.toString())},[]),Je=B.useCallback(()=>{W(null),at(null)},[]),tt=B.useCallback((wt,jt,he)=>{wt.preventDefault(),wt.stopPropagation();const Zt=wt.dataTransfer.getData("text/plain"),Ue=parseInt(Zt,10);if(isNaN(Ue)||Ue===jt){at(null),W(null);return}const Ze=[...e],[$e]=Ze.splice(Ue,1),ls=Ue<jt?jt:jt+1;Ze.splice(ls,0,$e),a&&a(Ze),at(null),W(null)},[e,a]),Ht=B.useCallback((wt,jt,he)=>{const Zt=zQ[jt.symbol]||jt.symbol,Ue=KQ(jt.exchange);Z.showTooltip({fullName:Zt,symbol:jt.symbol,exchange:jt.exchange,dataType:"Real-time",isMarketOpen:Ue},he?.left||wt.clientX,he?.bottom||wt.clientY)},[Z]),Ae=B.useCallback(()=>{Z.hideTooltip()},[Z]),te=B.useCallback(wt=>{Z.isVisible&&Z.updatePosition(wt.clientX,wt.clientY)},[Z]),le=B.useCallback((wt,jt,he)=>{wt.preventDefault(),Et({isVisible:!0,position:{x:wt.clientX,y:wt.clientY},item:jt,index:he})},[]),Ft=B.useCallback(()=>{Et(wt=>({...wt,isVisible:!1}))},[]),Qe=B.useCallback(()=>{const jt=e.filter(Zt=>typeof Zt=="string"&&Zt.startsWith("###")).map(Zt=>Zt.replace("###","")).map(Zt=>{const Ue=Zt.match(/^SECTION\s+(\d+)$/i);return Ue?parseInt(Ue[1],10):0}).filter(Zt=>Zt>0);return`SECTION ${(jt.length>0?Math.max(...jt):0)+1}`},[e]),qe=B.useCallback(()=>{if(S&&rt.index!==null){const wt=Qe();S(wt,rt.index)}},[S,rt.index,Qe]),Qs=B.useCallback(()=>{if(rt.index!==null&&rt.index>0){const wt=[...e],[jt]=wt.splice(rt.index,1);wt.unshift(jt),a&&a(wt)}},[rt.index,e,a]),Xs=B.useCallback(()=>{if(rt.index!==null&&rt.index<e.length-1){const wt=[...e],[jt]=wt.splice(rt.index,1);wt.push(jt),a&&a(wt)}},[rt.index,e,a]),Fe=B.useCallback(()=>{rt.item&&l({symbol:rt.item.symbol,exchange:rt.item.exchange})},[rt.item,l]),ss=B.useMemo(()=>{if(!At.key)return e;const wt=[];let jt=[];for(const Zt of e)typeof Zt=="string"&&Zt.startsWith("###")?(jt.length>0&&wt.push(...he(jt)),wt.push(Zt),jt=[]):jt.push(Zt);jt.length>0&&wt.push(...he(jt));function he(Zt){return[...Zt].sort((Ue,Ze)=>{let $e=Ue[At.key],ls=Ze[At.key];return["last","chg","chgP"].includes(At.key)&&($e=parseFloat($e)||0,ls=parseFloat(ls)||0),$e<ls?At.direction==="asc"?-1:1:$e>ls?At.direction==="asc"?1:-1:0})}return wt},[e,At]),Ss=B.useMemo(()=>{const wt=[];let jt=null,he=[];for(let Zt=0;Zt<ss.length;Zt++){const Ue=ss[Zt];typeof Ue=="string"&&Ue.startsWith("###")?((he.length>0||jt!==null)&&wt.push({section:jt,items:he,sectionIndex:jt!==null?Zt-he.length-1:null}),jt=Ue.replace("###",""),he=[]):he.push({...Ue,globalIndex:Zt})}return(he.length>0||jt!==null)&&wt.push({section:jt,items:he,sectionIndex:jt!==null?ss.length-he.length-1:null}),wt.length===0&&wt.push({section:null,items:[],sectionIndex:null}),wt},[ss]);return h.jsxs("div",{className:Tt(ws.watchlist,{[ws.isResizing]:ot}),onMouseLeave:()=>Z.reset(),children:[h.jsxs("div",{className:ws.header,children:[dt?h.jsx(YT,{watchlists:d,activeId:f,onSwitch:p,onCreate:m,onRename:v,onDelete:w,onClear:y,onCopy:b,onAddSection:()=>{const wt=Qe(),jt=I!==null?I:e.length;S?.(wt,jt)},onExport:R,onImport:D,onToggleFavorite:lt}):h.jsx("span",{className:ws.title,children:"Watchlist"}),h.jsx("div",{className:ws.actions,children:h.jsx(Ql,{size:16,className:ws.icon,onClick:n,title:"Add symbol"})})]}),V.length>0&&h.jsx("div",{className:ws.quickAccessRow,children:V.map(wt=>h.jsx("button",{className:Tt(ws.quickAccessBtn,{[ws.active]:wt.id===f}),onClick:()=>p?.(wt.id),title:wt.name,children:wt.favoriteEmoji||wt.name.charAt(0)},wt.id))}),h.jsxs("div",{className:ws.columnHeaders,children:[h.jsxs("span",{className:ws.colSymbol,style:{width:E.symbol,minWidth:E.symbol},onClick:()=>Qt("symbol"),children:["Symbol ",At.key==="symbol"&&(At.direction==="asc"?"":"")]}),h.jsx("div",{className:ws.resizeHandle,onMouseDown:wt=>xt(wt,"symbol")}),h.jsxs("span",{className:ws.colLast,style:{width:E.last,minWidth:_o},onClick:()=>Qt("last"),children:["Last ",At.key==="last"&&(At.direction==="asc"?"":"")]}),h.jsx("div",{className:ws.resizeHandle,onMouseDown:wt=>xt(wt,"last")}),h.jsxs("span",{className:ws.colChg,style:{width:E.chg,minWidth:_o},onClick:()=>Qt("chg"),children:["Chg ",At.key==="chg"&&(At.direction==="asc"?"":"")]}),h.jsx("div",{className:ws.resizeHandle,onMouseDown:wt=>xt(wt,"chg")}),h.jsxs("span",{className:ws.colChgP,style:{width:E.chgP,minWidth:_o},onClick:()=>Qt("chgP"),children:["Chg% ",At.key==="chgP"&&(At.direction==="asc"?"":"")]})]}),h.jsx("div",{className:ws.list,children:c?Array.from({length:5}).map((wt,jt)=>h.jsx(VQ,{},`skeleton-${jt}`)):ss.length===0?h.jsxs("div",{className:ws.emptyState,children:[h.jsx(Ql,{size:24}),h.jsx("p",{children:"No symbols in watchlist"})]}):Ss.map((wt,jt)=>{const he=wt.sectionIndex??0;return h.jsxs(ks.Fragment,{children:[wt.section&&h.jsx(wQ,{title:wt.section,isCollapsed:M?.includes(wt.section),isDragging:Ut===wt.section,onToggle:()=>N?.(wt.section),onRename:(Zt,Ue)=>x?.(Zt,Ue),onDelete:Zt=>U?.(Zt),sectionIndex:he,onDragStart:Wt,onDragOver:oe,onDragEnd:Je,onDrop:tt,children:wt.items.map((Zt,Ue)=>{const Ze=ss.findIndex($e=>$e.symbol===Zt.symbol&&$e.exchange===Zt.exchange);return h.jsx(Lv,{item:Zt,isActive:A===Zt.symbol&&t===(Zt.exchange||"NSE"),isDragging:mt===Ze,columnWidths:E,minColumnWidth:_o,sortEnabled:!!At.key,index:Ze,onSelect:s,onRemove:l,onDragStart:se,onDragOver:oe,onDragEnd:He,onDrop:Nt,onContextMenu:le,onMouseEnter:Ht,onMouseLeave:Ae,onMouseMove:te},`${Zt.symbol}-${Zt.exchange}`)})}),!wt.section&&wt.items.map((Zt,Ue)=>{const Ze=ss.findIndex($e=>$e.symbol===Zt.symbol&&$e.exchange===Zt.exchange);return h.jsx(Lv,{item:Zt,isActive:A===Zt.symbol&&t===(Zt.exchange||"NSE"),isDragging:mt===Ze,columnWidths:E,minColumnWidth:_o,sortEnabled:!!At.key,index:Ze,onSelect:s,onRemove:l,onDragStart:se,onDragOver:oe,onDragEnd:He,onDrop:Nt,onContextMenu:le,onMouseEnter:Ht,onMouseLeave:Ae,onMouseMove:te},`${Zt.symbol}-${Zt.exchange}`)})]},`group-${jt}`)})}),h.jsx(QQ,{isVisible:Z.isVisible,content:Z.content,position:Z.position}),h.jsx(HQ,{isVisible:rt.isVisible,position:rt.position,onClose:Ft,onAddSection:qe,onMoveToTop:Qs,onMoveToBottom:Xs,onRemove:Fe})]})};function KQ(A){const t=new Date,e=t.getHours(),s=t.getMinutes(),n=t.getDay();if(n===0||n===6)return!1;if(["NSE","NSE_INDEX","BSE","NFO","MCX","CDS","BFO"].includes(A)){const l=e*60+s;return l>=555&&l<=930}if(["NYSE","NASDAQ","AMEX"].includes(A)){const l=e*60+s;return l>=570&&l<=960}return!1}const GQ=ks.memo(PQ);function xs(A){var t=A.width,e=A.height;if(t<0)throw new Error("Negative width is not allowed for Size");if(e<0)throw new Error("Negative height is not allowed for Size");return{width:t,height:e}}function Sl(A,t){return A.width===t.width&&A.height===t.height}var WQ=(function(){function A(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return A.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(A.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),A.prototype.subscribe=function(t){var e=this,s={next:t};return this._observers.push(s),{unsubscribe:function(){e._observers=e._observers.filter(function(n){return n!==s})}}},A.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},A.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},A.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},A.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(e){return e.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},A})();function $Q(A){return new WQ(A)}var XQ=(function(){function A(t,e,s){var n;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=xs({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=e??(function(l){return l}),this._allowResizeObserver=(n=s?.allowResizeObserver)!==null&&n!==void 0?n:!0,this._chooseAndInitObserver()}return A.prototype.dispose=function(){var t,e;if(this._canvasElement===null)throw new Error("Object is disposed");(t=this._canvasElementResizeObserver)===null||t===void 0||t.disconnect(),this._canvasElementResizeObserver=null,(e=this._devicePixelRatioObservable)===null||e===void 0||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(A.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"bitmapSize",{get:function(){return xs({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),A.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=xs(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},A.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},A.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(e){return e!==t})},Object.defineProperty(A.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),A.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},A.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(e){return e!==t})},A.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},A.prototype._resizeBitmap=function(t){var e=this.bitmapSize;Sl(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},A.prototype._emitBitmapSizeChanged=function(t,e){var s=this;this._bitmapSizeChangedListeners.forEach(function(n){return n.call(s,t,e)})},A.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,s=xs(this._transformBitmapSize(t,this._canvasElementClientSize)),n=Sl(this.bitmapSize,s)?null:s;e===null&&n===null||e!==null&&n!==null&&Sl(e,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(e,n))},A.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var s=this;this._suggestedBitmapSizeChangedListeners.forEach(function(n){return n.call(s,t,e)})},A.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}JQ().then(function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})},A.prototype._initDevicePixelRatioObservable=function(){var t=this;if(this._canvasElement!==null){var e=Hv(this._canvasElement);if(e===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=$Q(e),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},A.prototype._invalidateBitmapSize=function(){var t,e;if(this._canvasElement!==null){var s=Hv(this._canvasElement);if(s!==null){var n=(e=(t=this._devicePixelRatioObservable)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:s.devicePixelRatio,l=this._canvasElement.getClientRects(),a=l[0]!==void 0?qQ(l[0],n):xs({width:this._canvasElementClientSize.width*n,height:this._canvasElementClientSize.height*n});this._suggestNewBitmapSize(a)}}},A.prototype._initResizeObserver=function(){var t=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(e){var s=e.find(function(a){return a.target===t._canvasElement});if(!(!s||!s.devicePixelContentBoxSize||!s.devicePixelContentBoxSize[0])){var n=s.devicePixelContentBoxSize[0],l=xs({width:n.inlineSize,height:n.blockSize});t._suggestNewBitmapSize(l)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},A})();function YQ(A,t){return new XQ(A,t.transform,t.options)}function Hv(A){return A.ownerDocument.defaultView}function JQ(){return new Promise(function(A){var t=new ResizeObserver(function(e){A(e.every(function(s){return"devicePixelContentBoxSize"in s})),t.disconnect()});t.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function qQ(A,t){return xs({width:Math.round(A.left*t+A.width*t)-Math.round(A.left*t),height:Math.round(A.top*t+A.height*t)-Math.round(A.top*t)})}var ZQ=(function(){function A(t,e,s){if(e.width===0||e.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,s.width===0||s.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=s,this._context=t}return A.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},A.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(A.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),A})();function Fl(A,t){var e=A.canvasElementClientSize;if(e.width===0||e.height===0)return null;var s=A.bitmapSize;if(s.width===0||s.height===0)return null;var n=A.canvasElement.getContext("2d",t);return n===null?null:new ZQ(n,e,s)}const Uy={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var Dv,kv;function Pr(A,t){const e={0:[],1:[A.lineWidth,A.lineWidth],2:[2*A.lineWidth,2*A.lineWidth],3:[6*A.lineWidth,6*A.lineWidth],4:[A.lineWidth,4*A.lineWidth]}[t];A.setLineDash(e)}function My(A,t,e,s){A.beginPath();const n=A.lineWidth%2?.5:0;A.moveTo(e,t+n),A.lineTo(s,t+n),A.stroke()}function Di(A,t){if(!A)throw new Error("Assertion failed"+(t?": "+t:""))}function fA(A){if(A===void 0)throw new Error("Value is undefined");return A}function Mt(A){if(A===null)throw new Error("Value is null");return A}function Dr(A){return Mt(fA(A))}(function(A){A[A.Simple=0]="Simple",A[A.WithSteps=1]="WithSteps",A[A.Curved=2]="Curved"})(Dv||(Dv={})),(function(A){A[A.Solid=0]="Solid",A[A.Dotted=1]="Dotted",A[A.Dashed=2]="Dashed",A[A.LargeDashed=3]="LargeDashed",A[A.SparseDotted=4]="SparseDotted"})(kv||(kv={}));class ii{constructor(){this.t=[]}i(t,e,s){const n={h:t,l:e,o:s===!0};this.t.push(n)}_(t){const e=this.t.findIndex((s=>t===s.h));e>-1&&this.t.splice(e,1)}u(t){this.t=this.t.filter((e=>e.l!==t))}p(t,e,s){const n=[...this.t];this.t=this.t.filter((l=>!l.o)),n.forEach((l=>l.h(t,e,s)))}v(){return this.t.length>0}m(){this.t=[]}}function SA(A,...t){for(const e of t)for(const s in e)e[s]!==void 0&&Object.prototype.hasOwnProperty.call(e,s)&&!["__proto__","constructor","prototype"].includes(s)&&(typeof e[s]!="object"||A[s]===void 0||Array.isArray(e[s])?A[s]=e[s]:SA(A[s],e[s]));return A}function Vo(A){return typeof A=="number"&&isFinite(A)}function dc(A){return typeof A=="number"&&A%1==0}function yc(A){return typeof A=="string"}function Uh(A){return typeof A=="boolean"}function Gn(A){const t=A;if(!t||typeof t!="object")return t;let e,s,n;for(s in e=Array.isArray(t)?[]:{},t)t.hasOwnProperty(s)&&(n=t[s],e[s]=n&&typeof n=="object"?Gn(n):n);return e}function jv(A){return A!==null}function fc(A){return A===null?void 0:A}const Iy="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Iu(A,t,e){return t===void 0&&(t=Iy),`${e=e!==void 0?`${e} `:""}${A}px ${t}`}class tF{constructor(t){this.M={S:1,C:5,k:NaN,P:"",T:"",R:"",D:"",I:0,V:0,B:0,A:0,L:0},this.O=t}N(){const t=this.M,e=this.F(),s=this.W();return t.k===e&&t.T===s||(t.k=e,t.T=s,t.P=Iu(e,s),t.A=2.5/12*e,t.I=t.A,t.V=e/12*t.C,t.B=e/12*t.C,t.L=0),t.R=this.H(),t.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function jp(A){return A<0?0:A>255?255:Math.round(A)||0}function Ov(A){return .199*A[0]+.687*A[1]+.114*A[2]}class eF{constructor(t,e){this.q=new Map,this.j=t,e&&(this.q=e)}Y(t,e){if(t==="transparent")return t;const s=this.K(t),n=s[3];return`rgba(${s[0]}, ${s[1]}, ${s[2]}, ${e*n})`}Z(t){const e=this.K(t);return{G:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,X:Ov(e)>160?"black":"white"}}J(t){return Ov(this.K(t))}tt(t,e,s){const[n,l,a,c]=this.K(t),[d,f,p,m]=this.K(e),v=[jp(n+s*(d-n)),jp(l+s*(f-l)),jp(a+s*(p-a)),(w=c+s*(m-c),w<=0||w>1?Math.min(Math.max(w,0),1):Math.round(1e4*w)/1e4)];var w;return`rgba(${v[0]}, ${v[1]}, ${v[2]}, ${v[3]})`}K(t){const e=this.q.get(t);if(e)return e;const s=(function(a){const c=document.createElement("div");c.style.display="none",document.body.appendChild(c),c.style.color=a;const d=window.getComputedStyle(c).color;return document.body.removeChild(c),d})(t),n=s.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!n){if(this.j.length)for(const a of this.j){const c=a(t);if(c)return this.q.set(t,c),c}throw new Error(`Failed to parse color: ${t}`)}const l=[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),n[4]?parseFloat(n[4]):1];return this.q.set(t,l),l}}let H1=class{constructor(){this.it=[]}st(t){this.it=t}nt(t,e,s){this.it.forEach((n=>{n.nt(t,e,s)}))}};class wn{nt(t,e,s){t.useBitmapCoordinateSpace((n=>this.et(n,e,s)))}}class sF extends wn{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:s}){if(this.rt===null||this.rt.lt===null)return;const n=this.rt.lt,l=this.rt,a=Math.max(1,Math.floor(e))%2/2,c=d=>{t.beginPath();for(let f=n.to-1;f>=n.from;--f){const p=l.ot[f],m=Math.round(p._t*e)+a,v=p.ut*s,w=d*s+a;t.moveTo(m,v),t.arc(m,v,w,0,2*Math.PI)}t.fill()};l.ct>0&&(t.fillStyle=l.dt,c(l.ft+l.ct)),t.fillStyle=l.vt,c(l.ft)}}function iF(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const AF={from:0,to:1};let nF=class{constructor(t,e,s){this.Mt=new H1,this.bt=[],this.St=[],this.xt=!0,this.O=t,this.Ct=e,this.yt=s,this.Mt.st(this.bt)}kt(t){this.Pt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}Pt(){const t=this.yt.Dt();t.length!==this.bt.length&&(this.St=t.map(iF),this.bt=this.St.map((e=>{const s=new sF;return s.ht(e),s})),this.Mt.st(this.bt))}Rt(){const t=this.Ct.N().mode===2||!this.Ct.It(),e=this.yt.Vt(),s=this.Ct.Bt(),n=this.O.Et();this.Pt(),e.forEach(((l,a)=>{const c=this.St[a],d=l.At(s),f=l.Lt();!t&&d!==null&&l.It()&&f!==null?(c.vt=d.zt,c.ft=d.ft,c.ct=d.Ot,c.ot[0].gt=d.gt,c.ot[0].ut=l.Ft().Nt(d.gt,f.Wt),c.dt=d.Ht??this.O.Ut(c.ot[0].ut/l.Ft().$t()),c.ot[0].wt=s,c.ot[0]._t=n.qt(s),c.lt=AF):c.lt=null}))}},rF=class extends wn{constructor(t){super(),this.jt=t}et({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.jt===null)return;const l=this.jt.Yt.It,a=this.jt.Kt.It;if(!l&&!a)return;const c=Math.round(this.jt._t*s),d=Math.round(this.jt.ut*n);t.lineCap="butt",l&&c>=0&&(t.lineWidth=Math.floor(this.jt.Yt.ct*s),t.strokeStyle=this.jt.Yt.R,t.fillStyle=this.jt.Yt.R,Pr(t,this.jt.Yt.Zt),(function(f,p,m,v){f.beginPath();const w=f.lineWidth%2?.5:0;f.moveTo(p+w,m),f.lineTo(p+w,v),f.stroke()})(t,c,0,e.height)),a&&d>=0&&(t.lineWidth=Math.floor(this.jt.Kt.ct*n),t.strokeStyle=this.jt.Kt.R,t.fillStyle=this.jt.Kt.R,Pr(t,this.jt.Kt.Zt),My(t,d,0,e.width))}},lF=class{constructor(t,e){this.xt=!0,this.Gt={Yt:{ct:1,Zt:0,R:"",It:!1},Kt:{ct:1,Zt:0,R:"",It:!1},_t:0,ut:0},this.Xt=new rF(this.Gt),this.Jt=t,this.yt=e}kt(){this.xt=!0}Tt(t){return this.xt&&(this.Rt(),this.xt=!1),this.Xt}Rt(){const t=this.Jt.It(),e=this.yt.Qt().N().crosshair,s=this.Gt;if(e.mode===2)return s.Kt.It=!1,void(s.Yt.It=!1);s.Kt.It=t&&this.Jt.ti(this.yt),s.Yt.It=t&&this.Jt.ii(),s.Kt.ct=e.horzLine.width,s.Kt.Zt=e.horzLine.style,s.Kt.R=e.horzLine.color,s.Yt.ct=e.vertLine.width,s.Yt.Zt=e.vertLine.style,s.Yt.R=e.vertLine.color,s._t=this.Jt.si(),s.ut=this.Jt.ni()}};function oF(A,t,e,s,n,l){A.fillRect(t+l,e,s-2*l,l),A.fillRect(t+l,e+n-l,s-2*l,l),A.fillRect(t,e,l,n),A.fillRect(t+s-l,e,l,n)}function Yu(A,t,e,s,n,l){A.save(),A.globalCompositeOperation="copy",A.fillStyle=l,A.fillRect(t,e,s,n),A.restore()}function Rv(A,t,e,s,n,l){A.beginPath(),A.roundRect?A.roundRect(t,e,s,n,l):(A.lineTo(t+s-l[1],e),l[1]!==0&&A.arcTo(t+s,e,t+s,e+l[1],l[1]),A.lineTo(t+s,e+n-l[2]),l[2]!==0&&A.arcTo(t+s,e+n,t+s-l[2],e+n,l[2]),A.lineTo(t+l[3],e+n),l[3]!==0&&A.arcTo(t,e+n,t,e+n-l[3],l[3]),A.lineTo(t,e+l[0]),l[0]!==0&&A.arcTo(t,e,t+l[0],e,l[0]))}function zv(A,t,e,s,n,l,a=0,c=[0,0,0,0],d=""){if(A.save(),!a||!d||d===l)return Rv(A,t,e,s,n,c),A.fillStyle=l,A.fill(),void A.restore();const f=a/2;var p;Rv(A,t+f,e+f,s-a,n-a,(p=-f,c.map((m=>m===0?m:m+p)))),l!=="transparent"&&(A.fillStyle=l,A.fill()),d!=="transparent"&&(A.lineWidth=a,A.strokeStyle=d,A.closePath(),A.stroke()),A.restore()}function Ny(A,t,e,s,n,l,a){A.save(),A.globalCompositeOperation="copy";const c=A.createLinearGradient(0,0,0,n);c.addColorStop(0,l),c.addColorStop(1,a),A.fillStyle=c,A.fillRect(t,e,s,n),A.restore()}let Vv=class{constructor(t,e){this.ht(t,e)}ht(t,e){this.jt=t,this.ei=e}$t(t,e){return this.jt.It?t.k+t.A+t.I:0}nt(t,e,s,n){if(!this.jt.It||this.jt.ri.length===0)return;const l=this.jt.R,a=this.ei.G,c=t.useBitmapCoordinateSpace((d=>{const f=d.context;f.font=e.P;const p=this.hi(d,e,s,n),m=p.ai;return p.li?zv(f,m.oi,m._i,m.ui,m.ci,a,m.di,[m.ft,0,0,m.ft],a):zv(f,m.fi,m._i,m.ui,m.ci,a,m.di,[0,m.ft,m.ft,0],a),this.jt.pi&&(f.fillStyle=l,f.fillRect(m.fi,m.mi,m.wi-m.fi,m.gi)),this.jt.Mi&&(f.fillStyle=e.D,f.fillRect(p.li?m.bi-m.di:0,m._i,m.di,m.Si-m._i)),p}));t.useMediaCoordinateSpace((({context:d})=>{const f=c.xi;d.font=e.P,d.textAlign=c.li?"right":"left",d.textBaseline="middle",d.fillStyle=l,d.fillText(this.jt.ri,f.Ci,(f._i+f.Si)/2+f.yi)}))}hi(t,e,s,n){const{context:l,bitmapSize:a,mediaSize:c,horizontalPixelRatio:d,verticalPixelRatio:f}=t,p=this.jt.pi||!this.jt.ki?e.C:0,m=this.jt.Pi?e.S:0,v=e.A+this.ei.Ti,w=e.I+this.ei.Ri,y=e.V,b=e.B,S=this.jt.ri,x=e.k,U=s.Di(l,S),M=Math.ceil(s.Ii(l,S)),N=x+v+w,I=e.S+y+b+M+p,R=Math.max(1,Math.floor(f));let D=Math.round(N*f);D%2!=R%2&&(D+=1);const V=m>0?Math.max(1,Math.floor(m*d)):0,lt=Math.round(I*d),dt=Math.round(p*d),At=this.ei.Vi??this.ei.Bi??this.ei.Ei,ft=Math.round(At*f)-Math.floor(.5*f),mt=Math.floor(ft+R/2-D/2),at=mt+D,Ut=n==="right",W=Ut?c.width-m:m,E=Ut?a.width-V:V;let K,ot,pt;return Ut?(K=E-lt,ot=E-dt,pt=W-p-y-m):(K=E+lt,ot=E+dt,pt=W+p+y),{li:Ut,ai:{_i:mt,mi:ft,Si:at,ui:lt,ci:D,ft:2*d,di:V,oi:K,fi:E,wi:ot,gi:R,bi:a.width},xi:{_i:mt/f,Si:at/f,Ci:pt,yi:U}}}},Ju=class{constructor(t){this.Ai={Ei:0,G:"#000",Ri:0,Ti:0},this.Li={ri:"",It:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,Pi:!1},this.zi={ri:"",It:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,Pi:!0},this.xt=!0,this.Oi=new(t||Vv)(this.Li,this.Ai),this.Ni=new(t||Vv)(this.zi,this.Ai)}ri(){return this.Fi(),this.Li.ri}Ei(){return this.Fi(),this.Ai.Ei}kt(){this.xt=!0}$t(t,e=!1){return Math.max(this.Oi.$t(t,e),this.Ni.$t(t,e))}Wi(){return this.Ai.Vi??null}Hi(){return this.Ai.Vi??this.Ai.Bi??this.Ei()}Ui(t){this.Ai.Bi=t??void 0}$i(){return this.Fi(),this.Li.It||this.zi.It}qi(){return this.Fi(),this.Li.It}Tt(t){return this.Fi(),this.Li.pi=this.Li.pi&&t.N().ticksVisible,this.zi.pi=this.zi.pi&&t.N().ticksVisible,this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Oi}ji(){return this.Fi(),this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Ni}Fi(){this.xt&&(this.Li.pi=!0,this.zi.pi=!1,this.Yi(this.Li,this.zi,this.Ai))}},aF=class extends Ju{constructor(t,e,s){super(),this.Jt=t,this.Ki=e,this.Zi=s}Yi(t,e,s){if(t.It=!1,this.Jt.N().mode===2)return;const n=this.Jt.N().horzLine;if(!n.labelVisible)return;const l=this.Ki.Lt();if(!this.Jt.It()||this.Ki.Gi()||l===null)return;const a=this.Ki.Xi().Z(n.labelBackgroundColor);s.G=a.G,t.R=a.X;const c=2/12*this.Ki.k();s.Ti=c,s.Ri=c;const d=this.Zi(this.Ki);s.Ei=d.Ei,t.ri=this.Ki.Ji(d.gt,l),t.It=!0}};const cF=/[1-9]/g;let Ly=class{constructor(){this.jt=null}ht(t){this.jt=t}nt(t,e){if(this.jt===null||this.jt.It===!1||this.jt.ri.length===0)return;const s=t.useMediaCoordinateSpace((({context:v})=>(v.font=e.P,Math.round(e.Qi.Ii(v,Mt(this.jt).ri,cF)))));if(s<=0)return;const n=e.ts,l=s+2*n,a=l/2,c=this.jt.ss;let d=this.jt.Ei,f=Math.floor(d-a)+.5;f<0?(d+=Math.abs(0-f),f=Math.floor(d-a)+.5):f+l>c&&(d-=Math.abs(c-(f+l)),f=Math.floor(d-a)+.5);const p=f+l,m=Math.ceil(0+e.S+e.C+e.A+e.k+e.I);t.useBitmapCoordinateSpace((({context:v,horizontalPixelRatio:w,verticalPixelRatio:y})=>{const b=Mt(this.jt);v.fillStyle=b.G;const S=Math.round(f*w),x=Math.round(0*y),U=Math.round(p*w),M=Math.round(m*y),N=Math.round(2*w);if(v.beginPath(),v.moveTo(S,x),v.lineTo(S,M-N),v.arcTo(S,M,S+N,M,N),v.lineTo(U-N,M),v.arcTo(U,M,U,M-N,N),v.lineTo(U,x),v.fill(),b.pi){const I=Math.round(b.Ei*w),R=x,D=Math.round((R+e.C)*y);v.fillStyle=b.R;const V=Math.max(1,Math.floor(w)),lt=Math.floor(.5*w);v.fillRect(I-lt,R,V,D-R)}})),t.useMediaCoordinateSpace((({context:v})=>{const w=Mt(this.jt),y=0+e.S+e.C+e.A+e.k/2;v.font=e.P,v.textAlign="left",v.textBaseline="middle",v.fillStyle=w.R;const b=e.Qi.Di(v,"Apr0");v.translate(f+n,y+b),v.fillText(w.ri,0,0)}))}},hF=class{constructor(t,e,s){this.xt=!0,this.Xt=new Ly,this.Gt={It:!1,G:"#4c525e",R:"white",ri:"",ss:0,Ei:NaN,pi:!0},this.Ct=t,this.ns=e,this.Zi=s}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Xt.ht(this.Gt),this.Xt}Rt(){const t=this.Gt;if(t.It=!1,this.Ct.N().mode===2)return;const e=this.Ct.N().vertLine;if(!e.labelVisible)return;const s=this.ns.Et();if(s.Gi())return;t.ss=s.ss();const n=this.Zi();if(n===null)return;t.Ei=n.Ei;const l=s.es(this.Ct.Bt());t.ri=s.rs(Mt(l)),t.It=!0;const a=this.ns.Xi().Z(e.labelBackgroundColor);t.G=a.G,t.R=a.X,t.pi=s.N().ticksVisible}},Hy=class{constructor(){this.hs=null,this.ls=0}_s(){return this.ls}us(t){this.ls=t}Ft(){return this.hs}cs(t){this.hs=t}ds(t){return[]}fs(){return[]}It(){return!0}};var Pv;(function(A){A[A.Normal=0]="Normal",A[A.Magnet=1]="Magnet",A[A.Hidden=2]="Hidden",A[A.MagnetOHLC=3]="MagnetOHLC"})(Pv||(Pv={}));let uF=class extends Hy{constructor(t,e){super(),this.yt=null,this.ps=NaN,this.vs=0,this.ws=!1,this.gs=new Map,this.Ms=!1,this.bs=new WeakMap,this.Ss=new WeakMap,this.xs=NaN,this.Cs=NaN,this.ys=NaN,this.ks=NaN,this.ns=t,this.Ps=e,this.Ts=((n,l)=>a=>{const c=l(),d=n();if(a===Mt(this.yt).Rs())return{gt:d,Ei:c};{const f=Mt(a.Lt());return{gt:a.Ds(c,f),Ei:c}}})((()=>this.ps),(()=>this.Cs));const s=((n,l)=>()=>{const a=this.ns.Et().Is(n()),c=l();return a&&Number.isFinite(c)?{wt:a,Ei:c}:null})((()=>this.vs),(()=>this.si()));this.Vs=new hF(this,t,s)}N(){return this.Ps}Bs(t,e){this.ys=t,this.ks=e}Es(){this.ys=NaN,this.ks=NaN}As(){return this.ys}Ls(){return this.ks}zs(t,e,s){this.Ms||(this.Ms=!0),this.ws=!0,this.Os(t,e,s)}Bt(){return this.vs}si(){return this.xs}ni(){return this.Cs}It(){return this.ws}Ns(){this.ws=!1,this.Fs(),this.ps=NaN,this.xs=NaN,this.Cs=NaN,this.yt=null,this.Es(),this.Ws()}Hs(t){if(!this.Ps.doNotSnapToHiddenSeriesIndices)return t;const e=this.ns,s=e.Et();let n=null,l=null;for(const f of e.Us()){const p=f.qs().$s(t,-1);if(p){if(p.js===t)return t;(n===null||p.js>n)&&(n=p.js)}const m=f.qs().$s(t,1);if(m){if(m.js===t)return t;(l===null||m.js<l)&&(l=m.js)}}const a=[n,l].filter(jv);if(a.length===0)return t;const c=s.qt(t),d=a.map((f=>Math.abs(c-s.qt(f))));return a[d.indexOf(Math.min(...d))]}Ys(t){let e=this.bs.get(t);e||(e=new lF(this,t),this.bs.set(t,e));let s=this.Ss.get(t);return s||(s=new nF(this.ns,this,t),this.Ss.set(t,s)),[e,s]}ti(t){return t===this.yt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ks(t,e){this.ws&&this.yt===t||this.gs.clear();const s=[];return this.yt===t&&s.push(this.Zs(this.gs,e,this.Ts)),s}fs(){return this.ws?[this.Vs]:[]}Gs(){return this.yt}Ws(){this.ns.Xs().forEach((t=>{this.bs.get(t)?.kt(),this.Ss.get(t)?.kt()})),this.gs.forEach((t=>t.kt())),this.Vs.kt()}Js(t){return t&&!t.Rs().Gi()?t.Rs():null}Os(t,e,s){this.Qs(t,e,s)&&this.Ws()}Qs(t,e,s){const n=this.xs,l=this.Cs,a=this.ps,c=this.vs,d=this.yt,f=this.Js(s);this.vs=t,this.xs=isNaN(t)?NaN:this.ns.Et().qt(t),this.yt=s;const p=f!==null?f.Lt():null;return f!==null&&p!==null?(this.ps=e,this.Cs=f.Nt(e,p)):(this.ps=NaN,this.Cs=NaN),n!==this.xs||l!==this.Cs||c!==this.vs||a!==this.ps||d!==this.yt}Fs(){const t=this.ns.tn().map((s=>s.qs().sn())).filter(jv),e=t.length===0?null:Math.max(...t);this.vs=e!==null?e:NaN}Zs(t,e,s){let n=t.get(e);return n===void 0&&(n=new aF(this,e,s),t.set(e,n)),n}};function qu(A){return A==="left"||A==="right"}class Ni{constructor(t){this.nn=new Map,this.en=[],this.rn=t}hn(t,e){const s=(function(n,l){return n===void 0?l:{an:Math.max(n.an,l.an),ln:n.ln||l.ln}})(this.nn.get(t),e);this.nn.set(t,s)}_n(){return this.rn}un(t){const e=this.nn.get(t);return e===void 0?{an:this.rn}:{an:Math.max(this.rn,e.an),ln:e.ln}}cn(){this.dn(),this.en=[{fn:0}]}pn(t){this.dn(),this.en=[{fn:1,Wt:t}]}vn(t){this.mn(),this.en.push({fn:5,Wt:t})}dn(){this.mn(),this.en.push({fn:6})}wn(){this.dn(),this.en=[{fn:4}]}gn(t){this.dn(),this.en.push({fn:2,Wt:t})}Mn(t){this.dn(),this.en.push({fn:3,Wt:t})}bn(){return this.en}Sn(t){for(const e of t.en)this.xn(e);this.rn=Math.max(this.rn,t.rn),t.nn.forEach(((e,s)=>{this.hn(s,e)}))}static Cn(){return new Ni(2)}static yn(){return new Ni(3)}xn(t){switch(t.fn){case 0:this.cn();break;case 1:this.pn(t.Wt);break;case 2:this.gn(t.Wt);break;case 3:this.Mn(t.Wt);break;case 4:this.wn();break;case 5:this.vn(t.Wt);break;case 6:this.mn()}}mn(){const t=this.en.findIndex((e=>e.fn===5));t!==-1&&this.en.splice(t,1)}}let Dy=class{formatTickmarks(t){return t.map((e=>this.format(e)))}};const Kv=".";function Wn(A,t){if(!Vo(A))return"n/a";if(!dc(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return t===0?A.toString():("0000000000000000"+A.toString()).slice(-t)}class Zu extends Dy{constructor(t,e){if(super(),e||(e=1),Vo(t)&&dc(t)||(t=100),t<0)throw new TypeError("invalid base");this.Ki=t,this.kn=e,this.Pn()}format(t){const e=t<0?"":"";return t=Math.abs(t),e+this.Tn(t)}Pn(){if(this.Rn=0,this.Ki>0&&this.kn>0){let t=this.Ki;for(;t>1;)t/=10,this.Rn++}}Tn(t){const e=this.Ki/this.kn;let s=Math.floor(t),n="";const l=this.Rn!==void 0?this.Rn:NaN;if(e>1){let a=+(Math.round(t*e)-s*e).toFixed(this.Rn);a>=e&&(a-=e,s+=1),n=Kv+Wn(+a.toFixed(this.Rn)*this.kn,l)}else s=Math.round(s*e)/e,l>0&&(n=Kv+Wn(0,l));return s.toFixed(0)+n}}let ky=class extends Zu{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}},dF=class extends Dy{constructor(t){super(),this.Dn=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.In(t):t<999995?e+this.In(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.In(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.In(t/1e9)+"B")}In(t){let e;const s=Math.pow(10,this.Dn);return e=(t=Math.round(t*s)/s)>=1e-15&&t<1?t.toFixed(this.Dn).replace(/\.?0+$/,""):String(t),e.replace(/(\.[1-9]*)0+$/,((n,l)=>l))}};const fF=/[2-9]/g;class Nu{constructor(t=50){this.Vn=0,this.Bn=1,this.En=1,this.An={},this.Ln=new Map,this.zn=t}On(){this.Vn=0,this.Ln.clear(),this.Bn=1,this.En=1,this.An={}}Ii(t,e,s){return this.Nn(t,e,s).width}Di(t,e,s){const n=this.Nn(t,e,s);return((n.actualBoundingBoxAscent||0)-(n.actualBoundingBoxDescent||0))/2}Nn(t,e,s){const n=s||fF,l=String(e).replace(n,"0");if(this.Ln.has(l))return fA(this.Ln.get(l)).Fn;if(this.Vn===this.zn){const c=this.An[this.En];delete this.An[this.En],this.Ln.delete(c),this.En++,this.Vn--}t.save(),t.textBaseline="middle";const a=t.measureText(l);return t.restore(),a.width===0&&e.length||(this.Ln.set(l,{Fn:a,Wn:this.Bn}),this.An[this.Bn]=l,this.Vn++,this.Bn++),a}}class pF{constructor(t){this.Hn=null,this.M=null,this.Un="right",this.$n=t}qn(t,e,s){this.Hn=t,this.M=e,this.Un=s}nt(t){this.M!==null&&this.Hn!==null&&this.Hn.nt(t,this.M,this.$n,this.Un)}}class jy{constructor(t,e,s){this.jn=t,this.$n=new Nu(50),this.Yn=e,this.O=s,this.F=-1,this.Xt=new pF(this.$n)}Tt(){const t=this.O.Kn(this.Yn);if(t===null)return null;const e=t.Zn(this.Yn)?t.Gn():this.Yn.Ft();if(e===null)return null;const s=t.Xn(e);if(s==="overlay")return null;const n=this.O.Jn();return n.k!==this.F&&(this.F=n.k,this.$n.On()),this.Xt.qn(this.jn.ji(),n,s),this.Xt}}let gF=class extends wn{constructor(){super(...arguments),this.jt=null}ht(t){this.jt=t}Qn(t,e){if(!this.jt?.It)return null;const{ut:s,ct:n,te:l}=this.jt;return e>=s-n-7&&e<=s+n+7?{ie:this.jt,te:l}:null}et({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.jt===null||this.jt.It===!1)return;const l=Math.round(this.jt.ut*n);l<0||l>e.height||(t.lineCap="butt",t.strokeStyle=this.jt.R,t.lineWidth=Math.floor(this.jt.ct*s),Pr(t,this.jt.Zt),My(t,l,0,e.width))}},D1=class{constructor(t){this.se={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Zt:0,It:!1},this.ne=new gF,this.xt=!0,this.ee=t,this.re=t.Qt(),this.ne.ht(this.se)}kt(){this.xt=!0}Tt(){return this.ee.It()?(this.xt&&(this.he(),this.xt=!1),this.ne):null}},mF=class extends D1{constructor(t){super(t)}he(){this.se.It=!1;const t=this.ee.Ft(),e=t.ae().ae;if(e!==2&&e!==3)return;const s=this.ee.N();if(!s.baseLineVisible||!this.ee.It())return;const n=this.ee.Lt();n!==null&&(this.se.It=!0,this.se.ut=t.Nt(n.Wt,n.Wt),this.se.R=s.baseLineColor,this.se.ct=s.baseLineWidth,this.se.Zt=s.baseLineStyle)}},_F=class extends wn{constructor(){super(...arguments),this.jt=null}ht(t){this.jt=t}le(){return this.jt}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:s}){const n=this.jt;if(n===null)return;const l=Math.max(1,Math.floor(e)),a=l%2/2,c=Math.round(n.oe.x*e)+a,d=n.oe.y*s;t.fillStyle=n._e,t.beginPath();const f=Math.max(2,1.5*n.ue)*e;t.arc(c,d,f,0,2*Math.PI,!1),t.fill(),t.fillStyle=n.ce,t.beginPath(),t.arc(c,d,n.ft*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=l,t.strokeStyle=n.de,t.beginPath(),t.arc(c,d,n.ft*e+l/2,0,2*Math.PI,!1),t.stroke()}};const vF=[{fe:0,pe:.25,ve:4,me:10,we:.25,ge:0,Me:.4,be:.8},{fe:.25,pe:.525,ve:10,me:14,we:0,ge:0,Me:.8,be:0},{fe:.525,pe:1,ve:14,me:14,we:0,ge:0,Me:0,be:0}];let BF=class{constructor(t){this.Xt=new _F,this.xt=!0,this.Se=!0,this.xe=performance.now(),this.Ce=this.xe-1,this.ye=t}ke(){this.Ce=this.xe-1,this.kt()}Pe(){if(this.kt(),this.ye.N().lastPriceAnimation===2){const t=performance.now(),e=this.Ce-t;if(e>0)return void(e<650&&(this.Ce+=2600));this.xe=t,this.Ce=t+2600}}kt(){this.xt=!0}Te(){this.Se=!0}It(){return this.ye.N().lastPriceAnimation!==0}Re(){switch(this.ye.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Ce}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.Se=!1):this.Se&&(this.De(),this.Se=!1),this.Xt}Rt(){this.Xt.ht(null);const t=this.ye.Qt().Et(),e=t.Ie(),s=this.ye.Lt();if(e===null||s===null)return;const n=this.ye.Ve(!0);if(n.Be||!e.Ee(n.js))return;const l={x:t.qt(n.js),y:this.ye.Ft().Nt(n.gt,s.Wt)},a=n.R,c=this.ye.N().lineWidth,d=this.Ae(this.Le(),a);this.Xt.ht({_e:a,ue:c,ce:d.ce,de:d.de,ft:d.ft,oe:l})}De(){const t=this.Xt.le();if(t!==null){const e=this.Ae(this.Le(),t._e);t.ce=e.ce,t.de=e.de,t.ft=e.ft}}Le(){return this.Re()?performance.now()-this.xe:2599}ze(t,e,s,n){const l=s+(n-s)*e;return this.ye.Qt().Xi().Y(t,l)}Ae(t,e){const s=t%2600/2600;let n;for(const f of vF)if(s>=f.fe&&s<=f.pe){n=f;break}Di(n!==void 0,"Last price animation internal logic error");const l=(s-n.fe)/(n.pe-n.fe);return{ce:this.ze(e,l,n.we,n.ge),de:this.ze(e,l,n.Me,n.be),ft:(a=l,c=n.ve,d=n.me,c+(d-c)*a)};var a,c,d}},wF=class extends D1{constructor(t){super(t)}he(){const t=this.se;t.It=!1;const e=this.ee.N();if(!e.priceLineVisible||!this.ee.It())return;const s=this.ee.Ve(e.priceLineSource===0);s.Be||(t.It=!0,t.ut=s.Ei,t.R=this.ee.Oe(s.R),t.ct=e.priceLineWidth,t.Zt=e.priceLineStyle)}},yF=class extends Ju{constructor(t){super(),this.Jt=t}Yi(t,e,s){t.It=!1,e.It=!1;const n=this.Jt;if(!n.It())return;const l=n.N(),a=l.lastValueVisible,c=n.Ne()!=="",d=l.seriesLastValueMode===0,f=n.Ve(!1);if(f.Be)return;a&&(t.ri=this.Fe(f,a,d),t.It=t.ri.length!==0),(c||d)&&(e.ri=this.We(f,a,c,d),e.It=e.ri.length>0);const p=n.Oe(f.R),m=this.Jt.Qt().Xi().Z(p);s.G=m.G,s.Ei=f.Ei,e.Ht=n.Qt().Ut(f.Ei/n.Ft().$t()),t.Ht=p,t.R=m.X,e.R=m.X}We(t,e,s,n){let l="";const a=this.Jt.Ne();return s&&a.length!==0&&(l+=`${a} `),e&&n&&(l+=this.Jt.Ft().He()?t.Ue:t.$e),l.trim()}Fe(t,e,s){return e?s?this.Jt.Ft().He()?t.$e:t.Ue:t.ri:""}};function Gv(A,t,e,s){const n=Number.isFinite(t),l=Number.isFinite(e);return n&&l?A(t,e):n||l?n?t:e:s}let en=class Cu{constructor(t,e){this.qe=t,this.je=e}Ye(t){return t!==null&&this.qe===t.qe&&this.je===t.je}Ke(){return new Cu(this.qe,this.je)}Ze(){return this.qe}Ge(){return this.je}Xe(){return this.je-this.qe}Gi(){return this.je===this.qe||Number.isNaN(this.je)||Number.isNaN(this.qe)}Sn(t){return t===null?this:new Cu(Gv(Math.min,this.Ze(),t.Ze(),-1/0),Gv(Math.max,this.Ge(),t.Ge(),1/0))}Je(t){if(!Vo(t)||this.je-this.qe===0)return;const e=.5*(this.je+this.qe);let s=this.je-e,n=this.qe-e;s*=t,n*=t,this.je=e+s,this.qe=e+n}Qe(t){Vo(t)&&(this.je+=t,this.qe+=t)}tr(){return{minValue:this.qe,maxValue:this.je}}static ir(t){return t===null?null:new Cu(t.minValue,t.maxValue)}};class Lu{constructor(t,e){this.sr=t,this.nr=e||null}er(){return this.sr}rr(){return this.nr}tr(){return{priceRange:this.sr===null?null:this.sr.tr(),margins:this.nr||void 0}}static ir(t){return t===null?null:new Lu(en.ir(t.priceRange),t.margins)}}const CF=[2,4,8,16,32,64,128,256,512],bF="Custom series with conflation reducer must have a priceValueBuilder method";let xF=class extends D1{constructor(t,e){super(t),this.hr=e}he(){const t=this.se;t.It=!1;const e=this.hr.N();if(!this.ee.It()||!e.lineVisible)return;const s=this.hr.ar();s!==null&&(t.It=!0,t.ut=s,t.R=e.color,t.ct=e.lineWidth,t.Zt=e.lineStyle,t.te=this.hr.N().id)}},SF=class extends Ju{constructor(t,e){super(),this.ye=t,this.hr=e}Yi(t,e,s){t.It=!1,e.It=!1;const n=this.hr.N(),l=n.axisLabelVisible,a=n.title!=="",c=this.ye;if(!l||!c.It())return;const d=this.hr.ar();if(d===null)return;a&&(e.ri=n.title,e.It=!0),e.Ht=c.Qt().Ut(d/c.Ft().$t()),t.ri=this.lr(n.price),t.It=!0;const f=this.ye.Qt().Xi().Z(n.axisLabelColor||n.color);s.G=f.G;const p=n.axisLabelTextColor||f.X;t.R=p,e.R=p,s.Ei=d}lr(t){const e=this.ye.Lt();return e===null?"":this.ye.Ft().Ji(t,e.Wt)}},EF=class{constructor(t,e){this.ye=t,this.Ps=e,this._r=new xF(t,this),this.jn=new SF(t,this),this.ur=new jy(this.jn,t,t.Qt())}cr(t){SA(this.Ps,t),this.kt(),this.ye.Qt().dr()}N(){return this.Ps}pr(){return this._r}vr(){return this.ur}mr(){return this.jn}kt(){this._r.kt(),this.jn.kt()}ar(){const t=this.ye,e=t.Ft();if(t.Qt().Et().Gi()||e.Gi())return null;const s=t.Lt();return s===null?null:e.Nt(this.Ps.price,s.Wt)}},TF=class{constructor(){this.wr=new WeakMap}gr(t,e,s){const n=1/e*s;if(t>=n)return 1;const l=n/t,a=Math.pow(2,Math.floor(Math.log2(l)));return Math.min(a,512)}Mr(t,e,s,n=!1,l){if(t.length===0||e<=1)return t;const a=this.br(e);if(a<=1)return t;const c=this.Sr(t);let d=c.Cr.get(a);return d!==void 0||(d=this.yr(t,a,s,n,l,c.Cr),c.Cr.set(a,d)),d}kr(t,e,s,n,l=!1,a){if(s<1||t.length===0)return t;const c=this.Sr(t),d=c.Cr.get(s);if(!d)return this.Mr(t,s,n,l,a);const f=this.Pr(t,e,s,d,l,n,a);return c.Cr.set(s,f),f}br(t){if(t<=2)return 2;for(const e of CF)if(t<=e)return e;return 512}Tr(t){if(t.length===0)return 0;const e=t[0],s=t[t.length-1];return 31*t.length+17*e.js+13*s.js}yr(t,e,s,n=!1,l,a=new Map){if(e===2)return this.Rr(t,2,s,n,l);const c=e/2;let d=a.get(c);return d||(d=this.yr(t,c,s,n,l,a),a.set(c,d)),this.Dr(d,s,n,l)}Rr(t,e,s,n=!1,l){const a=this.Ir(t,e,s,n,l);return this.Vr(a,n)}Dr(t,e,s=!1,n){const l=this.Ir(t,2,e,s,n);return this.Vr(l,s)}Ir(t,e,s,n=!1,l){const a=[];for(let c=0;c<t.length;c+=e)if(t.length-c>=e){const d=this.Br(t[c],t[c+1],s,n,l);d.Er=!1,a.push(d)}else if(a.length===0)a.push(this.Ar(t[c],!0));else{const d=a[a.length-1];a[a.length-1]=this.Lr(d,t[c],s,n,l)}return a}zr(t,e){return(t??1)+(e??1)}Br(t,e,s,n=!1,l){if(!n||!s||!l){const f=t.Wt[1]>e.Wt[1]?t.Wt[1]:e.Wt[1],p=t.Wt[2]<e.Wt[2]?t.Wt[2]:e.Wt[2];return{Or:t.js,Nr:e.js,Fr:t.wt,Wr:e.wt,Hr:t.Wt[0],Ur:f,$r:p,qr:e.Wt[3],jr:this.zr(t.jr,e.jr),Yr:void 0,Er:!1}}const a=s(this.Kr(t,l),this.Kr(e,l)),c=l(a),d=c.length?c[c.length-1]:0;return{Or:t.js,Nr:e.js,Fr:t.wt,Wr:e.wt,Hr:t.Wt[0],Ur:Math.max(t.Wt[1],d),$r:Math.min(t.Wt[2],d),qr:d,jr:this.zr(t.jr,e.jr),Yr:a,Er:!1}}Lr(t,e,s,n=!1,l){if(!n||!s||!l)return{Or:t.Or,Nr:e.js,Fr:t.Fr,Wr:e.wt,Hr:t.Hr,Ur:t.Ur>e.Wt[1]?t.Ur:e.Wt[1],$r:t.$r<e.Wt[2]?t.$r:e.Wt[2],qr:e.Wt[3],jr:t.jr+(e.jr??1),Yr:t.Yr,Er:!1};const a=t.Yr,c=this.Kr(e,l),d=a?{data:a,index:t.Or,originalTime:t.Fr,time:t.Fr,priceValues:l(a)}:null,f=d?s(d,c):c.data,p=d?l(f):c.priceValues,m=p.length?p[p.length-1]:0;return{Or:t.Or,Nr:e.js,Fr:t.Fr,Wr:e.wt,Hr:t.Hr,Ur:Math.max(t.Ur,m),$r:Math.min(t.$r,m),qr:m,jr:t.jr+(e.jr??1),Yr:f,Er:!1}}Zr(t,e,s,n,l,a,c=!1,d){const f=e===n?l:t[e];if(s-e==1)return this.Ar(f,!0);const p=e+1===n?l:t[e+1];let m=this.Br(f,p,a,c,d);for(let v=e+2;v<s;v++){const w=v===n?l:t[v];m=this.Lr(m,w,a,c,d)}return m}Kr(t,e){const s=t.le??{};return{data:t.le,index:t.js,originalTime:t.Gr,time:t.wt,priceValues:e(s)}}Xr(t,e=!1){const s=e===!0,n=!!t.Yr;return{js:t.Or,wt:t.Fr,Gr:t.Fr,Wt:[s?t.qr:t.Hr,t.Ur,t.$r,t.qr],jr:t.jr,le:s?n?t.Yr:{wt:t.Fr}:void 0}}Vr(t,e=!1){return t.map((s=>this.Xr(s,e)))}Pr(t,e,s,n,l=!1,a,c){if(n.length===0)return n;const d=t.length-1,f=Math.floor(d/s)*s;if(Math.min(f+s,t.length)-f<s&&t.length>s){const p=t.slice();return p[p.length-1]=e,this.Mr(p,s,a,l,c)}if(Math.floor((d-1)/s)===Math.floor(d/s)||n.length===1){const p=Math.min(f+s,t.length),m=p-f;if(m<=0)return n;const v=m===1?this.Ar(f===d?e:t[f],!0):this.Zr(t,f,p,d,e,a,l,c);return n[n.length-1]=this.Xr(v,l),n}{const p=t.slice();return p[p.length-1]=e,this.Mr(p,s,a,l,c)}}Ar(t,e=!1){return{Or:t.js,Nr:t.js,Fr:t.wt,Wr:t.wt,Hr:t.Wt[0],Ur:t.Wt[1],$r:t.Wt[2],qr:t.Wt[3],jr:t.jr??1,Yr:t.le,Er:e}}Sr(t){const e=this.Jr(t),s=this.Tr(t);return e.Qr!==s&&(e.Cr.clear(),e.Qr=s),e}Jr(t){let e=this.wr.get(t);return e===void 0&&(e={Qr:this.Tr(t),Cr:new Map},this.wr.set(t,e)),e}};class QF extends Hy{constructor(t){super(),this.ns=t}Qt(){return this.ns}}const FF={Bar:(A,t,e,s)=>{const n=t.upColor,l=t.downColor,a=Mt(A(e,s)),c=Dr(a.Wt[0])<=Dr(a.Wt[3]);return{th:a.R??(c?n:l)}},Candlestick:(A,t,e,s)=>{const n=t.upColor,l=t.downColor,a=t.borderUpColor,c=t.borderDownColor,d=t.wickUpColor,f=t.wickDownColor,p=Mt(A(e,s)),m=Dr(p.Wt[0])<=Dr(p.Wt[3]);return{th:p.R??(m?n:l),ih:p.Ht??(m?a:c),sh:p.nh??(m?d:f)}},Custom:(A,t,e,s)=>({th:Mt(A(e,s)).R??t.color}),Area:(A,t,e,s)=>{const n=Mt(A(e,s));return{th:n.vt??t.lineColor,vt:n.vt??t.lineColor,eh:n.eh??t.topColor,rh:n.rh??t.bottomColor}},Baseline:(A,t,e,s)=>{const n=Mt(A(e,s));return{th:n.Wt[3]>=t.baseValue.price?t.topLineColor:t.bottomLineColor,hh:n.hh??t.topLineColor,ah:n.ah??t.bottomLineColor,oh:n.oh??t.topFillColor1,_h:n._h??t.topFillColor2,uh:n.uh??t.bottomFillColor1,dh:n.dh??t.bottomFillColor2}},Line:(A,t,e,s)=>{const n=Mt(A(e,s));return{th:n.R??t.color,vt:n.R??t.color}},Histogram:(A,t,e,s)=>({th:Mt(A(e,s)).R??t.color})};let UF=class{constructor(t){this.fh=(e,s)=>s!==void 0?s.Wt:this.ye.qs().ph(e),this.ye=t,this.mh=FF[t.wh()]}gh(t,e){return this.mh(this.fh,this.ye.N(),t,e)}};function Oy(A,t,e,s,n=0,l=t.length){let a=l-n;for(;0<a;){const c=a>>1,d=n+c;s(t[d],e)===A?(n=d+1,a-=c+1):a=c}return n}const Po=Oy.bind(null,!0),Ry=Oy.bind(null,!1);var Wv;(function(A){A[A.NearestLeft=-1]="NearestLeft",A[A.None=0]="None",A[A.NearestRight=1]="NearestRight"})(Wv||(Wv={}));const Tr=30;class MF{constructor(){this.Mh=[],this.bh=new Map,this.Sh=new Map,this.xh=[]}Ch(){return this.yh()>0?this.Mh[this.Mh.length-1]:null}kh(){return this.yh()>0?this.Ph(0):null}sn(){return this.yh()>0?this.Ph(this.Mh.length-1):null}yh(){return this.Mh.length}Gi(){return this.yh()===0}Ee(t){return this.Th(t,0)!==null}ph(t){return this.$s(t)}$s(t,e=0){const s=this.Th(t,e);return s===null?null:{...this.Rh(s),js:this.Ph(s)}}Dh(){return this.Mh}Ih(t,e,s){if(this.Gi())return null;let n=null;for(const l of s)n=Mh(n,this.Vh(t,e,l));return n}ht(t){this.Sh.clear(),this.bh.clear(),this.Mh=t,this.xh=t.map((e=>e.js))}Bh(){return this.xh}Ph(t){return this.Mh[t].js}Rh(t){return this.Mh[t]}Th(t,e){const s=this.Eh(t);if(s===null&&e!==0)switch(e){case-1:return this.Ah(t);case 1:return this.Lh(t);default:throw new TypeError("Unknown search mode")}return s}Ah(t){let e=this.zh(t);return e>0&&(e-=1),e!==this.Mh.length&&this.Ph(e)<t?e:null}Lh(t){const e=this.Oh(t);return e!==this.Mh.length&&t<this.Ph(e)?e:null}Eh(t){const e=this.zh(t);return e===this.Mh.length||t<this.Mh[e].js?null:e}zh(t){return Po(this.Mh,t,((e,s)=>e.js<s))}Oh(t){return Ry(this.Mh,t,((e,s)=>e.js>s))}Nh(t,e,s){let n=null;for(let l=t;l<e;l++){const a=this.Mh[l].Wt[s];Number.isNaN(a)||(n===null?n={Fh:a,Wh:a}:(a<n.Fh&&(n.Fh=a),a>n.Wh&&(n.Wh=a)))}return n}Vh(t,e,s){if(this.Gi())return null;let n=null;const l=Mt(this.kh()),a=Mt(this.sn()),c=Math.max(t,l),d=Math.min(e,a),f=Math.ceil(c/Tr)*Tr,p=Math.max(f,Math.floor(d/Tr)*Tr);{const v=this.zh(c),w=this.Oh(Math.min(d,f,e));n=Mh(n,this.Nh(v,w,s))}let m=this.bh.get(s);m===void 0&&(m=new Map,this.bh.set(s,m));for(let v=Math.max(f+1,c);v<p;v+=Tr){const w=Math.floor(v/Tr);let y=m.get(w);if(y===void 0){const b=this.zh(w*Tr),S=this.Oh((w+1)*Tr-1);y=this.Nh(b,S,s),m.set(w,y)}n=Mh(n,y)}{const v=this.zh(p),w=this.Oh(d);n=Mh(n,this.Nh(v,w,s))}return n}}function Mh(A,t){return A===null?t:t===null?A:{Fh:Math.min(A.Fh,t.Fh),Wh:Math.max(A.Wh,t.Wh)}}function Op(){return new MF}const Hu={setLineStyle:Pr};let IF=class{constructor(t){this.Hh=t}nt(t,e,s){this.Hh.draw(t,Hu)}Uh(t,e,s){this.Hh.drawBackground?.(t,Hu)}},NF=class{constructor(t){this.Ln=null,this.$h=t}Tt(){const t=this.$h.renderer();if(t===null)return null;if(this.Ln?.qh===t)return this.Ln.jh;const e=new IF(t);return this.Ln={qh:t,jh:e},e}Yh(){return this.$h.zOrder?.()??"normal"}},zy=class{constructor(t){this.Kh=null,this.Zh=t}Gh(){return this.Zh}Ws(){this.Zh.updateAllViews?.()}Ys(){const t=this.Zh.paneViews?.()??[];if(this.Kh?.qh===t)return this.Kh.jh;const e=t.map((s=>new NF(s)));return this.Kh={qh:t,jh:e},e}Qn(t,e){return this.Zh.hitTest?.(t,e)??null}},LF=class extends zy{ds(){return[]}},HF=class{constructor(t){this.Hh=t}nt(t,e,s){this.Hh.draw(t,Hu)}Uh(t,e,s){this.Hh.drawBackground?.(t,Hu)}},$v=class{constructor(t){this.Ln=null,this.$h=t}Tt(){const t=this.$h.renderer();if(t===null)return null;if(this.Ln?.qh===t)return this.Ln.jh;const e=new HF(t);return this.Ln={qh:t,jh:e},e}Yh(){return this.$h.zOrder?.()??"normal"}};function Vy(A){return{ri:A.text(),Ei:A.coordinate(),Vi:A.fixedCoordinate?.(),R:A.textColor(),G:A.backColor(),It:A.visible?.()??!0,pi:A.tickVisible?.()??!0}}let DF=class{constructor(t,e){this.Xt=new Ly,this.Xh=t,this.Jh=e}Tt(){return this.Xt.ht({ss:this.Jh.ss(),...Vy(this.Xh)}),this.Xt}},kF=class extends Ju{constructor(t,e){super(),this.Xh=t,this.Ki=e}Yi(t,e,s){const n=Vy(this.Xh);s.G=n.G,t.R=n.R;const l=2/12*this.Ki.k();s.Ti=l,s.Ri=l,s.Ei=n.Ei,s.Vi=n.Vi,t.ri=n.ri,t.It=n.It,t.pi=n.pi}},jF=class extends zy{constructor(t,e){super(t),this.Qh=null,this.ta=null,this.ia=null,this.sa=null,this.ye=e}fs(){const t=this.Zh.timeAxisViews?.()??[];if(this.Qh?.qh===t)return this.Qh.jh;const e=this.ye.Qt().Et(),s=t.map((n=>new DF(n,e)));return this.Qh={qh:t,jh:s},s}Ks(){const t=this.Zh.priceAxisViews?.()??[];if(this.ta?.qh===t)return this.ta.jh;const e=this.ye.Ft(),s=t.map((n=>new kF(n,e)));return this.ta={qh:t,jh:s},s}na(){const t=this.Zh.priceAxisPaneViews?.()??[];if(this.ia?.qh===t)return this.ia.jh;const e=t.map((s=>new $v(s)));return this.ia={qh:t,jh:e},e}ea(){const t=this.Zh.timeAxisPaneViews?.()??[];if(this.sa?.qh===t)return this.sa.jh;const e=t.map((s=>new $v(s)));return this.sa={qh:t,jh:e},e}ra(t,e){return this.Zh.autoscaleInfo?.(t,e)??null}};function Rp(A,t,e,s){A.forEach((n=>{t(n).forEach((l=>{l.Yh()===e&&s.push(l)}))}))}function zp(A){return A.Ys()}function OF(A){return A.na()}function RF(A){return A.ea()}const zF=["Area","Line","Baseline"];let td=class extends QF{constructor(t,e,s,n,l){super(t),this.jt=Op(),this._r=new wF(this),this.ha=[],this.aa=new mF(this),this.la=null,this.oa=null,this._a=null,this.ua=[],this.ca=new TF,this.da=new Map,this.fa=null,this.Ps=s,this.pa=e;const a=new yF(this);if(this.gs=[a],this.ur=new jy(a,this,t),zF.includes(this.pa)&&(this.la=new BF(this)),this.va(),this.$h=n(this,this.Qt(),l),this.pa==="Custom"){const c=this.$h;c.ma&&this.wa(c.ma)}}m(){this._a!==null&&clearTimeout(this._a)}Oe(t){return this.Ps.priceLineColor||t}Ve(t){const e={Be:!0},s=this.Ft();if(this.Qt().Et().Gi()||s.Gi()||this.jt.Gi())return e;const n=this.Qt().Et().Ie(),l=this.Lt();if(n===null||l===null)return e;let a,c;if(t){const m=this.jt.Ch();if(m===null)return e;a=m,c=m.js}else{const m=this.jt.$s(n.bi(),-1);if(m===null||(a=this.jt.ph(m.js),a===null))return e;c=m.js}const d=a.Wt[3],f=this.ga().gh(c,{Wt:a}),p=s.Nt(d,l.Wt);return{Be:!1,gt:d,ri:s.Ji(d,l.Wt),Ue:s.Ma(d),$e:s.ba(d,l.Wt),R:f.th,Ei:p,js:c}}ga(){return this.oa!==null||(this.oa=new UF(this)),this.oa}N(){return this.Ps}cr(t){const e=this.Qt(),{priceScaleId:s,visible:n,priceFormat:l}=t;s!==void 0&&s!==this.Ps.priceScaleId&&e.Sa(this,s),n!==void 0&&n!==this.Ps.visible&&e.xa();const a=t.conflationThresholdFactor!==void 0;SA(this.Ps,t),a&&(this.da.clear(),this.Qt().dr()),l!==void 0&&(this.va(),e.Ca()),e.ya(this),e.ka(),this.$h.kt("options")}ht(t,e){this.jt.ht(t),this.da.clear();const s=this.Qt().Et().N();s.enableConflation&&s.precomputeConflationOnInit&&this.Pa(s.precomputeConflationPriority),this.$h.kt("data"),this.la!==null&&(e&&e.Ta?this.la.Pe():t.length===0&&this.la.ke());const n=this.Qt().Kn(this);this.Qt().Ra(n),this.Qt().ya(this),this.Qt().ka(),this.Qt().dr()}Da(t){const e=new EF(this,t);return this.ha.push(e),this.Qt().ya(this),e}Ia(t){const e=this.ha.indexOf(t);e!==-1&&this.ha.splice(e,1),this.Qt().ya(this)}Va(){return this.ha}wh(){return this.pa}Lt(){const t=this.Ba();return t===null?null:{Wt:t.Wt[3],Ea:t.wt}}Ba(){const t=this.Qt().Et().Ie();if(t===null)return null;const e=t.Aa();return this.jt.$s(e,1)}qs(){return this.jt}wa(t){this.fa=t,this.da.clear()}La(){return!!this.Qt().Et().N().enableConflation&&this.za()>1}kr(t){if(!this.La())return;const e=this.za();if(!this.da.has(e))return;const s=this.pa==="Custom",n=s&&this.fa||void 0,l=s&&this.$h.Oa?d=>{const f=d,p=this.$h.Oa(f);return Array.isArray(p)?p:[typeof p=="number"?p:0]}:void 0,a=this.ca.kr(this.jt.Dh(),t,e,n,s,l),c=Op();c.ht(a),this.da.set(e,c)}Na(){const t=this.Qt().Et().N().enableConflation;if(this.pa==="Custom"&&this.fa===null)return this.jt;if(!t)return this.jt;const e=this.za(),s=this.da.get(e);return s||(this.Fa(e),this.da.get(e)??this.jt)}Wa(t){const e=this.jt.ph(t);return e===null?null:this.pa==="Bar"||this.pa==="Candlestick"||this.pa==="Custom"?{Hr:e.Wt[0],Ur:e.Wt[1],$r:e.Wt[2],qr:e.Wt[3]}:e.Wt[3]}Ha(t){const e=[];Rp(this.ua,zp,"top",e);const s=this.la;return s!==null&&s.It()&&(this._a===null&&s.Re()&&(this._a=setTimeout((()=>{this._a=null,this.Qt().Ua()}),0)),s.Te(),e.unshift(s)),e}Ys(){const t=[];this.$a()||t.push(this.aa),t.push(this.$h,this._r);const e=this.ha.map((s=>s.pr()));return t.push(...e),Rp(this.ua,zp,"normal",t),t}qa(){return this.ja(zp,"bottom")}Ya(t){return this.ja(OF,t)}Ka(t){return this.ja(RF,t)}Za(t,e){return this.ua.map((s=>s.Qn(t,e))).filter((s=>s!==null))}ds(){return[this.ur,...this.ha.map((t=>t.vr()))]}Ks(t,e){if(e!==this.hs&&!this.$a())return[];const s=[...this.gs];for(const n of this.ha)s.push(n.mr());return this.ua.forEach((n=>{s.push(...n.Ks())})),s}fs(){const t=[];return this.ua.forEach((e=>{t.push(...e.fs())})),t}ra(t,e){if(this.Ps.autoscaleInfoProvider!==void 0){const s=this.Ps.autoscaleInfoProvider((()=>{const n=this.Ga(t,e);return n===null?null:n.tr()}));return Lu.ir(s)}return this.Ga(t,e)}qh(){const t=this.Ps.priceFormat;return t.base??1/t.minMove}Xa(){return this.Ja}Ws(){this.$h.kt();for(const t of this.gs)t.kt();for(const t of this.ha)t.kt();this._r.kt(),this.aa.kt(),this.la?.kt(),this.ua.forEach((t=>t.Ws()))}Ft(){return Mt(super.Ft())}At(t){if(!((this.pa==="Line"||this.pa==="Area"||this.pa==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const e=this.jt.ph(t);return e===null?null:{gt:e.Wt[3],ft:this.Qa(),Ht:this.tl(),Ot:this.il(),zt:this.sl(t)}}Ne(){return this.Ps.title}It(){return this.Ps.visible}nl(t){this.ua.push(new jF(t,this))}el(t){this.ua=this.ua.filter((e=>e.Gh()!==t))}rl(){if(this.pa==="Custom")return t=>this.$h.Oa(t)}hl(){if(this.pa==="Custom")return t=>this.$h.al(t)}ll(){return this.jt.Bh()}$a(){return!qu(this.Ft().ol())}Ga(t,e){if(!dc(t)||!dc(e)||this.jt.Gi())return null;const s=this.pa==="Line"||this.pa==="Area"||this.pa==="Baseline"||this.pa==="Histogram"?[3]:[2,1],n=this.jt.Ih(t,e,s);let l=n!==null?new en(n.Fh,n.Wh):null,a=null;if(this.wh()==="Histogram"){const c=this.Ps.base,d=new en(c,c);l=l!==null?l.Sn(d):d}return this.ua.forEach((c=>{const d=c.ra(t,e);if(d?.priceRange){const f=new en(d.priceRange.minValue,d.priceRange.maxValue);l=l!==null?l.Sn(f):f}d?.margins&&(a=d.margins)})),new Lu(l,a)}Qa(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}tl(){switch(this.pa){case"Line":case"Area":case"Baseline":{const t=this.Ps.crosshairMarkerBorderColor;if(t.length!==0)return t}}return null}il(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}sl(t){switch(this.pa){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBackgroundColor;if(e.length!==0)return e}}return this.ga().gh(t).th}va(){switch(this.Ps.priceFormat.type){case"custom":{const t=this.Ps.priceFormat.formatter;this.Ja={format:t,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(e=>e.map(t))};break}case"volume":this.Ja=new dF(this.Ps.priceFormat.precision);break;case"percent":this.Ja=new ky(this.Ps.priceFormat.precision);break;default:{const t=Math.pow(10,this.Ps.priceFormat.precision);this.Ja=new Zu(t,this.Ps.priceFormat.minMove*t)}}this.hs!==null&&this.hs._l()}ja(t,e){const s=[];return Rp(this.ua,t,e,s),s}za(){const{ul:t,cl:e,dl:s}=this.fl();return this.ca.gr(t,e,s)}fl(){const t=this.Qt().Et(),e=t.ul(),s=window.devicePixelRatio||1,n=t.N().conflationThresholdFactor;return{ul:e,cl:s,dl:this.Ps.conflationThresholdFactor??n??1}}pl(t){const e=this.jt.Dh();let s;if(this.pa==="Custom"&&this.fa!==null){const l=this.rl();if(!l)throw new Error(bF);s=this.ca.Mr(e,t,this.fa,!0,(a=>l(a)))}else s=this.ca.Mr(e,t);const n=Op();return n.ht(s),n}Fa(t){const e=this.pl(t);this.da.set(t,e)}Pa(t){if(this.pa==="Custom"&&(this.fa===null||!this.rl()))return;this.da.clear();const e=this.Qt().Et().vl();for(const s of e){const n=()=>{this.ml(s)},l=typeof window=="object"&&window||typeof self=="object"&&self;l?.gl?.wl?l.gl.wl((()=>{n()}),{Ml:t}):Promise.resolve().then((()=>n()))}}ml(t){if(this.da.has(t)||this.jt.Dh().length===0)return;const e=this.pl(t);this.da.set(t,e)}};const VF=[3],PF=[0,1,2,3];let KF=class{constructor(t){this.Ps=t}bl(t,e,s){let n=t;if(this.Ps.mode===0)return n;const l=s.Rs(),a=l.Lt();if(a===null)return n;const c=l.Nt(t,a),d=s.Sl().filter((p=>p instanceof td)).reduce(((p,m)=>{if(s.Zn(m)||!m.It())return p;const v=m.Ft(),w=m.qs();if(v.Gi()||!w.Ee(e))return p;const y=w.ph(e);if(y===null)return p;const b=Dr(m.Lt()),S=this.Ps.mode===3?PF:VF;return p.concat(S.map((x=>v.Nt(y.Wt[x],b.Wt))))}),[]);if(d.length===0)return n;d.sort(((p,m)=>Math.abs(p-c)-Math.abs(m-c)));const f=d[0];return n=l.Ds(f,a),n}};function Oo(A,t,e){return Math.min(Math.max(A,t),e)}function Ih(A,t,e){return t-A<=e}let GF=class extends wn{constructor(){super(...arguments),this.jt=null}ht(t){this.jt=t}et({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.jt===null)return;const l=Math.max(1,Math.floor(s));t.lineWidth=l,(function(a,c){a.save(),a.lineWidth%2&&a.translate(.5,.5),c(),a.restore()})(t,(()=>{const a=Mt(this.jt);if(a.xl){t.strokeStyle=a.Cl,Pr(t,a.yl),t.beginPath();for(const c of a.kl){const d=Math.round(c.Pl*s);t.moveTo(d,-l),t.lineTo(d,e.height+l)}t.stroke()}if(a.Tl){t.strokeStyle=a.Rl,Pr(t,a.Dl),t.beginPath();for(const c of a.Il){const d=Math.round(c.Pl*n);t.moveTo(-l,d),t.lineTo(e.width+l,d)}t.stroke()}}))}},WF=class{constructor(t){this.Xt=new GF,this.xt=!0,this.yt=t}kt(){this.xt=!0}Tt(){if(this.xt){const t=this.yt.Qt().N().grid,e={Tl:t.horzLines.visible,xl:t.vertLines.visible,Rl:t.horzLines.color,Cl:t.vertLines.color,Dl:t.horzLines.style,yl:t.vertLines.style,Il:this.yt.Rs().Vl(),kl:(this.yt.Qt().Et().Vl()||[]).map((s=>({Pl:s.coord})))};this.Xt.ht(e),this.xt=!1}return this.Xt}},$F=class{constructor(t){this.$h=new WF(t)}pr(){return this.$h}};const Vp={Bl:4,El:1e-4};function Uo(A,t){const e=100*(A-t)/t;return t<0?-e:e}function XF(A,t){const e=Uo(A.Ze(),t),s=Uo(A.Ge(),t);return new en(e,s)}function tc(A,t){const e=100*(A-t)/t+100;return t<0?-e:e}function YF(A,t){const e=tc(A.Ze(),t),s=tc(A.Ge(),t);return new en(e,s)}function Du(A,t){const e=Math.abs(A);if(e<1e-15)return 0;const s=Math.log10(e+t.El)+t.Bl;return A<0?-s:s}function ec(A,t){const e=Math.abs(A);if(e<1e-15)return 0;const s=Math.pow(10,e-t.Bl)-t.El;return A<0?-s:s}function Da(A,t){if(A===null)return null;const e=Du(A.Ze(),t),s=Du(A.Ge(),t);return new en(e,s)}function Mo(A,t){if(A===null)return null;const e=ec(A.Ze(),t),s=ec(A.Ge(),t);return new en(e,s)}function Pp(A){if(A===null)return Vp;const t=Math.abs(A.Ge()-A.Ze());if(t>=1||t<1e-15)return Vp;const e=Math.ceil(Math.abs(Math.log10(t))),s=Vp.Bl+e;return{Bl:s,El:1/Math.pow(10,s)}}let Kp=class{constructor(t,e){if(this.Al=t,this.Ll=e,(function(s){if(s<0)return!1;if(s>1e18)return!0;for(let n=s;n>1;n/=10)if(n%10!=0)return!1;return!0})(this.Al))this.zl=[2,2.5,2];else{this.zl=[];for(let s=this.Al;s!==1;){if(s%2==0)this.zl.push(2),s/=2;else{if(s%5!=0)throw new Error("unexpected base");this.zl.push(2,2.5),s/=5}if(this.zl.length>100)throw new Error("something wrong with base")}}}Ol(t,e,s){const n=this.Al===0?0:1/this.Al;let l=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),a=0,c=this.Ll[0];for(;;){const m=Ih(l,n,1e-14)&&l>n+1e-14,v=Ih(l,s*c,1e-14),w=Ih(l,1,1e-14);if(!(m&&v&&w))break;l/=c,c=this.Ll[++a%this.Ll.length]}if(l<=n+1e-14&&(l=n),l=Math.max(1,l),this.zl.length>0&&(d=l,f=1,p=1e-14,Math.abs(d-f)<p))for(a=0,c=this.zl[0];Ih(l,s*c,1e-14)&&l>n+1e-14;)l/=c,c=this.zl[++a%this.zl.length];var d,f,p;return l}},Xv=class{constructor(t,e,s,n){this.Nl=[],this.Ki=t,this.Al=e,this.Fl=s,this.Wl=n}Ol(t,e){if(t<e)throw new Error("high < low");const s=this.Ki.$t(),n=(t-e)*this.Hl()/s,l=new Kp(this.Al,[2,2.5,2]),a=new Kp(this.Al,[2,2,2.5]),c=new Kp(this.Al,[2.5,2,2]),d=[];return d.push(l.Ol(t,e,n),a.Ol(t,e,n),c.Ol(t,e,n)),(function(f){if(f.length<1)throw Error("array is empty");let p=f[0];for(let m=1;m<f.length;++m)f[m]<p&&(p=f[m]);return p})(d)}Ul(){const t=this.Ki,e=t.Lt();if(e===null)return void(this.Nl=[]);const s=t.$t(),n=this.Fl(s-1,e),l=this.Fl(0,e),a=this.Ki.N().entireTextOnly?this.$l()/2:0,c=a,d=s-1-a,f=Math.max(n,l),p=Math.min(n,l);if(f===p)return void(this.Nl=[]);const m=this.Ol(f,p);if(this.ql(e,m,f,p,c,d),t.jl()&&this.Yl(m,p,f)){const y=this.Ki.Kl();this.Zl(e,m,c,d,y,2*y)}const v=this.Nl.map((y=>y.Gl)),w=this.Ki.Xl(v);for(let y=0;y<this.Nl.length;y++)this.Nl[y].Jl=w[y]}Vl(){return this.Nl}$l(){return this.Ki.k()}Hl(){return Math.ceil(2.5*this.$l())}ql(t,e,s,n,l,a){const c=this.Nl,d=this.Ki;let f=s%e;f+=f<0?e:0;const p=s>=n?1:-1;let m=null,v=0;for(let w=s-f;w>n;w-=e){const y=this.Wl(w,t,!0);m!==null&&Math.abs(y-m)<this.Hl()||y<l||y>a||(v<c.length?(c[v].Pl=y,c[v].Jl=d.Ql(w),c[v].Gl=w):c.push({Pl:y,Jl:d.Ql(w),Gl:w}),v++,m=y,d.io()&&(e=this.Ol(w*p,n)))}c.length=v}Zl(t,e,s,n,l,a){const c=this.Nl,d=this.so(t,s,l,a),f=this.so(t,n,-a,-l),p=this.Wl(0,t,!0)-this.Wl(e,t,!0);c.length>0&&c[0].Pl-d.Pl<p/2&&c.shift(),c.length>0&&f.Pl-c[c.length-1].Pl<p/2&&c.pop(),c.unshift(d),c.push(f)}so(t,e,s,n){const l=(s+n)/2,a=this.Fl(e+s,t),c=this.Fl(e+n,t),d=Math.min(a,c),f=Math.max(a,c),p=Math.max(.1,this.Ol(f,d)),m=this.Fl(e+l,t),v=m-m%p,w=this.Wl(v,t,!0);return{Jl:this.Ki.Ql(v),Pl:w,Gl:v}}Yl(t,e,s){let n=Dr(this.Ki.er());return this.Ki.io()&&(n=Mo(n,this.Ki.no())),n.Ze()-e<t&&s-n.Ge()<t}};function Py(A){return A.slice().sort(((t,e)=>Mt(t._s())-Mt(e._s())))}var Yv;(function(A){A[A.Normal=0]="Normal",A[A.Logarithmic=1]="Logarithmic",A[A.Percentage=2]="Percentage",A[A.IndexedTo100=3]="IndexedTo100"})(Yv||(Yv={}));const Jv=new ky,qv=new Zu(100,1);let JF=class{constructor(t,e,s,n,l){this.eo=0,this.ro=null,this.sr=null,this.ho=null,this.ao={lo:!1,oo:null},this._o=!1,this.uo=0,this.co=0,this.do=new ii,this.fo=new ii,this.po=[],this.vo=null,this.mo=null,this.wo=null,this.Mo=null,this.bo=null,this.Ja=qv,this.So=Pp(null),this.xo=t,this.Ps=e,this.Co=s,this.yo=n,this.ko=l,this.Po=new Xv(this,100,this.To.bind(this),this.Ro.bind(this))}ol(){return this.xo}N(){return this.Ps}cr(t){if(SA(this.Ps,t),this._l(),t.mode!==void 0&&this.Do({ae:t.mode}),t.scaleMargins!==void 0){const e=fA(t.scaleMargins.top),s=fA(t.scaleMargins.bottom);if(e<0||e>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(s<0||s>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${s}`);if(e+s>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${e+s}`);this.Io(),this.wo=null}}Vo(){return this.Ps.autoScale}Bo(){return this._o}io(){return this.Ps.mode===1}He(){return this.Ps.mode===2}Eo(){return this.Ps.mode===3}no(){return this.So}ae(){return{ln:this.Ps.autoScale,Ao:this.Ps.invertScale,ae:this.Ps.mode}}Do(t){const e=this.ae();let s=null;t.ln!==void 0&&(this.Ps.autoScale=t.ln),t.ae!==void 0&&(this.Ps.mode=t.ae,t.ae!==2&&t.ae!==3||(this.Ps.autoScale=!0),this.ao.lo=!1),e.ae===1&&t.ae!==e.ae&&((function(l,a){if(l===null)return!1;const c=ec(l.Ze(),a),d=ec(l.Ge(),a);return isFinite(c)&&isFinite(d)})(this.sr,this.So)?(s=Mo(this.sr,this.So),s!==null&&this.Lo(s)):this.Ps.autoScale=!0),t.ae===1&&t.ae!==e.ae&&(s=Da(this.sr,this.So),s!==null&&this.Lo(s));const n=e.ae!==this.Ps.mode;n&&(e.ae===2||this.He())&&this._l(),n&&(e.ae===3||this.Eo())&&this._l(),t.Ao!==void 0&&e.Ao!==t.Ao&&(this.Ps.invertScale=t.Ao,this.zo()),this.fo.p(e,this.ae())}Oo(){return this.fo}k(){return this.Co.fontSize}$t(){return this.eo}No(t){this.eo!==t&&(this.eo=t,this.Io(),this.wo=null)}Fo(){if(this.ro)return this.ro;const t=this.$t()-this.Wo()-this.Ho();return this.ro=t,t}er(){return this.Uo(),this.sr}Lo(t,e){const s=this.sr;(e||s===null&&t!==null||s!==null&&!s.Ye(t))&&(this.wo=null,this.sr=t)}$o(t){this.Lo(t),this.qo(t!==null)}Gi(){return this.Uo(),this.eo===0||!this.sr||this.sr.Gi()}jo(t){return this.Ao()?t:this.$t()-1-t}Nt(t,e){return this.He()?t=Uo(t,e):this.Eo()&&(t=tc(t,e)),this.Ro(t,e)}Yo(t,e,s){this.Uo();const n=this.Ho(),l=Mt(this.er()),a=l.Ze(),c=l.Ge(),d=this.Fo()-1,f=this.Ao(),p=d/(c-a),m=s===void 0?0:s.from,v=s===void 0?t.length:s.to,w=this.Ko();for(let y=m;y<v;y++){const b=t[y],S=b.gt;if(isNaN(S))continue;let x=S;w!==null&&(x=w(b.gt,e));const U=n+p*(x-a),M=f?U:this.eo-1-U;b.ut=M}}Zo(t,e,s){this.Uo();const n=this.Ho(),l=Mt(this.er()),a=l.Ze(),c=l.Ge(),d=this.Fo()-1,f=this.Ao(),p=d/(c-a),m=s===void 0?0:s.from,v=s===void 0?t.length:s.to,w=this.Ko();for(let y=m;y<v;y++){const b=t[y];let S=b.Hr,x=b.Ur,U=b.$r,M=b.qr;w!==null&&(S=w(b.Hr,e),x=w(b.Ur,e),U=w(b.$r,e),M=w(b.qr,e));let N=n+p*(S-a),I=f?N:this.eo-1-N;b.Go=I,N=n+p*(x-a),I=f?N:this.eo-1-N,b.Xo=I,N=n+p*(U-a),I=f?N:this.eo-1-N,b.Jo=I,N=n+p*(M-a),I=f?N:this.eo-1-N,b.Qo=I}}Ds(t,e){const s=this.To(t,e);return this.t_(s,e)}t_(t,e){let s=t;return this.He()?s=(function(n,l){return l<0&&(n=-n),n/100*l+l})(s,e):this.Eo()&&(s=(function(n,l){return n-=100,l<0&&(n=-n),n/100*l+l})(s,e)),s}Sl(){return this.po}Dt(){return this.mo||(this.mo=Py(this.po)),this.mo}i_(t){this.po.indexOf(t)===-1&&(this.po.push(t),this._l(),this.s_())}n_(t){const e=this.po.indexOf(t);if(e===-1)throw new Error("source is not attached to scale");this.po.splice(e,1),this.po.length===0&&(this.Do({ln:!0}),this.Lo(null)),this._l(),this.s_()}Lt(){let t=null;for(const e of this.po){const s=e.Lt();s!==null&&(t===null||s.Ea<t.Ea)&&(t=s)}return t===null?null:t.Wt}Ao(){return this.Ps.invertScale}Vl(){const t=this.Lt()===null;if(this.wo!==null&&(t||this.wo.e_===t))return this.wo.Vl;this.Po.Ul();const e=this.Po.Vl();return this.wo={Vl:e,e_:t},this.do.p(),e}r_(){return this.do}h_(t){this.He()||this.Eo()||this.Mo===null&&this.ho===null&&(this.Gi()||(this.Mo=this.eo-t,this.ho=Mt(this.er()).Ke()))}a_(t){if(this.He()||this.Eo()||this.Mo===null)return;this.Do({ln:!1}),(t=this.eo-t)<0&&(t=0);let e=(this.Mo+.2*(this.eo-1))/(t+.2*(this.eo-1));const s=Mt(this.ho).Ke();e=Math.max(e,.1),s.Je(e),this.Lo(s)}l_(){this.He()||this.Eo()||(this.Mo=null,this.ho=null)}o_(t){this.Vo()||this.bo===null&&this.ho===null&&(this.Gi()||(this.bo=t,this.ho=Mt(this.er()).Ke()))}__(t){if(this.Vo()||this.bo===null)return;const e=Mt(this.er()).Xe()/(this.Fo()-1);let s=t-this.bo;this.Ao()&&(s*=-1);const n=s*e,l=Mt(this.ho).Ke();l.Qe(n),this.Lo(l,!0),this.wo=null}u_(){this.Vo()||this.bo!==null&&(this.bo=null,this.ho=null)}Xa(){return this.Ja||this._l(),this.Ja}Ji(t,e){switch(this.Ps.mode){case 2:return this.c_(Uo(t,e));case 3:return this.Xa().format(tc(t,e));default:return this.lr(t)}}Ql(t){switch(this.Ps.mode){case 2:return this.c_(t);case 3:return this.Xa().format(t);default:return this.lr(t)}}Xl(t){switch(this.Ps.mode){case 2:return this.d_(t);case 3:return this.Xa().formatTickmarks(t);default:return this.f_(t)}}Ma(t){return this.lr(t,Mt(this.vo).Xa())}ba(t,e){return t=Uo(t,e),this.c_(t,Jv)}p_(){return this.po}v_(t){this.ao={oo:t,lo:!1}}Ws(){this.po.forEach((t=>t.Ws()))}jl(){return this.Ps.ensureEdgeTickMarksVisible&&this.Vo()}Kl(){return this.k()/2}_l(){this.wo=null;let t=1/0;this.vo=null;for(const s of this.po)s._s()<t&&(t=s._s(),this.vo=s);let e=100;this.vo!==null&&(e=Math.round(this.vo.qh())),this.Ja=qv,this.He()?(this.Ja=Jv,e=100):this.Eo()?(this.Ja=new Zu(100,1),e=100):this.vo!==null&&(this.Ja=this.vo.Xa()),this.Po=new Xv(this,e,this.To.bind(this),this.Ro.bind(this)),this.Po.Ul()}s_(){this.mo=null}m_(){return this.vo===null||this.He()||this.Eo()?1:1/this.vo.qh()}Xi(){return this.ko}qo(t){this._o=t}Wo(){return this.Ao()?this.Ps.scaleMargins.bottom*this.$t()+this.co:this.Ps.scaleMargins.top*this.$t()+this.uo}Ho(){return this.Ao()?this.Ps.scaleMargins.top*this.$t()+this.uo:this.Ps.scaleMargins.bottom*this.$t()+this.co}Uo(){this.ao.lo||(this.ao.lo=!0,this.w_())}Io(){this.ro=null}Ro(t,e){if(this.Uo(),this.Gi())return 0;t=this.io()&&t?Du(t,this.So):t;const s=Mt(this.er()),n=this.Ho()+(this.Fo()-1)*(t-s.Ze())/s.Xe();return this.jo(n)}To(t,e){if(this.Uo(),this.Gi())return 0;const s=this.jo(t),n=Mt(this.er()),l=n.Ze()+n.Xe()*((s-this.Ho())/(this.Fo()-1));return this.io()?ec(l,this.So):l}zo(){this.wo=null,this.Po.Ul()}w_(){if(this.Bo()&&!this.Vo())return;const t=this.ao.oo;if(t===null)return;let e=null;const s=this.p_();let n=0,l=0;for(const d of s){if(!d.It())continue;const f=d.Lt();if(f===null)continue;const p=d.ra(t.Aa(),t.bi());let m=p&&p.er();if(m!==null){switch(this.Ps.mode){case 1:m=Da(m,this.So);break;case 2:m=XF(m,f.Wt);break;case 3:m=YF(m,f.Wt)}if(e=e===null?m:e.Sn(Mt(m)),p!==null){const v=p.rr();v!==null&&(n=Math.max(n,v.above),l=Math.max(l,v.below))}}}if(this.jl()&&(n=Math.max(n,this.Kl()),l=Math.max(l,this.Kl())),n===this.uo&&l===this.co||(this.uo=n,this.co=l,this.wo=null,this.Io()),e!==null){if(e.Ze()===e.Ge()){const d=5*this.m_();this.io()&&(e=Mo(e,this.So)),e=new en(e.Ze()-d,e.Ge()+d),this.io()&&(e=Da(e,this.So))}if(this.io()){const d=Mo(e,this.So),f=Pp(d);if(a=f,c=this.So,a.Bl!==c.Bl||a.El!==c.El){const p=this.ho!==null?Mo(this.ho,this.So):null;this.So=f,e=Da(d,f),p!==null&&(this.ho=Da(p,f))}}this.Lo(e)}else this.sr===null&&(this.Lo(new en(-.5,.5)),this.So=Pp(null));var a,c}Ko(){return this.He()?Uo:this.Eo()?tc:this.io()?t=>Du(t,this.So):null}g_(t,e,s){return e===void 0?(s===void 0&&(s=this.Xa()),s.format(t)):e(t)}M_(t,e,s){return e===void 0?(s===void 0&&(s=this.Xa()),s.formatTickmarks(t)):e(t)}lr(t,e){return this.g_(t,this.yo.priceFormatter,e)}f_(t,e){const s=this.yo.priceFormatter;return this.M_(t,this.yo.tickmarksPriceFormatter??(s?n=>n.map(s):void 0),e)}c_(t,e){return this.g_(t,this.yo.percentageFormatter,e)}d_(t,e){const s=this.yo.percentageFormatter;return this.M_(t,this.yo.tickmarksPercentageFormatter??(s?n=>n.map(s):void 0),e)}};function Zv(A){return A instanceof td}let tB=class{constructor(t,e){this.po=[],this.b_=new Map,this.eo=0,this.S_=0,this.x_=1,this.mo=null,this.C_=!1,this.y_=new ii,this.ua=[],this.Jh=t,this.ns=e,this.k_=new $F(this);const s=e.N();this.P_=this.T_("left",s.leftPriceScale),this.R_=this.T_("right",s.rightPriceScale),this.P_.Oo().i(this.D_.bind(this,this.P_),this),this.R_.Oo().i(this.D_.bind(this,this.R_),this),this.I_(s)}I_(t){if(t.leftPriceScale&&this.P_.cr(t.leftPriceScale),t.rightPriceScale&&this.R_.cr(t.rightPriceScale),t.localization&&(this.P_._l(),this.R_._l()),t.overlayPriceScales){const e=Array.from(this.b_.values());for(const s of e){const n=Mt(s[0].Ft());n.cr(t.overlayPriceScales),t.localization&&n._l()}}}V_(t){switch(t){case"left":return this.P_;case"right":return this.R_}return this.b_.has(t)?fA(this.b_.get(t))[0].Ft():null}m(){this.Qt().B_().u(this),this.P_.Oo().u(this),this.R_.Oo().u(this),this.po.forEach((t=>{t.m&&t.m()})),this.ua=this.ua.filter((t=>{const e=t.Gh();return e.detached&&e.detached(),!1})),this.y_.p()}E_(){return this.x_}A_(t){this.x_=t}Qt(){return this.ns}ss(){return this.S_}$t(){return this.eo}L_(t){this.S_=t,this.z_()}No(t){this.eo=t,this.P_.No(t),this.R_.No(t),this.po.forEach((e=>{if(this.Zn(e)){const s=e.Ft();s!==null&&s.No(t)}})),this.z_()}O_(t){this.C_=t}N_(){return this.C_}F_(){return this.po.filter(Zv)}Sl(){return this.po}Zn(t){const e=t.Ft();return e===null||this.P_!==e&&this.R_!==e}i_(t,e,s){this.W_(t,e,s?t._s():this.po.length)}n_(t,e){const s=this.po.indexOf(t);Di(s!==-1,"removeDataSource: invalid data source"),this.po.splice(s,1),e||this.po.forEach(((a,c)=>a.us(c)));const n=Mt(t.Ft()).ol();if(this.b_.has(n)){const a=fA(this.b_.get(n)),c=a.indexOf(t);c!==-1&&(a.splice(c,1),a.length===0&&this.b_.delete(n))}const l=t.Ft();l&&l.Sl().indexOf(t)>=0&&(l.n_(t),this.H_(l)),this.mo=null}Xn(t){return t===this.P_?"left":t===this.R_?"right":"overlay"}U_(){return this.P_}q_(){return this.R_}j_(t,e){t.h_(e)}Y_(t,e){t.a_(e),this.z_()}K_(t){t.l_()}Z_(t,e){t.o_(e)}G_(t,e){t.__(e),this.z_()}X_(t){t.u_()}z_(){this.po.forEach((t=>{t.Ws()}))}Rs(){let t=null;return this.ns.N().rightPriceScale.visible&&this.R_.Sl().length!==0?t=this.R_:this.ns.N().leftPriceScale.visible&&this.P_.Sl().length!==0?t=this.P_:this.po.length!==0&&(t=this.po[0].Ft()),t===null&&(t=this.R_),t}Gn(){let t=null;return this.ns.N().rightPriceScale.visible?t=this.R_:this.ns.N().leftPriceScale.visible&&(t=this.P_),t}H_(t){t!==null&&t.Vo()&&this.J_(t)}Q_(t){const e=this.Jh.Ie();t.Do({ln:!0}),e!==null&&t.v_(e),this.z_()}tu(){this.J_(this.P_),this.J_(this.R_)}iu(){this.H_(this.P_),this.H_(this.R_),this.po.forEach((t=>{this.Zn(t)&&this.H_(t.Ft())})),this.z_(),this.ns.dr()}Dt(){return this.mo===null&&(this.mo=Py(this.po)),this.mo}su(t,e){e=Oo(e,0,this.po.length-1);const s=this.po.indexOf(t);Di(s!==-1,"setSeriesOrder: invalid data source"),this.po.splice(s,1),this.po.splice(e,0,t),this.po.forEach(((n,l)=>n.us(l))),this.mo=null;for(const n of[this.P_,this.R_])n.s_(),n._l();this.ns.dr()}Vt(){return this.Dt().filter(Zv)}nu(){return this.y_}eu(){return this.k_}nl(t){this.ua.push(new LF(t))}el(t){this.ua=this.ua.filter((e=>e.Gh()!==t)),t.detached&&t.detached(),this.ns.dr()}ru(){return this.ua}Za(t,e){return this.ua.map((s=>s.Qn(t,e))).filter((s=>s!==null))}J_(t){const e=t.p_();if(e&&e.length>0&&!this.Jh.Gi()){const s=this.Jh.Ie();s!==null&&t.v_(s)}t.Ws()}W_(t,e,s){let n=this.V_(e);if(n===null&&(n=this.T_(e,this.ns.N().overlayPriceScales)),this.po.splice(s,0,t),!qu(e)){const l=this.b_.get(e)||[];l.push(t),this.b_.set(e,l)}t.us(s),n.i_(t),t.cs(n),this.H_(n),this.mo=null}D_(t,e,s){e.ae!==s.ae&&this.J_(t)}T_(t,e){const s={visible:!0,autoScale:!0,...Gn(e)},n=new JF(t,s,this.ns.N().layout,this.ns.N().localization,this.ns.Xi());return n.No(this.$t()),n}};function Nh(A){return{hu:A.hu,au:{te:A.lu.externalId},ou:A.lu.cursorStyle}}function qF(A,t,e,s){for(const n of A){const l=n.Tt(s);if(l!==null&&l.Qn){const a=l.Qn(t,e);if(a!==null)return{_u:n,au:a}}}return null}function ZF(A){return A.Ys!==void 0}function Ky(A,t,e){const s=[A,...A.Dt()],n=(function(l,a,c){let d,f;for(const v of l){const w=v.Za?.(a,c)??[];for(const y of w)p=y.zOrder,m=d?.zOrder,(!m||p==="top"&&m!=="top"||p==="normal"&&m==="bottom")&&(d=y,f=v)}var p,m;return d&&f?{lu:d,hu:f}:null})(s,t,e);if(n?.lu.zOrder==="top")return Nh(n);for(const l of s){if(n&&n.hu===l&&n.lu.zOrder!=="bottom"&&!n.lu.isBackground)return Nh(n);if(ZF(l)){const a=qF(l.Ys(A),t,e,A);if(a!==null)return{hu:l,_u:a._u,au:a.au}}if(n&&n.hu===l&&n.lu.zOrder!=="bottom"&&n.lu.isBackground)return Nh(n)}return n?.lu?Nh(n):null}let tU=class{constructor(t,e,s=50){this.Vn=0,this.Bn=1,this.En=1,this.Ln=new Map,this.An=new Map,this.uu=t,this.cu=e,this.zn=s}du(t){const e=t.time,s=this.cu.cacheKey(e),n=this.Ln.get(s);if(n!==void 0)return n.fu;if(this.Vn===this.zn){const a=this.An.get(this.En);this.An.delete(this.En),this.Ln.delete(fA(a)),this.En++,this.Vn--}const l=this.uu(t);return this.Ln.set(s,{fu:l,Wn:this.Bn}),this.An.set(this.Bn,s),this.Vn++,this.Bn++,l}},sc=class{constructor(t,e){Di(t<=e,"right should be >= left"),this.pu=t,this.vu=e}Aa(){return this.pu}bi(){return this.vu}mu(){return this.vu-this.pu+1}Ee(t){return this.pu<=t&&t<=this.vu}Ye(t){return this.pu===t.Aa()&&this.vu===t.bi()}};function eB(A,t){return A===null||t===null?A===t:A.Ye(t)}let eU=class{constructor(){this.wu=new Map,this.Ln=null,this.gu=!1}Mu(t){this.gu=t,this.Ln=null}bu(t,e){this.Su(e),this.Ln=null;for(let s=e;s<t.length;++s){const n=t[s];let l=this.wu.get(n.timeWeight);l===void 0&&(l=[],this.wu.set(n.timeWeight,l)),l.push({index:s,time:n.time,weight:n.timeWeight,originalTime:n.originalTime})}}xu(t,e,s,n,l){const a=Math.ceil(e/t);return this.Ln!==null&&this.Ln.Cu===a&&l===this.Ln.yu&&s===this.Ln.ku||(this.Ln={yu:l,ku:s,Vl:this.Pu(a,s,n),Cu:a}),this.Ln.Vl}Su(t){if(t===0)return void this.wu.clear();const e=[];this.wu.forEach(((s,n)=>{t<=s[0].index?e.push(n):s.splice(Po(s,t,(l=>l.index<t)),1/0)}));for(const s of e)this.wu.delete(s)}Pu(t,e,s){let n=[];const l=a=>!e||s.has(a.index);for(const a of Array.from(this.wu.keys()).sort(((c,d)=>d-c))){if(!this.wu.get(a))continue;const c=n;n=[];const d=c.length;let f=0;const p=fA(this.wu.get(a)),m=p.length;let v=1/0,w=-1/0;for(let y=0;y<m;y++){const b=p[y],S=b.index;for(;f<d;){const x=c[f],U=x.index;if(!(U<S&&l(x))){v=U;break}f++,n.push(x),w=U,v=1/0}if(v-S>=t&&S-w>=t&&l(b))n.push(b),w=S;else if(this.gu)return c}for(;f<d;f++)l(c[f])&&n.push(c[f])}return n}},bu=class Gy{constructor(t){this.Tu=t}Ru(){return this.Tu===null?null:new sc(Math.floor(this.Tu.Aa()),Math.ceil(this.Tu.bi()))}Du(){return this.Tu}static Iu(){return new Gy(null)}};function sU(A,t){return A.weight>t.weight?A:t}let iU=class{constructor(t,e,s,n){this.S_=0,this.Vu=null,this.Bu=[],this.bo=null,this.Mo=null,this.Eu=new eU,this.Au=new Map,this.Lu=bu.Iu(),this.zu=!0,this.Ou=new ii,this.Nu=new ii,this.Fu=new ii,this.Wu=null,this.Hu=null,this.Uu=new Map,this.$u=-1,this.qu=[],this.ju=1,this.Ps=e,this.yo=s,this.Yu=e.rightOffset,this.Ku=e.barSpacing,this.ns=t,this.Zu(e),this.cu=n,this.Gu(),this.Eu.Mu(e.uniformDistribution),this.Xu(),this.Ju()}N(){return this.Ps}Qu(t){SA(this.yo,t),this.tc(),this.Gu()}cr(t,e){SA(this.Ps,t),this.Ps.fixLeftEdge&&this.sc(),this.Ps.fixRightEdge&&this.nc(),t.barSpacing!==void 0&&this.ns.gn(t.barSpacing),t.rightOffset!==void 0&&this.ns.Mn(t.rightOffset),this.Zu(t),t.minBarSpacing===void 0&&t.maxBarSpacing===void 0||this.ns.gn(t.barSpacing??this.Ku),t.ignoreWhitespaceIndices!==void 0&&t.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.Ju(),this.tc(),this.Gu(),t.enableConflation===void 0&&t.conflationThresholdFactor===void 0||this.Xu(),this.Fu.p()}Is(t){return this.Bu[t]?.time??null}es(t){return this.Bu[t]??null}ec(t,e){if(this.Bu.length<1)return null;if(this.cu.key(t)>this.cu.key(this.Bu[this.Bu.length-1].time))return e?this.Bu.length-1:null;const s=Po(this.Bu,this.cu.key(t),((n,l)=>this.cu.key(n.time)<l));return this.cu.key(t)<this.cu.key(this.Bu[s].time)?e?s:null:s}Gi(){return this.S_===0||this.Bu.length===0||this.Vu===null}rc(){return this.Bu.length>0}Ie(){return this.hc(),this.Lu.Ru()}ac(){return this.hc(),this.Lu.Du()}lc(){const t=this.Ie();if(t===null)return null;const e={from:t.Aa(),to:t.bi()};return this.oc(e)}oc(t){const e=Math.round(t.from),s=Math.round(t.to),n=Mt(this._c()),l=Mt(this.uc());return{from:Mt(this.es(Math.max(n,e))),to:Mt(this.es(Math.min(l,s)))}}cc(t){return{from:Mt(this.ec(t.from,!0)),to:Mt(this.ec(t.to,!0))}}ss(){return this.S_}L_(t){if(!isFinite(t)||t<=0||this.S_===t)return;const e=this.ac(),s=this.S_;if(this.S_=t,this.zu=!0,this.Ps.lockVisibleTimeRangeOnResize&&s!==0){const n=this.Ku*t/s;this.Ku=n}if(this.Ps.fixLeftEdge&&e!==null&&e.Aa()<=0){const n=s-t;this.Yu-=Math.round(n/this.Ku)+1,this.zu=!0}this.dc(),this.fc()}qt(t){if(this.Gi()||!dc(t))return 0;const e=this.vc()+this.Yu-t;return this.S_-(e+.5)*this.Ku-1}mc(t,e){const s=this.vc(),n=e===void 0?0:e.from,l=e===void 0?t.length:e.to;for(let a=n;a<l;a++){const c=t[a].wt,d=s+this.Yu-c,f=this.S_-(d+.5)*this.Ku-1;t[a]._t=f}}wc(t,e){const s=Math.ceil(this.gc(t));return e&&this.Ps.ignoreWhitespaceIndices&&!this.Mc(s)?this.bc(s):s}Mn(t){this.zu=!0,this.Yu=t,this.fc(),this.ns.Sc(),this.ns.dr()}ul(){return this.Ku}gn(t){const e=this.Ku;if(this.xc(t),this.Ps.rightOffsetPixels!==void 0&&e!==0){const s=this.Yu*e/this.Ku;this.Yu=s}this.fc(),this.ns.Sc(),this.ns.dr()}Cc(){return this.Yu}Vl(){if(this.Gi())return null;if(this.Hu!==null)return this.Hu;const t=this.Ku,e=5*(this.ns.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),s=Math.round(e/t),n=Mt(this.Ie()),l=Math.max(n.Aa(),n.Aa()-s),a=Math.max(n.bi(),n.bi()-s),c=this.Eu.xu(t,e,this.Ps.ignoreWhitespaceIndices,this.Uu,this.$u),d=this._c()+s,f=this.uc()-s,p=this.yc(),m=this.Ps.fixLeftEdge||p,v=this.Ps.fixRightEdge||p;let w=0;for(const y of c){if(!(l<=y.index&&y.index<=a))continue;let b;w<this.qu.length?(b=this.qu[w],b.coord=this.qt(y.index),b.label=this.kc(y),b.weight=y.weight):(b={needAlignCoordinate:!1,coord:this.qt(y.index),label:this.kc(y),weight:y.weight},this.qu.push(b)),this.Ku>e/2&&!p?b.needAlignCoordinate=!1:b.needAlignCoordinate=m&&y.index<=d||v&&y.index>=f,w++}return this.qu.length=w,this.Hu=this.qu,this.qu}Pc(){let t;this.zu=!0,this.gn(this.Ps.barSpacing),t=this.Ps.rightOffsetPixels!==void 0?this.Ps.rightOffsetPixels/this.ul():this.Ps.rightOffset,this.Mn(t)}Tc(t){this.zu=!0,this.Vu=t,this.fc(),this.sc()}Rc(t,e){const s=this.gc(t),n=this.ul(),l=n+e*(n/10);this.gn(l),this.Ps.rightBarStaysOnScroll||this.Mn(this.Cc()+(s-this.gc(t)))}h_(t){this.bo&&this.u_(),this.Mo===null&&this.Wu===null&&(this.Gi()||(this.Mo=t,this.Dc()))}a_(t){if(this.Wu===null)return;const e=Oo(this.S_-t,0,this.S_),s=Oo(this.S_-Mt(this.Mo),0,this.S_);e!==0&&s!==0&&this.gn(this.Wu.ul*e/s)}l_(){this.Mo!==null&&(this.Mo=null,this.Ic())}o_(t){this.bo===null&&this.Wu===null&&(this.Gi()||(this.bo=t,this.Dc()))}__(t){if(this.bo===null)return;const e=(this.bo-t)/this.ul();this.Yu=Mt(this.Wu).Cc+e,this.zu=!0,this.fc()}u_(){this.bo!==null&&(this.bo=null,this.Ic())}Vc(){this.Bc(this.Ps.rightOffset)}Bc(t,e=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const s=this.Yu,n=performance.now();this.ns.vn({Ec:l=>(l-n)/e>=1,Ac:l=>{const a=(l-n)/e;return a>=1?t:s+(t-s)*a}})}kt(t,e){this.zu=!0,this.Bu=t,this.Eu.bu(t,e),this.fc()}Lc(){return this.Ou}zc(){return this.Nu}Oc(){return this.Fu}vc(){return this.Vu||0}Nc(t,e){const s=t.mu(),n=e&&this.Ps.rightOffsetPixels||0;this.xc((this.S_-n)/s),this.Yu=t.bi()-this.vc(),e&&(this.Yu=n?n/this.ul():this.Ps.rightOffset),this.fc(),this.zu=!0,this.ns.Sc(),this.ns.dr()}Fc(){const t=this._c(),e=this.uc();if(t===null||e===null)return;const s=!this.Ps.rightOffsetPixels&&this.Ps.rightOffset||0;this.Nc(new sc(t,e+s),!0)}Wc(t){const e=new sc(t.from,t.to);this.Nc(e)}rs(t){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(t.originalTime):this.cu.formatHorzItem(t.time)}Ju(){if(!this.Ps.ignoreWhitespaceIndices)return;this.Uu.clear();const t=this.ns.tn();for(const e of t)for(const s of e.ll())this.Uu.set(s,!0);this.$u++}Hc(){return this.ju}vl(){const t=1/(window.devicePixelRatio||1),e=this.Ps.minBarSpacing;if(e>=t)return[1];const s=[1];let n=2;for(;n<=512;)e<t/n&&s.push(n),n*=2;return s}yc(){const t=this.ns.N().handleScroll,e=this.ns.N().handleScale;return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}_c(){return this.Bu.length===0?null:0}uc(){return this.Bu.length===0?null:this.Bu.length-1}Uc(t){return(this.S_-1-t)/this.Ku}gc(t){const e=this.Uc(t),s=this.vc()+this.Yu-e;return Math.round(1e6*s)/1e6}xc(t){const e=this.Ku;this.Ku=t,this.dc(),e!==this.Ku&&(this.zu=!0,this.$c(),this.Xu())}hc(){if(!this.zu)return;if(this.zu=!1,this.Gi())return void this.qc(bu.Iu());const t=this.vc(),e=this.S_/this.Ku,s=this.Yu+t,n=new sc(s-e+1,s);this.qc(new bu(n))}dc(){const t=Oo(this.Ku,this.jc(),this.Yc());this.Ku!==t&&(this.Ku=t,this.zu=!0)}Yc(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.S_}jc(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.Bu.length!==0?this.S_/this.Bu.length:this.Ps.minBarSpacing}Xu(){if(!this.Ps.enableConflation)return void(this.ju=1);const t=1/(window.devicePixelRatio||1)*(this.Ps.conflationThresholdFactor??1);if(this.Ku>=t)return void(this.ju=1);const e=t/this.Ku,s=Math.pow(2,Math.floor(Math.log2(e)));this.ju=Math.min(s,512)}fc(){const t=this.Kc();t!==null&&this.Yu<t&&(this.Yu=t,this.zu=!0);const e=this.Zc();this.Yu>e&&(this.Yu=e,this.zu=!0)}Kc(){const t=this._c(),e=this.Vu;return t===null||e===null?null:t-e-1+(this.Ps.fixLeftEdge?this.S_/this.Ku:Math.min(2,this.Bu.length))}Zc(){return this.Ps.fixRightEdge?0:this.S_/this.Ku-Math.min(2,this.Bu.length)}Dc(){this.Wu={ul:this.ul(),Cc:this.Cc()}}Ic(){this.Wu=null}kc(t){let e=this.Au.get(t.weight);return e===void 0&&(e=new tU((s=>this.Gc(s)),this.cu),this.Au.set(t.weight,e)),e.du(t)}Gc(t){return this.cu.formatTickmark(t,this.yo)}qc(t){const e=this.Lu;this.Lu=t,eB(e.Ru(),this.Lu.Ru())||this.Ou.p(),eB(e.Du(),this.Lu.Du())||this.Nu.p(),this.$c()}$c(){this.Hu=null}tc(){this.$c(),this.Au.clear()}Gu(){this.cu.updateFormatter(this.yo)}sc(){if(!this.Ps.fixLeftEdge)return;const t=this._c();if(t===null)return;const e=this.Ie();if(e===null)return;const s=e.Aa()-t;if(s<0){const n=this.Yu-s-1;this.Mn(n)}this.dc()}nc(){this.fc(),this.dc()}Mc(t){return!this.Ps.ignoreWhitespaceIndices||this.Uu.get(t)||!1}bc(t){const e=(function*(n){const l=Math.round(n),a=l<n;let c=1;for(;;)a?(yield l+c,yield l-c):(yield l-c,yield l+c),c++})(t),s=this.uc();for(;s;){const n=e.next().value;if(this.Uu.get(n))return n;if(n<0||n>s)break}return t}Zu(t){if(t.rightOffsetPixels!==void 0){const e=t.rightOffsetPixels/(t.barSpacing||this.Ku);this.ns.Mn(e)}}};var sB,iB,AB,nB,rB;(function(A){A[A.OnTouchEnd=0]="OnTouchEnd",A[A.OnNextTap=1]="OnNextTap"})(sB||(sB={}));let AU=class{constructor(t,e,s){this.Xc=[],this.Jc=[],this.Qc=null,this.S_=0,this.td=null,this.sd=new ii,this.nd=new ii,this.ed=null,this.rd=t,this.Ps=e,this.cu=s,this.ko=new eF(this.Ps.layout.colorParsers),this.hd=new tF(this),this.Jh=new iU(this,e.timeScale,this.Ps.localization,s),this.Ct=new uF(this,e.crosshair),this.ad=new KF(e.crosshair),e.addDefaultPane&&(this.ld(0),this.Xc[0].A_(2)),this.od=this._d(0),this.ud=this._d(1)}Ca(){this.dd(Ni.yn())}dr(){this.dd(Ni.Cn())}Ua(){this.dd(new Ni(1))}ya(t){const e=this.fd(t);this.dd(e)}pd(){return this.td}vd(t){if(this.td?.hu===t?.hu&&this.td?.au?.te===t?.au?.te)return;const e=this.td;this.td=t,e!==null&&this.ya(e.hu),t!==null&&t.hu!==e?.hu&&this.ya(t.hu)}N(){return this.Ps}cr(t){SA(this.Ps,t),this.Xc.forEach((e=>e.I_(t))),t.timeScale!==void 0&&this.Jh.cr(t.timeScale),t.localization!==void 0&&this.Jh.Qu(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.sd.p(),this.od=this._d(0),this.ud=this._d(1),this.Ca()}md(t,e,s=0){const n=this.Xc[s];if(n===void 0)return;if(t==="left")return SA(this.Ps,{leftPriceScale:e}),n.I_({leftPriceScale:e}),this.sd.p(),void this.Ca();if(t==="right")return SA(this.Ps,{rightPriceScale:e}),n.I_({rightPriceScale:e}),this.sd.p(),void this.Ca();const l=this.wd(t,s);l!==null&&(l.Ft.cr(e),this.sd.p())}wd(t,e){const s=this.Xc[e];if(s===void 0)return null;const n=s.V_(t);return n!==null?{Gs:s,Ft:n}:null}Et(){return this.Jh}Xs(){return this.Xc}gd(){return this.Ct}Md(){return this.nd}bd(t,e){t.No(e),this.Sc()}L_(t){this.S_=t,this.Jh.L_(this.S_),this.Xc.forEach((e=>e.L_(t))),this.Sc()}Sd(t){this.Xc.length!==1&&(Di(t>=0&&t<this.Xc.length,"Invalid pane index"),this.Xc.splice(t,1),this.Ca())}xd(t,e){if(this.Xc.length<2)return;Di(t>=0&&t<this.Xc.length,"Invalid pane index");const s=this.Xc[t],n=this.Xc.reduce(((m,v)=>m+v.E_()),0),l=this.Xc.reduce(((m,v)=>m+v.$t()),0),a=l-30*(this.Xc.length-1);e=Math.min(a,Math.max(30,e));const c=n/l,d=s.$t();s.A_(e*c);let f=e-d,p=this.Xc.length-1;for(const m of this.Xc)if(m!==s){const v=Math.min(a,Math.max(30,m.$t()-f/p));f-=m.$t()-v,p-=1;const w=v*c;m.A_(w)}this.Ca()}Cd(t,e){Di(t>=0&&t<this.Xc.length&&e>=0&&e<this.Xc.length,"Invalid pane index");const s=this.Xc[t],n=this.Xc[e];this.Xc[t]=n,this.Xc[e]=s,this.Ca()}yd(t,e){if(Di(t>=0&&t<this.Xc.length&&e>=0&&e<this.Xc.length,"Invalid pane index"),t===e)return;const[s]=this.Xc.splice(t,1);this.Xc.splice(e,0,s),this.Ca()}j_(t,e,s){t.j_(e,s)}Y_(t,e,s){t.Y_(e,s),this.ka(),this.dd(this.kd(t,2))}K_(t,e){t.K_(e),this.dd(this.kd(t,2))}Z_(t,e,s){e.Vo()||t.Z_(e,s)}G_(t,e,s){e.Vo()||(t.G_(e,s),this.ka(),this.dd(this.kd(t,2)))}X_(t,e){e.Vo()||(t.X_(e),this.dd(this.kd(t,2)))}Q_(t,e){t.Q_(e),this.dd(this.kd(t,2))}Pd(t){this.Jh.h_(t)}Td(t,e){const s=this.Et();if(s.Gi()||e===0)return;const n=s.ss();t=Math.max(1,Math.min(t,n)),s.Rc(t,e),this.Sc()}Rd(t){this.Dd(0),this.Id(t),this.Vd()}Bd(t){this.Jh.a_(t),this.Sc()}Ed(){this.Jh.l_(),this.dr()}Dd(t){this.Jh.o_(t)}Id(t){this.Jh.__(t),this.Sc()}Vd(){this.Jh.u_(),this.dr()}tn(){return this.Jc}Us(){return this.Qc===null&&(this.Qc=this.Jc.filter((t=>t.It()))),this.Qc}xa(){this.Qc=null}Ad(t,e,s,n,l){this.Ct.Bs(t,e);let a=NaN,c=this.Jh.wc(t,!0);const d=this.Jh.Ie();d!==null&&(c=Math.min(Math.max(d.Aa(),c),d.bi())),c=this.Ct.Hs(c);const f=n.Rs(),p=f.Lt();if(p!==null&&(a=f.Ds(e,p)),a=this.ad.bl(a,c,n),this.Ct.zs(c,a,n),this.Ua(),!l){const m=Ky(n,t,e);this.vd(m&&{hu:m.hu,au:m.au,ou:m.ou||null}),this.nd.p(this.Ct.Bt(),{x:t,y:e},s)}}Ld(t,e,s){const n=s.Rs(),l=n.Lt(),a=n.Nt(t,Mt(l)),c=this.Jh.ec(e,!0),d=this.Jh.qt(Mt(c));this.Ad(d,a,null,s,!0)}zd(t){this.gd().Ns(),this.Ua(),t||this.nd.p(null,null,null)}ka(){const t=this.Ct.Gs();if(t!==null){const e=this.Ct.As(),s=this.Ct.Ls();this.Ad(e,s,null,t)}this.Ct.Ws()}Od(t,e,s){const n=this.Jh.Is(0);e!==void 0&&s!==void 0&&this.Jh.kt(e,s);const l=this.Jh.Is(0),a=this.Jh.vc(),c=this.Jh.Ie();if(c!==null&&n!==null&&l!==null){const d=c.Ee(a),f=this.cu.key(n)>this.cu.key(l),p=t!==null&&t>a&&!f,m=this.Jh.N().allowShiftVisibleRangeOnWhitespaceReplacement,v=d&&(s!==void 0||m)&&this.Jh.N().shiftVisibleRangeOnNewBar;if(p&&!v){const w=t-a;this.Jh.Mn(this.Jh.Cc()-w)}}this.Jh.Tc(t)}Ra(t){t!==null&&t.iu()}Kn(t){if((function(s){return s instanceof tB})(t))return t;const e=this.Xc.find((s=>s.Dt().includes(t)));return e===void 0?null:e}Sc(){this.Xc.forEach((t=>t.iu())),this.ka()}m(){this.Xc.forEach((t=>t.m())),this.Xc.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Nd(){return this.hd}Jn(){return this.hd.N()}B_(){return this.sd}Fd(t,e){const s=this.ld(e);this.Wd(t,s),this.Jc.push(t),this.xa(),this.Jc.length===1?this.Ca():this.dr()}Hd(t){const e=this.Kn(t),s=this.Jc.indexOf(t);Di(s!==-1,"Series not found");const n=Mt(e);this.Jc.splice(s,1),n.n_(t),t.m&&t.m(),this.xa(),this.Jh.Ju(),this.Ud(n)}Sa(t,e){const s=Mt(this.Kn(t));s.n_(t,!0),s.i_(t,e,!0)}Fc(){const t=Ni.Cn();t.cn(),this.dd(t)}$d(t){const e=Ni.Cn();e.pn(t),this.dd(e)}wn(){const t=Ni.Cn();t.wn(),this.dd(t)}gn(t){const e=Ni.Cn();e.gn(t),this.dd(e)}Mn(t){const e=Ni.Cn();e.Mn(t),this.dd(e)}vn(t){const e=Ni.Cn();e.vn(t),this.dd(e)}dn(){const t=Ni.Cn();t.dn(),this.dd(t)}qd(){return this.Ps.rightPriceScale.visible?"right":"left"}jd(t,e){if(Di(e>=0,"Index should be greater or equal to 0"),e===this.Yd(t))return;const s=Mt(this.Kn(t));s.n_(t);const n=this.ld(e);this.Wd(t,n),s.Sl().length===0&&this.Ud(s),this.Ca()}Kd(){return this.ud}$(){return this.od}Ut(t){const e=this.ud,s=this.od;if(e===s)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),this.ed===null||this.ed.eh!==s||this.ed.rh!==e)this.ed={eh:s,rh:e,Zd:new Map};else{const l=this.ed.Zd.get(t);if(l!==void 0)return l}const n=this.ko.tt(s,e,t/100);return this.ed.Zd.set(t,n),n}Gd(t){return this.Xc.indexOf(t)}Xi(){return this.ko}Xd(){return this.Jd()}Jd(t){const e=new tB(this.Jh,this);this.Xc.push(e);const s=t??this.Xc.length-1,n=Ni.yn();return n.hn(s,{an:0,ln:!0}),this.dd(n),e}ld(t){return Di(t>=0,"Index should be greater or equal to 0"),(t=Math.min(this.Xc.length,t))<this.Xc.length?this.Xc[t]:this.Jd(t)}Yd(t){return this.Xc.findIndex((e=>e.F_().includes(t)))}kd(t,e){const s=new Ni(e);if(t!==null){const n=this.Xc.indexOf(t);s.hn(n,{an:e})}return s}fd(t,e){return e===void 0&&(e=2),this.kd(this.Kn(t),e)}dd(t){this.rd&&this.rd(t),this.Xc.forEach((e=>e.eu().pr().kt()))}Wd(t,e){const s=t.N().priceScaleId,n=s!==void 0?s:this.qd();e.i_(t,n),qu(n)||t.cr(t.N())}_d(t){const e=this.Ps.layout;return e.background.type==="gradient"?t===0?e.background.topColor:e.background.bottomColor:e.background.color}Ud(t){!t.N_()&&t.Sl().length===0&&this.Xc.length>1&&this.Xc.splice(this.Gd(t),1)}};function Wy(A){if(A>=1)return 0;let t=0;for(;t<8;t++){const e=Math.round(A);if(Math.abs(e-A)<1e-8)return t;A*=10}return t}function Xg(A){return!Vo(A)&&!yc(A)}function $y(A){return Vo(A)}(function(A){A[A.Disabled=0]="Disabled",A[A.Continuous=1]="Continuous",A[A.OnDataUpdate=2]="OnDataUpdate"})(iB||(iB={})),(function(A){A[A.LastBar=0]="LastBar",A[A.LastVisible=1]="LastVisible"})(AB||(AB={})),(function(A){A.Solid="solid",A.VerticalGradient="gradient"})(nB||(nB={})),(function(A){A[A.Year=0]="Year",A[A.Month=1]="Month",A[A.DayOfMonth=2]="DayOfMonth",A[A.Time=3]="Time",A[A.TimeWithSeconds=4]="TimeWithSeconds"})(rB||(rB={}));const lB=A=>A.getUTCFullYear();function nU(A,t,e){return t.replace(/yyyy/g,(s=>Wn(lB(s),4))(A)).replace(/yy/g,(s=>Wn(lB(s)%100,2))(A)).replace(/MMMM/g,((s,n)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(n,{month:"long"}))(A,e)).replace(/MMM/g,((s,n)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(n,{month:"short"}))(A,e)).replace(/MM/g,(s=>Wn((n=>n.getUTCMonth()+1)(s),2))(A)).replace(/dd/g,(s=>Wn((n=>n.getUTCDate())(s),2))(A))}let Xy=class{constructor(t="yyyy-MM-dd",e="default"){this.Qd=t,this.tf=e}du(t){return nU(t,this.Qd,this.tf)}},rU=class{constructor(t){this.if=t||"%h:%m:%s"}du(t){return this.if.replace("%h",Wn(t.getUTCHours(),2)).replace("%m",Wn(t.getUTCMinutes(),2)).replace("%s",Wn(t.getUTCSeconds(),2))}};const lU={sf:"yyyy-MM-dd",nf:"%h:%m:%s",ef:" ",rf:"default"};let oU=class{constructor(t={}){const e={...lU,...t};this.hf=new Xy(e.sf,e.rf),this.af=new rU(e.nf),this.lf=e.ef}du(t){return`${this.hf.du(t)}${this.lf}${this.af.du(t)}`}};function Lh(A){return 60*A*60*1e3}function Gp(A){return 60*A*1e3}const Hh=[{_f:(oB=1,1e3*oB),uf:10},{_f:Gp(1),uf:20},{_f:Gp(5),uf:21},{_f:Gp(30),uf:22},{_f:Lh(1),uf:30},{_f:Lh(3),uf:31},{_f:Lh(6),uf:32},{_f:Lh(12),uf:33}];var oB;function aB(A,t){if(A.getUTCFullYear()!==t.getUTCFullYear())return 70;if(A.getUTCMonth()!==t.getUTCMonth())return 60;if(A.getUTCDate()!==t.getUTCDate())return 50;for(let e=Hh.length-1;e>=0;--e)if(Math.floor(t.getTime()/Hh[e]._f)!==Math.floor(A.getTime()/Hh[e]._f))return Hh[e].uf;return 0}function Wp(A){let t=A;if(yc(A)&&(t=k1(A)),!Xg(t))throw new Error("time must be of type BusinessDay");const e=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{cf:Math.round(e.getTime()/1e3),df:t}}function cB(A){if(!$y(A))throw new Error("time must be of type isUTCTimestamp");return{cf:A}}function k1(A){const t=new Date(A);if(isNaN(t.getTime()))throw new Error(`Invalid date string=${A}, expected format=yyyy-mm-dd`);return{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()}}function hB(A){yc(A.time)&&(A.time=k1(A.time))}class uB{options(){return this.Ps}setOptions(t){this.Ps=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?(function(e){e.forEach(hB)})(t):hB(t)}createConverterToInternalObj(t){return Mt((function(e){return e.length===0?null:Xg(e[0].time)||yc(e[0].time)?Wp:cB})(t))}key(t){return typeof t=="object"&&"cf"in t?t.cf:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){const e=t;return e.df===void 0?new Date(1e3*e.cf).getTime():new Date(Date.UTC(e.df.year,e.df.month-1,e.df.day)).getTime()}convertHorzItemToInternal(t){return $y(e=t)?cB(e):Xg(e)?Wp(e):Wp(k1(e));var e}updateFormatter(t){if(!this.Ps)return;const e=t.dateFormat;this.Ps.timeScale.timeVisible?this.ff=new oU({sf:e,nf:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",ef:"   ",rf:t.locale}):this.ff=new Xy(e,t.locale)}formatHorzItem(t){const e=t;return this.ff.du(new Date(1e3*e.cf))}formatTickmark(t,e){const s=(function(l,a,c){switch(l){case 0:case 10:return a?c?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return a?3:2;case 50:return 2;case 60:return 1;case 70:return 0}})(t.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),n=this.Ps.timeScale;if(n.tickMarkFormatter!==void 0){const l=n.tickMarkFormatter(t.originalTime,s,e.locale);if(l!==null)return l}return(function(l,a,c){const d={};switch(a){case 0:d.year="numeric";break;case 1:d.month="short";break;case 2:d.day="numeric";break;case 3:d.hour12=!1,d.hour="2-digit",d.minute="2-digit";break;case 4:d.hour12=!1,d.hour="2-digit",d.minute="2-digit",d.second="2-digit"}const f=l.df===void 0?new Date(1e3*l.cf):new Date(Date.UTC(l.df.year,l.df.month-1,l.df.day));return new Date(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate(),f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()).toLocaleString(c,d)})(t.time,s,e.locale)}maxTickMarkWeight(t){let e=t.reduce(sU,t[0]).weight;return e>30&&e<50&&(e=30),e}fillWeightsForPoints(t,e){(function(s,n=0){if(s.length===0)return;let l=n===0?null:s[n-1].time.cf,a=l!==null?new Date(1e3*l):null,c=0;for(let d=n;d<s.length;++d){const f=s[d],p=new Date(1e3*f.time.cf);a!==null&&(f.timeWeight=aB(p,a)),c+=f.time.cf-(l||f.time.cf),l=f.time.cf,a=p}if(n===0&&s.length>1){const d=Math.ceil(c/(s.length-1)),f=new Date(1e3*(s[0].time.cf-d));s[0].timeWeight=aB(new Date(1e3*s[0].time.cf),f)}})(t,e)}static pf(t){return SA({localization:{dateFormat:"dd MMM 'yy"}},t??{})}}const Ko=typeof window<"u";function dB(){return!!Ko&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function $p(){return!!Ko&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Yg(A){return A+A%2}function aU(A){Ko&&window.chrome!==void 0&&A.addEventListener("mousedown",(t=>{if(t.button===1)return t.preventDefault(),!1}))}class ed{constructor(t,e,s){this.vf=0,this.mf=null,this.wf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.gf=0,this.Mf=null,this.bf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.Sf=null,this.xf=!1,this.Cf=null,this.yf=null,this.kf=!1,this.Pf=!1,this.Tf=!1,this.Rf=null,this.Df=null,this.If=null,this.Vf=null,this.Bf=null,this.Ef=null,this.Af=null,this.Lf=0,this.zf=!1,this.Of=!1,this.Nf=!1,this.Ff=0,this.Wf=null,this.Hf=!$p(),this.Uf=n=>{this.$f(n)},this.qf=n=>{if(this.jf(n)){const l=this.Yf(n);if(++this.gf,this.Mf&&this.gf>1){const{Kf:a}=this.Zf(pn(n),this.bf);a<30&&!this.Tf&&this.Gf(l,this.Jf.Xf),this.Qf()}}else{const l=this.Yf(n);if(++this.vf,this.mf&&this.vf>1){const{Kf:a}=this.Zf(pn(n),this.wf);a<5&&!this.Pf&&this.tp(l,this.Jf.ip),this.sp()}}},this.np=t,this.Jf=e,this.Ps=s,this.ep()}m(){this.Rf!==null&&(this.Rf(),this.Rf=null),this.Df!==null&&(this.Df(),this.Df=null),this.Vf!==null&&(this.Vf(),this.Vf=null),this.Bf!==null&&(this.Bf(),this.Bf=null),this.Ef!==null&&(this.Ef(),this.Ef=null),this.If!==null&&(this.If(),this.If=null),this.rp(),this.sp()}hp(t){this.Vf&&this.Vf();const e=this.ap.bind(this);if(this.Vf=()=>{this.np.removeEventListener("mousemove",e)},this.np.addEventListener("mousemove",e),this.jf(t))return;const s=this.Yf(t);this.tp(s,this.Jf.lp),this.Hf=!0}sp(){this.mf!==null&&clearTimeout(this.mf),this.vf=0,this.mf=null,this.wf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Qf(){this.Mf!==null&&clearTimeout(this.Mf),this.gf=0,this.Mf=null,this.bf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}ap(t){if(this.Nf||this.yf!==null||this.jf(t))return;const e=this.Yf(t);this.tp(e,this.Jf.op),this.Hf=!0}_p(t){const e=Xp(t.changedTouches,Mt(this.Wf));if(e===null||(this.Ff=Dh(t),this.Af!==null)||this.Of)return;this.zf=!0;const s=this.Zf(pn(e),Mt(this.yf)),{up:n,cp:l,Kf:a}=s;if(this.kf||!(a<5)){if(!this.kf){const c=.5*n,d=l>=c&&!this.Ps.dp(),f=c>l&&!this.Ps.fp();d||f||(this.Of=!0),this.kf=!0,this.Tf=!0,this.rp(),this.Qf()}if(!this.Of){const c=this.Yf(t,e);this.Gf(c,this.Jf.pp),vo(t)}}}vp(t){if(t.button!==0)return;const e=this.Zf(pn(t),Mt(this.Cf)),{Kf:s}=e;if(s>=5&&(this.Pf=!0,this.sp()),this.Pf){const n=this.Yf(t);this.tp(n,this.Jf.mp)}}Zf(t,e){const s=Math.abs(e._t-t._t),n=Math.abs(e.ut-t.ut);return{up:s,cp:n,Kf:s+n}}wp(t){let e=Xp(t.changedTouches,Mt(this.Wf));if(e===null&&t.touches.length===0&&(e=t.changedTouches[0]),e===null)return;this.Wf=null,this.Ff=Dh(t),this.rp(),this.yf=null,this.Ef&&(this.Ef(),this.Ef=null);const s=this.Yf(t,e);if(this.Gf(s,this.Jf.gp),++this.gf,this.Mf&&this.gf>1){const{Kf:n}=this.Zf(pn(e),this.bf);n<30&&!this.Tf&&this.Gf(s,this.Jf.Xf),this.Qf()}else this.Tf||(this.Gf(s,this.Jf.Mp),this.Jf.Mp&&vo(t));this.gf===0&&vo(t),t.touches.length===0&&this.xf&&(this.xf=!1,vo(t))}$f(t){if(t.button!==0)return;const e=this.Yf(t);if(this.Cf=null,this.Nf=!1,this.Bf&&(this.Bf(),this.Bf=null),dB()&&this.np.ownerDocument.documentElement.removeEventListener("mouseleave",this.Uf),!this.jf(t))if(this.tp(e,this.Jf.bp),++this.vf,this.mf&&this.vf>1){const{Kf:s}=this.Zf(pn(t),this.wf);s<5&&!this.Pf&&this.tp(e,this.Jf.ip),this.sp()}else this.Pf||this.tp(e,this.Jf.Sp)}rp(){this.Sf!==null&&(clearTimeout(this.Sf),this.Sf=null)}xp(t){if(this.Wf!==null)return;const e=t.changedTouches[0];this.Wf=e.identifier,this.Ff=Dh(t);const s=this.np.ownerDocument.documentElement;this.Tf=!1,this.kf=!1,this.Of=!1,this.yf=pn(e),this.Ef&&(this.Ef(),this.Ef=null);{const l=this._p.bind(this),a=this.wp.bind(this);this.Ef=()=>{s.removeEventListener("touchmove",l),s.removeEventListener("touchend",a)},s.addEventListener("touchmove",l,{passive:!1}),s.addEventListener("touchend",a,{passive:!1}),this.rp(),this.Sf=setTimeout(this.Cp.bind(this,t),240)}const n=this.Yf(t,e);this.Gf(n,this.Jf.yp),this.Mf||(this.gf=0,this.Mf=setTimeout(this.Qf.bind(this),500),this.bf=pn(e))}kp(t){if(t.button!==0)return;const e=this.np.ownerDocument.documentElement;dB()&&e.addEventListener("mouseleave",this.Uf),this.Pf=!1,this.Cf=pn(t),this.Bf&&(this.Bf(),this.Bf=null);{const n=this.vp.bind(this),l=this.$f.bind(this);this.Bf=()=>{e.removeEventListener("mousemove",n),e.removeEventListener("mouseup",l)},e.addEventListener("mousemove",n),e.addEventListener("mouseup",l)}if(this.Nf=!0,this.jf(t))return;const s=this.Yf(t);this.tp(s,this.Jf.Pp),this.mf||(this.vf=0,this.mf=setTimeout(this.sp.bind(this),500),this.wf=pn(t))}ep(){this.np.addEventListener("mouseenter",this.hp.bind(this)),this.np.addEventListener("touchcancel",this.rp.bind(this));{const t=this.np.ownerDocument,e=s=>{this.Jf.Tp&&(s.composed&&this.np.contains(s.composedPath()[0])||s.target&&this.np.contains(s.target)||this.Jf.Tp())};this.Df=()=>{t.removeEventListener("touchstart",e)},this.Rf=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}$p()&&(this.If=()=>{this.np.removeEventListener("dblclick",this.qf)},this.np.addEventListener("dblclick",this.qf)),this.np.addEventListener("mouseleave",this.Rp.bind(this)),this.np.addEventListener("touchstart",this.xp.bind(this),{passive:!0}),aU(this.np),this.np.addEventListener("mousedown",this.kp.bind(this)),this.Dp(),this.np.addEventListener("touchmove",(()=>{}),{passive:!1})}Dp(){this.Jf.Ip===void 0&&this.Jf.Vp===void 0&&this.Jf.Bp===void 0||(this.np.addEventListener("touchstart",(t=>this.Ep(t.touches)),{passive:!0}),this.np.addEventListener("touchmove",(t=>{if(t.touches.length===2&&this.Af!==null&&this.Jf.Vp!==void 0){const e=fB(t.touches[0],t.touches[1])/this.Lf;this.Jf.Vp(this.Af,e),vo(t)}}),{passive:!1}),this.np.addEventListener("touchend",(t=>{this.Ep(t.touches)})))}Ep(t){t.length===1&&(this.zf=!1),t.length!==2||this.zf||this.xf?this.Ap():this.Lp(t)}Lp(t){const e=this.np.getBoundingClientRect()||{left:0,top:0};this.Af={_t:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,ut:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.Lf=fB(t[0],t[1]),this.Jf.Ip!==void 0&&this.Jf.Ip(),this.rp()}Ap(){this.Af!==null&&(this.Af=null,this.Jf.Bp!==void 0&&this.Jf.Bp())}Rp(t){if(this.Vf&&this.Vf(),this.jf(t)||!this.Hf)return;const e=this.Yf(t);this.tp(e,this.Jf.zp),this.Hf=!$p()}Cp(t){const e=Xp(t.touches,Mt(this.Wf));if(e===null)return;const s=this.Yf(t,e);this.Gf(s,this.Jf.Op),this.Tf=!0,this.xf=!0}jf(t){return t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents!==void 0?t.sourceCapabilities.firesTouchEvents:Dh(t)<this.Ff+500}Gf(t,e){e&&e.call(this.Jf,t)}tp(t,e){e&&e.call(this.Jf,t)}Yf(t,e){const s=e||t,n=this.np.getBoundingClientRect()||{left:0,top:0};return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,localX:s.clientX-n.left,localY:s.clientY-n.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,Np:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click",Fp:t.type,Wp:s.target,_u:t.view,Hp:()=>{t.type!=="touchstart"&&vo(t)}}}}function fB(A,t){const e=A.clientX-t.clientX,s=A.clientY-t.clientY;return Math.sqrt(e*e+s*s)}function vo(A){A.cancelable&&A.preventDefault()}function pn(A){return{_t:A.pageX,ut:A.pageY}}function Dh(A){return A.timeStamp||performance.now()}function Xp(A,t){for(let e=0;e<A.length;++e)if(A[e].identifier===t)return A[e];return null}class cU{constructor(t,e,s){this.Up=null,this.$p=null,this.qp=!0,this.jp=null,this.Yp=t,this.Kp=t.Zp()[e],this.Gp=t.Zp()[s],this.Xp=document.createElement("tr"),this.Xp.style.height="1px",this.Jp=document.createElement("td"),this.Jp.style.position="relative",this.Jp.style.padding="0",this.Jp.style.margin="0",this.Jp.setAttribute("colspan","3"),this.Qp(),this.Xp.appendChild(this.Jp),this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(this.Up=null,this.$p=null)}m(){this.$p!==null&&this.$p.m()}iv(){return this.Xp}sv(){return xs({width:this.Kp.sv().width,height:1})}nv(){return xs({width:this.Kp.nv().width,height:1*window.devicePixelRatio})}ev(t,e,s){const n=this.nv();t.fillStyle=this.Yp.N().layout.panes.separatorColor,t.fillRect(e,s,n.width,n.height)}kt(){this.Qp(),this.Yp.N().layout.panes.enableResize!==this.qp&&(this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(this.Up!==null&&(this.Jp.removeChild(this.Up.rv),this.Jp.removeChild(this.Up.hv),this.Up=null),this.$p!==null&&(this.$p.m(),this.$p=null)))}tv(){const t=document.createElement("div"),e=t.style;e.position="fixed",e.display="none",e.zIndex="49",e.top="0",e.left="0",e.width="100%",e.height="100%",e.cursor="row-resize",this.Jp.appendChild(t);const s=document.createElement("div"),n=s.style;n.position="absolute",n.zIndex="50",n.top="-4px",n.height="9px",n.width="100%",n.backgroundColor="",n.cursor="row-resize",this.Jp.appendChild(s);const l={lp:this.av.bind(this),zp:this.lv.bind(this),Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this)};this.$p=new ed(s,l,{dp:()=>!1,fp:()=>!0}),this.Up={hv:s,rv:t}}Qp(){this.Jp.style.background=this.Yp.N().layout.panes.separatorColor}av(t){this.Up!==null&&(this.Up.hv.style.backgroundColor=this.Yp.N().layout.panes.separatorHoverColor)}lv(t){this.Up!==null&&this.jp===null&&(this.Up.hv.style.backgroundColor="")}ov(t){if(this.Up===null)return;const e=this.Kp.cv().E_()+this.Gp.cv().E_(),s=e/(this.Kp.sv().height+this.Gp.sv().height),n=30*s;e<=2*n||(this.jp={dv:t.pageY,fv:this.Kp.cv().E_(),pv:e-n,vv:e,mv:s,wv:n},this.Up.rv.style.display="block")}_v(t){const e=this.jp;if(e===null)return;const s=(t.pageY-e.dv)*e.mv,n=Oo(e.fv+s,e.wv,e.pv);this.Kp.cv().A_(n),this.Gp.cv().A_(e.vv-n),this.Yp.Qt().Ca()}uv(t){this.jp!==null&&this.Up!==null&&(this.jp=null,this.Up.rv.style.display="none")}}function Yp(A,t){return A.gv-t.gv}function Jp(A,t,e){const s=(A.gv-t.gv)/(A.wt-t.wt);return Math.sign(s)*Math.min(Math.abs(s),e)}class hU{constructor(t,e,s,n){this.Mv=null,this.bv=null,this.Sv=null,this.xv=null,this.Cv=null,this.yv=0,this.kv=0,this.Pv=t,this.Tv=e,this.Rv=s,this.kn=n}Dv(t,e){if(this.Mv!==null){if(this.Mv.wt===e)return void(this.Mv.gv=t);if(Math.abs(this.Mv.gv-t)<this.kn)return}this.xv=this.Sv,this.Sv=this.bv,this.bv=this.Mv,this.Mv={wt:e,gv:t}}fe(t,e){if(this.Mv===null||this.bv===null||e-this.Mv.wt>50)return;let s=0;const n=Jp(this.Mv,this.bv,this.Tv),l=Yp(this.Mv,this.bv),a=[n],c=[l];if(s+=l,this.Sv!==null){const f=Jp(this.bv,this.Sv,this.Tv);if(Math.sign(f)===Math.sign(n)){const p=Yp(this.bv,this.Sv);if(a.push(f),c.push(p),s+=p,this.xv!==null){const m=Jp(this.Sv,this.xv,this.Tv);if(Math.sign(m)===Math.sign(n)){const v=Yp(this.Sv,this.xv);a.push(m),c.push(v),s+=v}}}}let d=0;for(let f=0;f<a.length;++f)d+=c[f]/s*a[f];Math.abs(d)<this.Pv||(this.Cv={gv:t,wt:e},this.kv=d,this.yv=(function(f,p){const m=Math.log(p);return Math.log(1*m/-f)/m})(Math.abs(d),this.Rv))}Ac(t){const e=Mt(this.Cv),s=t-e.wt;return e.gv+this.kv*(Math.pow(this.Rv,s)-1)/Math.log(this.Rv)}Ec(t){return this.Cv===null||this.Iv(t)===this.yv}Iv(t){const e=t-Mt(this.Cv).wt;return Math.min(e,this.yv)}}class uU{constructor(t,e){this.Vv=void 0,this.Bv=void 0,this.Ev=void 0,this.ws=!1,this.Av=t,this.Lv=e,this.zv()}kt(){this.zv()}Ov(){this.Vv&&this.Av.removeChild(this.Vv),this.Bv&&this.Av.removeChild(this.Bv),this.Vv=void 0,this.Bv=void 0}Nv(){return this.ws!==this.Fv()||this.Ev!==this.Wv()}Wv(){return this.Lv.Qt().Xi().J(this.Lv.N().layout.textColor)>160?"dark":"light"}Fv(){return this.Lv.N().layout.attributionLogo}Hv(){const t=new URL(location.href);return t.hostname?"&utm_source="+t.hostname+t.pathname:""}zv(){this.Nv()&&(this.Ov(),this.ws=this.Fv(),this.ws&&(this.Ev=this.Wv(),this.Bv=document.createElement("style"),this.Bv.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Vv=document.createElement("a"),this.Vv.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Hv()}`,this.Vv.title="Charting by TradingView",this.Vv.id="tv-attr-logo",this.Vv.target="_blank",this.Vv.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Vv.toggleAttribute("data-dark",this.Ev==="dark"),this.Av.appendChild(this.Bv),this.Av.appendChild(this.Vv)))}}function Ul(A,t){const e=Mt(A.ownerDocument).createElement("canvas");A.appendChild(e);const s=YQ(e,{options:{allowResizeObserver:!0},transform:(n,l)=>({width:Math.max(n.width,l.width),height:Math.max(n.height,l.height)})});return s.resizeCanvasElement(t),s}function Ml(A){A.width=1,A.height=1,A.getContext("2d")?.clearRect(0,0,1,1)}function Jg(A,t,e,s){A.Uh&&A.Uh(t,e,s)}function xu(A,t,e,s){A.nt(t,e,s)}function qg(A,t,e,s){const n=A(e,s);for(const l of n){const a=l.Tt(s);a!==null&&t(a)}}function qp(A,t){return e=>(function(s){return s.Ft!==void 0})(e)?(e.Ft()?.ol()??"")!==t?[]:e.Ya?.(A)??[]:[]}function pB(A,t,e,s){if(!A.length)return;let n=0;const l=A[0].$t(s,!0);let a=t===1?e/2-(A[0].Hi()-l/2):A[0].Hi()-l/2-e/2;a=Math.max(0,a);for(let c=1;c<A.length;c++){const d=A[c],f=A[c-1],p=f.$t(s,!1),m=d.Hi(),v=f.Hi();if(t===1?m>v-p:m<v+p){const w=v-p*t;d.Ui(w);const y=w-t*p/2;if((t===1?y<0:y>e)&&a>0){const b=t===1?-1-y:y-e,S=Math.min(b,a);for(let x=n;x<A.length;x++)A[x].Ui(A[x].Hi()+t*S);a-=S}}else n=c,a=t===1?v-p-m:m-(v+p)}}class gB{constructor(t,e,s,n){this.Ki=null,this.Uv=null,this.$v=!1,this.qv=new Nu(200),this.jv=null,this.Yv=0,this.Kv=!1,this.Zv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.Xv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.yt=t,this.Ps=e,this.Co=e.layout,this.hd=s,this.Jv=n==="left",this.Qv=qp("normal",n),this.tm=qp("top",n),this.im=qp("bottom",n),this.Jp=document.createElement("div"),this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.Jp.style.width="25px",this.Jp.style.left="0",this.Jp.style.position="relative",this.sm=Ul(this.Jp,xs({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const l=this.sm.canvasElement;l.style.position="absolute",l.style.zIndex="1",l.style.left="0",l.style.top="0",this.nm=Ul(this.Jp,xs({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const a=this.nm.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0";const c={Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),Tp:this.rm.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this),ip:this.hm.bind(this),Xf:this.hm.bind(this),lp:this.am.bind(this),zp:this.lv.bind(this)};this.$p=new ed(this.nm.canvasElement,c,{dp:()=>!this.Ps.handleScroll.vertTouchDrag,fp:()=>!0})}m(){this.$p.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Ml(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Ml(this.sm.canvasElement),this.sm.dispose(),this.Ki!==null&&this.Ki.r_().u(this),this.Ki=null}iv(){return this.Jp}k(){return this.Co.fontSize}lm(){const t=this.hd.N();return this.jv!==t.P&&(this.qv.On(),this.jv=t.P),t}om(){if(this.Ki===null)return 0;let t=0;const e=this.lm(),s=Mt(this.sm.canvasElement.getContext("2d",{colorSpace:this.yt.Gv().N().layout.colorSpace}));s.save();const n=this.Ki.Vl();s.font=this._m(),n.length>0&&(t=Math.max(this.qv.Ii(s,n[0].Jl),this.qv.Ii(s,n[n.length-1].Jl)));const l=this.um();for(let f=l.length;f--;){const p=this.qv.Ii(s,l[f].ri());p>t&&(t=p)}const a=this.Ki.Lt();if(a!==null&&this.Uv!==null&&(c=this.Ps.crosshair).mode!==2&&c.horzLine.visible&&c.horzLine.labelVisible){const f=this.Ki.Ds(1,a),p=this.Ki.Ds(this.Uv.height-2,a);t=Math.max(t,this.qv.Ii(s,this.Ki.Ji(Math.floor(Math.min(f,p))+.11111111111111,a)),this.qv.Ii(s,this.Ki.Ji(Math.ceil(Math.max(f,p))-.11111111111111,a)))}var c;s.restore();const d=t||34;return Yg(Math.ceil(e.S+e.C+e.V+e.B+5+d))}dm(t){this.Uv!==null&&Sl(this.Uv,t)||(this.Uv=t,this.Kv=!0,this.sm.resizeCanvasElement(t),this.nm.resizeCanvasElement(t),this.Kv=!1,this.Jp.style.width=`${t.width}px`,this.Jp.style.height=`${t.height}px`)}fm(){return Mt(this.Uv).width}cs(t){this.Ki!==t&&(this.Ki!==null&&this.Ki.r_().u(this),this.Ki=t,t.r_().i(this.do.bind(this),this))}Ft(){return this.Ki}On(){const t=this.yt.cv();this.yt.Gv().Qt().Q_(t,Mt(this.Ft()))}pm(t){if(this.Uv===null)return;const e={colorSpace:this.yt.Gv().N().layout.colorSpace};if(t!==1){this.vm(),this.sm.applySuggestedBitmapSize();const n=Fl(this.sm,e);n!==null&&(n.useBitmapCoordinateSpace((l=>{this.wm(l),this.gm(l)})),this.yt.Mm(n,this.im),this.bm(n),this.yt.Mm(n,this.Qv),this.Sm(n))}this.nm.applySuggestedBitmapSize();const s=Fl(this.nm,e);s!==null&&(s.useBitmapCoordinateSpace((({context:n,bitmapSize:l})=>{n.clearRect(0,0,l.width,l.height)})),this.xm(s),this.yt.Mm(s,this.tm))}nv(){return this.sm.bitmapSize}ev(t,e,s,n){const l=this.nv();if(l.width>0&&l.height>0&&(t.drawImage(this.sm.canvasElement,e,s),n)){const a=this.nm.canvasElement;t.drawImage(a,e,s)}}kt(){this.Ki?.Vl()}ov(t){if(this.Ki===null||this.Ki.Gi()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.yt.Gv().Qt(),s=this.yt.cv();this.$v=!0,e.j_(s,this.Ki,t.localY)}_v(t){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.yt.Gv().Qt(),s=this.yt.cv(),n=this.Ki;e.Y_(s,n,t.localY)}rm(){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.yt.Gv().Qt(),e=this.yt.cv(),s=this.Ki;this.$v&&(this.$v=!1,t.K_(e,s))}uv(t){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.yt.Gv().Qt(),s=this.yt.cv();this.$v=!1,e.K_(s,this.Ki)}hm(t){this.Ps.handleScale.axisDoubleClickReset.price&&this.On()}am(t){this.Ki!==null&&(!this.yt.Gv().Qt().N().handleScale.axisPressedMouseMove.price||this.Ki.He()||this.Ki.Eo()||this.Cm(1))}lv(t){this.Cm(0)}um(){const t=[],e=this.Ki===null?void 0:this.Ki;return(s=>{for(let n=0;n<s.length;++n){const l=s[n].Ks(this.yt.cv(),e);for(let a=0;a<l.length;a++)t.push(l[a])}})(this.yt.cv().Dt()),t}wm({context:t,bitmapSize:e}){const{width:s,height:n}=e,l=this.yt.cv().Qt(),a=l.$(),c=l.Kd();a===c?Yu(t,0,0,s,n,a):Ny(t,0,0,s,n,a,c)}gm({context:t,bitmapSize:e,horizontalPixelRatio:s}){if(this.Uv===null||this.Ki===null||!this.Ki.N().borderVisible)return;t.fillStyle=this.Ki.N().borderColor;const n=Math.max(1,Math.floor(this.lm().S*s));let l;l=this.Jv?e.width-n:0,t.fillRect(l,0,n,e.height)}bm(t){if(this.Uv===null||this.Ki===null)return;const e=this.Ki.Vl(),s=this.Ki.N(),n=this.lm(),l=this.Jv?this.Uv.width-n.C:0;s.borderVisible&&s.ticksVisible&&t.useBitmapCoordinateSpace((({context:a,horizontalPixelRatio:c,verticalPixelRatio:d})=>{a.fillStyle=s.borderColor;const f=Math.max(1,Math.floor(d)),p=Math.floor(.5*d),m=Math.round(n.C*c);a.beginPath();for(const v of e)a.rect(Math.floor(l*c),Math.round(v.Pl*d)-p,m,f);a.fill()})),t.useMediaCoordinateSpace((({context:a})=>{a.font=this._m(),a.fillStyle=s.textColor??this.Co.textColor,a.textAlign=this.Jv?"right":"left",a.textBaseline="middle";const c=this.Jv?Math.round(l-n.V):Math.round(l+n.C+n.V),d=e.map((f=>this.qv.Di(a,f.Jl)));for(let f=e.length;f--;){const p=e[f];a.fillText(p.Jl,c,p.Pl+d[f])}}))}vm(){if(this.Uv===null||this.Ki===null)return;let t=this.Uv.height/2;const e=[],s=this.Ki.Dt().slice(),n=this.yt.cv(),l=this.lm();this.Ki===n.Gn()&&this.yt.cv().Dt().forEach((d=>{n.Zn(d)&&s.push(d)}));const a=this.Ki.Sl()[0],c=this.Ki;s.forEach((d=>{const f=d.Ks(n,c);f.forEach((p=>{p.$i()&&p.Wi()===null&&(p.Ui(null),e.push(p))})),a===d&&f.length>0&&(t=f[0].Ei())})),this.Ki.N().alignLabels&&this.ym(e,l,t)}ym(t,e,s){if(this.Uv===null)return;const n=t.filter((a=>a.Ei()<=s)),l=t.filter((a=>a.Ei()>s));n.sort(((a,c)=>c.Ei()-a.Ei())),n.length&&l.length&&l.push(n[0]),l.sort(((a,c)=>a.Ei()-c.Ei()));for(const a of t){const c=Math.floor(a.$t(e)/2),d=a.Ei();d>-c&&d<c&&a.Ui(c),d>this.Uv.height-c&&d<this.Uv.height+c&&a.Ui(this.Uv.height-c)}pB(n,1,this.Uv.height,e),pB(l,-1,this.Uv.height,e)}Sm(t){if(this.Uv===null)return;const e=this.um(),s=this.lm(),n=this.Jv?"right":"left";e.forEach((l=>{l.qi()&&l.Tt(Mt(this.Ki)).nt(t,s,this.qv,n)}))}xm(t){if(this.Uv===null||this.Ki===null)return;const e=this.yt.Gv().Qt(),s=[],n=this.yt.cv(),l=e.gd().Ks(n,this.Ki);l.length&&s.push(l);const a=this.lm(),c=this.Jv?"right":"left";s.forEach((d=>{d.forEach((f=>{f.Tt(Mt(this.Ki)).nt(t,a,this.qv,c)}))}))}Cm(t){this.Jp.style.cursor=t===1?"ns-resize":"default"}do(){const t=this.om();this.Yv<t&&this.yt.Gv().Qt().Ca(),this.Yv=t}_m(){return Iu(this.Co.fontSize,this.Co.fontFamily)}}function dU(A,t){return A.qa?.(t)??[]}function mB(A,t){return A.Ys?.(t)??[]}function _B(A,t){return A.ds?.(t)??[]}function fU(A,t){return A.Ha?.(t)??[]}class j1{constructor(t,e){this.Uv=xs({width:0,height:0}),this.km=null,this.Pm=null,this.Tm=null,this.Rm=null,this.Dm=!1,this.Im=new ii,this.Vm=new ii,this.Bm=0,this.Em=!1,this.Am=null,this.Lm=!1,this.zm=null,this.Om=null,this.Kv=!1,this.Zv=()=>{this.Kv||this.Nm===null||this.ns().dr()},this.Xv=()=>{this.Kv||this.Nm===null||this.ns().dr()},this.Lv=t,this.Nm=e,this.Nm.nu().i(this.Fm.bind(this),this,!0),this.Wm=document.createElement("td"),this.Wm.style.padding="0",this.Wm.style.position="relative";const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.Hm=document.createElement("td"),this.Hm.style.padding="0",this.Um=document.createElement("td"),this.Um.style.padding="0",this.Wm.appendChild(s),this.sm=Ul(s,xs({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const n=this.sm.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.nm=Ul(s,xs({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const l=this.nm.canvasElement;l.style.position="absolute",l.style.zIndex="2",l.style.left="0",l.style.top="0",this.Xp=document.createElement("tr"),this.Xp.appendChild(this.Hm),this.Xp.appendChild(this.Wm),this.Xp.appendChild(this.Um),this.$m(),this.$p=new ed(this.nm.canvasElement,this,{dp:()=>this.Am===null&&!this.Lv.N().handleScroll.vertTouchDrag,fp:()=>this.Am===null&&!this.Lv.N().handleScroll.horzTouchDrag})}m(){this.km!==null&&this.km.m(),this.Pm!==null&&this.Pm.m(),this.Tm=null,this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Ml(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Ml(this.sm.canvasElement),this.sm.dispose(),this.Nm!==null&&(this.Nm.nu().u(this),this.Nm.m()),this.$p.m()}cv(){return Mt(this.Nm)}qm(t){this.Nm!==null&&this.Nm.nu().u(this),this.Nm=t,this.Nm!==null&&this.Nm.nu().i(j1.prototype.Fm.bind(this),this,!0),this.$m(),this.Lv.Zp().indexOf(this)===this.Lv.Zp().length-1?(this.Tm=this.Tm??new uU(this.Wm,this.Lv),this.Tm.kt()):(this.Tm?.Ov(),this.Tm=null)}Gv(){return this.Lv}iv(){return this.Xp}$m(){if(this.Nm!==null&&(this.jm(),this.ns().tn().length!==0)){if(this.km!==null){const t=this.Nm.U_();this.km.cs(Mt(t))}if(this.Pm!==null){const t=this.Nm.q_();this.Pm.cs(Mt(t))}}}Ym(){this.km!==null&&this.km.kt(),this.Pm!==null&&this.Pm.kt()}E_(){return this.Nm!==null?this.Nm.E_():0}A_(t){this.Nm&&this.Nm.A_(t)}lp(t){if(!this.Nm)return;this.Km();const e=t.localX,s=t.localY;this.Zm(e,s,t)}Pp(t){this.Km(),this.Gm(),this.Zm(t.localX,t.localY,t)}op(t){if(!this.Nm)return;this.Km();const e=t.localX,s=t.localY;this.Zm(e,s,t)}Sp(t){this.Nm!==null&&(this.Km(),this.Xm(t))}ip(t){this.Nm!==null&&this.Jm(this.Vm,t)}Xf(t){this.ip(t)}mp(t){this.Km(),this.Qm(t),this.Zm(t.localX,t.localY,t)}bp(t){this.Nm!==null&&(this.Km(),this.Em=!1,this.tw(t))}Mp(t){this.Nm!==null&&this.Xm(t)}Op(t){if(this.Em=!0,this.Am===null){const e={x:t.localX,y:t.localY};this.iw(e,e,t)}}zp(t){this.Nm!==null&&(this.Km(),this.Nm.Qt().vd(null),this.sw())}nw(){return this.Im}ew(){return this.Vm}Ip(){this.Bm=1,this.ns().dn()}Vp(t,e){if(!this.Lv.N().handleScale.pinch)return;const s=5*(e-this.Bm);this.Bm=e,this.ns().Td(t._t,s)}yp(t){this.Em=!1,this.Lm=this.Am!==null,this.Gm();const e=this.ns().gd();this.Am!==null&&e.It()&&(this.zm={x:e.si(),y:e.ni()},this.Am={x:t.localX,y:t.localY})}pp(t){if(this.Nm===null)return;const e=t.localX,s=t.localY;if(this.Am===null)this.Qm(t);else{this.Lm=!1;const n=Mt(this.zm),l=n.x+(e-this.Am.x),a=n.y+(s-this.Am.y);this.Zm(l,a,t)}}gp(t){this.Gv().N().trackingMode.exitMode===0&&(this.Lm=!0),this.rw(),this.tw(t)}Qn(t,e){const s=this.Nm;return s===null?null:Ky(s,t,e)}hw(t,e){Mt(e==="left"?this.km:this.Pm).dm(xs({width:t,height:this.Uv.height}))}sv(){return this.Uv}dm(t){Sl(this.Uv,t)||(this.Uv=t,this.Kv=!0,this.sm.resizeCanvasElement(t),this.nm.resizeCanvasElement(t),this.Kv=!1,this.Wm.style.width=t.width+"px",this.Wm.style.height=t.height+"px")}aw(){const t=Mt(this.Nm);t.H_(t.U_()),t.H_(t.q_());for(const e of t.Sl())if(t.Zn(e)){const s=e.Ft();s!==null&&t.H_(s),e.Ws()}for(const e of t.ru())e.Ws()}nv(){return this.sm.bitmapSize}ev(t,e,s,n){const l=this.nv();if(l.width>0&&l.height>0&&(t.drawImage(this.sm.canvasElement,e,s),n)){const a=this.nm.canvasElement;t!==null&&t.drawImage(a,e,s)}}pm(t){if(t===0||this.Nm===null)return;t>1&&this.aw(),this.km!==null&&this.km.pm(t),this.Pm!==null&&this.Pm.pm(t);const e={colorSpace:this.Lv.N().layout.colorSpace};if(t!==1){this.sm.applySuggestedBitmapSize();const n=Fl(this.sm,e);n!==null&&(n.useBitmapCoordinateSpace((l=>{this.wm(l)})),this.Nm&&(this.lw(n,dU),this.ow(n),this.lw(n,mB),this.lw(n,_B)))}this.nm.applySuggestedBitmapSize();const s=Fl(this.nm,e);s!==null&&(s.useBitmapCoordinateSpace((({context:n,bitmapSize:l})=>{n.clearRect(0,0,l.width,l.height)})),this._w(s),this.lw(s,fU),this.lw(s,_B))}uw(){return this.km}cw(){return this.Pm}Mm(t,e){this.lw(t,e)}Fm(){this.Nm!==null&&this.Nm.nu().u(this),this.Nm=null}Xm(t){this.Jm(this.Im,t)}Jm(t,e){const s=e.localX,n=e.localY;t.v()&&t.p(this.ns().Et().wc(s),{x:s,y:n},e)}wm({context:t,bitmapSize:e}){const{width:s,height:n}=e,l=this.ns(),a=l.$(),c=l.Kd();a===c?Yu(t,0,0,s,n,c):Ny(t,0,0,s,n,a,c)}ow(t){const e=Mt(this.Nm),s=e.eu().pr().Tt(e);s!==null&&s.nt(t,!1)}_w(t){this.dw(t,mB,xu,this.ns().gd())}lw(t,e){const s=Mt(this.Nm),n=s.Dt(),l=s.ru();for(const a of l)this.dw(t,e,Jg,a);for(const a of n)this.dw(t,e,Jg,a);for(const a of l)this.dw(t,e,xu,a);for(const a of n)this.dw(t,e,xu,a)}dw(t,e,s,n){const l=Mt(this.Nm),a=l.Qt().pd(),c=a!==null&&a.hu===n,d=a!==null&&c&&a.au!==void 0?a.au.ie:void 0;qg(e,(f=>s(f,t,c,d)),n,l)}jm(){if(this.Nm===null)return;const t=this.Lv,e=this.Nm.U_().N().visible,s=this.Nm.q_().N().visible;e||this.km===null||(this.Hm.removeChild(this.km.iv()),this.km.m(),this.km=null),s||this.Pm===null||(this.Um.removeChild(this.Pm.iv()),this.Pm.m(),this.Pm=null);const n=t.Qt().Nd();e&&this.km===null&&(this.km=new gB(this,t.N(),n,"left"),this.Hm.appendChild(this.km.iv())),s&&this.Pm===null&&(this.Pm=new gB(this,t.N(),n,"right"),this.Um.appendChild(this.Pm.iv()))}fw(t){return t.Np&&this.Em||this.Am!==null}Zm(t,e,s){t=Math.max(0,Math.min(t,this.Uv.width-1)),e=Math.max(0,Math.min(e,this.Uv.height-1)),this.ns().Ad(t,e,s,Mt(this.Nm))}sw(){this.ns().zd()}rw(){this.Lm&&(this.Am=null,this.sw())}iw(t,e,s){this.Am=t,this.Lm=!1,this.Zm(e.x,e.y,s);const n=this.ns().gd();this.zm={x:n.si(),y:n.ni()}}ns(){return this.Lv.Qt()}tw(t){if(!this.Dm)return;const e=this.ns(),s=this.cv();if(e.X_(s,s.Rs()),this.Rm=null,this.Dm=!1,e.Vd(),this.Om!==null){const n=performance.now(),l=e.Et();this.Om.fe(l.Cc(),n),this.Om.Ec(n)||e.vn(this.Om)}}Km(){this.Am=null}Gm(){if(this.Nm){if(this.ns().dn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)Mt(document.activeElement).blur();else{const t=document.getSelection();t!==null&&t.removeAllRanges()}!this.Nm.Rs().Gi()&&this.ns().Et().Gi()}}Qm(t){if(this.Nm===null)return;const e=this.ns(),s=e.Et();if(s.Gi())return;const n=this.Lv.N(),l=n.handleScroll,a=n.kineticScroll;if((!l.pressedMouseMove||t.Np)&&(!l.horzTouchDrag&&!l.vertTouchDrag||!t.Np))return;const c=this.Nm.Rs(),d=performance.now();if(this.Rm!==null||this.fw(t)||(this.Rm={x:t.clientX,y:t.clientY,cf:d,pw:t.localX,mw:t.localY}),this.Rm!==null&&!this.Dm&&(this.Rm.x!==t.clientX||this.Rm.y!==t.clientY)){if(t.Np&&a.touch||!t.Np&&a.mouse){const f=s.ul();this.Om=new hU(.2/f,7/f,.997,15/f),this.Om.Dv(s.Cc(),this.Rm.cf)}else this.Om=null;c.Gi()||e.Z_(this.Nm,c,t.localY),e.Dd(t.localX),this.Dm=!0}this.Dm&&(c.Gi()||e.G_(this.Nm,c,t.localY),e.Id(t.localX),this.Om!==null&&this.Om.Dv(s.Cc(),d))}}class vB{constructor(t,e,s,n,l){this.xt=!0,this.Uv=xs({width:0,height:0}),this.Zv=()=>this.pm(3),this.Jv=t==="left",this.hd=s.Nd,this.Ps=e,this.ww=n,this.gw=l,this.Jp=document.createElement("div"),this.Jp.style.width="25px",this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.sm=Ul(this.Jp,xs({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv)}m(){this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Ml(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Jp}sv(){return this.Uv}dm(t){Sl(this.Uv,t)||(this.Uv=t,this.sm.resizeCanvasElement(t),this.Jp.style.width=`${t.width}px`,this.Jp.style.height=`${t.height}px`,this.xt=!0)}pm(t){if(t<3&&!this.xt||this.Uv.width===0||this.Uv.height===0)return;this.xt=!1,this.sm.applySuggestedBitmapSize();const e=Fl(this.sm,{colorSpace:this.Ps.layout.colorSpace});e!==null&&e.useBitmapCoordinateSpace((s=>{this.wm(s),this.gm(s)}))}nv(){return this.sm.bitmapSize}ev(t,e,s){const n=this.nv();n.width>0&&n.height>0&&t.drawImage(this.sm.canvasElement,e,s)}gm({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(!this.ww())return;t.fillStyle=this.Ps.timeScale.borderColor;const l=Math.floor(this.hd.N().S*s),a=Math.floor(this.hd.N().S*n),c=this.Jv?e.width-l:0;t.fillRect(c,0,l,a)}wm({context:t,bitmapSize:e}){Yu(t,0,0,e.width,e.height,this.gw())}}function O1(A){return t=>t.Ka?.(A)??[]}const pU=O1("normal"),gU=O1("top"),mU=O1("bottom");class _U{constructor(t,e){this.Mw=null,this.bw=null,this.M=null,this.Sw=!1,this.Uv=xs({width:0,height:0}),this.xw=new ii,this.qv=new Nu(5),this.Kv=!1,this.Zv=()=>{this.Kv||this.Lv.Qt().dr()},this.Xv=()=>{this.Kv||this.Lv.Qt().dr()},this.Lv=t,this.cu=e,this.Ps=t.N().layout,this.Vv=document.createElement("tr"),this.Cw=document.createElement("td"),this.Cw.style.padding="0",this.yw=document.createElement("td"),this.yw.style.padding="0",this.Jp=document.createElement("td"),this.Jp.style.height="25px",this.Jp.style.padding="0",this.kw=document.createElement("div"),this.kw.style.width="100%",this.kw.style.height="100%",this.kw.style.position="relative",this.kw.style.overflow="hidden",this.Jp.appendChild(this.kw),this.sm=Ul(this.kw,xs({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const s=this.sm.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.nm=Ul(this.kw,xs({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const n=this.nm.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.Vv.appendChild(this.Cw),this.Vv.appendChild(this.Jp),this.Vv.appendChild(this.yw),this.Pw(),this.Lv.Qt().B_().i(this.Pw.bind(this),this),this.$p=new ed(this.nm.canvasElement,this,{dp:()=>!0,fp:()=>!this.Lv.N().handleScroll.horzTouchDrag})}m(){this.$p.m(),this.Mw!==null&&this.Mw.m(),this.bw!==null&&this.bw.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Ml(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Ml(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Vv}Tw(){return this.Mw}Rw(){return this.bw}Pp(t){if(this.Sw)return;this.Sw=!0;const e=this.Lv.Qt();!e.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&e.Pd(t.localX)}yp(t){this.Pp(t)}Tp(){const t=this.Lv.Qt();!t.Et().Gi()&&this.Sw&&(this.Sw=!1,this.Lv.N().handleScale.axisPressedMouseMove.time&&t.Ed())}mp(t){const e=this.Lv.Qt();!e.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&e.Bd(t.localX)}pp(t){this.mp(t)}bp(){this.Sw=!1;const t=this.Lv.Qt();t.Et().Gi()&&!this.Lv.N().handleScale.axisPressedMouseMove.time||t.Ed()}gp(){this.bp()}ip(){this.Lv.N().handleScale.axisDoubleClickReset.time&&this.Lv.Qt().wn()}Xf(){this.ip()}lp(){this.Lv.Qt().N().handleScale.axisPressedMouseMove.time&&this.Cm(1)}zp(){this.Cm(0)}sv(){return this.Uv}Dw(){return this.xw}Iw(t,e,s){Sl(this.Uv,t)||(this.Uv=t,this.Kv=!0,this.sm.resizeCanvasElement(t),this.nm.resizeCanvasElement(t),this.Kv=!1,this.Jp.style.width=`${t.width}px`,this.Jp.style.height=`${t.height}px`,this.xw.p(t)),this.Mw!==null&&this.Mw.dm(xs({width:e,height:t.height})),this.bw!==null&&this.bw.dm(xs({width:s,height:t.height}))}Vw(){const t=this.Bw();return Math.ceil(t.S+t.C+t.k+t.A+t.I+t.Ew)}kt(){this.Lv.Qt().Et().Vl()}nv(){return this.sm.bitmapSize}ev(t,e,s,n){const l=this.nv();if(l.width>0&&l.height>0&&(t.drawImage(this.sm.canvasElement,e,s),n)){const a=this.nm.canvasElement;t.drawImage(a,e,s)}}pm(t){if(t===0)return;const e={colorSpace:this.Ps.colorSpace};if(t!==1){this.sm.applySuggestedBitmapSize();const n=Fl(this.sm,e);n!==null&&(n.useBitmapCoordinateSpace((l=>{this.wm(l),this.gm(l),this.Aw(n,mU)})),this.bm(n),this.Aw(n,pU)),this.Mw!==null&&this.Mw.pm(t),this.bw!==null&&this.bw.pm(t)}this.nm.applySuggestedBitmapSize();const s=Fl(this.nm,e);s!==null&&(s.useBitmapCoordinateSpace((({context:n,bitmapSize:l})=>{n.clearRect(0,0,l.width,l.height)})),this.Lw([...this.Lv.Qt().tn(),this.Lv.Qt().gd()],s),this.Aw(s,gU))}Aw(t,e){const s=this.Lv.Qt().tn();for(const n of s)qg(e,(l=>Jg(l,t,!1,void 0)),n,void 0);for(const n of s)qg(e,(l=>xu(l,t,!1,void 0)),n,void 0)}wm({context:t,bitmapSize:e}){Yu(t,0,0,e.width,e.height,this.Lv.Qt().Kd())}gm({context:t,bitmapSize:e,verticalPixelRatio:s}){if(this.Lv.N().timeScale.borderVisible){t.fillStyle=this.zw();const n=Math.max(1,Math.floor(this.Bw().S*s));t.fillRect(0,0,e.width,n)}}bm(t){const e=this.Lv.Qt().Et(),s=e.Vl();if(!s||s.length===0)return;const n=this.cu.maxTickMarkWeight(s),l=this.Bw(),a=e.N();a.borderVisible&&a.ticksVisible&&t.useBitmapCoordinateSpace((({context:c,horizontalPixelRatio:d,verticalPixelRatio:f})=>{c.strokeStyle=this.zw(),c.fillStyle=this.zw();const p=Math.max(1,Math.floor(d)),m=Math.floor(.5*d);c.beginPath();const v=Math.round(l.C*f);for(let w=s.length;w--;){const y=Math.round(s[w].coord*d);c.rect(y-m,0,p,v)}c.fill()})),t.useMediaCoordinateSpace((({context:c})=>{const d=l.S+l.C+l.A+l.k/2;c.textAlign="center",c.textBaseline="middle",c.fillStyle=this.H(),c.font=this._m();for(const f of s)if(f.weight<n){const p=f.needAlignCoordinate?this.Ow(c,f.coord,f.label):f.coord;c.fillText(f.label,p,d)}this.Lv.N().timeScale.allowBoldLabels&&(c.font=this.Nw());for(const f of s)if(f.weight>=n){const p=f.needAlignCoordinate?this.Ow(c,f.coord,f.label):f.coord;c.fillText(f.label,p,d)}}))}Ow(t,e,s){const n=this.qv.Ii(t,s),l=n/2,a=Math.floor(e-l)+.5;return a<0?e+=Math.abs(0-a):a+n>this.Uv.width&&(e-=Math.abs(this.Uv.width-(a+n))),e}Lw(t,e){const s=this.Bw();for(const n of t)for(const l of n.fs())l.Tt().nt(e,s)}zw(){return this.Lv.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}_m(){return Iu(this.F(),this.Ps.fontFamily)}Nw(){return Iu(this.F(),this.Ps.fontFamily,"bold")}Bw(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,I:NaN,ts:NaN,C:5,k:NaN,P:"",Qi:new Nu,Ew:0});const t=this.M,e=this._m();if(t.P!==e){const s=this.F();t.k=s,t.P=e,t.A=3*s/12,t.I=3*s/12,t.ts=9*s/12,t.L=0,t.Ew=4*s/12,t.Qi.On()}return this.M}Cm(t){this.Jp.style.cursor=t===1?"ew-resize":"default"}Pw(){const t=this.Lv.Qt(),e=t.N();e.leftPriceScale.visible||this.Mw===null||(this.Cw.removeChild(this.Mw.iv()),this.Mw.m(),this.Mw=null),e.rightPriceScale.visible||this.bw===null||(this.yw.removeChild(this.bw.iv()),this.bw.m(),this.bw=null);const s={Nd:this.Lv.Qt().Nd()},n=()=>e.leftPriceScale.borderVisible&&t.Et().N().borderVisible,l=()=>t.Kd();e.leftPriceScale.visible&&this.Mw===null&&(this.Mw=new vB("left",e,s,n,l),this.Cw.appendChild(this.Mw.iv())),e.rightPriceScale.visible&&this.bw===null&&(this.bw=new vB("right",e,s,n,l),this.yw.appendChild(this.bw.iv()))}}const vU=!!Ko&&!!navigator.userAgentData&&navigator.userAgentData.brands.some((A=>A.brand.includes("Chromium")))&&!!Ko&&(navigator?.userAgentData?.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class BU{constructor(t,e,s){var n;this.Fw=[],this.Ww=[],this.Hw=0,this.eo=0,this.S_=0,this.Uw=0,this.$w=0,this.qw=null,this.jw=!1,this.Im=new ii,this.Vm=new ii,this.nd=new ii,this.Yw=null,this.Kw=null,this.Av=t,this.Ps=e,this.cu=s,this.Vv=document.createElement("div"),this.Vv.classList.add("tv-lightweight-charts"),this.Vv.style.overflow="hidden",this.Vv.style.direction="ltr",this.Vv.style.width="100%",this.Vv.style.height="100%",(n=this.Vv).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.Zw=document.createElement("table"),this.Zw.setAttribute("cellspacing","0"),this.Vv.appendChild(this.Zw),this.Gw=this.Xw.bind(this),Zp(this.Ps)&&this.Jw(!0),this.ns=new AU(this.rd.bind(this),this.Ps,s),this.Qt().Md().i(this.Qw.bind(this),this),this.tg=new _U(this,this.cu),this.Zw.appendChild(this.tg.iv());const l=e.autoSize&&this.ig();let a=this.Ps.width,c=this.Ps.height;if(l||a===0||c===0){const d=t.getBoundingClientRect();a=a||d.width,c=c||d.height}this.sg(a,c),this.ng(),t.appendChild(this.Vv),this.eg(),this.ns.Et().Oc().i(this.ns.Ca.bind(this.ns),this),this.ns.B_().i(this.ns.Ca.bind(this.ns),this)}Qt(){return this.ns}N(){return this.Ps}Zp(){return this.Fw}rg(){return this.tg}m(){this.Jw(!1),this.Hw!==0&&window.cancelAnimationFrame(this.Hw),this.ns.Md().u(this),this.ns.Et().Oc().u(this),this.ns.B_().u(this),this.ns.m();for(const t of this.Fw)this.Zw.removeChild(t.iv()),t.nw().u(this),t.ew().u(this),t.m();this.Fw=[];for(const t of this.Ww)this.hg(t);this.Ww=[],Mt(this.tg).m(),this.Vv.parentElement!==null&&this.Vv.parentElement.removeChild(this.Vv),this.nd.m(),this.Im.m(),this.Vm.m(),this.ag()}sg(t,e,s=!1){if(this.eo===e&&this.S_===t)return;const n=(function(c){const d=Math.floor(c.width),f=Math.floor(c.height);return xs({width:d-d%2,height:f-f%2})})(xs({width:t,height:e}));this.eo=n.height,this.S_=n.width;const l=this.eo+"px",a=this.S_+"px";Mt(this.Vv).style.height=l,Mt(this.Vv).style.width=a,this.Zw.style.height=l,this.Zw.style.width=a,s?this.lg(Ni.yn(),performance.now()):this.ns.Ca()}pm(t){t===void 0&&(t=Ni.yn());for(let e=0;e<this.Fw.length;e++)this.Fw[e].pm(t.un(e).an);this.Ps.timeScale.visible&&this.tg.pm(t._n())}cr(t){const e=Zp(this.Ps);this.ns.cr(t);const s=Zp(this.Ps);s!==e&&this.Jw(s),t.layout?.panes&&this.og(),this.eg(),this._g(t)}nw(){return this.Im}ew(){return this.Vm}Md(){return this.nd}ug(t=!1){this.qw!==null&&(this.lg(this.qw,performance.now()),this.qw=null);const e=this.cg(null),s=document.createElement("canvas");s.width=e.width,s.height=e.height;const n=Mt(s.getContext("2d"));return this.cg(n,t),s}dg(t){return t==="left"&&!this.fg()||t==="right"&&!this.pg()||this.Fw.length===0?0:Mt(t==="left"?this.Fw[0].uw():this.Fw[0].cw()).fm()}vg(){return this.Ps.autoSize&&this.Yw!==null}hv(){return this.Vv}mg(t){this.Kw=t,this.Kw?this.hv().style.setProperty("cursor",t):this.hv().style.removeProperty("cursor")}wg(){return this.Kw}gg(t){return fA(this.Fw[t]).sv()}og(){this.Ww.forEach((t=>{t.kt()}))}_g(t){(t.autoSize!==void 0||!this.Yw||t.width===void 0&&t.height===void 0)&&(t.autoSize&&!this.Yw&&this.ig(),t.autoSize===!1&&this.Yw!==null&&this.ag(),t.autoSize||t.width===void 0&&t.height===void 0||this.sg(t.width||this.S_,t.height||this.eo))}cg(t,e){let s=0,n=0;const l=this.Fw[0],a=(d,f)=>{let p=0;for(let m=0;m<this.Fw.length;m++){const v=this.Fw[m],w=Mt(d==="left"?v.uw():v.cw()),y=w.nv();if(t!==null&&w.ev(t,f,p,e),p+=y.height,m<this.Fw.length-1){const b=this.Ww[m],S=b.nv();t!==null&&b.ev(t,f,p),p+=S.height}}};this.fg()&&(a("left",0),s+=Mt(l.uw()).nv().width);for(let d=0;d<this.Fw.length;d++){const f=this.Fw[d],p=f.nv();if(t!==null&&f.ev(t,s,n,e),n+=p.height,d<this.Fw.length-1){const m=this.Ww[d],v=m.nv();t!==null&&m.ev(t,s,n),n+=v.height}}s+=l.nv().width,this.pg()&&(a("right",s),s+=Mt(l.cw()).nv().width);const c=(d,f,p)=>{Mt(d==="left"?this.tg.Tw():this.tg.Rw()).ev(Mt(t),f,p)};if(this.Ps.timeScale.visible){const d=this.tg.nv();if(t!==null){let f=0;this.fg()&&(c("left",f,n),f=Mt(l.uw()).nv().width),this.tg.ev(t,f,n,e),f+=d.width,this.pg()&&c("right",f,n)}n+=d.height}return xs({width:s,height:n})}Mg(){let t=0,e=0,s=0;for(const S of this.Fw)this.fg()&&(e=Math.max(e,Mt(S.uw()).om(),this.Ps.leftPriceScale.minimumWidth)),this.pg()&&(s=Math.max(s,Mt(S.cw()).om(),this.Ps.rightPriceScale.minimumWidth)),t+=S.E_();e=Yg(e),s=Yg(s);const n=this.S_,l=this.eo,a=Math.max(n-e-s,0),c=1*this.Ww.length,d=this.Ps.timeScale.visible;let f=d?Math.max(this.tg.Vw(),this.Ps.timeScale.minimumHeight):0;var p;f=(p=f)+p%2;const m=c+f,v=l<m?0:l-m,w=v/t;let y=0;const b=window.devicePixelRatio||1;for(let S=0;S<this.Fw.length;++S){const x=this.Fw[S];x.qm(this.ns.Xs()[S]);let U=0,M=0;M=S===this.Fw.length-1?Math.ceil((v-y)*b)/b:Math.round(x.E_()*w*b)/b,U=Math.max(M,2),y+=U,x.dm(xs({width:a,height:U})),this.fg()&&x.hw(e,"left"),this.pg()&&x.hw(s,"right"),x.cv()&&this.ns.bd(x.cv(),U)}this.tg.Iw(xs({width:d?a:0,height:f}),d?e:0,d?s:0),this.ns.L_(a),this.Uw!==e&&(this.Uw=e),this.$w!==s&&(this.$w=s)}Jw(t){t?this.Vv.addEventListener("wheel",this.Gw,{passive:!1}):this.Vv.removeEventListener("wheel",this.Gw)}bg(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return vU?1/window.devicePixelRatio:1}Xw(t){if(!(t.deltaX!==0&&this.Ps.handleScroll.mouseWheel||t.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const e=this.bg(t),s=e*t.deltaX/100,n=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),n!==0&&this.Ps.handleScale.mouseWheel){const l=Math.sign(n)*Math.min(1,Math.abs(n)),a=t.clientX-this.Vv.getBoundingClientRect().left;this.Qt().Td(a,l)}s!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().Rd(-80*s)}lg(t,e){const s=t._n();s===3&&this.Sg(),s!==3&&s!==2||(this.xg(t),this.Cg(t,e),this.tg.kt(),this.Fw.forEach((n=>{n.Ym()})),this.qw?._n()===3&&(this.qw.Sn(t),this.Sg(),this.xg(this.qw),this.Cg(this.qw,e),t=this.qw,this.qw=null)),this.pm(t)}Cg(t,e){for(const s of t.bn())this.xn(s,e)}xg(t){const e=this.ns.Xs();for(let s=0;s<e.length;s++)t.un(s).ln&&e[s].tu()}xn(t,e){const s=this.ns.Et();switch(t.fn){case 0:s.Fc();break;case 1:s.Wc(t.Wt);break;case 2:s.gn(t.Wt);break;case 3:s.Mn(t.Wt);break;case 4:s.Pc();break;case 5:t.Wt.Ec(e)||s.Mn(t.Wt.Ac(e))}}rd(t){this.qw!==null?this.qw.Sn(t):this.qw=t,this.jw||(this.jw=!0,this.Hw=window.requestAnimationFrame((e=>{if(this.jw=!1,this.Hw=0,this.qw!==null){const s=this.qw;this.qw=null,this.lg(s,e);for(const n of s.bn())if(n.fn===5&&!n.Wt.Ec(e)){this.Qt().vn(n.Wt);break}}})))}Sg(){this.ng()}hg(t){this.Zw.removeChild(t.iv()),t.m()}ng(){const t=this.ns.Xs(),e=t.length,s=this.Fw.length;for(let n=e;n<s;n++){const l=fA(this.Fw.pop());this.Zw.removeChild(l.iv()),l.nw().u(this),l.ew().u(this),l.m();const a=this.Ww.pop();a!==void 0&&this.hg(a)}for(let n=s;n<e;n++){const l=new j1(this,t[n]);if(l.nw().i(this.yg.bind(this,l),this),l.ew().i(this.kg.bind(this,l),this),this.Fw.push(l),n>0){const a=new cU(this,n-1,n);this.Ww.push(a),this.Zw.insertBefore(a.iv(),this.tg.iv())}this.Zw.insertBefore(l.iv(),this.tg.iv())}for(let n=0;n<e;n++){const l=t[n],a=this.Fw[n];a.cv()!==l?a.qm(l):a.$m()}this.eg(),this.Mg()}Pg(t,e,s,n){const l=new Map;t!==null&&this.ns.tn().forEach((m=>{const v=m.qs().$s(t);v!==null&&l.set(m,v)}));let a;if(t!==null){const m=this.ns.Et().es(t)?.originalTime;m!==void 0&&(a=m)}const c=this.Qt().pd(),d=c!==null&&c.hu instanceof td?c.hu:void 0,f=c!==null&&c.au!==void 0?c.au.te:void 0,p=this.Tg(n);return{Gr:a,js:t??void 0,Rg:e??void 0,Dg:p!==-1?p:void 0,Ig:d,Vg:l,Bg:f,Eg:s??void 0}}Tg(t){let e=-1;if(t)e=this.Fw.indexOf(t);else{const s=this.Qt().gd().Gs();s!==null&&(e=this.Qt().Xs().indexOf(s))}return e}yg(t,e,s,n){this.Im.p((()=>this.Pg(e,s,n,t)))}kg(t,e,s,n){this.Vm.p((()=>this.Pg(e,s,n,t)))}Qw(t,e,s){this.mg(this.Qt().pd()?.ou??null),this.nd.p((()=>this.Pg(t,e,s)))}eg(){const t=this.Ps.timeScale.visible?"":"none";this.tg.iv().style.display=t}fg(){return this.Fw[0].cv().U_().N().visible}pg(){return this.Fw[0].cv().q_().N().visible}ig(){return"ResizeObserver"in window&&(this.Yw=new ResizeObserver((t=>{const e=t[t.length-1];e&&this.sg(e.contentRect.width,e.contentRect.height)})),this.Yw.observe(this.Av,{box:"border-box"}),!0)}ag(){this.Yw!==null&&this.Yw.disconnect(),this.Yw=null}}function Zp(A){return!!(A.handleScroll.mouseWheel||A.handleScale.mouseWheel)}function wU(A){return A.open===void 0&&A.value===void 0}function yU(A){return(function(t){return t.open!==void 0})(A)||(function(t){return t.value!==void 0})(A)}function BB(A,t,e,s){const n=e.value,l={js:t,wt:A,Wt:[n,n,n,n],Gr:s};return e.color!==void 0&&(l.R=e.color),l}function CU(A,t,e,s){const n=e.value,l={js:t,wt:A,Wt:[n,n,n,n],Gr:s};return e.lineColor!==void 0&&(l.vt=e.lineColor),e.topColor!==void 0&&(l.eh=e.topColor),e.bottomColor!==void 0&&(l.rh=e.bottomColor),l}function bU(A,t,e,s){const n=e.value,l={js:t,wt:A,Wt:[n,n,n,n],Gr:s};return e.topLineColor!==void 0&&(l.hh=e.topLineColor),e.bottomLineColor!==void 0&&(l.ah=e.bottomLineColor),e.topFillColor1!==void 0&&(l.oh=e.topFillColor1),e.topFillColor2!==void 0&&(l._h=e.topFillColor2),e.bottomFillColor1!==void 0&&(l.uh=e.bottomFillColor1),e.bottomFillColor2!==void 0&&(l.dh=e.bottomFillColor2),l}function xU(A,t,e,s){const n={js:t,wt:A,Wt:[e.open,e.high,e.low,e.close],Gr:s};return e.color!==void 0&&(n.R=e.color),n}function SU(A,t,e,s){const n={js:t,wt:A,Wt:[e.open,e.high,e.low,e.close],Gr:s};return e.color!==void 0&&(n.R=e.color),e.borderColor!==void 0&&(n.Ht=e.borderColor),e.wickColor!==void 0&&(n.nh=e.wickColor),n}function EU(A,t,e,s,n){const l=fA(n)(e),a=Math.max(...l),c=Math.min(...l),d=l[l.length-1],f=[d,a,c,d],{time:p,color:m,...v}=e;return{js:t,wt:A,Wt:f,Gr:s,le:v,R:m}}function Bo(A){return A.Wt!==void 0}function wB(A,t){return t.customValues!==void 0&&(A.Ag=t.customValues),A}function gl(A){return(t,e,s,n,l,a)=>(function(c,d){return d?d(c):wU(c)})(s,a)?wB({wt:t,js:e,Gr:n},s):wB(A(t,e,s,n,l),s)}function yB(A){return{Candlestick:gl(SU),Bar:gl(xU),Area:gl(CU),Baseline:gl(bU),Histogram:gl(BB),Line:gl(BB),Custom:gl(EU)}[A]}function CB(A){return{js:0,Lg:new Map,Ea:A}}function bB(A,t){if(A!==void 0&&A.length!==0)return{zg:t.key(A[0].wt),Og:t.key(A[A.length-1].wt)}}function xB(A){let t;return A.forEach((e=>{t===void 0&&(t=e.Gr)})),fA(t)}class TU{constructor(t){this.Ng=new Map,this.Fg=new Map,this.Wg=new Map,this.Hg=[],this.cu=t}m(){this.Ng.clear(),this.Fg.clear(),this.Wg.clear(),this.Hg=[]}Ug(t,e){let s=this.Ng.size!==0,n=!1;const l=this.Fg.get(t);if(l!==void 0)if(this.Fg.size===1)s=!1,n=!0,this.Ng.clear();else for(const d of this.Hg)d.pointData.Lg.delete(t)&&(n=!0);let a=[];if(e.length!==0){const d=e.map((w=>w.time)),f=this.cu.createConverterToInternalObj(e),p=yB(t.wh()),m=t.rl(),v=t.hl();a=e.map(((w,y)=>{const b=f(w.time),S=this.cu.key(b);let x=this.Ng.get(S);x===void 0&&(x=CB(b),this.Ng.set(S,x),n=!0);const U=p(b,x.js,w,d[y],m,v);return x.Lg.set(t,U),U}))}s&&this.$g(),this.qg(t,a);let c=-1;if(n){const d=[];this.Ng.forEach((f=>{d.push({timeWeight:0,time:f.Ea,pointData:f,originalTime:xB(f.Lg)})})),d.sort(((f,p)=>this.cu.key(f.time)-this.cu.key(p.time))),c=this.jg(d)}return this.Yg(t,c,(function(d,f,p){const m=bB(d,p),v=bB(f,p);if(m!==void 0&&v!==void 0)return{Kg:!1,Ta:m.Og>=v.Og&&m.zg>=v.zg}})(this.Fg.get(t),l,this.cu))}Hd(t){return this.Ug(t,[])}Zg(t,e,s){if(s&&t.La())throw new Error("Historical updates are not supported when conflation is enabled. Conflation requires data to be processed in order.");const n=e;(function(x){x.Gr===void 0&&(x.Gr=x.time)})(n),this.cu.preprocessData(e);const l=this.cu.createConverterToInternalObj([e])(e.time),a=this.Wg.get(t);if(!s&&a!==void 0&&this.cu.key(l)<this.cu.key(a))throw new Error(`Cannot update oldest data, last time=${a}, new time=${l}`);let c=this.Ng.get(this.cu.key(l));if(s&&c===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const d=c===void 0;c===void 0&&(c=CB(l),this.Ng.set(this.cu.key(l),c));const f=yB(t.wh()),p=t.rl(),m=t.hl(),v=f(l,c.js,e,n.Gr,p,m),w=!s&&!d&&a!==void 0&&this.cu.key(l)===this.cu.key(a);c.Lg.set(t,v),s?this.Gg(t,v,c.js):w&&t.La()&&Bo(v)?(t.kr(v),this.Xg(t,v)):this.Xg(t,v);const y={Ta:Bo(v),Kg:s};if(!d)return this.Yg(t,-1,y);const b={timeWeight:0,time:c.Ea,pointData:c,originalTime:xB(c.Lg)},S=Po(this.Hg,this.cu.key(b.time),((x,U)=>this.cu.key(x.time)<U));this.Hg.splice(S,0,b);for(let x=S;x<this.Hg.length;++x)kh(this.Hg[x].pointData,x);return this.cu.fillWeightsForPoints(this.Hg,S),this.Yg(t,S,y)}Jg(t,e){const s=this.Fg.get(t);if(s===void 0||e<=0)return[[],this.Qg()];e=Math.min(e,s.length);const n=s.splice(-e).reverse();s.length===0?this.Wg.delete(t):this.Wg.set(t,s[s.length-1].wt);for(const l of n){const a=this.Ng.get(this.cu.key(l.wt));if(a&&(a.Lg.delete(t),a.Lg.size===0)){this.Ng.delete(this.cu.key(a.Ea)),this.Hg.splice(a.js,1);for(let c=a.js;c<this.Hg.length;++c)kh(this.Hg[c].pointData,c)}}return[n,this.Yg(t,this.Hg.length-1,{Kg:!1,Ta:!1})]}Xg(t,e){let s=this.Fg.get(t);s===void 0&&(s=[],this.Fg.set(t,s));const n=s.length!==0?s[s.length-1]:null;n===null||this.cu.key(e.wt)>this.cu.key(n.wt)?Bo(e)&&s.push(e):Bo(e)?s[s.length-1]=e:s.splice(-1,1),this.Wg.set(t,e.wt)}Gg(t,e,s){const n=this.Fg.get(t);if(n===void 0)return;const l=Po(n,s,((a,c)=>a.js<c));Bo(e)?n[l]=e:n.splice(l,1)}qg(t,e){e.length!==0?(this.Fg.set(t,e.filter(Bo)),this.Wg.set(t,e[e.length-1].wt)):(this.Fg.delete(t),this.Wg.delete(t))}$g(){for(const t of this.Hg)t.pointData.Lg.size===0&&this.Ng.delete(this.cu.key(t.time))}jg(t){let e=-1;for(let s=0;s<this.Hg.length&&s<t.length;++s){const n=this.Hg[s],l=t[s];if(this.cu.key(n.time)!==this.cu.key(l.time)){e=s;break}l.timeWeight=n.timeWeight,kh(l.pointData,s)}if(e===-1&&this.Hg.length!==t.length&&(e=Math.min(this.Hg.length,t.length)),e===-1)return-1;for(let s=e;s<t.length;++s)kh(t[s].pointData,s);return this.cu.fillWeightsForPoints(t,e),this.Hg=t,e}tM(){if(this.Fg.size===0)return null;let t=0;return this.Fg.forEach((e=>{e.length!==0&&(t=Math.max(t,e[e.length-1].js))})),t}Yg(t,e,s){const n=this.Qg();if(e!==-1)this.Fg.forEach(((l,a)=>{n.F_.set(a,{le:l,iM:a===t?s:void 0})})),this.Fg.has(t)||n.F_.set(t,{le:[],iM:s}),n.Et.sM=this.Hg,n.Et.nM=e;else{const l=this.Fg.get(t);n.F_.set(t,{le:l||[],iM:s})}return n}Qg(){return{F_:new Map,Et:{vc:this.tM()}}}}function kh(A,t){A.js=t,A.Lg.forEach((e=>{e.js=t}))}function QU(A,t){return A.wt<t}function FU(A,t){return t<A.wt}function UU(A,t,e){const s=t.Aa(),n=t.bi(),l=Po(A,s,QU),a=Ry(A,n,FU);if(!e)return{from:l,to:a};let c=l,d=a;return l>0&&l<A.length&&A[l].wt>=s&&(c=l-1),a>0&&a<A.length&&A[a-1].wt<=n&&(d=a+1),{from:c,to:d}}class R1{constructor(t,e,s){this.eM=!0,this.rM=!0,this.hM=!0,this.aM=[],this.lM=null,this.oM=-1,this.ee=t,this.re=e,this._M=s}kt(t){this.eM=!0,t==="data"&&(this.rM=!0),t==="options"&&(this.hM=!0)}Tt(){return this.ee.It()?(this.uM(),this.lM===null?null:this.cM):null}dM(){this.aM=this.aM.map((t=>({...t,...this.ee.ga().gh(t.wt)})))}fM(){this.lM=null}uM(){const t=this.re.Et(),e=t.N().enableConflation?t.Hc():0;e!==this.oM&&(this.rM=!0,this.oM=e),this.rM&&(this.pM(),this.rM=!1),this.hM&&(this.dM(),this.hM=!1),this.eM&&(this.vM(),this.eM=!1)}vM(){const t=this.ee.Ft(),e=this.re.Et();if(this.fM(),e.Gi()||t.Gi())return;const s=e.Ie();if(s===null||this.ee.qs().yh()===0)return;const n=this.ee.Lt();n!==null&&(this.lM=UU(this.aM,s,this._M),this.mM(t,e,n.Wt),this.wM())}}class MU{constructor(t,e){this.gM=t,this.Ki=e}nt(t,e,s){this.gM.draw(t,this.Ki,e,s)}}class IU extends R1{constructor(t,e,s){super(t,e,!1),this.$h=s,this.cM=new MU(this.$h.renderer(),(n=>{const l=t.Lt();return l===null?null:t.Ft().Nt(n,l.Wt)}))}get ma(){return this.$h.conflationReducer}Oa(t){return this.$h.priceValueBuilder(t)}al(t){return this.$h.isWhitespace(t)}pM(){const t=this.ee.ga();this.aM=this.ee.Na().Dh().map((e=>({wt:e.js,_t:NaN,...t.gh(e.js),MM:e.le})))}mM(t,e){e.mc(this.aM,fc(this.lM))}wM(){this.$h.update({bars:this.aM.map(NU),barSpacing:this.re.Et().ul(),visibleRange:this.lM,conflationFactor:this.re.Et().Hc()},this.ee.N())}}function NU(A){return{x:A._t,time:A.wt,originalData:A.MM,barColor:A.th}}const LU={color:"#2196f3"},HU=(A,t,e)=>{const s=Dr(e);return new IU(A,t,s)};function z1(A){const t={value:A.Wt[3],time:A.Gr};return A.Ag!==void 0&&(t.customValues=A.Ag),t}function SB(A){const t=z1(A);return A.R!==void 0&&(t.color=A.R),t}function DU(A){const t=z1(A);return A.vt!==void 0&&(t.lineColor=A.vt),A.eh!==void 0&&(t.topColor=A.eh),A.rh!==void 0&&(t.bottomColor=A.rh),t}function kU(A){const t=z1(A);return A.hh!==void 0&&(t.topLineColor=A.hh),A.ah!==void 0&&(t.bottomLineColor=A.ah),A.oh!==void 0&&(t.topFillColor1=A.oh),A._h!==void 0&&(t.topFillColor2=A._h),A.uh!==void 0&&(t.bottomFillColor1=A.uh),A.dh!==void 0&&(t.bottomFillColor2=A.dh),t}function Yy(A){const t={open:A.Wt[0],high:A.Wt[1],low:A.Wt[2],close:A.Wt[3],time:A.Gr};return A.Ag!==void 0&&(t.customValues=A.Ag),t}function jU(A){const t=Yy(A);return A.R!==void 0&&(t.color=A.R),t}function OU(A){const t=Yy(A),{R:e,Ht:s,nh:n}=A;return e!==void 0&&(t.color=e),s!==void 0&&(t.borderColor=s),n!==void 0&&(t.wickColor=n),t}function Su(A){return{Area:DU,Line:SB,Baseline:kU,Histogram:SB,Bar:jU,Candlestick:OU,Custom:RU}[A]}function RU(A){const t=A.Gr;return{...A.le,time:t}}const zU={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1,doNotSnapToHiddenSeriesIndices:!1},VU={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},PU={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Iy,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},tg={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},KU={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1,enableConflation:!1,conflationThresholdFactor:1,precomputeConflationOnInit:!1,precomputeConflationPriority:"background"};function EB(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:PU,crosshair:zU,grid:VU,overlayPriceScales:{...tg},leftPriceScale:{...tg,visible:!1},rightPriceScale:{...tg,visible:!0},timeScale:KU,localization:{locale:Ko?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class Jy{constructor(t,e,s){this.Yp=t,this.bM=e,this.SM=s??0}applyOptions(t){this.Yp.Qt().md(this.bM,t,this.SM)}options(){return this.Ki().N()}width(){return qu(this.bM)?this.Yp.dg(this.bM):0}setVisibleRange(t){this.setAutoScale(!1),this.Ki().$o(new en(t.from,t.to))}getVisibleRange(){let t,e,s=this.Ki().er();if(s===null)return null;if(this.Ki().io()){const n=this.Ki().m_(),l=Wy(n);s=Mo(s,this.Ki().no()),t=Number((Math.round(s.Ze()/n)*n).toFixed(l)),e=Number((Math.round(s.Ge()/n)*n).toFixed(l))}else t=s.Ze(),e=s.Ge();return{from:t,to:e}}setAutoScale(t){this.applyOptions({autoScale:t})}Ki(){return Mt(this.Yp.Qt().wd(this.bM,this.SM)).Ft}}class GU{constructor(t,e,s,n){this.Yp=t,this.yt=s,this.xM=e,this.CM=n}getHeight(){return this.yt.$t()}setHeight(t){const e=this.Yp.Qt(),s=e.Gd(this.yt);e.xd(s,t)}getStretchFactor(){return this.yt.E_()}setStretchFactor(t){this.yt.A_(t),this.Yp.Qt().Ca()}paneIndex(){return this.Yp.Qt().Gd(this.yt)}moveTo(t){const e=this.paneIndex();e!==t&&(Di(t>=0&&t<this.Yp.Zp().length,"Invalid pane index"),this.Yp.Qt().yd(e,t))}getSeries(){return this.yt.F_().map((t=>this.xM(t)))??[]}getHTMLElement(){const t=this.Yp.Zp();return t&&t.length!==0&&t[this.paneIndex()]?t[this.paneIndex()].iv():null}attachPrimitive(t){this.yt.nl(t),t.attached&&t.attached({chart:this.CM,requestUpdate:()=>this.yt.Qt().Ca()})}detachPrimitive(t){this.yt.el(t)}priceScale(t){if(this.yt.V_(t)===null)throw new Error(`Cannot find price scale with id: ${t}`);return new Jy(this.Yp,t,this.paneIndex())}setPreserveEmptyPane(t){this.yt.O_(t)}preserveEmptyPane(){return this.yt.N_()}addCustomSeries(t,e={},s=0){return this.CM.addCustomSeries(t,e,s)}addSeries(t,e={}){return this.CM.addSeries(t,e,this.paneIndex())}}const WU={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class TB{constructor(t){this.hr=t}applyOptions(t){this.hr.cr(t)}options(){return this.hr.N()}yM(){return this.hr}}class $U{constructor(t,e,s,n,l,a){this.kM=new ii,this.ee=t,this.PM=e,this.TM=s,this.cu=l,this.CM=n,this.RM=a}m(){this.kM.m()}priceFormatter(){return this.ee.Xa()}priceToCoordinate(t){const e=this.ee.Lt();return e===null?null:this.ee.Ft().Nt(t,e.Wt)}coordinateToPrice(t){const e=this.ee.Lt();return e===null?null:this.ee.Ft().Ds(t,e.Wt)}barsInLogicalRange(t){if(t===null)return null;const e=new bu(new sc(t.from,t.to)).Ru(),s=this.ee.qs();if(s.Gi())return null;const n=s.$s(e.Aa(),1),l=s.$s(e.bi(),-1),a=Mt(s.kh()),c=Mt(s.sn());if(n!==null&&l!==null&&n.js>l.js)return{barsBefore:t.from-a,barsAfter:c-t.to};const d={barsBefore:n===null||n.js===a?t.from-a:n.js-a,barsAfter:l===null||l.js===c?c-t.to:c-l.js};return n!==null&&l!==null&&(d.from=n.Gr,d.to=l.Gr),d}setData(t){this.cu,this.ee.wh(),this.PM.DM(this.ee,t),this.IM("full")}update(t,e=!1){this.ee.wh(),this.PM.VM(this.ee,t,e),this.IM("update")}pop(t=1){const e=this.PM.BM(this.ee,t);e.length!==0&&this.IM("update");const s=Su(this.seriesType());return e.map((n=>s(n)))}dataByIndex(t,e){const s=this.ee.qs().$s(t,e);return s===null?null:Su(this.seriesType())(s)}data(){const t=Su(this.seriesType());return this.ee.qs().Dh().map((e=>t(e)))}subscribeDataChanged(t){this.kM.i(t)}unsubscribeDataChanged(t){this.kM._(t)}applyOptions(t){this.ee.cr(t)}options(){return Gn(this.ee.N())}priceScale(){return this.TM.priceScale(this.ee.Ft().ol(),this.getPane().paneIndex())}createPriceLine(t){const e=SA(Gn(WU),t),s=this.ee.Da(e);return new TB(s)}removePriceLine(t){this.ee.Ia(t.yM())}priceLines(){return this.ee.Va().map((t=>new TB(t)))}seriesType(){return this.ee.wh()}lastValueData(t){const e=this.ee.Ve(t);return e.Be?{noData:!0}:{noData:!1,price:e.gt,color:e.R}}attachPrimitive(t){this.ee.nl(t),t.attached&&t.attached({chart:this.CM,series:this,requestUpdate:()=>this.ee.Qt().Ca(),horzScaleBehavior:this.cu})}detachPrimitive(t){this.ee.el(t),t.detached&&t.detached(),this.ee.Qt().Ca()}getPane(){const t=this.ee,e=Mt(this.ee.Qt().Kn(t));return this.RM(e)}moveToPane(t){this.ee.Qt().jd(this.ee,t)}seriesOrder(){const t=this.ee.Qt().Kn(this.ee);return t===null?-1:t.F_().indexOf(this.ee)}setSeriesOrder(t){const e=this.ee.Qt().Kn(this.ee);e!==null&&e.su(this.ee,t)}IM(t){this.kM.v()&&this.kM.p(t)}}class XU{constructor(t,e,s){this.EM=new ii,this.Nu=new ii,this.xw=new ii,this.ns=t,this.Jh=t.Et(),this.tg=e,this.Jh.Lc().i(this.AM.bind(this)),this.Jh.zc().i(this.LM.bind(this)),this.tg.Dw().i(this.zM.bind(this)),this.cu=s}m(){this.Jh.Lc().u(this),this.Jh.zc().u(this),this.tg.Dw().u(this),this.EM.m(),this.Nu.m(),this.xw.m()}scrollPosition(){return this.Jh.Cc()}scrollToPosition(t,e){e?this.Jh.Bc(t,1e3):this.ns.Mn(t)}scrollToRealTime(){this.Jh.Vc()}getVisibleRange(){const t=this.Jh.lc();return t===null?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){const e={from:this.cu.convertHorzItemToInternal(t.from),to:this.cu.convertHorzItemToInternal(t.to)},s=this.Jh.cc(e);this.ns.$d(s)}getVisibleLogicalRange(){const t=this.Jh.ac();return t===null?null:{from:t.Aa(),to:t.bi()}}setVisibleLogicalRange(t){Di(t.from<=t.to,"The from index cannot be after the to index."),this.ns.$d(t)}resetTimeScale(){this.ns.wn()}fitContent(){this.ns.Fc()}logicalToCoordinate(t){const e=this.ns.Et();return e.Gi()?null:e.qt(t)}coordinateToLogical(t){return this.Jh.Gi()?null:this.Jh.wc(t)}timeToIndex(t,e){const s=this.cu.convertHorzItemToInternal(t);return this.Jh.ec(s,e)}timeToCoordinate(t){const e=this.timeToIndex(t,!1);return e===null?null:this.Jh.qt(e)}coordinateToTime(t){const e=this.ns.Et(),s=e.wc(t),n=e.es(s);return n===null?null:n.originalTime}width(){return this.tg.sv().width}height(){return this.tg.sv().height}subscribeVisibleTimeRangeChange(t){this.EM.i(t)}unsubscribeVisibleTimeRangeChange(t){this.EM._(t)}subscribeVisibleLogicalRangeChange(t){this.Nu.i(t)}unsubscribeVisibleLogicalRangeChange(t){this.Nu._(t)}subscribeSizeChange(t){this.xw.i(t)}unsubscribeSizeChange(t){this.xw._(t)}applyOptions(t){this.Jh.cr(t)}options(){return{...Gn(this.Jh.N()),barSpacing:this.Jh.ul()}}AM(){this.EM.v()&&this.EM.p(this.getVisibleRange())}LM(){this.Nu.v()&&this.Nu.p(this.getVisibleLogicalRange())}zM(t){this.xw.p(t.width,t.height)}}function QB(A){return(function(t){if(Uh(t.handleScale)){const s=t.handleScale;t.handleScale={axisDoubleClickReset:{time:s,price:s},axisPressedMouseMove:{time:s,price:s},mouseWheel:s,pinch:s}}else if(t.handleScale!==void 0){const{axisPressedMouseMove:s,axisDoubleClickReset:n}=t.handleScale;Uh(s)&&(t.handleScale.axisPressedMouseMove={time:s,price:s}),Uh(n)&&(t.handleScale.axisDoubleClickReset={time:n,price:n})}const e=t.handleScroll;Uh(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})})(A),A}class YU{constructor(t,e,s){this.OM=new Map,this.NM=new Map,this.FM=new ii,this.WM=new ii,this.HM=new ii,this.Xc=new WeakMap,this.UM=new TU(e);const n=s===void 0?Gn(EB()):SA(Gn(EB()),QB(s));this.$M=e,this.Yp=new BU(t,n,e),this.Yp.nw().i((a=>{this.FM.v()&&this.FM.p(this.qM(a()))}),this),this.Yp.ew().i((a=>{this.WM.v()&&this.WM.p(this.qM(a()))}),this),this.Yp.Md().i((a=>{this.HM.v()&&this.HM.p(this.qM(a()))}),this);const l=this.Yp.Qt();this.jM=new XU(l,this.Yp.rg(),this.$M)}remove(){this.Yp.nw().u(this),this.Yp.ew().u(this),this.Yp.Md().u(this),this.jM.m(),this.Yp.m(),this.OM.clear(),this.NM.clear(),this.FM.m(),this.WM.m(),this.HM.m(),this.UM.m()}resize(t,e,s){this.autoSizeActive()||this.Yp.sg(t,e,s)}addCustomSeries(t,e={},s=0){const n=(l=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...LU,...l.defaultOptions()},YM:HU,KM:l}))(Dr(t));return this.ZM(n,e,s)}addSeries(t,e={},s=0){return this.ZM(t,e,s)}removeSeries(t){const e=fA(this.OM.get(t)),s=this.UM.Hd(e);this.Yp.Qt().Hd(e),this.GM(s),this.OM.delete(t),this.NM.delete(e)}DM(t,e){this.GM(this.UM.Ug(t,e))}VM(t,e,s){this.GM(this.UM.Zg(t,e,s))}BM(t,e){const[s,n]=this.UM.Jg(t,e);return s.length!==0&&this.GM(n),s}subscribeClick(t){this.FM.i(t)}unsubscribeClick(t){this.FM._(t)}subscribeCrosshairMove(t){this.HM.i(t)}unsubscribeCrosshairMove(t){this.HM._(t)}subscribeDblClick(t){this.WM.i(t)}unsubscribeDblClick(t){this.WM._(t)}priceScale(t,e=0){return new Jy(this.Yp,t,e)}timeScale(){return this.jM}applyOptions(t){this.Yp.cr(QB(t))}options(){return this.Yp.N()}takeScreenshot(t=!1,e=!1){let s,n;try{e||(s=this.Yp.Qt().N().crosshair.mode,this.Yp.cr({crosshair:{mode:2}})),n=this.Yp.ug(t)}finally{e||s===void 0||this.Yp.Qt().cr({crosshair:{mode:s}})}return n}addPane(t=!1){const e=this.Yp.Qt().Xd();return e.O_(t),this.XM(e)}removePane(t){this.Yp.Qt().Sd(t)}swapPanes(t,e){this.Yp.Qt().Cd(t,e)}autoSizeActive(){return this.Yp.vg()}chartElement(){return this.Yp.hv()}panes(){return this.Yp.Qt().Xs().map((t=>this.XM(t)))}paneSize(t=0){const e=this.Yp.gg(t);return{height:e.height,width:e.width}}setCrosshairPosition(t,e,s){const n=this.OM.get(s);if(n===void 0)return;const l=this.Yp.Qt().Kn(n);l!==null&&this.Yp.Qt().Ld(t,e,l)}clearCrosshairPosition(){this.Yp.Qt().zd(!0)}horzBehaviour(){return this.$M}ZM(t,e={},s=0){Di(t.YM!==void 0),(function(d){if(d===void 0||d.type==="custom")return;const f=d;f.minMove!==void 0&&f.precision===void 0&&(f.precision=Wy(f.minMove))})(e.priceFormat),t.type==="Candlestick"&&(function(d){d.borderColor!==void 0&&(d.borderUpColor=d.borderColor,d.borderDownColor=d.borderColor),d.wickColor!==void 0&&(d.wickUpColor=d.wickColor,d.wickDownColor=d.wickColor)})(e);const n=SA(Gn(Uy),Gn(t.defaultOptions),e),l=t.YM,a=new td(this.Yp.Qt(),t.type,n,l,t.KM);this.Yp.Qt().Fd(a,s);const c=new $U(a,this,this,this,this.$M,(d=>this.XM(d)));return this.OM.set(c,a),this.NM.set(a,c),c}GM(t){const e=this.Yp.Qt();e.Od(t.Et.vc,t.Et.sM,t.Et.nM),t.F_.forEach(((s,n)=>n.ht(s.le,s.iM))),e.Et().Ju(),e.Sc()}JM(t){return fA(this.NM.get(t))}qM(t){const e=new Map;t.Vg.forEach(((n,l)=>{const a=l.wh(),c=Su(a)(n);if(a!=="Custom")Di(yU(c));else{const d=l.hl();Di(!d||d(c)===!1)}e.set(this.JM(l),c)}));const s=t.Ig!==void 0&&this.NM.has(t.Ig)?this.JM(t.Ig):void 0;return{time:t.Gr,logical:t.js,point:t.Rg,paneIndex:t.Dg,hoveredSeries:s,hoveredObjectId:t.Bg,seriesData:e,sourceEvent:t.Eg}}XM(t){let e=this.Xc.get(t);return e||(e=new GU(this.Yp,(s=>this.JM(s)),t,this),this.Xc.set(t,e)),e}}function JU(A){if(yc(A)){const t=document.getElementById(A);return Di(t!==null,`Cannot find element in DOM with id=${A}`),t}return A}function qU(A,t,e){const s=JU(A),n=new YU(s,t,e);return t.setOptions(n.options()),n}function ZU(A,t){return qU(A,new uB,uB.pf(t))}class sd extends R1{constructor(t,e){super(t,e,!0)}mM(t,e,s){e.mc(this.aM,fc(this.lM)),t.Yo(this.aM,s,fc(this.lM))}QM(t,e){return{wt:t,gt:e,_t:NaN,ut:NaN}}pM(){const t=this.ee.ga();this.aM=this.ee.Na().Dh().map((e=>{let s;if((e.jr??1)>1){const n=e.Wt[1],l=e.Wt[2],a=e.Wt[3];s=Math.abs(n-a)>Math.abs(l-a)?n:l}else s=e.Wt[3];return this.tb(e.js,s,t)}))}}function qy(A,t,e,s,n,l,a){if(t.length===0||s.from>=t.length||s.to<=0)return;const{context:c,horizontalPixelRatio:d,verticalPixelRatio:f}=A,p=t[s.from];let m=l(A,p),v=p;if(s.to-s.from<2){const w=n/2;c.beginPath();const y={_t:p._t-w,ut:p.ut},b={_t:p._t+w,ut:p.ut};c.moveTo(y._t*d,y.ut*f),c.lineTo(b._t*d,b.ut*f),a(A,m,y,b)}else{const w=(b,S)=>{a(A,m,v,S),c.beginPath(),m=b,v=S};let y=v;c.beginPath(),c.moveTo(p._t*d,p.ut*f);for(let b=s.from+1;b<s.to;++b){y=t[b];const S=l(A,y);switch(e){case 0:c.lineTo(y._t*d,y.ut*f);break;case 1:c.lineTo(y._t*d,t[b-1].ut*f),S!==m&&(w(S,y),c.lineTo(y._t*d,t[b-1].ut*f)),c.lineTo(y._t*d,y.ut*f);break;case 2:{const[x,U]=t8(t,b-1,b);c.bezierCurveTo(x._t*d,x.ut*f,U._t*d,U.ut*f,y._t*d,y.ut*f);break}}e!==1&&S!==m&&(w(S,y),c.moveTo(y._t*d,y.ut*f))}(v!==y||v===y&&e===1)&&a(A,m,v,y)}}const FB=6;function eg(A,t){return{_t:A._t-t._t,ut:A.ut-t.ut}}function UB(A,t){return{_t:A._t/t,ut:A.ut/t}}function t8(A,t,e){const s=Math.max(0,t-1),n=Math.min(A.length-1,e+1);var l,a;return[(l=A[t],a=UB(eg(A[e],A[s]),FB),{_t:l._t+a._t,ut:l.ut+a.ut}),eg(A[e],UB(eg(A[n],A[t]),FB))]}function e8(A,t){const e=A.context;e.strokeStyle=t,e.stroke()}let Zy=class extends wn{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et(t){if(this.rt===null)return;const{ot:e,lt:s,ib:n,sb:l,ct:a,Zt:c,nb:d}=this.rt;if(s===null)return;const f=t.context;f.lineCap="butt",f.lineWidth=a*t.verticalPixelRatio,Pr(f,c),f.lineJoin="round";const p=this.eb.bind(this);l!==void 0&&qy(t,e,l,s,n,p,e8),d&&(function(m,v,w,y,b){if(y.to-y.from<=0)return;const{horizontalPixelRatio:S,verticalPixelRatio:x,context:U}=m;let M=null;const N=Math.max(1,Math.floor(S))%2/2,I=w*x+N;for(let R=y.to-1;R>=y.from;--R){const D=v[R];if(D){const V=b(m,D);V!==M&&(U.beginPath(),M!==null&&U.fill(),U.fillStyle=V,M=V);const lt=Math.round(D._t*S)+N,dt=D.ut*x;U.moveTo(lt,dt),U.arc(lt,dt,I,0,2*Math.PI)}}U.fill()})(t,e,d,s,p)}},tC=class extends Zy{eb(t,e){return e.vt}},s8=class extends sd{constructor(){super(...arguments),this.cM=new tC}tb(t,e,s){return{...this.QM(t,e),...s.gh(t)}}wM(){const t=this.ee.N(),e={ot:this.aM,Zt:t.lineStyle,sb:t.lineVisible?t.lineType:void 0,ct:t.lineWidth,nb:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,lt:this.lM,ib:this.re.Et().ul()};this.cM.ht(e)}};const tA={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},YM:(A,t)=>new s8(A,t)};function i8(A,t,e,s,n){const{context:l,horizontalPixelRatio:a,verticalPixelRatio:c}=t;l.lineTo(n._t*a,A*c),l.lineTo(s._t*a,A*c),l.closePath(),l.fillStyle=e,l.fill()}let eC=class extends wn{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et(t){if(this.rt===null)return;const{ot:e,lt:s,ib:n,ct:l,Zt:a,sb:c}=this.rt,d=this.rt.ub??(this.rt.cb?0:t.mediaSize.height);if(s===null)return;const f=t.context;f.lineCap="butt",f.lineJoin="round",f.lineWidth=l,Pr(f,a),f.lineWidth=1,qy(t,e,c,s,n,this.fb.bind(this),i8.bind(null,d))}},V1=class{pb(t,e){const s=this.mb,{wb:n,gb:l,Mb:a,bb:c,ub:d,Sb:f,xb:p}=e;if(this.Cb===void 0||s===void 0||s.wb!==n||s.gb!==l||s.Mb!==a||s.bb!==c||s.ub!==d||s.Sb!==f||s.xb!==p){const{verticalPixelRatio:m}=t,v=d||f>0?m:1,w=f*v,y=p===t.bitmapSize.height?p:p*v,b=(d??0)*v,S=t.context.createLinearGradient(0,w,0,y);if(S.addColorStop(0,n),d!=null){const x=Oo((b-w)/(y-w),0,1);S.addColorStop(x,l),S.addColorStop(x,a)}S.addColorStop(1,c),this.Cb=S,this.mb=e}return this.Cb}},A8=class extends eC{constructor(){super(...arguments),this.yb=new V1}fb(t,e){const s=this.rt;return this.yb.pb(t,{wb:e.oh,gb:e._h,Mb:e.uh,bb:e.dh,ub:s.ub,Sb:s.Sb??0,xb:s.xb??t.bitmapSize.height})}},n8=class extends Zy{constructor(){super(...arguments),this.kb=new V1}eb(t,e){const s=this.rt;return this.kb.pb(t,{wb:e.hh,gb:e.hh,Mb:e.ah,bb:e.ah,ub:s.ub,Sb:s.Sb??0,xb:s.xb??t.bitmapSize.height})}},r8=class extends sd{constructor(t,e){super(t,e),this.cM=new H1,this.Pb=new A8,this.Tb=new n8,this.cM.st([this.Pb,this.Tb])}tb(t,e,s){return{...this.QM(t,e),...s.gh(t)}}wM(){const t=this.ee.Lt();if(t===null)return;const e=this.ee.N(),s=this.ee.Ft().Nt(e.baseValue.price,t.Wt),n=this.re.Et().ul();if(this.lM===null||this.aM.length===0)return;let l,a;if(e.relativeGradient){l=this.aM[this.lM.from].ut,a=this.aM[this.lM.from].ut;for(let c=this.lM.from;c<this.lM.to;c++){const d=this.aM[c];d.ut<l&&(l=d.ut),d.ut>a&&(a=d.ut)}}this.Pb.ht({ot:this.aM,ct:e.lineWidth,Zt:e.lineStyle,sb:e.lineType,ub:s,Sb:l,xb:a,cb:!1,lt:this.lM,ib:n}),this.Tb.ht({ot:this.aM,ct:e.lineWidth,Zt:e.lineStyle,sb:e.lineVisible?e.lineType:void 0,nb:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,ub:s,Sb:l,xb:a,lt:this.lM,ib:n})}};const l8={type:"Baseline",isBuiltIn:!0,defaultOptions:{baseValue:{type:"price",price:0},relativeGradient:!1,topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},YM:(A,t)=>new r8(A,t)};let o8=class extends eC{constructor(){super(...arguments),this.yb=new V1}fb(t,e){return this.yb.pb(t,{wb:e.eh,gb:"",Mb:"",bb:e.rh,Sb:this.rt?.Sb??0,xb:t.bitmapSize.height})}},a8=class extends sd{constructor(t,e){super(t,e),this.cM=new H1,this.Rb=new o8,this.Db=new tC,this.cM.st([this.Rb,this.Db])}tb(t,e,s){return{...this.QM(t,e),...s.gh(t)}}wM(){const t=this.ee.N();if(this.lM===null||this.aM.length===0)return;let e;if(t.relativeGradient){e=this.aM[this.lM.from].ut;for(let s=this.lM.from;s<this.lM.to;s++){const n=this.aM[s];n.ut<e&&(e=n.ut)}}this.Rb.ht({sb:t.lineType,ot:this.aM,Zt:t.lineStyle,ct:t.lineWidth,ub:null,Sb:e,cb:t.invertFilledArea,lt:this.lM,ib:this.re.Et().ul()}),this.Db.ht({sb:t.lineVisible?t.lineType:void 0,ot:this.aM,Zt:t.lineStyle,ct:t.lineWidth,lt:this.lM,ib:this.re.Et().ul(),nb:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0})}};const c8={type:"Area",isBuiltIn:!0,defaultOptions:{topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,relativeGradient:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},YM:(A,t)=>new a8(A,t)};let h8=class extends wn{constructor(){super(...arguments),this.jt=null,this.Ib=0,this.Vb=0}ht(t){this.jt=t}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:s}){if(this.jt===null||this.jt.qs.length===0||this.jt.lt===null)return;this.Ib=this.Bb(e),this.Ib>=2&&Math.max(1,Math.floor(e))%2!=this.Ib%2&&this.Ib--,this.Vb=this.jt.Eb?Math.min(this.Ib,Math.floor(e)):this.Ib;let n=null;const l=this.Vb<=this.Ib&&this.jt.ul>=Math.floor(1.5*e);for(let a=this.jt.lt.from;a<this.jt.lt.to;++a){const c=this.jt.qs[a];n!==c.th&&(t.fillStyle=c.th,n=c.th);const d=Math.floor(.5*this.Vb),f=Math.round(c._t*e),p=f-d,m=this.Vb,v=p+m-1,w=Math.min(c.Xo,c.Jo),y=Math.max(c.Xo,c.Jo),b=Math.round(w*s)-d,S=Math.round(y*s)+d,x=Math.max(S-b,this.Vb);t.fillRect(p,b,m,x);const U=Math.ceil(1.5*this.Ib);if(l){if(this.jt.Ab){const R=f-U;let D=Math.max(b,Math.round(c.Go*s)-d),V=D+m-1;V>b+x-1&&(V=b+x-1,D=V-m+1),t.fillRect(R,D,p-R,V-D+1)}const M=f+U;let N=Math.max(b,Math.round(c.Qo*s)-d),I=N+m-1;I>b+x-1&&(I=b+x-1,N=I-m+1),t.fillRect(v+1,N,M-v,I-N+1)}}}Bb(t){const e=Math.floor(t);return Math.max(e,Math.floor((function(s,n){return Math.floor(.3*s*n)})(Mt(this.jt).ul,t)))}},sC=class extends R1{constructor(t,e){super(t,e,!1)}mM(t,e,s){e.mc(this.aM,fc(this.lM)),t.Zo(this.aM,s,fc(this.lM))}Lb(t,e,s){return{wt:t,Hr:e.Wt[0],Ur:e.Wt[1],$r:e.Wt[2],qr:e.Wt[3],_t:NaN,Go:NaN,Xo:NaN,Jo:NaN,Qo:NaN}}pM(){const t=this.ee.ga();this.aM=this.ee.Na().Dh().map((e=>this.tb(e.js,e,t)))}},u8=class extends sC{constructor(){super(...arguments),this.cM=new h8}tb(t,e,s){return{...this.Lb(t,e,s),...s.gh(t)}}wM(){const t=this.ee.N();this.cM.ht({qs:this.aM,ul:this.re.Et().ul(),Ab:t.openVisible,Eb:t.thinBars,lt:this.lM})}};const d8={type:"Bar",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},YM:(A,t)=>new u8(A,t)};let f8=class extends wn{constructor(){super(...arguments),this.jt=null,this.Ib=0}ht(t){this.jt=t}et(t){if(this.jt===null||this.jt.qs.length===0||this.jt.lt===null)return;const{horizontalPixelRatio:e}=t;this.Ib=(function(l,a){if(l>=2.5&&l<=4)return Math.floor(3*a);const c=1-.2*Math.atan(Math.max(4,l)-4)/(.5*Math.PI),d=Math.floor(l*c*a),f=Math.floor(l*a),p=Math.min(d,f);return Math.max(Math.floor(a),p)})(this.jt.ul,e),this.Ib>=2&&Math.floor(e)%2!=this.Ib%2&&this.Ib--;const s=this.jt.qs;this.jt.zb&&this.Ob(t,s,this.jt.lt),this.jt.Mi&&this.gm(t,s,this.jt.lt);const n=this.Nb(e);(!this.jt.Mi||this.Ib>2*n)&&this.Fb(t,s,this.jt.lt)}Ob(t,e,s){if(this.jt===null)return;const{context:n,horizontalPixelRatio:l,verticalPixelRatio:a}=t;let c="",d=Math.min(Math.floor(l),Math.floor(this.jt.ul*l));d=Math.max(Math.floor(l),Math.min(d,this.Ib));const f=Math.floor(.5*d);let p=null;for(let m=s.from;m<s.to;m++){const v=e[m];v.sh!==c&&(n.fillStyle=v.sh,c=v.sh);const w=Math.round(Math.min(v.Go,v.Qo)*a),y=Math.round(Math.max(v.Go,v.Qo)*a),b=Math.round(v.Xo*a),S=Math.round(v.Jo*a);let x=Math.round(l*v._t)-f;const U=x+d-1;p!==null&&(x=Math.max(p+1,x),x=Math.min(x,U));const M=U-x+1;n.fillRect(x,b,M,w-b),n.fillRect(x,y+1,M,S-y),p=U}}Nb(t){let e=Math.floor(1*t);this.Ib<=2*e&&(e=Math.floor(.5*(this.Ib-1)));const s=Math.max(Math.floor(t),e);return this.Ib<=2*s?Math.max(Math.floor(t),Math.floor(1*t)):s}gm(t,e,s){if(this.jt===null)return;const{context:n,horizontalPixelRatio:l,verticalPixelRatio:a}=t;let c="";const d=this.Nb(l);let f=null;for(let p=s.from;p<s.to;p++){const m=e[p];m.ih!==c&&(n.fillStyle=m.ih,c=m.ih);let v=Math.round(m._t*l)-Math.floor(.5*this.Ib);const w=v+this.Ib-1,y=Math.round(Math.min(m.Go,m.Qo)*a),b=Math.round(Math.max(m.Go,m.Qo)*a);if(f!==null&&(v=Math.max(f+1,v),v=Math.min(v,w)),this.jt.ul*l>2*d)oF(n,v,y,w-v+1,b-y+1,d);else{const S=w-v+1;n.fillRect(v,y,S,b-y+1)}f=w}}Fb(t,e,s){if(this.jt===null)return;const{context:n,horizontalPixelRatio:l,verticalPixelRatio:a}=t;let c="";const d=this.Nb(l);for(let f=s.from;f<s.to;f++){const p=e[f];let m=Math.round(Math.min(p.Go,p.Qo)*a),v=Math.round(Math.max(p.Go,p.Qo)*a),w=Math.round(p._t*l)-Math.floor(.5*this.Ib),y=w+this.Ib-1;if(p.th!==c){const b=p.th;n.fillStyle=b,c=b}this.jt.Mi&&(w+=d,m+=d,y-=d,v-=d),m>v||n.fillRect(w,m,y-w+1,v-m+1)}}},p8=class extends sC{constructor(){super(...arguments),this.cM=new f8}tb(t,e,s){return{...this.Lb(t,e,s),...s.gh(t)}}wM(){const t=this.ee.N();this.cM.ht({qs:this.aM,ul:this.re.Et().ul(),zb:t.wickVisible,Mi:t.borderVisible,lt:this.lM})}};const ka={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},YM:(A,t)=>new p8(A,t)};let g8=class extends wn{constructor(){super(...arguments),this.jt=null,this.Wb=[]}ht(t){this.jt=t,this.Wb=[]}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:s}){if(this.jt===null||this.jt.ot.length===0||this.jt.lt===null)return;this.Wb.length||this.Hb(e);const n=Math.max(1,Math.floor(s)),l=Math.round(this.jt.Ub*s)-Math.floor(n/2),a=l+n;for(let c=this.jt.lt.from;c<this.jt.lt.to;c++){const d=this.jt.ot[c],f=this.Wb[c-this.jt.lt.from],p=Math.round(d.ut*s);let m,v;t.fillStyle=d.th,p<=l?(m=p,v=a):(m=l,v=p-Math.floor(n/2)+n),t.fillRect(f.Aa,m,f.bi-f.Aa+1,v-m)}}Hb(t){if(this.jt===null||this.jt.ot.length===0||this.jt.lt===null)return void(this.Wb=[]);const e=Math.ceil(this.jt.ul*t)<=1?0:Math.max(1,Math.floor(t)),s=Math.round(this.jt.ul*t)-e;this.Wb=new Array(this.jt.lt.to-this.jt.lt.from);for(let l=this.jt.lt.from;l<this.jt.lt.to;l++){const a=this.jt.ot[l],c=Math.round(a._t*t);let d,f;if(s%2){const p=(s-1)/2;d=c-p,f=c+p}else{const p=s/2;d=c-p,f=c+p-1}this.Wb[l-this.jt.lt.from]={Aa:d,bi:f,$b:c,oe:a._t*t,wt:a.wt}}for(let l=this.jt.lt.from+1;l<this.jt.lt.to;l++){const a=this.Wb[l-this.jt.lt.from],c=this.Wb[l-this.jt.lt.from-1];a.wt===c.wt+1&&a.Aa-c.bi!==e+1&&(c.$b>c.oe?c.bi=a.Aa-e-1:a.Aa=c.bi+e+1)}let n=Math.ceil(this.jt.ul*t);for(let l=this.jt.lt.from;l<this.jt.lt.to;l++){const a=this.Wb[l-this.jt.lt.from];a.bi<a.Aa&&(a.bi=a.Aa);const c=a.bi-a.Aa+1;n=Math.min(c,n)}if(e>0&&n<4)for(let l=this.jt.lt.from;l<this.jt.lt.to;l++){const a=this.Wb[l-this.jt.lt.from];a.bi-a.Aa+1>n&&(a.$b>a.oe?a.bi-=1:a.Aa+=1)}}},m8=class extends sd{constructor(){super(...arguments),this.cM=new g8}tb(t,e,s){return{...this.QM(t,e),...s.gh(t)}}wM(){const t={ot:this.aM,ul:this.re.Et().ul(),lt:this.lM,Ub:this.ee.Ft().Nt(this.ee.N().base,Mt(this.ee.Lt()).Wt)};this.cM.ht(t)}};const MB={type:"Histogram",isBuiltIn:!0,defaultOptions:{color:"#26a69a",base:0},YM:(A,t)=>new m8(A,t)};({...Uy});const _8="_chartWrapper_tthzt_1",v8="_toolbarVisible_tthzt_15",B8="_chartContainer_tthzt_27",w8="_loadingOverlay_tthzt_47",y8="_spinner_tthzt_77",C8="_ohlcHeader_tthzt_299",b8="_ohlcSymbol_tthzt_327",x8="_ohlcDot_tthzt_337",S8="_down_tthzt_351",E8="_ohlcValues_tthzt_359",T8="_ohlcItem_tthzt_373",Q8="_ohlcLabel_tthzt_385",F8="_ohlcValue_tthzt_359",U8="_up_tthzt_405",M8="_ohlcChange_tthzt_421",I8="_ohlcChangeValue_tthzt_433",N8="_measureOverlay_tthzt_459",L8="_measureBox_tthzt_473",H8="_measureUp_tthzt_497",D8="_measureDown_tthzt_509",k8="_measureDetails_tthzt_521",j8="_measureStartPoint_tthzt_533",O8="_measureLine_tthzt_557",R8="_contextMenu_tthzt_853",z8="_contextMenuItem_tthzt_875",Ve={chartWrapper:_8,toolbarVisible:v8,chartContainer:B8,loadingOverlay:w8,spinner:y8,ohlcHeader:C8,ohlcSymbol:b8,ohlcDot:x8,down:S8,ohlcValues:E8,ohlcItem:T8,ohlcLabel:Q8,ohlcValue:F8,up:U8,ohlcChange:M8,ohlcChangeValue:I8,measureOverlay:N8,measureBox:L8,measureUp:H8,measureDown:D8,measureDetails:k8,measureStartPoint:j8,measureLine:O8,contextMenu:R8,contextMenuItem:z8},V8="_indicatorLegend_zs59y_3",P8="_indicatorSources_zs59y_23",K8="_indicatorRow_zs59y_37",G8="_indicatorActions_zs59y_57",W8="_indicatorValue_zs59y_65",$8="_indicatorName_zs59y_75",X8="_indicatorActionBtn_zs59y_125",Y8="_indicatorToggle_zs59y_189",J8="_collapsed_zs59y_241",q8="_indicatorHidden_zs59y_251",Z8="_eyeHidden_zs59y_277",Wi={indicatorLegend:V8,indicatorSources:P8,indicatorRow:K8,indicatorActions:G8,indicatorValue:W8,indicatorName:$8,indicatorActionBtn:X8,delete:"_delete_zs59y_179",indicatorToggle:Y8,collapsed:J8,indicatorHidden:q8,eyeHidden:Z8},IB=({indicator:A,onVisibilityToggle:t,onRemove:e})=>h.jsxs("div",{className:`${Wi.indicatorRow} ${A.isHidden?Wi.indicatorHidden:""}`,children:[h.jsxs("span",{className:Wi.indicatorName,children:[A.name," ",A.params]}),h.jsxs("div",{className:Wi.indicatorActions,children:[h.jsx("button",{className:`${Wi.indicatorActionBtn} ${A.isHidden?Wi.eyeHidden:""}`,onClick:s=>{s.stopPropagation(),t&&t(A.type)},title:A.isHidden?"Show":"Hide",children:A.isHidden?h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",width:"18",height:"18",children:[h.jsx("path",{fill:"currentColor",d:"M3.7 15 15 3.7l-.7-.7L3 14.3l.7.7ZM9 3c1.09 0 2.17.23 3.19.7l-.77.76C10.64 4.16 9.82 4 9 4 6.31 4 3.58 5.63 2.08 9a9.35 9.35 0 0 0 1.93 2.87l-.7.7A10.44 10.44 0 0 1 1.08 9.2L1 9l.08-.2C2.69 4.99 5.82 3 9 3Z"}),h.jsx("path",{fill:"currentColor",d:"M9 6a3 3 0 0 1 .78.1l-.9.9A2 2 0 0 0 7 8.87l-.9.9A3 3 0 0 1 9 6ZM11.9 8.22l-.9.9A2 2 0 0 1 9.13 11l-.9.9a3 3 0 0 0 3.67-3.68Z"}),h.jsx("path",{fill:"currentColor",d:"M9 14c-.82 0-1.64-.15-2.43-.45l-.76.76c1.02.46 2.1.7 3.19.7 3.18 0 6.31-1.98 7.92-5.81L17 9l-.08-.2a10.44 10.44 0 0 0-2.23-3.37l-.7.7c.75.76 1.41 1.71 1.93 2.87-1.5 3.37-4.23 5-6.92 5Z"})]}):h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",width:"18",height:"18",children:[h.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 9a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm-1 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"}),h.jsx("path",{fill:"currentColor",d:"M16.91 8.8C15.31 4.99 12.18 3 9 3 5.82 3 2.7 4.98 1.08 8.8L1 9l.08.2C2.7 13.02 5.82 15 9 15c3.18 0 6.3-1.97 7.91-5.8L17 9l-.09-.2ZM9 14c-2.69 0-5.42-1.63-6.91-5 1.49-3.37 4.22-5 6.9-5 2.7 0 5.43 1.63 6.92 5-1.5 3.37-4.23 5-6.91 5Z"})]})}),h.jsx("button",{className:Wi.indicatorActionBtn,onClick:s=>s.stopPropagation(),title:"Settings",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",width:"18",height:"18",children:h.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"m3.1 9 2.28-5h7.24l2.28 5-2.28 5H5.38L3.1 9Zm1.63-6h8.54L16 9l-2.73 6H4.73L2 9l2.73-6Zm5.77 6a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm1 0a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0Z"})})}),h.jsx("button",{className:`${Wi.indicatorActionBtn} ${Wi.delete}`,onClick:s=>{s.stopPropagation(),e&&e(A.type)},title:"Remove",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",width:"18",height:"18",children:h.jsx("path",{fill:"currentColor",d:"M7.5 4a.5.5 0 0 0-.5.5V5h4v-.5a.5.5 0 0 0-.5-.5h-3ZM12 5h3v1h-1.05l-.85 7.67A1.5 1.5 0 0 1 11.6 15H6.4a1.5 1.5 0 0 1-1.5-1.33L4.05 6H3V5h3v-.5C6 3.67 6.67 3 7.5 3h3c.83 0 1.5.67 1.5 1.5V5ZM5.06 6l.84 7.56a.5.5 0 0 0 .5.44h5.2a.5.5 0 0 0 .5-.44L12.94 6H5.06Z"})})})]}),h.jsx("span",{className:Wi.indicatorValue,style:{color:A.color},children:A.value!==void 0?typeof A.value=="number"?A.value.toFixed(2):A.value:"--"})]}),tM=({indicators:A=[],panePositions:t={},isToolbarVisible:e=!0,isCollapsed:s=!1,onToggleCollapse:n,onVisibilityToggle:l,onRemove:a})=>{const c=A.filter(p=>p.pane==="main"),d=A.filter(p=>p.pane&&p.pane!=="main"),f=e?"55px":"10px";return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:Wi.indicatorLegend,style:{left:f},children:[!s&&c.length>0&&h.jsx("div",{className:Wi.indicatorSources,children:c.map(p=>h.jsx(IB,{indicator:p,onVisibilityToggle:l,onRemove:a},p.type))}),c.length>0&&h.jsx("div",{className:`${Wi.indicatorToggle} ${s?Wi.collapsed:""}`,onClick:n,title:s?"Show indicator legend":"Hide indicator legend",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 15",width:"15",height:"15",children:h.jsx("path",{fill:"currentColor",d:"M3.5 5.58c.24-.28.65-.3.92-.07L7.5 8.14l3.08-2.63a.65.65 0 1 1 .84.98L7.5 9.86 3.58 6.49a.65.65 0 0 1-.07-.91z"})})})]}),d.map(p=>{const m=t[p.pane];return m===void 0?null:h.jsx("div",{className:Wi.indicatorLegend,style:{left:f,top:`${m+4}px`},children:h.jsx("div",{className:Wi.indicatorSources,children:h.jsx(IB,{indicator:p,onVisibilityToggle:l,onRemove:a})})},`pane-legend-${p.type}`)})]})},$n=new Map,eM=3e5,iC="optionChainCache";let NB=0;const LB=5e3,AC=(A,t)=>`${A}_${t||"default"}`,sM=A=>A?Date.now()-A.timestamp<eM:!1,iM=()=>{try{const A=localStorage.getItem(iC);if(A){const t=JSON.parse(A);Object.entries(t).forEach(([e,s])=>{$n.set(e,s)}),console.log("[OptionChain] Loaded",$n.size,"cache entries from storage")}}catch(A){console.warn("[OptionChain] Failed to load cache from storage:",A.message)}},nC=()=>{try{const A=Object.fromEntries($n);localStorage.setItem(iC,JSON.stringify(A))}catch(A){console.warn("[OptionChain] Failed to save cache to storage:",A.message)}};iM();const AM=(A=null,t=null)=>{if(A&&t){const e=AC(A,t);$n.delete(e),console.log("[OptionChain] Cache cleared for:",e)}else if(A){for(const e of $n.keys())e.startsWith(A+"_")&&$n.delete(e);console.log("[OptionChain] Cache cleared for underlying:",A)}else $n.clear(),console.log("[OptionChain] Full cache cleared");nC()},kr=[{symbol:"NIFTY",name:"NIFTY 50",exchange:"NFO",indexExchange:"NSE_INDEX"},{symbol:"BANKNIFTY",name:"BANK NIFTY",exchange:"NFO",indexExchange:"NSE_INDEX"},{symbol:"FINNIFTY",name:"FIN NIFTY",exchange:"NFO",indexExchange:"NSE_INDEX"},{symbol:"MIDCPNIFTY",name:"MIDCAP NIFTY",exchange:"NFO",indexExchange:"NSE_INDEX"},{symbol:"SENSEX",name:"SENSEX",exchange:"BFO",indexExchange:"BSE_INDEX"},{symbol:"BANKEX",name:"BANKEX",exchange:"BFO",indexExchange:"BSE_INDEX"}],nM={1:"JAN",2:"FEB",3:"MAR",4:"APR",5:"MAY",6:"JUN",7:"JUL",8:"AUG",9:"SEP",10:"OCT",11:"NOV",12:"DEC"},rM=Object.fromEntries(Object.entries(nM).map(([A,t])=>[t,parseInt(A)])),pc=A=>{if(!A||A.length<7)return null;const t=A.match(/^(\d{2})([A-Z]{3})(\d{2})$/);if(!t)return null;const[,e,s,n]=t,l=parseInt(e,10),a=rM[s],c=2e3+parseInt(n,10);return!a||isNaN(l)||isNaN(c)?null:new Date(c,a-1,l)},Zg=A=>{const t=pc(A);if(!t)return 0;const e=new Date;e.setHours(0,0,0,0),t.setHours(0,0,0,0);const s=t-e,n=Math.ceil(s/(1e3*60*60*24));return Math.max(0,n)},t1=async(A,t="NFO",e=null,s=15,n=!1)=>{const l=AC(A,e),a=$n.get(l);if(!n&&sM(a))return console.log("[OptionChain] Using cached data for:",l,"(age:",Math.round((Date.now()-a.timestamp)/1e3),"s)"),a.data;const c=Date.now()-NB;if(c<LB){const d=LB-c;if(console.log("[OptionChain] Rate limit protection: waiting",d,"ms before API call"),a)return console.log("[OptionChain] Using stale cache to avoid rate limit"),a.data;await new Promise(f=>setTimeout(f,d))}try{const f=kr.find(M=>M.symbol===A)?.indexExchange||(t==="BFO"?"BSE":"NSE");console.log("[OptionChain] Fetching fresh chain:",{underlying:A,indexExchange:f,expiryDate:e,strikeCount:s}),NB=Date.now();const p=await Q2(A,f,e,s);if(!p){if(console.error("[OptionChain] API returned null"),a)return console.log("[OptionChain] API returned null, using stale cache for:",l),a.data;throw new Error("Option chain API unavailable (rate limit)")}const m=(p.chain||[]).map(M=>({strike:parseFloat(M.strike),ce:M.ce?{symbol:M.ce.symbol,ltp:parseFloat(M.ce.ltp||0),prevClose:parseFloat(M.ce.prev_close||0),open:parseFloat(M.ce.open||0),high:parseFloat(M.ce.high||0),low:parseFloat(M.ce.low||0),bid:parseFloat(M.ce.bid||0),ask:parseFloat(M.ce.ask||0),oi:parseInt(M.ce.oi||0),volume:parseInt(M.ce.volume||0),label:M.ce.label,lotSize:parseInt(M.ce.lotsize||M.ce.lot_size||0)}:null,pe:M.pe?{symbol:M.pe.symbol,ltp:parseFloat(M.pe.ltp||0),prevClose:parseFloat(M.pe.prev_close||0),open:parseFloat(M.pe.open||0),high:parseFloat(M.pe.high||0),low:parseFloat(M.pe.low||0),bid:parseFloat(M.pe.bid||0),ask:parseFloat(M.pe.ask||0),oi:parseInt(M.pe.oi||0),volume:parseInt(M.pe.volume||0),label:M.pe.label,lotSize:parseInt(M.pe.lotsize||M.pe.lot_size||0)}:null,straddlePremium:(parseFloat(M.ce?.ltp||0)+parseFloat(M.pe?.ltp||0)).toFixed(2)})),v=pc(p.expiryDate),w=Zg(p.expiryDate),y=p.underlyingLTP||0,b=p.underlyingPrevClose||p.underlying_prev_close||0,S=b>0?y-b:0,x=b>0?S/b*100:0,U={underlying:p.underlying,exchange:t,underlyingLTP:y,underlyingPrevClose:b,change:S,changePercent:x,atmStrike:p.atmStrike,expiryDate:p.expiryDate,expiryDateObj:v,dte:w,expiries:[p.expiryDate],chain:m,chainByExpiry:{[p.expiryDate]:m}};return m.length>0&&($n.set(l,{data:U,timestamp:Date.now()}),nC(),console.log("[OptionChain] Cached data for:",l)),U}catch(d){return console.error("[OptionChain] Error fetching option chain:",d),a?(console.log("[OptionChain] API error, returning stale cache for:",l),a.data):{underlying:A,exchange:t,underlyingLTP:0,atmStrike:0,expiryDate:null,expiries:[],chain:[],chainByExpiry:{}}}},rC=async A=>{try{const t=await F1(A),e=new Set;for(const n of t){if(!n.symbol?.endsWith("CE")&&!n.symbol?.endsWith("PE"))continue;const a=n.symbol.slice(0,-2).match(/^([A-Z]+)(\d{2})([A-Z]{3})(\d{2})(\d+)$/);if(a&&a[1]===A){const[,,c,d,f]=a,p=`${c}${d}${f}`;e.add(p)}}const s=Array.from(e).sort((n,l)=>{const a=pc(n),c=pc(l);return a-c});return console.log("[OptionChain] Available expiries for",A,":",s),s}catch(t){return console.error("[OptionChain] Error getting expiries:",t),[]}},HB=async(A,t="NFO")=>await F2(A,t),lM=(A,t)=>{if(!A?.length||!t?.length)return[];if(A.length!==t.length)return console.warn("[combineMultiLegOHLC] Mismatch between data arrays and configs"),[];const e=A.map(a=>new Map((a||[]).map(c=>[c.time,c]))),s=new Set;A.forEach(a=>{a&&a.forEach(c=>s.add(c.time))});const n=[],l=Array.from(s).sort((a,c)=>a-c);for(const a of l){if(!e.every(S=>S.has(a)))continue;let d=0,f=0,p=0,m=0,v=0;t.forEach((S,x)=>{const U=e[x].get(a),M=S.direction==="buy"?1:-1,N=S.quantity||1;d+=M*N*U.open,f+=M*N*U.high,p+=M*N*U.low,m+=M*N*U.close,v+=U.volume||0});const w=[d,f,p,m],y=Math.max(...w),b=Math.min(...w);n.push({time:a,open:d,high:y,low:b,close:m,volume:v})}return n},oM=()=>{const A=Date.now()/1e3;return typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")?`/npl-time?${A.toFixed(3)}`:`https://www.nplindia.in/cgi-bin/ntp_client?${A.toFixed(3)}`},lC=60*1e3,aM=19800;let ku=0,oC=0,sg=!1,e1=!1,DB=null;const ju=async()=>{if(sg)return e1;sg=!0;try{const A=Date.now(),t=await fetch(oM(),{headers:{accept:"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest"}}),e=Date.now();if(t.ok){const n=(await t.json()).nstt;if(n&&Number.isFinite(n)){const l=(e-A)/2e3,a=n+l,c=Date.now()/1e3;return ku=a-c,oC=Date.now(),e1=!0,kt.debug("[TimeService] Synced with NPL India. Offset:",ku.toFixed(3),"seconds, Latency:",(l*1e3).toFixed(0),"ms"),!0}}}catch(A){kt.warn("[TimeService] Failed to sync with NPL India:",A.message)}finally{sg=!1}return!1},kB=()=>e1,s1=()=>Date.now()/1e3+ku,jB=()=>s1()+aM,OB=()=>Date.now()-oC>=lC,cM=async()=>{DB===null&&(await ju(),DB=setInterval(()=>{ju()},lC),console.log("[TimeService] Initialized with NPL India. Offset:",ku.toFixed(3),"seconds"))},ig=(A,t)=>{if(!Array.isArray(A)||t<=0)return[];const e=[];for(let s=0;s<A.length;s++){if(s<t-1)continue;let n=0;for(let l=0;l<t;l++)n+=A[s-l].close;e.push({time:A[s].time,value:n/t})}return e},jh=(A,t)=>{if(!Array.isArray(A)||A.length<t||t<=0)return[];const e=[],s=2/(t+1);let n=0;for(let a=0;a<t;a++)n+=A[a].close;let l=n/t;e.push({time:A[t-1].time,value:l});for(let a=t;a<A.length;a++){const d=(A[a].close-l)*s+l;e.push({time:A[a].time,value:d}),l=d}return e},hM=(A,t=14)=>{if(!Array.isArray(A)||A.length<t+1||t<=0)return[];const e=[],s=[],n=[];for(let f=1;f<A.length;f++){const p=A[f].close-A[f-1].close;s.push(p>0?p:0),n.push(p<0?Math.abs(p):0)}let l=0,a=0;for(let f=0;f<t;f++)l+=s[f],a+=n[f];l/=t,a/=t;const d=100-100/(1+(a===0?100:l/a));e.push({time:A[t].time,value:d});for(let f=t;f<s.length;f++){l=(l*(t-1)+s[f])/t,a=(a*(t-1)+n[f])/t;const m=100-100/(1+(a===0?100:l/a));e.push({time:A[f+1].time,value:m})}return e},uM=(A,t=14,e=3,s=3)=>{if(!Array.isArray(A)||A.length<t+e+s-2||t<=0)return{kLine:[],dLine:[]};const n=[],l=[],a=[];for(let d=t-1;d<A.length;d++){let f=-1/0,p=1/0;for(let w=0;w<t;w++)f=Math.max(f,A[d-w].high),p=Math.min(p,A[d-w].low);const m=f-p,v=m===0?50:(A[d].close-p)/m*100;n.push({time:A[d].time,value:v})}for(let d=s-1;d<n.length;d++){let f=0;for(let p=0;p<s;p++)f+=n[d-p].value;l.push({time:n[d].time,value:f/s})}for(let d=e-1;d<l.length;d++){let f=0;for(let p=0;p<e;p++)f+=l[d-p].value;a.push({time:l[d].time,value:f/e})}return{kLine:l.slice(e-1),dLine:a}},dM=(A,t=12,e=26,s=9)=>{if(!Array.isArray(A)||A.length<e+s||e<=t)return{macdLine:[],signalLine:[],histogram:[]};const n=(S,x)=>{const U=2/(x+1),M=[];let N=0;for(let R=0;R<x;R++)N+=S[R];let I=N/x;M.push(I);for(let R=x;R<S.length;R++)I=(S[R]-I)*U+I,M.push(I);return M},l=A.map(S=>S.close),a=n(l,t),c=n(l,e),d=[],f=e-t;for(let S=0;S<c.length;S++)d.push(a[S+f]-c[S]);const p=n(d,s),m=[],v=[],w=[],y=e-1,b=s-1;for(let S=0;S<d.length;S++)m.push({time:A[y+S].time,value:d[S]});for(let S=0;S<p.length;S++){const x=y+b+S;v.push({time:A[x].time,value:p[S]}),w.push({time:A[x].time,value:d[b+S]-p[S],color:d[b+S]-p[S]>=0?"#089981":"#F23645"})}return{macdLine:m,signalLine:v,histogram:w}},fM=(A,t=20,e=2)=>{if(!Array.isArray(A)||A.length<t||t<=0)return{upper:[],middle:[],lower:[]};const s=[],n=[],l=[];for(let a=t-1;a<A.length;a++){let c=0;for(let v=0;v<t;v++)c+=A[a-v].close;const d=c/t;let f=0;for(let v=0;v<t;v++){const w=A[a-v].close-d;f+=w*w}const p=Math.sqrt(f/t),m=A[a].time;n.push({time:m,value:d}),s.push({time:m,value:d+e*p}),l.push({time:m,value:d-e*p})}return{upper:s,middle:n,lower:l}},pM=(A,t=14)=>{if(!Array.isArray(A)||A.length<t+1||t<=0)return[];const e=[],s=[];for(let l=1;l<A.length;l++){const a=A[l].high,c=A[l].low,d=A[l-1].close,f=Math.max(a-c,Math.abs(a-d),Math.abs(c-d));s.push(f)}let n=0;for(let l=0;l<t;l++)n+=s[l];n/=t,e.push({time:A[t].time,value:n});for(let l=t;l<s.length;l++)n=(n*(t-1)+s[l])/t,e.push({time:A[l+1].time,value:n});return e};function RB(A,t=10,e=3){if(!A||A.length<t+1)return[];const s=[],n=[];for(let p=0;p<A.length;p++)if(p===0)n.push(A[p].high-A[p].low);else{const m=A[p].high,v=A[p].low,w=A[p-1].close,y=Math.max(m-v,Math.abs(m-w),Math.abs(v-w));n.push(y)}const l=[];let a=0;for(let p=0;p<A.length;p++)if(p<t-1)l.push(null);else if(p===t-1){let m=0;for(let v=0;v<t;v++)m+=n[v];a=m/t,l.push(a)}else a=(a*(t-1)+n[p])/t,l.push(a);let c=0,d=0,f=0;for(let p=0;p<A.length;p++){if(l[p]===null)continue;const m=(A[p].high+A[p].low)/2,v=l[p];let w=m+e*v,y=m-e*v,b;if(p===t-1||s.length===0)b=w;else{const N=A[p-1].close;w<c||N>c?b=w:b=c}let S;if(p===t-1||s.length===0)S=y;else{const N=A[p-1].close;y>d||N<d?S=y:S=d}let x,U;const M=A[p].close;s.length===0?M<=b?(x=b,U=-1):(x=S,U=1):f===c?M>b?(x=S,U=1):(x=b,U=-1):M<S?(x=b,U=-1):(x=S,U=1),s.push({time:A[p].time,value:x,color:U===1?"#26a69a":"#ef5350",trend:U}),c=b,d=S,f=x}return s}const gM=(A,t="#089981",e="#F23645")=>!Array.isArray(A)||A.length===0?[]:A.map(s=>({time:s.time,value:s.volume||0,color:s.close>=s.open?t:e})),zB={NSE:555,BSE:555,NFO:555,BFO:555,MCX:540,CDS:540,BCD:540,NSE_INDEX:555,BSE_INDEX:555},mM=(A="NSE")=>zB[A]||zB.NSE,VB=(A,t={})=>{const e=typeof t=="boolean"?{resetDaily:t}:t,{resetDaily:s=!0,exchange:n="NSE",resetAtMarketOpen:l=!1}=e;if(!Array.isArray(A)||A.length===0)return[];const a=[];let c=0,d=0,f=null;const p=mM(n);for(let m=0;m<A.length;m++){const v=A[m],w=v.volume||0;if(w===0){const S=(v.high+v.low+v.close)/3,x=a.length>0?a[a.length-1].value:S;a.push({time:v.time,value:x});continue}if(s){const S=new Date(v.time*1e3);let x;if(l)if(S.getHours()*60+S.getMinutes()<p){const M=new Date(S);M.setDate(M.getDate()-1),x=M.toDateString()}else x=S.toDateString();else x=S.toDateString();f!==null&&x!==f&&(c=0,d=0),f=x}const y=(v.high+v.low+v.close)/3;c+=y*w,d+=w;const b=d>0?c/d:y;a.push({time:v.time,value:b})}return a},PB={"5m":5,"10m":10,"15m":15,"30m":30,"1h":60,"2h":120,"4h":240},_M="30m",Oh={upper:{start:"#00ACC1",end:"#006064"},lower:{start:"#D81B60",end:"#880E4F"}},KB=(A,t,e)=>{const s=parseInt(A.slice(1,3),16),n=parseInt(A.slice(3,5),16),l=parseInt(A.slice(5,7),16),a=parseInt(t.slice(1,3),16),c=parseInt(t.slice(3,5),16),d=parseInt(t.slice(5,7),16),f=Math.round(s+(a-s)*e),p=Math.round(n+(c-n)*e),m=Math.round(l+(d-l)*e);return`#${f.toString(16).padStart(2,"0")}${p.toString(16).padStart(2,"0")}${m.toString(16).padStart(2,"0")}`},vM=()=>{const A={};for(let t=0;t<26;t++){const e=String.fromCharCode(65+t),s=t/25;A[e]=KB(Oh.upper.start,Oh.upper.end,s)}for(let t=0;t<26;t++){const e=String.fromCharCode(97+t),s=t/25;A[e]=KB(Oh.lower.start,Oh.lower.end,s)}return A["*"]="#9E9E9E",A},GB=vM(),BM=A=>GB[A]||GB["*"],wM=A=>typeof A=="number"?A:PB[A]||PB[_M],yM=A=>{if(!A||A.length===0)return 1;let t=1/0,e=0;for(const c of A)t=Math.min(t,c.low),e=Math.max(e,c.high);const s=(t+e)/2,n=e-t;let l;s<10?l=.05:s<50?l=.1:s<100?l=.25:s<500?l=.5:s<1e3?l=1:s<5e3?l=2:s<1e4?l=5:l=10;const a=n/l;return a>200?l=l*2:a>100?l=l*1.5:a<20&&l>.05&&(l=l/2),Math.max(.01,l)},ic=(A,t)=>Math.round(A/t)*t,aC=(A,t,e)=>{const s=[],n=ic(A,e),l=ic(t,e);for(let a=n;a<=l;a+=e)s.push(ic(a,e));return s},cC=A=>A<26?String.fromCharCode(65+A):A<52?String.fromCharCode(97+(A-26)):"*",WB=A=>{const[t,e]=A.split(":").map(Number);return t*60+e},CM=A=>new Date(A*1e3).toDateString(),bM=A=>{const t=new Date(A*1e3);return t.getHours()*60+t.getMinutes()},hC=(A,t,e,s=70)=>{if([...A.keys()].sort((p,m)=>p-m).length===0)return{vah:t,val:t};const a=[...A.values()].reduce((p,m)=>p+m.tpoCount,0)*(s/100);let c=t,d=t,f=A.get(t)?.tpoCount||0;for(;f<a;){const p=ic(c+e,e),m=ic(d-e,e),v=A.get(p)?.tpoCount||0,w=A.get(m)?.tpoCount||0;if(v===0&&w===0)break;v>=w&&v>0?(c=p,f+=v):w>0&&(d=m,f+=w)}return{vah:c,val:d}},$B=(A,t)=>{let e=-1/0,s=1/0;for(const[n,l]of A)l.letters.has(t)&&(e=Math.max(e,n),s=Math.min(s,n));return{high:e,low:s}},uC=(A,t)=>{if(A.length<2)return 0;let e=0;for(let s=1;s<A.length;s++){const n=$B(t,A[s].letter),l=$B(t,A[s-1].letter);n.high>l.high&&(e+=1),n.low<l.low&&(e-=1)}return e},dC=(A,t,e,s=2)=>{const n=A.get(t),l=A.get(e);return{poorHigh:n&&n.tpoCount<=s?t:null,poorLow:l&&l.tpoCount<=s?e:null}},fC=(A,t)=>{const e=[],s=[...A.keys()].sort((n,l)=>n-l);for(let n=1;n<s.length-1;n++){const l=A.get(s[n]),a=A.get(s[n+1]),c=A.get(s[n-1]);l.tpoCount===1&&a?.tpoCount>1&&c?.tpoCount>1&&e.push(s[n])}return e},xM=(A,t,e,s,n)=>{if(!A||A.length===0)return[];const l={sessionKey:"composite",sessionStart:A[0].time,sessionEnd:A[A.length-1].time,tickSize:t,blockSize:n,periods:[],priceLevels:new Map,poc:0,vah:0,val:0,ibHigh:0,ibLow:1/0,rangeHigh:0,rangeLow:1/0,totalTPOs:0,openPrice:A[0].open,closePrice:A[A.length-1].close,rotationFactor:0,poorHigh:null,poorLow:null,singlePrints:[],midpoint:0};A.forEach((m,v)=>{const w=cC(v);l.periods.push({letter:w,startTime:m.time,endTime:m.time});const y=aC(m.low,m.high,t);for(const b of y){l.priceLevels.has(b)||l.priceLevels.set(b,{tpoCount:0,letters:new Set,isInitialBalance:!1});const S=l.priceLevels.get(b);S.letters.has(w)||(S.letters.add(w),S.tpoCount++,l.totalTPOs++),l.rangeHigh=Math.max(l.rangeHigh,b),l.rangeLow=Math.min(l.rangeLow,b)}});let a=0;for(const[m,v]of l.priceLevels)v.tpoCount>a&&(a=v.tpoCount,l.poc=m);const{vah:c,val:d}=hC(l.priceLevels,l.poc,t,e);l.vah=c,l.val=d,A.length>0&&(l.ibHigh=A[0].high,l.ibLow=A[0].low),l.rotationFactor=uC(l.periods,l.priceLevels);const{poorHigh:f,poorLow:p}=dC(l.priceLevels,l.rangeHigh,l.rangeLow,s);return l.poorHigh=f,l.poorLow=p,l.singlePrints=fC(l.priceLevels),l.midpoint=(l.rangeHigh+l.rangeLow)/2,[l]},SM=(A,t={})=>{const{tickSize:e="auto",blockSize:s="30m",periodMinutes:n,sessionType:l="daily",sessionStart:a="09:15",sessionEnd:c="15:30",valueAreaPercent:d=70,allHours:f=!0,poorThreshold:p=2,interval:m}=t,v=n||wM(s);if(!Array.isArray(A)||A.length===0)return[];let w=!1;m?w=/^[0-9]*[DWM]$/.test(m)||m==="1D"||m==="1W"||m==="1M":A.length>=2&&(w=A[1].time-A[0].time>=86400);const y=e==="auto"||e<=0?yM(A):e,b=WB(a),S=WB(c);if(w)return xM(A,y,d,p,s);const x=new Map;for(const M of A){let N;if(l==="weekly"){const I=new Date(M.time*1e3),R=new Date(I);R.setDate(I.getDate()-I.getDay()),N=R.toDateString()}else N=CM(M.time);x.has(N)||x.set(N,[]),x.get(N).push(M)}const U=[];for(const[M,N]of x){if(N.length===0)continue;N.sort((At,ft)=>At.time-ft.time);const I={sessionKey:M,sessionStart:N[0].time,sessionEnd:N[N.length-1].time,tickSize:y,blockSize:s,periods:[],priceLevels:new Map,poc:0,vah:0,val:0,ibHigh:0,ibLow:1/0,rangeHigh:0,rangeLow:1/0,totalTPOs:0,openPrice:N[0].open,closePrice:N[N.length-1].close,rotationFactor:0,poorHigh:null,poorLow:null,singlePrints:[],midpoint:0};for(const At of N){const ft=bM(At.time);if(!f&&(ft<b||ft>=S))continue;const mt=f?ft:ft-b,at=Math.floor(mt/v),Ut=cC(at);if(!I.periods.find(E=>E.letter===Ut))I.periods.push({letter:Ut,startTime:At.time,endTime:At.time});else{const E=I.periods.find(K=>K.letter===Ut);E.endTime=At.time}const W=aC(At.low,At.high,y);for(const E of W){I.priceLevels.has(E)||I.priceLevels.set(E,{tpoCount:0,letters:new Set,isInitialBalance:!1});const K=I.priceLevels.get(E);K.letters.has(Ut)||(K.letters.add(Ut),K.tpoCount++,I.totalTPOs++),at<2&&(K.isInitialBalance=!0,I.ibHigh=Math.max(I.ibHigh,E),I.ibLow=Math.min(I.ibLow,E)),I.rangeHigh=Math.max(I.rangeHigh,E),I.rangeLow=Math.min(I.rangeLow,E)}}let R=0;for(const[At,ft]of I.priceLevels)ft.tpoCount>R&&(R=ft.tpoCount,I.poc=At);const{vah:D,val:V}=hC(I.priceLevels,I.poc,y,d);I.vah=D,I.val=V,I.ibLow===1/0&&(I.ibLow=I.rangeLow,I.ibHigh=I.rangeHigh),I.rotationFactor=uC(I.periods,I.priceLevels);const{poorHigh:lt,poorLow:dt}=dC(I.priceLevels,I.rangeHigh,I.rangeLow,p);I.poorHigh=lt,I.poorLow=dt,I.singlePrints=fC(I.priceLevels),I.midpoint=(I.rangeHigh+I.rangeLow)/2,U.push(I)}return U.sort((M,N)=>M.sessionStart-N.sessionStart),U},EM={visible:!0,showLetters:!0,showPOC:!0,showValueArea:!0,showInitialBalance:!1,showVAH:!0,showVAL:!0,showPoorHigh:!1,showPoorLow:!1,useGradientColors:!0,letterWidth:14,letterHeight:18,letterSpacing:1,maxLettersVisible:40,pocColor:"#FFEB3B",pocLineWidth:2,vahColor:"#26a69a",valColor:"#ef5350",valueAreaColor:"rgba(100, 181, 246, 0.1)",ibColor:"rgba(255, 193, 7, 0.15)",ibBorderColor:"#FFC107",fontSize:10,fontFamily:"Verdana, Arial, sans-serif"};class TM{constructor(t){this._source=t}draw(t){t.useBitmapCoordinateSpace(e=>{const{context:s,bitmapSize:n,horizontalPixelRatio:l,verticalPixelRatio:a}=e,c=this._source._profiles,d=this._source._options,f=this._source._series,p=this._source._chart;if(!f||!p||!c||c.length===0||d.visible===!1)return;const m=p.timeScale(),v=n.width;for(const w of c){const y=m.timeToCoordinate(w.sessionStart),b=m.timeToCoordinate(w.sessionEnd);if(y===null&&b===null||y===null)continue;const S=y*l;let x;b!==null?x=b*l:x=v+1e3;const U=x-S,M=this._calculateMaxCols(w,d),N=U/Math.max(1,M),I=d.letterWidth*l;let R=Math.min(I,N);R=Math.max(2*l,R);const D=M*R,V=R>=8*l;d.showValueArea&&w.vah&&w.val&&this._drawValueArea(s,f,w,d,S,D,l,a),d.showPOC&&w.poc&&this._drawPOCLine(s,f,w.poc,d,S,D,l,a),(d.showVAH||d.showVAL)&&this._drawVALines(s,f,w,d,S,D,l,a),this._drawTPOLetters(s,f,w,d,S,R,V,l,a)}})}_calculateMaxCols(t,e){let s=0;for(const n of t.priceLevels.values())n.letters.size>s&&(s=n.letters.size);return Math.min(s,e.maxLettersVisible)}_drawTPOLetters(t,e,s,n,l,a,c,d,f){const p=n.fontSize*f,m=n.letterHeight*f,v=a<4*d?0:1*d;c&&(t.font=`bold ${p}px ${n.fontFamily}`,t.textAlign="center",t.textBaseline="middle");const w=[...s.priceLevels.keys()].sort((y,b)=>b-y);for(const y of w){const b=s.priceLevels.get(y),S=e.priceToCoordinate(y);if(S===null)continue;const x=Math.round(S*f),U=[...b.letters].sort();let M=l;U.slice(0,n.maxLettersVisible).forEach(N=>{let I=n.useGradientColors?BM(N):"#26a69a";t.fillStyle=I,t.fillRect(M,x-m/2+1,a-v,m-2),c&&(t.fillStyle="#FFFFFF",t.fillText(N,Math.round(M+(a-v)/2),Math.round(x+1))),M+=a}),U.length>n.maxLettersVisible&&(t.fillStyle="#9E9E9E",c?(t.textAlign="left",t.fillText("+",M+2,x),t.textAlign="center"):t.fillRect(M,x-2,2*d,4*d))}}_drawPOCLine(t,e,s,n,l,a,c,d){const f=e.priceToCoordinate(s);if(f===null)return;const p=Math.round(f*d),m=l+a;t.beginPath(),t.strokeStyle=n.pocColor,t.lineWidth=n.pocLineWidth*c,t.setLineDash([6*c,4*c]),t.moveTo(l,p),t.lineTo(m+30*c,p),t.stroke(),t.setLineDash([]),t.fillStyle=n.pocColor,t.font=`bold ${10*d}px ${n.fontFamily}`,t.textAlign="left",t.fillText("POC",m+32*c,p+3*d)}_drawVALines(t,e,s,n,l,a,c,d){const f=l+a;if(n.showVAH&&s.vah){const p=e.priceToCoordinate(s.vah);if(p!==null){const m=Math.round(p*d);t.beginPath(),t.strokeStyle=n.vahColor,t.lineWidth=1.5*c,t.setLineDash([4*c,4*c]),t.moveTo(l,m),t.lineTo(f,m),t.stroke(),t.setLineDash([])}}if(n.showVAL&&s.val){const p=e.priceToCoordinate(s.val);if(p!==null){const m=Math.round(p*d);t.beginPath(),t.strokeStyle=n.valColor,t.lineWidth=1.5*c,t.setLineDash([4*c,4*c]),t.moveTo(l,m),t.lineTo(f,m),t.stroke(),t.setLineDash([])}}}_drawValueArea(t,e,s,n,l,a,c,d){const f=e.priceToCoordinate(s.vah),p=e.priceToCoordinate(s.val);if(f===null||p===null)return;const m=Math.round(Math.min(f,p)*d),w=Math.round(Math.max(f,p)*d)-m;t.fillStyle=n.valueAreaColor,t.fillRect(l,m,a,w)}}class QM{constructor(t){this._source=t}update(){}renderer(){return new TM(this._source)}zOrder(){return"top"}}class FM{constructor(t={}){this._options={...EM,...t},this._profiles=[],this._paneViews=[new QM(this)],this._chart=null,this._series=null,this._requestUpdate=null}attached({chart:t,series:e,requestUpdate:s}){this._chart=t,this._series=e,this._requestUpdate=s}detached(){this._chart=null,this._series=null,this._requestUpdate=null}paneViews(){return this._paneViews}updateAllViews(){this._paneViews.forEach(t=>t.update()),this._requestUpdate?.()}setData(t){this._profiles=t||[],this.updateAllViews()}options(){return this._options}applyOptions(t){this._options={...this._options,...t},this.updateAllViews()}autoscaleInfo(){return null}}const UM=A=>{if(!A||A.length===0)return[];const t=[];let e={open:(A[0].open+A[0].close)/2,close:(A[0].open+A[0].high+A[0].low+A[0].close)/4,high:A[0].high,low:A[0].low,time:A[0].time};t.push(e);for(let s=1;s<A.length;s++){const n=A[s],l=(n.open+n.high+n.low+n.close)/4,a=(e.open+e.close)/2,c=Math.max(n.high,a,l),d=Math.min(n.low,a,l),f={time:n.time,open:a,high:c,low:d,close:l};t.push(f),e=f}return t},MM=(A,t=14)=>{if(!A||A.length<t+1){if(A&&A.length>0){const l=A.map(d=>d.close),a=Math.max(...l),c=Math.min(...l);return(a-c)*.02}return 1}const e=[];for(let l=1;l<A.length;l++){const a=A[l].high,c=A[l].low,d=A[l-1].close,f=Math.max(a-c,Math.abs(a-d),Math.abs(c-d));e.push(f)}const s=e.slice(-t);return s.reduce((l,a)=>l+a,0)/s.length},IM=A=>{if(!A||A.length===0)return 1;const t=MM(A,14),e=Math.pow(10,Math.floor(Math.log10(t))),s=t/e;let n;return s<1.5?n=1:s<3.5?n=2.5:s<7.5?n=5:n=10,n*e},NM=(A,t=null)=>{if(!A||A.length===0)return[];const e=t||IM(A);if(e<=0)return A;const s=[];let n=A[0].close,l=Math.floor(n/e)*e,a=null;const c=A[0].time,d=1;let f=0;const p=(m,v,w)=>{const y=w==="up",b={time:c+f*d,open:m,high:y?v:m,low:y?m:v,close:v};return f++,b};for(let m=0;m<A.length;m++){const y=A[m].close-l;if(a===null){if(y>=e){const b=Math.floor(y/e);for(let S=0;S<b;S++){const x=l,U=l+e;s.push(p(x,U,"up")),l=U}a="up"}else if(y<=-e){const b=Math.floor(Math.abs(y)/e);for(let S=0;S<b;S++){const x=l,U=l-e;s.push(p(x,U,"down")),l=U}a="down"}}else if(a==="up"){if(y>=e){const b=Math.floor(y/e);for(let S=0;S<b;S++){const x=l,U=l+e;s.push(p(x,U,"up")),l=U}}else if(y<=-2*e){const b=Math.abs(y),S=Math.floor(b/e);for(let x=0;x<S;x++){const U=l,M=l-e;s.push(p(U,M,"down")),l=M}a="down"}}else if(a==="down"){if(y<=-e){const b=Math.floor(Math.abs(y)/e);for(let S=0;S<b;S++){const x=l,U=l-e;s.push(p(x,U,"down")),l=U}}else if(y>=2*e){const b=Math.floor(y/e);for(let S=0;S<b;S++){const x=l,U=l+e;s.push(p(x,U,"up")),l=U}a="up"}}}if(s.length===0&&A.length>0){const m=A[0],v=A[A.length-1],w=v.close>=m.close?"up":"down";s.push(p(m.close,v.close,w))}return s};function XB(A){if(A===void 0)throw new Error("Value is undefined");return A}class pC{_chart=void 0;_series=void 0;requestUpdate(){this._chart&&this._requestUpdate&&this._requestUpdate()}_requestUpdate;attached({chart:t,series:e,requestUpdate:s}){this._chart=t,this._series=e,this._series.subscribeDataChanged(this._fireDataUpdated),this._requestUpdate=s,this.requestUpdate()}detached(){this._series?.unsubscribeDataChanged(this._fireDataUpdated),this._chart=void 0,this._series=void 0,this._requestUpdate=void 0}get chart(){return XB(this._chart)}get series(){return XB(this._series)}_fireDataUpdated=t=>{this.dataUpdated&&this.dataUpdated(t)}}function id(A,t,e){const s=t.timeScale();return A.map(n=>({x:s.logicalToCoordinate(n.logical),y:e.priceToCoordinate(n.price)}))}function Le(A,t,e){return{x:t.timeScale().logicalToCoordinate(A.logical),y:e.priceToCoordinate(A.price)}}function vn(A,t,e){const s=(t.x-e.x)**2+(t.y-e.y)**2;if(s===0)return Math.hypot(A.x-t.x,A.y-t.y);let n=((A.x-t.x)*(e.x-t.x)+(A.y-t.y)*(e.y-t.y))/s;return n=Math.max(0,Math.min(1,n)),Math.hypot(A.x-(t.x+n*(e.x-t.x)),A.y-(t.y+n*(e.y-t.y)))}function Ad(A,t){const e=Math.min(t.x1,t.x2),s=Math.max(t.x1,t.x2),n=Math.min(t.y1,t.y2),l=Math.max(t.y1,t.y2);return A.x>=e&&A.x<=s&&A.y>=n&&A.y<=l}function LM(A,t,e){return Math.hypot(A.x-t.x,A.y-t.y)<=e}function nd(A,t){A.strokeStyle=t.lineColor,A.lineWidth=t.width,t.lineJoin&&(A.lineJoin=t.lineJoin),t.lineCap&&(A.lineCap=t.lineCap),t.globalAlpha!==void 0&&(A.globalAlpha=t.globalAlpha)}function rd(A){A.lineJoin="miter",A.lineCap="butt",A.globalAlpha=1,A.setLineDash([])}function Zn(A,t){const e=[[],[2,2],[6,6],[10,10],[2,10]],s=e[t]||e[0];A.setLineDash(s)}function qt(A,t,e,s="#FFFFFF",n="#2962FF"){const l=A.context;l.fillStyle=s,l.strokeStyle=n,l.lineWidth=2,l.beginPath(),l.arc(t,e,6*A.horizontalPixelRatio,0,2*Math.PI),l.fill(),l.stroke()}function zt(A,t){return Math.round(A*t)}class Es{x;y;constructor(t,e){this.x=t,this.y=e}add(t){return new Es(this.x+t.x,this.y+t.y)}addScaled(t,e){return new Es(this.x+e*t.x,this.y+e*t.y)}subtract(t){return new Es(this.x-t.x,this.y-t.y)}dotProduct(t){return this.x*t.x+this.y*t.y}crossProduct(t){return this.x*t.y-this.y*t.x}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}scaled(t){return new Es(this.x*t,this.y*t)}normalized(){const t=this.length();return t===0?new Es(0,0):this.scaled(1/t)}transposed(){return new Es(-this.y,this.x)}clone(){return new Es(this.x,this.y)}}class HM{min;max;constructor(t,e){this.min=new Es(Math.min(t.x,e.x),Math.min(t.y,e.y)),this.max=new Es(Math.max(t.x,e.x),Math.max(t.y,e.y))}}function Ac(A,t){return Math.abs(A.x-t.x)<1e-6&&Math.abs(A.y-t.y)<1e-6}function DM(A,t,e){return{a:A,b:t,c:e}}function kM(A,t){return DM(A.y-t.y,t.x-A.x,A.x*t.y-t.x*A.y)}function Ro(A,t){return[A,t]}function YB(A,t){for(let e=0;e<A.length;e++)if(Ac(A[e],t))return!1;return A.push(t),!0}function jM(A,t){if(Math.abs(A.a)<1e-6){const l=-A.c/A.b;return t.min.y<=l&&l<=t.max.y?Ro(new Es(t.min.x,l),new Es(t.max.x,l)):null}if(Math.abs(A.b)<1e-6){const l=-A.c/A.a;return t.min.x<=l&&l<=t.max.x?Ro(new Es(l,t.min.y),new Es(l,t.max.y)):null}const e=[],s=function(l){const a=-(A.c+A.a*l)/A.b;t.min.y<=a&&a<=t.max.y&&YB(e,new Es(l,a))},n=function(l){const a=-(A.c+A.b*l)/A.a;t.min.x<=a&&a<=t.max.x&&YB(e,new Es(a,l))};switch(s(t.min.x),n(t.min.y),s(t.max.x),n(t.max.y),e.length){case 0:return null;case 1:return e[0];case 2:return Ac(e[0],e[1])?e[0]:Ro(e[0],e[1])}return null}function JB(A,t,e){const s=t.subtract(A),n=[];if(s.x!==0){const l=(e.min.x-A.x)/s.x,a=A.y+l*s.y;l>=0&&a>=e.min.y&&a<=e.max.y&&n.push({t:l,p:new Es(e.min.x,a)})}if(s.x!==0){const l=(e.max.x-A.x)/s.x,a=A.y+l*s.y;l>=0&&a>=e.min.y&&a<=e.max.y&&n.push({t:l,p:new Es(e.max.x,a)})}if(s.y!==0){const l=(e.min.y-A.y)/s.y,a=A.x+l*s.x;l>=0&&a>=e.min.x&&a<=e.max.x&&n.push({t:l,p:new Es(a,e.min.y)})}if(s.y!==0){const l=(e.max.y-A.y)/s.y,a=A.x+l*s.x;l>=0&&a>=e.min.x&&a<=e.max.x&&n.push({t:l,p:new Es(a,e.max.y)})}return n.length===0?null:(n.sort((l,a)=>l.t-a.t),n[0].p)}function gC(A,t,e,s,n,l){if(Ac(A,t))return null;const a=new Es(0,0),c=new Es(e,s),d=new HM(a,c);if(n)if(l){const f=jM(kM(A,t),d);return Array.isArray(f)?f:null}else{const f=JB(t,A,d);return f===null||Ac(t,f)?null:Ro(t,f)}if(l){const f=JB(A,t,d);return f===null||Ac(A,f)?null:Ro(A,f)}else return Ro(A,t)}function OM(A,t,e){const s=.5*e,n=Math.sqrt(2),l=t.subtract(A).normalized();let a=1;e===1?a=3.5:e===2?a=2:e===3?a=1.5:e===4&&(a=1.25);const c=5*e*a,d=1*s;if(c*n*.2<=d)return[];const f=l.scaled(c),p=t.subtract(f),m=l.transposed(),v=1*c,w=m.scaled(v),y=p.add(w),b=p.subtract(w),S=y.subtract(t).normalized().scaled(d),x=b.subtract(t).normalized().scaled(d),U=t.add(S),M=t.add(x),N=s*(n-1),I=m.scaled(N),R=Math.min(c-1*s/n,s*n*1),D=l.scaled(R),V=t.subtract(I),lt=t.add(I),dt=t.subtract(D);return[[y,U],[b,M],[V,dt.subtract(I)],[lt,dt.add(I)]]}let RM=class{_p1;_p2;_options;_selected;constructor(t,e,s,n){this._p1=t,this._p2=e,this._options=s,this._selected=n}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._p1.x===null||this._p1.y===null||this._p2.x===null||this._p2.y===null)return;const s=e.context,n=zt(this._p1.x,e.horizontalPixelRatio),l=zt(this._p1.y,e.verticalPixelRatio),a=zt(this._p2.x,e.horizontalPixelRatio),c=zt(this._p2.y,e.verticalPixelRatio),d=new Es(n,l),f=new Es(a,c),p=e.mediaSize.width*e.horizontalPixelRatio,m=e.mediaSize.height*e.verticalPixelRatio,v=gC(d,f,p,m,!!this._options.extendLeft,!!this._options.extendRight);v&&(s.lineWidth=this._options.width,s.strokeStyle=this._options.lineColor,s.lineCap="butt",Zn(s,this._options.lineStyle||0),s.beginPath(),s.moveTo(v[0].x,v[0].y),s.lineTo(v[1].x,v[1].y),s.stroke(),s.setLineDash([])),this._options.leftEnd===1&&this._drawArrow(s,f,d,this._options.width),this._options.rightEnd===1&&this._drawArrow(s,d,f,this._options.width),this._selected&&(qt(e,n,l),qt(e,a,c))})}_drawArrow(t,e,s,n){const l=OM(e,s,n);if(l.length!==0){t.beginPath();for(const[a,c]of l)t.moveTo(a.x,a.y),t.lineTo(c.x,c.y);t.stroke()}}};class zM{_source;_p1={x:null,y:null};_p2={x:null,y:null};constructor(t){this._source=t}update(){this._p1=Le(this._source._p1,this._source._chart,this._source._series),this._p2=Le(this._source._p2,this._source._chart,this._source._series)}renderer(){return new RM(this._p1,this._p2,this._source._options,this._source._selected)}}const VM={lineColor:"rgb(0, 0, 0)",width:2,lineStyle:0,extendLeft:!1,extendRight:!1,leftEnd:0,rightEnd:0,locked:!1};class Bl{_chart;_series;_p1;_p2;_paneViews;_options;_selected=!1;_locked=!1;_alertId;constructor(t,e,s,n,l){this._chart=t,this._series=e,this._p1=s,this._p2=n,this._options={...VM,...l},this._paneViews=[new zM(this)]}updatePoints(t,e){this._p1=t,this._p2=e,this.updateAllViews()}updatePointByIndex(t,e){t===0?this._p1=e:t===1&&(this._p2=e),this.updateAllViews()}setAlertId(t){this._alertId=t}getPriceAtLogical(t){if(this._p1.logical===null||this._p1.price===null||this._p2.logical===null||this._p2.price===null||this._p1.logical===this._p2.logical)return null;const e=(this._p2.price-this._p1.price)/(this._p2.logical-this._p1.logical),s=this._p1.price+e*(t-this._p1.logical);return!this._options.extendLeft&&t<Math.min(this._p1.logical,this._p2.logical)||!this._options.extendRight&&t>Math.max(this._p1.logical,this._p2.logical)?null:s}setSelected(t){this._selected=t,this.updateAllViews()}applyOptions(t){this._options={...this._options,...t},this.updateAllViews(),this._chart.timeScale().applyOptions({})}toolHitTest(t,e){const s=this._chart.timeScale(),n=this._series,l=s.logicalToCoordinate(this._p1.logical),a=n.priceToCoordinate(this._p1.price),c=s.logicalToCoordinate(this._p2.logical),d=n.priceToCoordinate(this._p2.price);if(l===null||a===null||c===null||d===null)return null;const f=8;if(Math.hypot(t-l,e-a)<f)return{hit:!0,type:"point",index:0};if(Math.hypot(t-c,e-d)<f)return{hit:!0,type:"point",index:1};const p=this._chart.chartElement?.(),m=p?.clientWidth||window.innerWidth,v=p?.clientHeight||window.innerHeight,w=new Es(l,a),y=new Es(c,d),b=gC(w,y,m,v,!!this._options.extendLeft,!!this._options.extendRight);if(b){if(vn({x:t,y:e},b[0],b[1])<5)return{hit:!0,type:"line"}}else if(vn({x:t,y:e},{x:l,y:a},{x:c,y:d})<5)return{hit:!0,type:"line"};return null}autoscaleInfo(){return null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}function PM(A,t){const e=[[],[2,2],[6,6],[10,10],[2,10]],s=e[t]||e[0];A.setLineDash(s)}function KM(A,t,e,s="#FFFFFF",n="#2962FF"){const l=A.context;l.fillStyle=s,l.strokeStyle=n,l.lineWidth=2,l.beginPath(),l.arc(t,e,6*A.horizontalPixelRatio,0,2*Math.PI),l.fill(),l.stroke()}function GM(A,t){return Math.round(A*t)}class WM{_y;_options;_selected;constructor(t,e,s){this._y=t,this._options=e,this._selected=s}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._y===null)return;const s=e.context,n=GM(this._y,e.verticalPixelRatio),l=e.mediaSize.width*e.horizontalPixelRatio;s.lineWidth=this._options.width,s.strokeStyle=this._options.lineColor,PM(s,this._options.lineStyle),s.beginPath(),s.moveTo(0,n),s.lineTo(l,n),s.stroke(),s.setLineDash([]),this._selected&&KM(e,l-30*e.horizontalPixelRatio,n)})}}class $M{_source;_y=null;constructor(t){this._source=t}update(){this._y=this._source._series.priceToCoordinate(this._source._price)}renderer(){return new WM(this._y,this._source._options,this._source._selected)}}const XM={lineColor:"#2962FF",width:2,lineStyle:0,locked:!1};class Io{_chart;_series;_price;_paneViews;_options;_selected=!1;_locked=!1;constructor(t,e,s,n){this._chart=t,this._series=e,this._price=s,this._options={...XM,...n},this._paneViews=[new $M(this)]}updatePrice(t){this._price=t,this.updateAllViews()}applyOptions(t){Object.assign(this._options,t),this.updateAllViews(),this._chart.timeScale().applyOptions({})}setSelected(t){this._selected=t,this.updateAllViews()}toolHitTest(t,e){const s=this._series.priceToCoordinate(this._price);if(s===null)return null;const n=(this._chart.chartElement?.()?.clientWidth||window.innerWidth)-30;return Math.hypot(t-n,e-s)<8?{hit:!0,type:"point",index:0}:Math.abs(e-s)<5?{hit:!0,type:"line"}:null}autoscaleInfo(t,e){return null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}class YM{_x;_y;_options;_selected;constructor(t,e,s,n){this._x=t,this._y=e,this._options=s,this._selected=n}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._x===null||this._y===null)return;const s=e.context,n=zt(this._x,e.horizontalPixelRatio),l=zt(this._y,e.verticalPixelRatio),a=e.mediaSize.width*e.horizontalPixelRatio;s.lineWidth=this._options.width,s.strokeStyle=this._options.lineColor,Zn(s,this._options.lineStyle),s.beginPath(),s.moveTo(n,l),s.lineTo(a,l),s.stroke(),s.setLineDash([]),this._selected&&qt(e,n,l)})}}class JM{_source;_x=null;_y=null;constructor(t){this._source=t}update(){const t=this._source._chart.timeScale();this._x=t.logicalToCoordinate(this._source._point.logical),this._y=this._source._series.priceToCoordinate(this._source._point.price)}renderer(){return new YM(this._x,this._y,this._source._options,this._source._selected)}}const qM={lineColor:"#2962FF",width:2,lineStyle:0};class No{_chart;_series;_point;_paneViews;_options;_selected=!1;constructor(t,e,s,n){this._chart=t,this._series=e,this._point=s,this._options={...qM,...n},this._paneViews=[new JM(this)]}updatePoint(t){this._point=t,this.updateAllViews()}applyOptions(t){Object.assign(this._options,t),this.updateAllViews(),this._chart.timeScale().applyOptions({})}setSelected(t){this._selected=t,this.updateAllViews()}toolHitTest(t,e){const s=this._chart.timeScale().logicalToCoordinate(this._point.logical),n=this._series.priceToCoordinate(this._point.price);return s===null||n===null?null:Math.hypot(t-s,e-n)<8?{hit:!0,type:"point",index:0}:t>=s&&Math.abs(e-n)<5?{hit:!0,type:"line"}:null}autoscaleInfo(){return null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}class ZM{_x;_text;_options;_selected;constructor(t,e,s,n){this._x=t,this._text=e,this._options=s,this._selected=n}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._x===null)return;const s=e.context,n=zt(this._x,e.horizontalPixelRatio),l=e.mediaSize.height*e.verticalPixelRatio;s.lineWidth=this._options.width,s.strokeStyle=this._options.lineColor,Zn(s,this._options.lineStyle),s.beginPath(),s.moveTo(n,0),s.lineTo(n,l),s.stroke(),s.setLineDash([]),this._options.showLabel&&this._text&&this._drawTextLabel(e,this._text,n,l-20*e.verticalPixelRatio),this._selected&&qt(e,n,l-30*e.verticalPixelRatio)})}_drawTextLabel(t,e,s,n){const l=t.context;l.font="12px Arial",l.beginPath();const a=4*t.horizontalPixelRatio,c=l.measureText(e).width,d=16*t.verticalPixelRatio;l.fillStyle=this._options.labelBackgroundColor,l.roundRect(s-c/2-a,n-d/2,c+a*2,d,4),l.fill(),l.beginPath(),l.fillStyle=this._options.labelTextColor,l.textBaseline="middle",l.textAlign="center",l.fillText(e,s,n),l.textAlign="left"}}class t6{_source;_x=null;constructor(t){this._source=t}update(){const t=this._source._chart.timeScale();this._x=t.logicalToCoordinate(this._source._logical)}renderer(){return new ZM(this._x,"",this._source._options,this._source._selected)}}const e6={lineColor:"#2962FF",width:2,lineStyle:0,showLabel:!1,labelBackgroundColor:"rgba(255, 255, 255, 0.85)",labelTextColor:"rgb(0, 0, 0)",locked:!1};let Lo=class{_chart;_series;_logical;_paneViews;_options;_selected=!1;_locked=!1;constructor(t,e,s,n){this._chart=t,this._series=e,this._logical=s,this._options={...e6,...n},this._paneViews=[new t6(this)]}updatePosition(t){this._logical=t,this.updateAllViews()}setSelected(t){this._selected=t,this.updateAllViews()}applyOptions(t){Object.assign(this._options,t),this.updateAllViews(),this._chart.timeScale().applyOptions({})}toolHitTest(t,e){const s=this._chart.timeScale().logicalToCoordinate(this._logical);if(s===null)return null;const n=(this._chart.chartElement?.()?.clientHeight||window.innerHeight)-30;return Math.hypot(t-s,e-n)<8?{hit:!0,type:"point",index:0}:Math.abs(t-s)<5?{hit:!0,type:"line"}:null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}};class s6{_p1;_p2;_options;_selected;constructor(t,e,s,n){this._p1=t,this._p2=e,this._options=s,this._selected=n}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._p1.x===null||this._p1.y===null||this._p2.x===null||this._p2.y===null)return;const s=e.context,n=zt(this._p1.x,e.horizontalPixelRatio),l=zt(this._p1.y,e.verticalPixelRatio),a=zt(this._p2.x,e.horizontalPixelRatio),c=zt(this._p2.y,e.verticalPixelRatio),d=a-n,f=c-l;s.lineWidth=this._options.width,s.strokeStyle=this._options.lineColor,s.lineWidth=this._options.width,s.strokeStyle=this._options.lineColor,s.fillStyle=this._options.backgroundColor,Zn(s,this._options.lineStyle),s.beginPath(),s.rect(n,l,d,f),s.fill(),s.stroke(),this._selected&&(qt(e,n,l),qt(e,a,c),qt(e,n,c),qt(e,a,l))})}}class i6{_source;_p1={x:null,y:null};_p2={x:null,y:null};constructor(t){this._source=t}update(){this._p1=Le(this._source._p1,this._source._chart,this._source._series),this._p2=Le(this._source._p2,this._source._chart,this._source._series)}renderer(){return new s6(this._p1,this._p2,this._source._options,this._source._selected)}}const A6={lineColor:"rgb(41, 98, 255)",width:2,backgroundColor:"rgba(41, 98, 255, 0.2)",lineStyle:0,locked:!1};class Ho{_chart;_series;_p1;_p2;_paneViews;_options;_selected=!1;_locked=!1;constructor(t,e,s,n,l){this._chart=t,this._series=e,this._p1=s,this._p2=n,this._options={...A6,...l},this._paneViews=[new i6(this)]}updatePoints(t,e){this._p1=t,this._p2=e,this.updateAllViews()}updatePointByIndex(t,e){t===0?this._p1=e:t===1?this._p2=e:t===2?(this._p2={...this._p2,logical:e.logical},this._p1={...this._p1,price:e.price}):t===3&&(this._p1={...this._p1,logical:e.logical},this._p2={...this._p2,price:e.price}),this.updateAllViews()}setSelected(t){this._selected=t,this.updateAllViews()}applyOptions(t){Object.assign(this._options,t),this.updateAllViews(),this._chart.timeScale().applyOptions({})}toolHitTest(t,e){const s=this._chart.timeScale(),n=this._series,l=s.logicalToCoordinate(this._p1.logical),a=n.priceToCoordinate(this._p1.price),c=s.logicalToCoordinate(this._p2.logical),d=n.priceToCoordinate(this._p2.price);if(l===null||a===null||c===null||d===null)return null;const f=8;return Math.hypot(t-l,e-a)<f?{hit:!0,type:"point",index:0}:Math.hypot(t-c,e-d)<f?{hit:!0,type:"point",index:1}:Math.hypot(t-c,e-a)<f?{hit:!0,type:"point",index:2}:Math.hypot(t-l,e-d)<f?{hit:!0,type:"point",index:3}:Ad({x:t,y:e},{x1:l,y1:a,x2:c,y2:d})?{hit:!0,type:"shape"}:null}autoscaleInfo(){return null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}class n6{_point;_text;_options;_selected;constructor(t,e,s,n){this._point=t,this._text=e,this._options=s,this._selected=n}draw(t){t.useMediaCoordinateSpace(e=>{if(this._point.x===null||this._point.y===null)return;const s=e.context,n=this._point.x,l=this._point.y;s.font=`${this._options.fontSize}px ${this._options.fontFamily}`,s.fillStyle=this._options.color,s.textBaseline="middle",s.fillText(this._text,n,l),this._selected&&(s.fillStyle="#FFFFFF",s.strokeStyle="#2962FF",s.lineWidth=2,s.beginPath(),s.arc(n,l,6,0,2*Math.PI),s.fill(),s.stroke())})}}class r6{_source;_point={x:null,y:null};constructor(t){this._source=t}update(){this._point=Le(this._source._point,this._source._chart,this._source._series)}renderer(){return new n6(this._point,this._source._text,this._source._options,this._source._selected)}}const l6={color:"rgb(0, 0, 0)",fontSize:14,fontFamily:"Arial",locked:!1};class Ag{_chart;_series;_point;_text;_paneViews;_options;_selected=!1;_locked=!1;_onTextEdit=null;constructor(t,e,s,n,l){this._chart=t,this._series=e,this._point=s,this._text=n,this._options={...l6,...l},this._paneViews=[new r6(this)]}updatePoint(t){this._point=t,this.updateAllViews()}updateText(t){this._text=t,this.updateAllViews()}setOnTextEdit(t){this._onTextEdit=t}editText(){this._onTextEdit&&this._onTextEdit(this._text)}setSelected(t){this._selected=t,this.updateAllViews()}applyOptions(t){Object.assign(this._options,t),this.updateAllViews(),this._chart.timeScale().applyOptions({})}updatePointByIndex(t,e){t===0&&(this._point=e,this.updateAllViews())}toolHitTest(t,e){const s=this._chart.timeScale(),n=this._series,l=s.logicalToCoordinate(this._point.logical),a=n.priceToCoordinate(this._point.price);if(l===null||a===null)return null;const c=this._options.fontSize,d=c*.6,f=this._text.length*d,p=c;return t>=l&&t<=l+f&&e>=a-p/2&&e<=a+p/2?{hit:!0,type:"point",index:0}:Math.hypot(t-l,e-a)<8?{hit:!0,type:"point",index:0}:null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}class o6{_p1;_p2;_p3;_options;_selected;constructor(t,e,s,n,l){this._p1=t,this._p2=e,this._p3=s,this._options=n,this._selected=l}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._p1.x===null||this._p1.y===null||this._p2.x===null||this._p2.y===null||this._p3.x===null||this._p3.y===null)return;const s=e.context,n=zt(this._p1.x,e.horizontalPixelRatio),l=zt(this._p1.y,e.verticalPixelRatio),a=zt(this._p2.x,e.horizontalPixelRatio),c=zt(this._p2.y,e.verticalPixelRatio),d=zt(this._p3.x,e.horizontalPixelRatio),f=zt(this._p3.y,e.verticalPixelRatio),p=n,m=l,v=a,w=c;let y=0;if(a!==n){const I=(c-l)/(a-n),R=l+I*(d-n);y=f-R}const b=l+y,S=c+y,x=n,U=a,M=l+y/2,N=c+y/2;s.lineWidth=this._options.width,s.strokeStyle=this._options.lineColor,s.fillStyle=this._options.backgroundColor,Zn(s,this._options.lineStyle),s.beginPath(),s.moveTo(p,m),s.lineTo(v,w),s.lineTo(U,S),s.lineTo(x,b),s.closePath(),s.fill(),s.beginPath(),s.moveTo(p,m),s.lineTo(v,w),s.stroke(),s.beginPath(),s.moveTo(x,b),s.lineTo(U,S),s.stroke(),s.beginPath(),s.moveTo(p,m),s.lineTo(x,b),s.stroke(),s.beginPath(),s.moveTo(v,w),s.lineTo(U,S),s.stroke(),this._options.showMiddle&&(s.setLineDash([5*e.horizontalPixelRatio,5*e.horizontalPixelRatio]),s.beginPath(),s.moveTo(n,M),s.lineTo(a,N),s.stroke(),s.setLineDash([])),this._selected&&(qt(e,p,m),qt(e,v,w),qt(e,x,b),qt(e,U,S))})}}class a6{_source;_p1={x:null,y:null};_p2={x:null,y:null};_p3={x:null,y:null};constructor(t){this._source=t}update(){this._p1=Le(this._source._p1,this._source._chart,this._source._series),this._p2=Le(this._source._p2,this._source._chart,this._source._series),this._p3=Le(this._source._p3,this._source._chart,this._source._series)}renderer(){return new o6(this._p1,this._p2,this._p3,this._source._options,this._source._selected)}}const c6={lineColor:"rgb(33, 150, 243)",backgroundColor:"rgba(33, 150, 243, 0.2)",width:1,lineStyle:0,showMiddle:!0,locked:!1};class wl{_chart;_series;_p1;_p2;_p3;_paneViews;_options;_selected=!1;_locked=!1;constructor(t,e,s,n,l,a){this._chart=t,this._series=e,this._p1=s,this._p2=n,this._p3=l,this._options={...c6,...a},this._paneViews=[new a6(this)]}updatePoints(t,e,s){this._p1=t,this._p2=e,this._p3=s,this.updateAllViews()}updatePointByIndex(t,e){t===0?this._p1=e:t===1?this._p2=e:t===2&&(this._p3=e),this.updateAllViews()}setSelected(t){this._selected=t,this.updateAllViews()}applyOptions(t){Object.assign(this._options,t),this.updateAllViews(),this._chart.timeScale().applyOptions({})}toolHitTest(t,e){const s=this._chart.timeScale(),n=this._series,l=s.logicalToCoordinate(this._p1.logical),a=n.priceToCoordinate(this._p1.price),c=s.logicalToCoordinate(this._p2.logical),d=n.priceToCoordinate(this._p2.price),f=s.logicalToCoordinate(this._p3.logical),p=n.priceToCoordinate(this._p3.price);if(l===null||a===null||c===null||d===null||f===null||p===null)return null;let m=0;if(c!==l){const x=(d-a)/(c-l),U=a+x*(f-l);m=p-U}else m=p-a;const v=8;if(Math.hypot(t-l,e-a)<v)return{hit:!0,type:"point",index:0};if(Math.hypot(t-c,e-d)<v)return{hit:!0,type:"point",index:1};if(Math.hypot(t-l,e-(a+m))<v)return{hit:!0,type:"point",index:2};if(Math.hypot(t-c,e-(d+m))<v)return{hit:!0,type:"point",index:2};const w=Math.min(l,c),y=Math.max(l,c),b=Math.min(a,d,a+m,d+m),S=Math.max(a,d,a+m,d+m);return t>=w&&t<=y&&e>=b&&e<=S?{hit:!0,type:"shape"}:null}autoscaleInfo(){return null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}class h6{_p1;_p2;_p1Price;_p2Price;_priceToCoordinate;_options;_selected;constructor(t,e,s,n,l,a,c){this._p1=t,this._p2=e,this._p1Price=s,this._p2Price=n,this._priceToCoordinate=l,this._options=a,this._selected=c}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._p1.x===null||this._p1.y===null||this._p2.x===null||this._p2.y===null)return;const s=e.context,n=zt(this._p1.x,e.horizontalPixelRatio),l=zt(this._p2.x,e.horizontalPixelRatio),a=zt(this._p1.y,e.verticalPixelRatio),c=zt(this._p2.y,e.verticalPixelRatio);s.lineWidth=1,s.strokeStyle="rgba(120, 120, 120, 0.5)",s.setLineDash([5,5]),s.beginPath(),s.moveTo(n,a),s.lineTo(l,c),s.stroke(),s.setLineDash([]);const d=this._p2Price-this._p1Price,f=Math.min(n,l),p=Math.max(n,l);this._options.levels.forEach(m=>{const v=this._p2Price-d*m.coeff,w=this._priceToCoordinate(v);if(w!==null){const y=zt(w,e.verticalPixelRatio);s.lineWidth=this._options.width,s.strokeStyle=m.color,s.beginPath(),s.moveTo(f,y),s.lineTo(p,y),s.stroke(),s.font="10px Arial",s.fillStyle=m.color,s.fillText(`${m.coeff} (${v.toFixed(2)})`,f+2,y-2)}}),this._selected&&(qt(e,n,a),qt(e,l,c))})}}class u6{_source;_p1={x:null,y:null};_p2={x:null,y:null};constructor(t){this._source=t}update(){this._p1=Le(this._source._p1,this._source._chart,this._source._series),this._p2=Le(this._source._p2,this._source._chart,this._source._series)}renderer(){return new h6(this._p1,this._p2,this._source._p1.price,this._source._p2.price,t=>this._source._series.priceToCoordinate(t),this._source._options,this._source._selected)}}const d6={width:1,levels:[{coeff:0,color:"#787b86"},{coeff:.236,color:"#f44336"},{coeff:.382,color:"#81c784"},{coeff:.5,color:"#4caf50"},{coeff:.618,color:"#009688"},{coeff:.786,color:"#64b5f6"},{coeff:1,color:"#787b86"},{coeff:1.618,color:"#2962ff"}]};class ng{_chart;_series;_p1;_p2;_paneViews;_options;_selected=!1;constructor(t,e,s,n,l){this._chart=t,this._series=e,this._p1=s,this._p2=n,this._options={...d6,...l},this._paneViews=[new u6(this)]}updatePoints(t,e){this._p1=t,this._p2=e,this.updateAllViews()}updatePointByIndex(t,e){t===0?this._p1=e:t===1&&(this._p2=e),this.updateAllViews()}setSelected(t){this._selected=t,this.updateAllViews()}applyOptions(t){Object.assign(this._options,t),this.updateAllViews(),this._chart.timeScale().applyOptions({})}toolHitTest(t,e){const s=this._chart.timeScale(),n=this._series,l=s.logicalToCoordinate(this._p1.logical),a=n.priceToCoordinate(this._p1.price),c=s.logicalToCoordinate(this._p2.logical),d=n.priceToCoordinate(this._p2.price);if(l===null||a===null||c===null||d===null)return null;const f=8;if(Math.hypot(t-l,e-a)<f)return{hit:!0,type:"point",index:0};if(Math.hypot(t-c,e-d)<f)return{hit:!0,type:"point",index:1};if(vn({x:t,y:e},{x:l,y:a},{x:c,y:d})<5)return{hit:!0,type:"line"};const p=this._p2.price-this._p1.price,m=Math.min(l,c),v=Math.max(l,c);for(const w of this._options.levels){const y=this._p2.price-p*w.coeff,b=n.priceToCoordinate(y);if(b!==null&&Math.abs(e-b)<5&&t>=m&&t<=v)return{hit:!0,type:"line"}}return null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}class f6{_p1;_p2;_p3;_options;_selected;constructor(t,e,s,n,l){this._p1=t,this._p2=e,this._p3=s,this._options=n,this._selected=l}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._p1.x===null||this._p1.y===null||this._p2.x===null||this._p2.y===null||this._p3.x===null||this._p3.y===null)return;const s=e.context,n=zt(this._p1.x,e.horizontalPixelRatio),l=zt(this._p1.y,e.verticalPixelRatio),a=zt(this._p2.x,e.horizontalPixelRatio),c=zt(this._p2.y,e.verticalPixelRatio),d=zt(this._p3.x,e.horizontalPixelRatio),f=zt(this._p3.y,e.verticalPixelRatio);s.lineWidth=this._options.width,s.strokeStyle=this._options.lineColor,s.lineWidth=this._options.width,s.strokeStyle=this._options.lineColor,s.fillStyle=this._options.backgroundColor,Zn(s,this._options.lineStyle),s.beginPath(),s.moveTo(n,l),s.lineTo(a,c),s.lineTo(d,f),s.closePath(),s.fill(),s.stroke(),this._selected&&(qt(e,n,l),qt(e,a,c),qt(e,d,f))})}}class p6{_source;_p1={x:null,y:null};_p2={x:null,y:null};_p3={x:null,y:null};constructor(t){this._source=t}update(){this._p1=Le(this._source._p1,this._source._chart,this._source._series),this._p2=Le(this._source._p2,this._source._chart,this._source._series),this._p3=Le(this._source._p3,this._source._chart,this._source._series)}renderer(){return new f6(this._p1,this._p2,this._p3,this._source._options,this._source._selected)}}const g6={lineColor:"rgb(33, 150, 243)",backgroundColor:"rgba(33, 150, 243, 0.2)",width:1,lineStyle:0,locked:!1};class Rh{_chart;_series;_p1;_p2;_p3;_paneViews;_options;_selected=!1;_locked=!1;constructor(t,e,s,n,l,a){this._chart=t,this._series=e,this._p1=s,this._p2=n,this._p3=l,this._options={...g6,...a},this._paneViews=[new p6(this)]}updatePoints(t,e,s){this._p1=t,this._p2=e,this._p3=s,this.updateAllViews()}updatePointByIndex(t,e){t===0?this._p1=e:t===1?this._p2=e:t===2&&(this._p3=e),this.updateAllViews()}setSelected(t){this._selected=t,this.updateAllViews()}applyOptions(t){Object.assign(this._options,t),this.updateAllViews(),this._chart.timeScale().applyOptions({})}toolHitTest(t,e){const s=this._chart.timeScale(),n=this._series,l=s.logicalToCoordinate(this._p1.logical),a=n.priceToCoordinate(this._p1.price),c=s.logicalToCoordinate(this._p2.logical),d=n.priceToCoordinate(this._p2.price),f=s.logicalToCoordinate(this._p3.logical),p=n.priceToCoordinate(this._p3.price);if(l===null||a===null||c===null||d===null||f===null||p===null)return null;const m=8;return Math.hypot(t-l,e-a)<m?{hit:!0,type:"point",index:0}:Math.hypot(t-c,e-d)<m?{hit:!0,type:"point",index:1}:Math.hypot(t-f,e-p)<m?{hit:!0,type:"point",index:2}:this._isPointInTriangle({x:t,y:e},{x:l,y:a},{x:c,y:d},{x:f,y:p})?{hit:!0,type:"shape"}:null}autoscaleInfo(){return null}_isPointInTriangle(t,e,s,n){const l=.5*(-s.y*n.x+e.y*(-s.x+n.x)+e.x*(s.y-n.y)+s.x*n.y),a=1/(2*l)*(e.y*n.x-e.x*n.y+(n.y-e.y)*t.x+(e.x-n.x)*t.y),c=1/(2*l)*(e.x*s.y-e.y*s.x+(e.y-s.y)*t.x+(s.x-e.x)*t.y);return a>=0&&c>=0&&a+c<=1}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}class m6{_p1;_p2;_p3;_options;_selected;constructor(t,e,s,n,l){this._p1=t,this._p2=e,this._p3=s,this._options=n,this._selected=l}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._p1.x===null||this._p1.y===null||this._p2.x===null||this._p2.y===null||this._p3.x===null||this._p3.y===null)return;const s=e.context,n=zt(this._p1.x,e.horizontalPixelRatio),l=zt(this._p1.y,e.verticalPixelRatio),a=zt(this._p2.x,e.horizontalPixelRatio),c=zt(this._p2.y,e.verticalPixelRatio),d=zt(this._p3.x,e.horizontalPixelRatio),f=zt(this._p3.y,e.verticalPixelRatio);this._options.backgroundColor&&(s.beginPath(),s.moveTo(n,l),s.quadraticCurveTo(a,c,d,f),s.lineTo(d,f),s.lineTo(n,l),s.closePath(),s.fillStyle=this._options.backgroundColor,s.fill()),s.beginPath(),s.moveTo(n,l),s.quadraticCurveTo(a,c,d,f),s.lineWidth=this._options.width*e.horizontalPixelRatio,s.strokeStyle=this._options.lineColor,Zn(s,this._options.lineStyle),s.stroke(),this._selected&&(qt(e,n,l),qt(e,a,c),qt(e,d,f))})}}class _6{_source;_p1={x:null,y:null};_p2={x:null,y:null};_p3={x:null,y:null};constructor(t){this._source=t}update(){this._p1=Le(this._source._p1,this._source._chart,this._source._series),this._p2=Le(this._source._p2,this._source._chart,this._source._series),this._p3=Le(this._source._p3,this._source._chart,this._source._series)}renderer(){return new m6(this._p1,this._p2,this._p3,this._source._options,this._source._selected)}}const v6={lineColor:"#2962FF",backgroundColor:"rgba(41, 98, 255, 0.2)",width:2,lineStyle:0,locked:!1};class zh{_chart;_series;_p1;_p2;_p3;_paneViews;_options;_selected=!1;_locked=!1;constructor(t,e,s,n,l,a){this._chart=t,this._series=e,this._p1=s,this._p2=n,this._p3=l,this._options={...v6,...a},this._paneViews=[new _6(this)]}updatePoints(t,e,s){this._p1=t,this._p2=e,this._p3=s,this.updateAllViews()}updatePointByIndex(t,e){t===0?this._p1=e:t===1?this._p2=e:t===2&&(this._p3=e),this.updateAllViews()}setSelected(t){this._selected=t,this.updateAllViews()}applyOptions(t){Object.assign(this._options,t),this.updateAllViews(),this._chart.timeScale().applyOptions({})}toolHitTest(t,e){const s=this._chart.timeScale(),n=this._series,l=s.logicalToCoordinate(this._p1.logical),a=n.priceToCoordinate(this._p1.price),c=s.logicalToCoordinate(this._p2.logical),d=n.priceToCoordinate(this._p2.price),f=s.logicalToCoordinate(this._p3.logical),p=n.priceToCoordinate(this._p3.price);if(l===null||a===null||c===null||d===null||f===null||p===null)return null;const m=8;return Math.hypot(t-l,e-a)<m?{hit:!0,type:"point",index:0}:Math.hypot(t-c,e-d)<m?{hit:!0,type:"point",index:1}:Math.hypot(t-f,e-p)<m?{hit:!0,type:"point",index:2}:this._isNearCurve(t,e,l,a,c,d,f,p)?{hit:!0,type:"shape"}:null}_isNearCurve(t,e,s,n,l,a,c,d){for(let p=0;p<=1;p+=.05){const m=(1-p)*(1-p)*s+2*(1-p)*p*l+p*p*c,v=(1-p)*(1-p)*n+2*(1-p)*p*a+p*p*d;if(Math.hypot(t-m,e-v)<10)return!0}return!1}autoscaleInfo(){return null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}class B6{_points;_options;_selected;constructor(t,e,s){this._points=t,this._options=e,this._selected=s}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._points.length<2)return;const s=e.context;nd(s,{lineColor:this._options.lineColor,width:this._options.width,lineJoin:"round",lineCap:"round",globalAlpha:this._options.opacity});const n=[];for(const l of this._points)l.x===null||l.y===null||n.push({x:zt(l.x,e.horizontalPixelRatio),y:zt(l.y,e.verticalPixelRatio)});if(!(n.length<2)){if(s.beginPath(),s.moveTo(n[0].x,n[0].y),n.length===2)s.lineTo(n[1].x,n[1].y);else if(this._options.useSmoothCurve===!1)for(let l=1;l<n.length;l++)s.lineTo(n[l].x,n[l].y);else{s.moveTo(n[0].x,n[0].y);let l=1;for(;l<n.length-2;l++){const a=(n[l].x+n[l+1].x)/2,c=(n[l].y+n[l+1].y)/2;s.quadraticCurveTo(n[l].x,n[l].y,a,c)}s.quadraticCurveTo(n[l].x,n[l].y,n[l+1].x,n[l+1].y)}if(s.stroke(),this._selected&&!this._options.useSmoothCurve)for(const l of n)qt(e,l.x,l.y);rd(s)}})}}class w6{_source;_points=[];constructor(t){this._source=t}update(){this._points=id(this._source._points,this._source._chart,this._source._series)}renderer(){return new B6(this._points,this._source._options,this._source._selected)}}const rg={brush:{lineColor:"rgba(0, 0, 0, 0.8)",width:2,opacity:1,useSmoothCurve:!0},highlighter:{lineColor:"rgba(255, 235, 59, 0.6)",width:20,opacity:.6,useSmoothCurve:!0},path:{lineColor:"rgba(33, 150, 243, 1)",width:2,opacity:1,useSmoothCurve:!1}},y6={lineColor:"rgba(0, 0, 0, 0.8)",width:2,opacity:1,useSmoothCurve:!0,locked:!1};class ml{_chart;_series;_points;_paneViews;_options;_selected=!1;_locked=!1;constructor(t,e,s,n){this._chart=t,this._series=e,this._points=s,this._options={...y6,...n},this._paneViews=[new w6(this)]}updatePoints(t){this._points=t,this.updateAllViews()}addPoint(t){this._points.push(t),this.updateAllViews()}setSelected(t){this._selected=t,this.updateAllViews()}applyOptions(t){Object.assign(this._options,t),this.updateAllViews(),this._chart.timeScale().applyOptions({})}updatePointByIndex(t,e){t>=0&&t<this._points.length&&(this._points[t]=e,this.updateAllViews())}toolHitTest(t,e){const s=this._chart.timeScale(),n=this._series,l=this._points.map(c=>{const d=s.logicalToCoordinate(c.logical),f=n.priceToCoordinate(c.price);return{x:d,y:f}});if(!this._options.useSmoothCurve)for(let c=0;c<l.length;c++){const d=l[c];if(!(d.x===null||d.y===null)&&Math.hypot(t-d.x,e-d.y)<8)return{hit:!0,type:"point",index:c}}const a=Math.max(5,this._options.width/2+2);for(let c=0;c<l.length-1;c++){const d=l[c],f=l[c+1];if(!(d.x===null||d.y===null||f.x===null||f.y===null)&&vn({x:t,y:e},d,f)<a)return{hit:!0,type:"line"}}return null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}class C6{_p1;_p2;_text;_options;_selected;constructor(t,e,s,n,l){this._p1=t,this._p2=e,this._text=s,this._options=n,this._selected=l}draw(t){t.useMediaCoordinateSpace(e=>{if(this._p1.x===null||this._p1.y===null||this._p2.x===null||this._p2.y===null)return;const s=e.context,n=this._p1.x,l=this._p1.y,a=this._p2.x,c=this._p2.y;s.lineWidth=this._options.width,s.strokeStyle=this._options.lineColor,s.fillStyle=this._options.lineColor,s.beginPath(),s.moveTo(n,l),s.lineTo(a,c),s.stroke(),s.beginPath(),s.arc(n,l,3,0,2*Math.PI),s.fill(),s.font=`${this._options.fontSize}px ${this._options.fontFamily}`;const d=s.measureText(this._text).width,f=this._options.fontSize*1.2,p=8,m=6,v=a,w=c-f/2,y=d+p*2,b=f+p*2;s.fillStyle=this._options.backgroundColor,s.beginPath(),s.moveTo(v+m,w-p),s.lineTo(v+y-m,w-p),s.arcTo(v+y,w-p,v+y,w-p+m,m),s.lineTo(v+y,w-p+b-m),s.arcTo(v+y,w-p+b,v+y-m,w-p+b,m),s.lineTo(v+m,w-p+b),s.arcTo(v,w-p+b,v,w-p+b-m,m),s.lineTo(v,w-p+m),s.arcTo(v,w-p,v+m,w-p,m),s.closePath(),s.fill(),s.stroke(),s.fillStyle=this._options.textColor,s.textBaseline="middle",s.fillText(this._text,v+p,w+f/2),this._selected&&(s.fillStyle="#FFFFFF",s.strokeStyle="#2962FF",s.lineWidth=2,s.beginPath(),s.arc(n,l,6,0,2*Math.PI),s.fill(),s.stroke(),s.beginPath(),s.arc(a,c,6,0,2*Math.PI),s.fill(),s.stroke())})}}class b6{_source;_p1={x:null,y:null};_p2={x:null,y:null};constructor(t){this._source=t}update(){this._p1=Le(this._source._p1,this._source._chart,this._source._series),this._p2=Le(this._source._p2,this._source._chart,this._source._series)}renderer(){return new C6(this._p1,this._p2,this._source._text,this._source._options,this._source._selected)}}const x6={lineColor:"rgb(33, 150, 243)",backgroundColor:"rgba(255, 255, 255, 0.9)",textColor:"rgb(0, 0, 0)",width:1,fontSize:12,fontFamily:"Arial"};class ja{_chart;_series;_p1;_p2;_text;_paneViews;_options;_selected=!1;_onTextEdit=null;constructor(t,e,s,n,l,a){this._chart=t,this._series=e,this._p1=s,this._p2=n,this._text=l,this._options={...x6,...a},this._paneViews=[new b6(this)]}updatePoints(t,e){this._p1=t,this._p2=e,this.updateAllViews()}updatePointByIndex(t,e){t===0?this._p1=e:t===1&&(this._p2=e),this.updateAllViews()}updateText(t){this._text=t,this.updateAllViews()}setOnTextEdit(t){this._onTextEdit=t}editText(){this._onTextEdit&&this._onTextEdit(this._text)}setSelected(t){this._selected=t,this.updateAllViews()}applyOptions(t){Object.assign(this._options,t),this.updateAllViews(),this._chart.timeScale().applyOptions({})}toolHitTest(t,e){const s=this._chart.timeScale(),n=this._series,l=s.logicalToCoordinate(this._p1.logical),a=n.priceToCoordinate(this._p1.price),c=s.logicalToCoordinate(this._p2.logical),d=n.priceToCoordinate(this._p2.price);if(l===null||a===null||c===null||d===null)return null;const f=8;if(Math.hypot(t-l,e-a)<f)return{hit:!0,type:"point",index:0};if(Math.hypot(t-c,e-d)<f)return{hit:!0,type:"point",index:1};const p=this._options.fontSize,m=this._text.length*p*.6+20,v=p*1.2+10;return t>=c&&t<=c+m&&e>=d-v/2&&e<=d+v/2?{hit:!0,type:"point",index:1}:vn({x:t,y:e},{x:l,y:a},{x:c,y:d})<5?{hit:!0,type:"line"}:null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}class S6{_point;_options;_selected;constructor(t,e,s){this._point=t,this._options=e,this._selected=s}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._point.x===null||this._point.y===null)return;const s=e.context,n=zt(this._point.x,e.horizontalPixelRatio),l=zt(this._point.y,e.verticalPixelRatio),a=e.mediaSize.width*e.horizontalPixelRatio,c=e.mediaSize.height*e.verticalPixelRatio;s.lineWidth=this._options.width,s.strokeStyle=this._options.lineColor,Zn(s,this._options.lineStyle),s.beginPath(),s.moveTo(0,l),s.lineTo(a,l),s.stroke(),s.beginPath(),s.moveTo(n,0),s.lineTo(n,c),s.stroke(),s.setLineDash([]),this._selected&&qt(e,n,l)})}}class E6{_source;_point={x:null,y:null};constructor(t){this._source=t}update(){this._point=Le(this._source._point,this._source._chart,this._source._series)}renderer(){return new S6(this._point,this._source._options,this._source._selected)}}const T6={lineColor:"#2962FF",width:2,lineStyle:2};class qB{_chart;_series;_point;_paneViews;_options;_selected=!1;constructor(t,e,s,n){this._chart=t,this._series=e,this._point=s,this._options={...T6,...n},this._paneViews=[new E6(this)]}updatePoint(t){this._point=t,this.updateAllViews()}applyOptions(t){Object.assign(this._options,t),this.updateAllViews(),this._chart.timeScale().applyOptions({})}setSelected(t){this._selected=t,this.updateAllViews()}toolHitTest(t,e){const s=this._chart.timeScale(),n=this._series,l=s.logicalToCoordinate(this._point.logical),a=n.priceToCoordinate(this._point.price);if(l===null||a===null)return null;const c=5;return Math.abs(e-a)<c?{hit:!0,type:"line"}:Math.abs(t-l)<c?{hit:!0,type:"line"}:Math.hypot(t-l,e-a)<8?{hit:!0,type:"point"}:null}autoscaleInfo(){return null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}class Q6{_p1;_p2;_options;_selected;constructor(t,e,s,n){this._p1=t,this._p2=e,this._options=s,this._selected=n}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._p1.x===null||this._p1.y===null||this._p2.x===null||this._p2.y===null)return;const s=e.context,n=zt(this._p1.x,e.horizontalPixelRatio),l=zt(this._p1.y,e.verticalPixelRatio),a=zt(this._p2.x,e.horizontalPixelRatio),c=zt(this._p2.y,e.verticalPixelRatio),d=a-n,f=c-l,p=Math.sqrt(d*d+f*f);s.lineWidth=this._options.width,s.strokeStyle=this._options.lineColor,s.lineWidth=this._options.width,s.strokeStyle=this._options.lineColor,s.fillStyle=this._options.backgroundColor,Zn(s,this._options.lineStyle),s.beginPath(),s.arc(n,l,p,0,2*Math.PI),s.fill(),s.stroke(),this._selected&&(qt(e,n,l),qt(e,a,c))})}}class F6{_source;_p1={x:null,y:null};_p2={x:null,y:null};constructor(t){this._source=t}update(){this._p1=Le(this._source._p1,this._source._chart,this._source._series),this._p2=Le(this._source._p2,this._source._chart,this._source._series)}renderer(){return new Q6(this._p1,this._p2,this._source._options,this._source._selected)}}const U6={lineColor:"rgb(41, 98, 255)",width:2,backgroundColor:"rgba(41, 98, 255, 0.2)",lineStyle:0,locked:!1};class lg{_chart;_series;_p1;_p2;_paneViews;_options;_selected=!1;_locked=!1;constructor(t,e,s,n,l){this._chart=t,this._series=e,this._p1=s,this._p2=n,this._options={...U6,...l},this._paneViews=[new F6(this)]}updatePoints(t,e){this._p1=t,this._p2=e,this.updateAllViews()}updatePointByIndex(t,e){t===0?this._p1=e:t===1&&(this._p2=e),this.updateAllViews()}setSelected(t){this._selected=t,this.updateAllViews()}applyOptions(t){Object.assign(this._options,t),this.updateAllViews(),this._chart.timeScale().applyOptions({})}toolHitTest(t,e){const s=this._chart.timeScale(),n=this._series,l=s.logicalToCoordinate(this._p1.logical),a=n.priceToCoordinate(this._p1.price),c=s.logicalToCoordinate(this._p2.logical),d=n.priceToCoordinate(this._p2.price);if(l===null||a===null||c===null||d===null)return null;const f=c-l,p=d-a,m=Math.hypot(f,p),v=8;return Math.hypot(t-l,e-a)<v?{hit:!0,type:"point",index:0}:Math.hypot(t-c,e-d)<v?{hit:!0,type:"point",index:1}:LM({x:t,y:e},{x:l,y:a},m)?{hit:!0,type:"shape"}:null}autoscaleInfo(){return null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}class M6{_p1;_p2;_options;_selected;_source;constructor(t,e,s,n,l){this._p1=t,this._p2=e,this._options=s,this._selected=n,this._source=l}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._p1.x===null||this._p1.y===null||this._p2.x===null||this._p2.y===null)return;const s=e.context,n=zt(this._p1.x,e.horizontalPixelRatio),l=zt(this._p1.y,e.verticalPixelRatio),a=zt(this._p2.x,e.horizontalPixelRatio),c=zt(this._p2.y,e.verticalPixelRatio),d=Math.min(n,a),f=Math.max(n,a),p=Math.min(l,c),m=Math.max(l,c),v=f-d,w=m-p;this._options.backgroundColor&&(s.fillStyle=this._options.backgroundColor,s.fillRect(d,p,v,w)),s.strokeStyle=this._options.borderColor,s.lineWidth=this._options.borderWidth*e.verticalPixelRatio,s.strokeRect(d,p,v,w);const y=(n+a)/2,b=10*e.verticalPixelRatio;s.beginPath(),s.moveTo(y,p),s.lineTo(y,m);const S=c-l;if(Math.abs(S)>b){let D;S>0?(D=m,s.moveTo(y-b,D-b),s.lineTo(y,D),s.lineTo(y+b,D-b)):(D=p,s.moveTo(y-b,D+b),s.lineTo(y,D),s.lineTo(y+b,D+b))}s.stroke();const x=this._source._p1.price,U=this._source._p2.price,M=Math.abs(U-x),N=x!==0?(U-x)/x*100:0,I=`${U>x?"+":""}${M.toFixed(2)} (${Math.abs(N).toFixed(2)}%)`,R=U>x?p-10*e.verticalPixelRatio:m+25*e.verticalPixelRatio;if(s.font=`bold ${14*e.verticalPixelRatio}px sans-serif`,s.fillStyle=this._options.borderColor,s.textAlign="center",s.textBaseline=U>x?"bottom":"top",s.fillText(I,y,R),this._selected){qt(e,n,l),qt(e,a,c),qt(e,n,c),qt(e,a,l);const D=(l+c)/2;qt(e,y,l),qt(e,y,c),qt(e,n,D),qt(e,a,D)}})}}class I6{_source;_p1={x:null,y:null};_p2={x:null,y:null};constructor(t){this._source=t}update(){this._p1=Le(this._source._p1,this._source._chart,this._source._series),this._p2=Le(this._source._p2,this._source._chart,this._source._series)}renderer(){return new M6(this._p1,this._p2,this._source._options,this._source._selected,this._source)}}const N6={backgroundColor:"rgba(41, 98, 255, 0.2)",borderColor:"rgb(41, 98, 255)",borderWidth:2,extendLeft:!1,extendRight:!1,locked:!1};class og{_chart;_series;_p1;_p2;_paneViews;_options;_selected=!1;_locked=!1;constructor(t,e,s,n,l){this._chart=t,this._series=e,this._p1=s,this._p2=n,this._options={...N6,...l},this._paneViews=[new I6(this)]}updatePoints(t,e){this._p1=t,this._p2=e,this.updateAllViews()}updatePointByIndex(t,e){switch(t){case 0:this._p1=e;break;case 1:this._p2=e;break;case 2:this._p1={...this._p1,logical:e.logical},this._p2={...this._p2,price:e.price};break;case 3:this._p2={...this._p2,logical:e.logical},this._p1={...this._p1,price:e.price};break}this.updateAllViews()}setSelected(t){this._selected=t,this.updateAllViews()}applyOptions(t){Object.assign(this._options,t),this.updateAllViews(),this._chart.timeScale().applyOptions({})}toolHitTest(t,e){const s=this._chart.timeScale(),n=this._series,l=s.logicalToCoordinate(this._p1.logical),a=n.priceToCoordinate(this._p1.price),c=s.logicalToCoordinate(this._p2.logical),d=n.priceToCoordinate(this._p2.price);if(l===null||a===null||c===null||d===null)return null;const f=8,p=Math.min(l,c),m=Math.max(l,c),v=Math.min(a,d),w=Math.max(a,d),y=(l+c)/2,b=(a+d)/2,S=[{x:l,y:a,index:0},{x:c,y:d,index:1},{x:l,y:d,index:2},{x:c,y:a,index:3},{x:y,y:v,index:4},{x:y,y:w,index:5},{x:p,y:b,index:6},{x:m,y:b,index:7}];for(const x of S)if(Math.hypot(t-x.x,e-x.y)<f)return{hit:!0,type:"point",index:x.index};return Ad({x:t,y:e},{x1:l,y1:a,x2:c,y2:d})?{hit:!0,type:"shape"}:null}autoscaleInfo(){return null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}class L6{_p1;_p2;_p3;_options;_selected;constructor(t,e,s,n,l){this._p1=t,this._p2=e,this._p3=s,this._options=n,this._selected=l}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._p1.x===null||this._p1.y===null||this._p2.x===null||this._p2.y===null||this._p3.x===null||this._p3.y===null)return;const s=e.context,n=zt(this._p1.x,e.horizontalPixelRatio),l=zt(this._p1.y,e.verticalPixelRatio),a=zt(this._p2.x,e.horizontalPixelRatio),c=zt(this._p2.y,e.verticalPixelRatio),d=zt(this._p3.x,e.horizontalPixelRatio),f=zt(this._p3.y,e.verticalPixelRatio),p=Math.min(n,a,d),m=Math.max(n,a,d),v=Math.max(m-p,50*e.horizontalPixelRatio),w=p+v;s.fillStyle=this._options.profitColor,s.globalAlpha=this._options.zoneOpacity,s.fillRect(p,Math.min(l,f),v,Math.abs(f-l)),s.fillStyle=this._options.lossColor,s.fillRect(p,Math.min(l,c),v,Math.abs(c-l)),s.globalAlpha=1,s.lineWidth=this._options.lineWidth,s.lineCap="butt",s.strokeStyle=this._options.lineColor,s.beginPath(),s.moveTo(p,l),s.lineTo(w,l),s.stroke(),s.strokeStyle=this._options.profitLineColor,s.beginPath(),s.moveTo(p,f),s.lineTo(w,f),s.stroke(),s.strokeStyle=this._options.lossLineColor,s.beginPath(),s.moveTo(p,c),s.lineTo(w,c),s.stroke(),this._selected&&(qt(e,n,l,"#FFFFFF","#2962FF"),qt(e,a,c,"#FFFFFF","#FF0000"),qt(e,d,f,"#FFFFFF","#00FF00"))})}}class H6{_source;_p1={x:null,y:null};_p2={x:null,y:null};_p3={x:null,y:null};constructor(t){this._source=t}update(){this._p1=Le(this._source._p1,this._source._chart,this._source._series),this._p2=Le(this._source._p2,this._source._chart,this._source._series),this._p3=Le(this._source._p3,this._source._chart,this._source._series)}renderer(){return new L6(this._p1,this._p2,this._p3,this._source._options,this._source._selected)}}const D6={lineColor:"#787B86",profitColor:"rgba(0, 255, 0, 0.2)",lossColor:"rgba(255, 0, 0, 0.2)",profitLineColor:"#00FF00",lossLineColor:"#FF0000",lineWidth:1,zoneOpacity:.2,textColor:"#FFFFFF",locked:!1};class ag{_chart;_series;_p1;_p2;_p3;_paneViews;_options;_selected=!1;_locked=!1;constructor(t,e,s,n,l,a){this._chart=t,this._series=e,this._p1=s,this._p2=n,this._p3=l,this._options={...D6,...a},this._paneViews=[new H6(this)]}updatePoints(t,e,s){this._p1=t,this._p2=e,this._p3=s,this.updateAllViews()}updatePointByIndex(t,e){if(t===0){const s=e.logical-this._p1.logical,n=e.price-this._p1.price;this._p1=e,this._p2={logical:this._p2.logical+s,price:this._p2.price+n},this._p3={logical:this._p3.logical+s,price:this._p3.price+n}}else t===1?this._p2=e:t===2&&(this._p3=e);this.updateAllViews()}setSelected(t){this._selected=t,this.updateAllViews()}toolHitTest(t,e){const s=this._chart.timeScale(),n=this._series,l=s.logicalToCoordinate(this._p1.logical),a=n.priceToCoordinate(this._p1.price),c=s.logicalToCoordinate(this._p2.logical),d=n.priceToCoordinate(this._p2.price),f=s.logicalToCoordinate(this._p3.logical),p=n.priceToCoordinate(this._p3.price);if(l===null||a===null||c===null||d===null||f===null||p===null)return null;const m=8;if(Math.hypot(t-l,e-a)<m)return{hit:!0,type:"point",index:0};if(Math.hypot(t-c,e-d)<m)return{hit:!0,type:"point",index:1};if(Math.hypot(t-f,e-p)<m)return{hit:!0,type:"point",index:2};const v=Math.min(l,c,f),w=Math.max(l,c,f),y=window.devicePixelRatio||1,b=Math.max(w-v,50*y),S=v+b,x=Math.min(a,d,p),U=Math.max(a,d,p);return t>=v&&t<=S&&e>=x&&e<=U?{hit:!0,type:"shape"}:null}autoscaleInfo(){return null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}class k6{_p1;_p2;_p3;_options;_selected;constructor(t,e,s,n,l){this._p1=t,this._p2=e,this._p3=s,this._options=n,this._selected=l}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._p1.x===null||this._p1.y===null||this._p2.x===null||this._p2.y===null||this._p3.x===null||this._p3.y===null)return;const s=e.context,n=zt(this._p1.x,e.horizontalPixelRatio),l=zt(this._p1.y,e.verticalPixelRatio),a=zt(this._p2.x,e.horizontalPixelRatio),c=zt(this._p2.y,e.verticalPixelRatio),d=zt(this._p3.x,e.horizontalPixelRatio),f=zt(this._p3.y,e.verticalPixelRatio),p=Math.min(n,a,d),m=Math.max(n,a,d),v=Math.max(m-p,50*e.horizontalPixelRatio),w=p+v;s.fillStyle=this._options.profitColor,s.globalAlpha=this._options.zoneOpacity,s.fillRect(p,Math.min(l,f),v,Math.abs(f-l)),s.fillStyle=this._options.lossColor,s.fillRect(p,Math.min(l,c),v,Math.abs(c-l)),s.globalAlpha=1,s.lineWidth=this._options.lineWidth,s.lineCap="butt",s.strokeStyle=this._options.lineColor,s.beginPath(),s.moveTo(p,l),s.lineTo(w,l),s.stroke(),s.strokeStyle=this._options.profitLineColor,s.beginPath(),s.moveTo(p,f),s.lineTo(w,f),s.stroke(),s.strokeStyle=this._options.lossLineColor,s.beginPath(),s.moveTo(p,c),s.lineTo(w,c),s.stroke(),this._selected&&(qt(e,n,l,"#FFFFFF","#2962FF"),qt(e,a,c,"#FFFFFF","#FF0000"),qt(e,d,f,"#FFFFFF","#00FF00"))})}}class j6{_source;_p1={x:null,y:null};_p2={x:null,y:null};_p3={x:null,y:null};constructor(t){this._source=t}update(){this._p1=Le(this._source._p1,this._source._chart,this._source._series),this._p2=Le(this._source._p2,this._source._chart,this._source._series),this._p3=Le(this._source._p3,this._source._chart,this._source._series)}renderer(){return new k6(this._p1,this._p2,this._p3,this._source._options,this._source._selected)}}const O6={lineColor:"#787B86",profitColor:"rgba(0, 255, 0, 0.2)",lossColor:"rgba(255, 0, 0, 0.2)",profitLineColor:"#00FF00",lossLineColor:"#FF0000",lineWidth:1,zoneOpacity:.2,textColor:"#FFFFFF",locked:!1};class cg{_chart;_series;_p1;_p2;_p3;_paneViews;_options;_selected=!1;_locked=!1;constructor(t,e,s,n,l,a){this._chart=t,this._series=e,this._p1=s,this._p2=n,this._p3=l,this._options={...O6,...a},this._paneViews=[new j6(this)]}updatePoints(t,e,s){this._p1=t,this._p2=e,this._p3=s,this.updateAllViews()}updatePointByIndex(t,e){if(t===0){const s=e.logical-this._p1.logical,n=e.price-this._p1.price;this._p1=e,this._p2={logical:this._p2.logical+s,price:this._p2.price+n},this._p3={logical:this._p3.logical+s,price:this._p3.price+n}}else t===1?this._p2=e:t===2&&(this._p3=e);this.updateAllViews()}setSelected(t){this._selected=t,this.updateAllViews()}toolHitTest(t,e){const s=this._chart.timeScale(),n=this._series,l=s.logicalToCoordinate(this._p1.logical),a=n.priceToCoordinate(this._p1.price),c=s.logicalToCoordinate(this._p2.logical),d=n.priceToCoordinate(this._p2.price),f=s.logicalToCoordinate(this._p3.logical),p=n.priceToCoordinate(this._p3.price);if(l===null||a===null||c===null||d===null||f===null||p===null)return null;const m=8;if(Math.hypot(t-l,e-a)<m)return{hit:!0,type:"point",index:0};if(Math.hypot(t-c,e-d)<m)return{hit:!0,type:"point",index:1};if(Math.hypot(t-f,e-p)<m)return{hit:!0,type:"point",index:2};const v=Math.min(l,c,f),w=Math.max(l,c,f),y=window.devicePixelRatio||1,b=Math.max(w-v,50*y),S=v+b,x=Math.min(a,d,p),U=Math.max(a,d,p);return t>=v&&t<=S&&e>=x&&e<=U?{hit:!0,type:"shape"}:null}autoscaleInfo(){return null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}class R6{_points;_options;_selected;constructor(t,e,s){this._points=t,this._options=e,this._selected=s}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._points.length<2)return;const s=e.context;nd(s,{lineColor:this._options.lineColor,width:this._options.width,lineJoin:"round",lineCap:"round",globalAlpha:1});const n=[];for(const a of this._points)a.x===null||a.y===null||n.push({x:zt(a.x,e.horizontalPixelRatio),y:zt(a.y,e.verticalPixelRatio)});if(n.length<2)return;s.beginPath(),s.moveTo(n[0].x,n[0].y);for(let a=1;a<n.length;a++)s.lineTo(n[a].x,n[a].y);s.stroke(),s.font="12px Arial",s.textAlign="center",s.textBaseline="middle",s.fillStyle=this._options.textColor;const l=["(0)","1","2","3","4","5"];for(let a=0;a<n.length&&!(a>=l.length);a++){const c=n[a],d=l[a],f=s.measureText(d).width,p=4;s.fillStyle="rgba(255, 255, 255, 0.8)",s.fillRect(c.x-f/2-p,c.y-12,f+p*2,24),s.fillStyle=this._options.textColor,s.fillText(d,c.x,c.y)}if(this._selected)for(const a of n)qt(e,a.x,a.y);rd(s)})}}class z6{_source;_points=[];constructor(t){this._source=t}update(){this._points=id(this._source._points,this._source._chart,this._source._series)}renderer(){return new R6(this._points,this._source._options,this._source._selected)}}const V6={lineColor:"#2962FF",width:2,textColor:"#2962FF"};class hg{_chart;_series;_points;_paneViews;_options;_selected=!1;constructor(t,e,s,n){this._chart=t,this._series=e,this._points=s,this._options={...V6,...n},this._paneViews=[new z6(this)]}updatePoints(t){this._points=t,this.updateAllViews()}addPoint(t){this._points.push(t),this.updateAllViews()}setSelected(t){this._selected=t,this.updateAllViews()}updatePointByIndex(t,e){t>=0&&t<this._points.length&&(this._points[t]=e,this.updateAllViews())}applyOptions(t){Object.assign(this._options,t),this.updateAllViews(),this._chart.timeScale().applyOptions({})}toolHitTest(t,e){const s=this._chart.timeScale(),n=this._series,l=this._points.map(d=>{const f=s.logicalToCoordinate(d.logical),p=n.priceToCoordinate(d.price);return{x:f,y:p}}),a=8;for(let d=0;d<l.length;d++){const f=l[d];if(!(f.x===null||f.y===null)&&Math.hypot(t-f.x,e-f.y)<a)return{hit:!0,type:"point",index:d}}const c=5;for(let d=0;d<l.length-1;d++){const f=l[d],p=l[d+1];if(!(f.x===null||f.y===null||p.x===null||p.y===null)&&vn({x:t,y:e},f,p)<c)return{hit:!0,type:"line"}}return null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}class P6{_points;_options;_selected;constructor(t,e,s){this._points=t,this._options=e,this._selected=s}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._points.length<2)return;const s=e.context;nd(s,{lineColor:this._options.lineColor,width:this._options.width,lineJoin:"round",lineCap:"round",globalAlpha:1});const n=[];for(const a of this._points)a.x===null||a.y===null||n.push({x:zt(a.x,e.horizontalPixelRatio),y:zt(a.y,e.verticalPixelRatio)});if(n.length<2)return;s.beginPath(),s.moveTo(n[0].x,n[0].y);for(let a=1;a<n.length;a++)s.lineTo(n[a].x,n[a].y);s.stroke(),s.font="12px Arial",s.textAlign="center",s.textBaseline="middle",s.fillStyle=this._options.textColor;const l=["(0)","A","B","C"];for(let a=0;a<n.length&&!(a>=l.length);a++){const c=n[a],d=l[a],f=s.measureText(d).width,p=4;s.fillStyle="rgba(255, 255, 255, 0.8)",s.fillRect(c.x-f/2-p,c.y-12,f+p*2,24),s.fillStyle=this._options.textColor,s.fillText(d,c.x,c.y)}if(this._selected)for(const a of n)qt(e,a.x,a.y);rd(s)})}}class K6{_source;_points=[];constructor(t){this._source=t}update(){this._points=id(this._source._points,this._source._chart,this._source._series)}renderer(){return new P6(this._points,this._source._options,this._source._selected)}}const G6={lineColor:"#2962FF",width:2,textColor:"#2962FF"};class ug{_chart;_series;_points;_paneViews;_options;_selected=!1;constructor(t,e,s,n){this._chart=t,this._series=e,this._points=s,this._options={...G6,...n},this._paneViews=[new K6(this)]}updatePoints(t){this._points=t,this.updateAllViews()}addPoint(t){this._points.push(t),this.updateAllViews()}setSelected(t){this._selected=t,this.updateAllViews()}updatePointByIndex(t,e){t>=0&&t<this._points.length&&(this._points[t]=e,this.updateAllViews())}applyOptions(t){Object.assign(this._options,t),this.updateAllViews(),this._chart.timeScale().applyOptions({})}toolHitTest(t,e){const s=this._chart.timeScale(),n=this._series,l=this._points.map(d=>{const f=s.logicalToCoordinate(d.logical),p=n.priceToCoordinate(d.price);return{x:f,y:p}}),a=8;for(let d=0;d<l.length;d++){const f=l[d];if(!(f.x===null||f.y===null)&&Math.hypot(t-f.x,e-f.y)<a)return{hit:!0,type:"point",index:d}}const c=5;for(let d=0;d<l.length-1;d++){const f=l[d],p=l[d+1];if(!(f.x===null||f.y===null||p.x===null||p.y===null)&&vn({x:t,y:e},f,p)<c)return{hit:!0,type:"line"}}return null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}class W6{_p1;_p2;_options;_selected;_source;constructor(t,e,s,n,l){this._p1=t,this._p2=e,this._options=s,this._selected=n,this._source=l}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._p1.x===null||this._p1.y===null||this._p2.x===null||this._p2.y===null)return;const s=e.context,n=zt(this._p1.x,e.horizontalPixelRatio),l=zt(this._p1.y,e.verticalPixelRatio),a=zt(this._p2.x,e.horizontalPixelRatio),c=zt(this._p2.y,e.verticalPixelRatio),d=Math.min(n,a),f=Math.max(n,a),p=f-d,m=Math.min(l,c),v=Math.max(l,c)-m;this._options.backgroundColor&&(s.fillStyle=this._options.backgroundColor,s.fillRect(d,m,p,v)),s.strokeStyle=this._options.borderColor,s.lineWidth=this._options.borderWidth*e.verticalPixelRatio,s.strokeRect(d,m,p,v);const w=(l+c)/2,y=10*e.verticalPixelRatio;s.beginPath(),s.moveTo(d,w),s.lineTo(f,w);const b=a-n;if(Math.abs(b)>y){let M;b>0?(M=f,s.moveTo(M-y,w-y),s.lineTo(M,w),s.lineTo(M-y,w+y)):(M=d,s.moveTo(M+y,w-y),s.lineTo(M,w),s.lineTo(M+y,w+y))}s.stroke();const S=this._source._p1.logical,x=this._source._p2.logical,U=`${Math.abs(x-S)} bars`;s.font=`bold ${14*e.verticalPixelRatio}px sans-serif`,s.fillStyle=this._options.borderColor,s.textAlign="center",s.textBaseline="bottom",s.fillText(U,(d+f)/2,m-5*e.verticalPixelRatio),this._selected&&(qt(e,n,l),qt(e,a,c),qt(e,n,c),qt(e,a,l))})}}class $6{_source;_p1={x:null,y:null};_p2={x:null,y:null};constructor(t){this._source=t}update(){this._p1=Le(this._source._p1,this._source._chart,this._source._series),this._p2=Le(this._source._p2,this._source._chart,this._source._series)}renderer(){return new W6(this._p1,this._p2,this._source._options,this._source._selected,this._source)}}const X6={backgroundColor:"rgba(41, 98, 255, 0.2)",borderColor:"rgb(41, 98, 255)",borderWidth:2};class dg{_chart;_series;_p1;_p2;_paneViews;_options;_selected=!1;constructor(t,e,s,n,l){this._chart=t,this._series=e,this._p1=s,this._p2=n,this._options={...X6,...l},this._paneViews=[new $6(this)]}updatePoints(t,e){this._p1=t,this._p2=e,this.updateAllViews()}updatePointByIndex(t,e){t===0?this._p1=e:this._p2=e,this.updateAllViews()}setSelected(t){this._selected=t,this.updateAllViews()}applyOptions(t){Object.assign(this._options,t),this.updateAllViews(),this._chart.timeScale().applyOptions({})}toolHitTest(t,e){const s=this._chart.timeScale(),n=this._series,l=s.logicalToCoordinate(this._p1.logical),a=n.priceToCoordinate(this._p1.price),c=s.logicalToCoordinate(this._p2.logical),d=n.priceToCoordinate(this._p2.price);if(l===null||a===null||c===null||d===null)return null;const f=8;if(Math.hypot(t-l,e-a)<f)return{hit:!0,type:"point",index:0};if(Math.hypot(t-c,e-d)<f)return{hit:!0,type:"point",index:1};if(Math.hypot(t-c,e-a)<f)return{hit:!0,type:"point",index:1};if(Math.hypot(t-l,e-d)<f)return{hit:!0,type:"point",index:0};const p=Math.min(l,c),m=Math.max(l,c),v=Math.min(a,d),w=Math.max(a,d);return t>=p&&t<=m&&e>=v&&e<=w?{hit:!0,type:"shape"}:null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}class Y6{_p1;_p2;_p3;_p1Price;_p2Price;_p3Price;_priceToCoordinate;_options;_selected;constructor(t,e,s,n,l,a,c,d,f){this._p1=t,this._p2=e,this._p3=s,this._p1Price=n,this._p2Price=l,this._p3Price=a,this._priceToCoordinate=c,this._options=d,this._selected=f}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._p1.x===null||this._p1.y===null||this._p2.x===null||this._p2.y===null||this._p3.x===null||this._p3.y===null)return;const s=e.context,n=zt(this._p1.x,e.horizontalPixelRatio),l=zt(this._p2.x,e.horizontalPixelRatio),a=zt(this._p3.x,e.horizontalPixelRatio),c=zt(this._p1.y,e.verticalPixelRatio),d=zt(this._p2.y,e.verticalPixelRatio),f=zt(this._p3.y,e.verticalPixelRatio);s.lineWidth=1,s.strokeStyle="rgba(120, 120, 120, 0.5)",s.setLineDash([5,5]),s.beginPath(),s.moveTo(n,c),s.lineTo(l,d),s.stroke(),s.beginPath(),s.moveTo(l,d),s.lineTo(a,f),s.stroke(),s.setLineDash([]);const p=this._p2Price-this._p1Price,m=Math.min(n,l,a),v=Math.max(n,l,a);this._options.levels.forEach(w=>{const y=this._p3Price+p*w.coeff,b=this._priceToCoordinate(y);if(b!==null){const S=zt(b,e.verticalPixelRatio);s.lineWidth=this._options.width,s.strokeStyle=w.color,s.beginPath(),s.moveTo(m,S),s.lineTo(v,S),s.stroke(),s.font="10px Arial",s.fillStyle=w.color;const x=(w.coeff*100).toFixed(1);s.fillText(`${x}% (${y.toFixed(2)})`,m+2,S-2)}}),this._selected&&(qt(e,n,c),qt(e,l,d),qt(e,a,f))})}}class J6{_source;_p1={x:null,y:null};_p2={x:null,y:null};_p3={x:null,y:null};constructor(t){this._source=t}update(){this._p1=Le(this._source._p1,this._source._chart,this._source._series),this._p2=Le(this._source._p2,this._source._chart,this._source._series),this._p3=Le(this._source._p3,this._source._chart,this._source._series)}renderer(){return new Y6(this._p1,this._p2,this._p3,this._source._p1.price,this._source._p2.price,this._source._p3.price,t=>this._source._series.priceToCoordinate(t),this._source._options,this._source._selected)}}const q6={width:1,levels:[{coeff:0,color:"#787b86"},{coeff:.618,color:"#f44336"},{coeff:1,color:"#4caf50"},{coeff:1.618,color:"#2962ff"},{coeff:2.618,color:"#9c27b0"},{coeff:4.236,color:"#ff9800"}]};class Vh{_chart;_series;_p1;_p2;_p3;_paneViews;_options;_selected=!1;constructor(t,e,s,n,l,a){this._chart=t,this._series=e,this._p1=s,this._p2=n,this._p3=l,this._options={...q6,...a},this._paneViews=[new J6(this)]}updatePoints(t,e,s){this._p1=t,this._p2=e,this._p3=s,this.updateAllViews()}updatePointByIndex(t,e){t===0?this._p1=e:t===1?this._p2=e:t===2&&(this._p3=e),this.updateAllViews()}setSelected(t){this._selected=t,this.updateAllViews()}toolHitTest(t,e){const s=this._chart.timeScale(),n=this._series,l=s.logicalToCoordinate(this._p1.logical),a=n.priceToCoordinate(this._p1.price),c=s.logicalToCoordinate(this._p2.logical),d=n.priceToCoordinate(this._p2.price),f=s.logicalToCoordinate(this._p3.logical),p=n.priceToCoordinate(this._p3.price);if(l===null||a===null||c===null||d===null||f===null||p===null)return null;const m=8;if(Math.hypot(t-l,e-a)<m)return{hit:!0,type:"point",index:0};if(Math.hypot(t-c,e-d)<m)return{hit:!0,type:"point",index:1};if(Math.hypot(t-f,e-p)<m)return{hit:!0,type:"point",index:2};const v=vn({x:t,y:e},{x:l,y:a},{x:c,y:d}),w=vn({x:t,y:e},{x:c,y:d},{x:f,y:p});if(v<5||w<5)return{hit:!0,type:"line"};const y=this._p2.price-this._p1.price,b=Math.min(l,c,f),S=Math.max(l,c,f);for(const x of this._options.levels){const U=this._p3.price+y*x.coeff,M=n.priceToCoordinate(U);if(M!==null&&Math.abs(e-M)<5&&t>=b&&t<=S)return{hit:!0,type:"line"}}return null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}const fg="lineTool_templates",ZB=20;class Oa{static generateId(){return`template_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static loadTemplates(){try{const t=localStorage.getItem(fg);if(!t)return[];const e=JSON.parse(t);return Array.isArray(e)?e:[]}catch(t){return console.error("Failed to load templates:",t),[]}}static saveTemplate(t,e){try{const s=this.loadTemplates();if(s.length>=ZB)return console.warn(`Maximum ${ZB} templates reached`),null;const n={id:this.generateId(),name:t.trim()||`Template ${s.length+1}`,created:Date.now(),styles:{...e}};return s.push(n),localStorage.setItem(fg,JSON.stringify(s)),n}catch(s){return console.error("Failed to save template:",s),null}}static deleteTemplate(t){try{const e=this.loadTemplates(),s=e.filter(n=>n.id!==t);return s.length===e.length?!1:(localStorage.setItem(fg,JSON.stringify(s)),!0)}catch(e){return console.error("Failed to delete template:",e),!1}}static getTemplate(t){return this.loadTemplates().find(e=>e.id===t)||null}static applyTemplate(t,e){const s=this.getTemplate(t);if(!s||!e||!e.applyOptions)return!1;try{return e.applyOptions(s.styles),!0}catch(n){return console.error("Failed to apply template:",n),!1}}static extractStyles(t){if(!t||!t._options)return{};const e=t._options;return{lineColor:e.lineColor,color:e.color,width:e.width,lineWidth:e.lineWidth}}}class sA{_container;_manager;_activeTool=null;_savedPosition=null;_positionPending=!1;_activeDropdownHandlers=new Set;_activeDragHandlers=null;_currentToolType=null;static ICONS={drag:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 12" width="8" height="12" fill="currentColor"><rect width="2" height="2" rx="1"></rect><rect width="2" height="2" rx="1" y="5"></rect><rect width="2" height="2" rx="1" y="10"></rect><rect width="2" height="2" rx="1" x="6"></rect><rect width="2" height="2" rx="1" x="6" y="5"></rect><rect width="2" height="2" rx="1" x="6" y="10"></rect></svg>',template:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none" stroke="currentColor"><path stroke-linecap="round" d="M15.5 18.5h6m-3 3v-6"></path><rect width="6" height="6" rx="1.5" x="6.5" y="6.5"></rect><rect width="6" height="6" rx="1.5" x="15.5" y="6.5"></rect><rect width="6" height="6" rx="1.5" x="6.5" y="15.5"></rect></svg>',brush:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill="currentColor" d="M10.62.72a2.47 2.47 0 0 1 3.5 0l1.16 1.16c.96.97.96 2.54 0 3.5l-.58.58-8.9 8.9-1 1-.14.14H0v-4.65l.14-.15 1-1 8.9-8.9.58-.58Zm2.8.7a1.48 1.48 0 0 0-2.1 0l-.23.23 3.26 3.26.23-.23c.58-.58.58-1.52 0-2.1l-1.16-1.16Zm.23 4.2-3.26-3.27-8.2 8.2 3.25 3.27 8.2-8.2Zm-8.9 8.9-3.27-3.26-.5.5V15h3.27l.5-.5Z"></path></svg>',text:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 15" width="13" height="15" fill="none"><path stroke="currentColor" d="M4 14.5h2.5m2.5 0H6.5m0 0V.5m0 0h-5a1 1 0 0 0-1 1V4m6-3.5h5a1 1 0 0 1 1 1V4"></path></svg>',fill:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" fill="none"><path stroke="currentColor" d="M13.5 6.5l-3-3-7 7 7.59 7.59a2 2 0 0 0 2.82 0l4.18-4.18a2 2 0 0 0 0-2.82L13.5 6.5zm0 0v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v6"></path><path fill="currentColor" d="M0 16.5C0 15 2.5 12 2.5 12S5 15 5 16.5 4 19 2.5 19 0 18 0 16.5z"></path><circle fill="currentColor" cx="9.5" cy="9.5" r="1.5"></circle></svg>',alert:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="m19.54 4.5 3.96 4.32-.74.68-3.96-4.32.74-.68ZM7.46 4.5 3.5 8.82l.74.68L8.2 5.18l-.74-.68ZM19.74 10.33A7.5 7.5 0 0 1 21 14.5v.5h1v-.5a8.5 8.5 0 1 0-8.5 8.5h.5v-1h-.5a7.5 7.5 0 1 1 6.24-11.67Z"></path><path fill="currentColor" d="M13 9v5h-3v1h4V9h-1ZM19 20v-4h1v4h4v1h-4v4h-1v-4h-4v-1h4Z"></path></svg>',lock:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" fill-rule="evenodd" d="M14 6a3 3 0 0 0-3 3v3h8.5a2.5 2.5 0 0 1 2.5 2.5v7a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 6 21.5v-7A2.5 2.5 0 0 1 8.5 12H10V9a4 4 0 0 1 8 0h-1a3 3 0 0 0-3-3zm-1 11a1 1 0 1 1 2 0v2a1 1 0 1 1-2 0v-2zm-6-2.5c0-.83.67-1.5 1.5-1.5h11c.83 0 1.5.67 1.5 1.5v7c0 .83-.67 1.5-1.5 1.5h-11A1.5 1.5 0 0 1 7 21.5v-7z"></path></svg>',delete:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="M18 7h5v1h-2.01l-1.33 14.64a1.5 1.5 0 0 1-1.5 1.36H9.84a1.5 1.5 0 0 1-1.49-1.36L7.01 8H5V7h5V6c0-1.1.9-2 2-2h4a2 2 0 0 1 2 2v1Zm-6-2a1 1 0 0 0-1 1v1h6V6a1 1 0 0 0-1-1h-4ZM8.02 8l1.32 14.54a.5.5 0 0 0 .5.46h8.33a.5.5 0 0 0 .5-.46L19.99 8H8.02Z"></path></svg>',more:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path fill="currentColor" fillrule="evenodd" cliprule="evenodd" d="M7.5 13a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM5 14.5a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0zm9.5-1.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM12 14.5a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0zm9.5-1.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM19 14.5a2.5 2.5 0 1 1 5 0 2.5 2.5 0 0 1-5 0z"></path></svg>',style:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28"><path stroke="currentColor" d="M4 13.5h20"></path></svg>',eraser:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="M21.5 13.5L14 6l-8.5 8.5 2.5 2.5H6v1h7v-1h-2.5l-1.5-1.5 8.5-8.5 2.5 2.5 1.5-1.5zM14 7.41l6.09 6.09-1.09 1.09L12.91 8.5 14 7.41z"></path></svg>',priceLabel:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill="currentColor" fill-rule="nonzero"><path d="M6.995 5c.008 0 .005 15.5.005 15.5h-1v-15.493c0-.556.451-1.007.995-1.007h17.01c.549 0 .995.45.995 1.007v11.986c0 .556-.45 1.007-1.007 1.007h-12.993l-3.104 3.104-.707-.707 3.397-3.397h13.407c.004 0 .007-11.993.007-11.993 0-.007-17.005-.007-17.005-.007z"></path><path d="M6.5 24c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>',datePriceRange:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill="currentColor"><path fill-rule="nonzero" d="M6.5 23v1h17.5v-17.5h-1v16.5z"></path><path fill-rule="nonzero" d="M21.5 5v-1h-17.5v17.5h1v-16.5z"></path><path fill-rule="nonzero" d="M4.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM23.5 6c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path><path fill-rule="nonzero" d="M13 9v13h1v-13z" id="Line"></path><path d="M13.5 6l2.5 3h-5z"></path><path fill-rule="nonzero" d="M19 14h-13v1h13z"></path><path d="M19 17v-5l3 2.5z"></path></g></svg>',headAndShoulders:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill="currentColor" fill-rule="nonzero"><path d="M4.436 21.667l2.083-9.027-.974-.225-2.083 9.027zM10.046 16.474l-2.231-4.463-.894.447 2.231 4.463zM13.461 6.318l-2.88 10.079.962.275 2.88-10.079zM18.434 16.451l-2.921-10.224-.962.275 2.921 10.224zM21.147 12.089l-2.203 4.405.894.447 2.203-4.405zM25.524 21.383l-2.09-9.055-.974.225 2.09 9.055z"></path><path d="M1 19h7.5v-1h-7.5z"></path><path d="M12.5 19h4v-1h-4z"></path><path d="M20.5 19h6.5v-1h-6.5z"></path><path d="M6.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM3.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM10.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM18.5 20c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM22.5 12c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM25.5 25c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5zM14.5 6c.828 0 1.5-.672 1.5-1.5s-.672-1.5-1.5-1.5-1.5.672-1.5 1.5.672 1.5 1.5 1.5zm0 1c-1.381 0-2.5-1.119-2.5-2.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5z"></path></g></svg>'};constructor(t){this._manager=t,this._container=document.createElement("div"),this._container.className="tv-floating-toolbar hidden",document.body.appendChild(this._container)}showCollapsed(t){this._renderCollapsed(t),this._positionToolbar()}showExpanded(t){this._activeTool=t,this._renderExpanded(t),this._positionToolbar()}hide(){this._container&&this._container.classList.add("hidden"),this._closeAllDropdowns()}destroy(){this.hide(),this._closeAllDropdowns(),this._activeDropdownHandlers.forEach(t=>{document.removeEventListener("click",t)}),this._activeDropdownHandlers.clear(),this._activeDragHandlers&&(document.removeEventListener("mousemove",this._activeDragHandlers.move),document.removeEventListener("mouseup",this._activeDragHandlers.up),this._activeDragHandlers=null),this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container),this._container=null,this._manager=null}_positionToolbar(){this._positionPending||(this._positionPending=!0,requestAnimationFrame(()=>{if(!this._container){this._positionPending=!1;return}if(this._savedPosition)this._show(this._savedPosition.x,this._savedPosition.y);else if(this._container&&this._manager){const t=this._manager.getChartRect(),e=this._container.getBoundingClientRect();if(t){const s=t.right-e.width-100,n=t.top+15;this._show(s,n)}else{const s=window.innerWidth-e.width-100;this._show(s,100)}}else this._positionPending=!1;this._positionPending=!1}))}updatePosition(t,e){if(!this._container||!this._manager||this._container.classList.contains("hidden"))return;const s=this._container.getBoundingClientRect(),n=this._manager.getChartRect();let l=10,a=10,c=window.innerWidth-s.width-10,d=window.innerHeight-s.height-10;n&&(l=n.left,a=n.top,c=n.right-s.width,d=n.bottom-s.height);const f=Math.min(Math.max(l,t),c),p=Math.min(Math.max(a,e),d);this._container.style.left=`${f}px`,this._container.style.top=`${p}px`}_show(t,e){this._container&&(this._container.classList.remove("hidden"),this.updatePosition(t,e))}_renderCollapsed(t){if(!this._container||this._currentToolType===t&&this._container.children.length>0)return;this._currentToolType=t,this._container.innerHTML="",this._container.dataset.tool=t,this._container.appendChild(this._createDragHandle());let e=sA.ICONS.brush;t==="Text"&&(e=sA.ICONS.text),t==="UserPriceAlerts"&&(e=sA.ICONS.alert),t==="Eraser"&&(e=sA.ICONS.eraser);const s=this._createButton(e,t);s.classList.add("active"),this._container.appendChild(s)}_renderExpanded(t){if(!this._container||!this._manager)return;this._container.innerHTML="",this._container.appendChild(this._createDragHandle());const e=this._createToolWrapper(),s=this._createButton(sA.ICONS.template,"Templates");s.addEventListener("click",f=>this._toggleDropdown(f,e,p=>this._createTemplateList(p,t))),e.appendChild(s),this._container.appendChild(e);const n=t._options||{},l=t.toolType||t.constructor.name,a=l==="Text"||l==="Callout";if(!a){const f=this._createToolWrapper(),p=n.lineColor||n.borderColor||n.color||"#2962ff",m=this._createFillButton(sA.ICONS.brush,"Line Color",p);m.addEventListener("click",v=>this._toggleDropdown(v,f,w=>this._createColorGrid(w,t,"line",m))),f.appendChild(m),this._container.appendChild(f)}if(n.backgroundColor!==void 0){const f=this._createToolWrapper(),p=this._createFillButton(sA.ICONS.fill,"Fill Color",n.backgroundColor);p.addEventListener("click",m=>this._toggleDropdown(m,f,v=>this._createColorGrid(v,t,"fill",p))),f.appendChild(p),this._container.appendChild(f)}if(n.textColor!==void 0||a&&n.color!==void 0){const f=this._createToolWrapper(),p=n.textColor||n.color||"#131722",m=this._createFillButton(sA.ICONS.text,"Text Color",p);m.addEventListener("click",v=>this._toggleDropdown(v,f,w=>this._createColorGrid(w,t,"text",m))),f.appendChild(m),this._container.appendChild(f)}if(this._addSeparator(),a&&n.fontSize!==void 0){const f=this._createToolWrapper(),p=document.createElement("div");p.className="font-size-trigger",p.title="Font Size";const m=n.fontSize||14,v=document.createElement("span");v.textContent=`${m}`,p.appendChild(v),p.addEventListener("click",w=>this._toggleDropdown(w,f,y=>this._createFontSizeList(y,t,v))),f.appendChild(p),this._container.appendChild(f)}else if(!a&&(n.lineWidth!==void 0||n.width!==void 0)){const f=this._createToolWrapper(),p=document.createElement("div");p.className="stroke-width-trigger",p.title="Line Width";const m=n.lineWidth||n.width||1,v=document.createElement("div");v.className="stroke-width-preview",v.style.height=`${Math.max(1,m)}px`;const w=document.createElement("span");w.textContent=`${m}px`,p.appendChild(v),p.appendChild(w),p.addEventListener("click",y=>this._toggleDropdown(y,f,b=>this._createWidthList(b,t,v,w))),f.appendChild(p),this._container.appendChild(f)}if(this._addSeparator(),this._manager&&this._manager.toolSupportsAlerts(t)){const f=this._createButton(sA.ICONS.alert,"Add Alert");f.addEventListener("click",p=>{p.stopPropagation(),p.preventDefault(),this._activeTool&&this._manager&&this._manager.createAlertForTool(this._activeTool)}),this._container.appendChild(f)}const c=this._createButton(sA.ICONS.lock,"Lock");t._locked&&c.classList.add("active"),c.addEventListener("click",f=>{f.stopPropagation(),f.preventDefault(),this._activeTool&&this._manager&&(this._manager.toggleToolLock(this._activeTool),this._activeTool._locked?c.classList.add("active"):c.classList.remove("active"))}),this._container.appendChild(c);const d=this._createButton(sA.ICONS.delete,"Remove");d.addEventListener("click",f=>{f.stopPropagation(),f.preventDefault(),this._activeTool&&this._manager&&this._manager.deleteTool(this._activeTool)}),this._container.appendChild(d),this._container.appendChild(this._createButton(sA.ICONS.more,"More"))}_createDragHandle(){const t=document.createElement("div");return t.className="drag-handle",t.innerHTML=sA.ICONS.drag,t.addEventListener("mousedown",e=>this._startDrag(e)),t}_createToolWrapper(){const t=document.createElement("div");return t.className="tool-wrapper",t}_createButton(t,e){const s=document.createElement("button");return s.className="tool-btn",s.innerHTML=t,s.title=e,s}_createFillButton(t,e,s){const n=document.createElement("button");n.className="tool-btn fill-btn",n.title=e;const l=document.createElement("div");l.className="fill-btn-wrap";const a=document.createElement("span");a.className="fill-btn-icon",a.innerHTML=t;const c=document.createElement("div");c.className="fill-btn-color-bg";const d=document.createElement("div");return d.className="fill-btn-color",d.style.backgroundColor=s,c.appendChild(d),l.appendChild(a),l.appendChild(c),n.appendChild(l),n}_addSeparator(){if(!this._container)return;const t=document.createElement("div");t.className="divider",this._container.appendChild(t)}_toggleDropdown(t,e,s){t.stopPropagation();const n=e.querySelector(".tv-floating-toolbar__dropdown");if(n&&n.classList.contains("visible")){n.classList.remove("visible");return}this._closeAllDropdowns();let l=e.querySelector(".tv-floating-toolbar__dropdown");l||(l=document.createElement("div"),l.className="tv-floating-toolbar__dropdown",e.appendChild(l)),l.innerHTML="",s(l);const a=()=>{l.classList.remove("visible"),document.removeEventListener("click",a),this._activeDropdownHandlers.delete(a)};this._activeDropdownHandlers.add(a),requestAnimationFrame(()=>{this._activeDropdownHandlers.has(a)&&(l.classList.add("visible"),setTimeout(()=>{this._activeDropdownHandlers.has(a)&&document.addEventListener("click",a)},0))}),l.addEventListener("click",c=>c.stopPropagation())}_closeAllDropdowns(){this._container&&this._container.querySelectorAll(".tv-floating-toolbar__dropdown.visible").forEach(t=>t.classList.remove("visible"))}_createWidthList(t,e,s,n){const l=[1,2,3,4],a=e._options?.lineWidth||e._options?.width||1;l.forEach(c=>{const d=document.createElement("div");d.className="tv-width-picker__item",c===a&&d.classList.add("active"),d.innerHTML=`
                <div class="tv-width-picker__line" style="height: ${c}px"></div>
                <div class="tv-width-picker__text">${c}px</div>
            `,d.addEventListener("click",()=>{this._applyWidth(e,c),s.style.height=`${c}px`,n.textContent=`${c}px`,t.classList.remove("visible")}),t.appendChild(d)})}_createFontSizeList(t,e,s){const n=[8,10,11,12,14,16,18,20,22,24,28,32,40],l=e._options?.fontSize||14;n.forEach(a=>{const c=document.createElement("div");c.className="tv-font-size-picker__item",a===l&&c.classList.add("active"),c.innerHTML=`<div class="tv-font-size-picker__text">${a}</div>`,c.addEventListener("click",()=>{this._applyFontSize(e,a),s.textContent=`${a}`,t.classList.remove("visible")}),t.appendChild(c)})}_createTemplateList(t,e){const s=document.createElement("div");s.className="tv-template-item",s.innerHTML="<span>Save Drawing Template As...</span>",s.addEventListener("click",()=>{this._saveTemplate(e),t.classList.remove("visible")}),t.appendChild(s);const n=document.createElement("div");n.className="tv-template-item",n.innerHTML="<span>Apply Default Drawing Template</span>",t.appendChild(n);const l=Oa.loadTemplates();if(l.length>0){const a=document.createElement("div");a.className="tv-dropdown-separator",t.appendChild(a),l.forEach(c=>{const d=document.createElement("div");d.className="tv-template-item",d.innerHTML=`
                    <span class="tv-template-item__name">${this._escapeHtml(c.name)}</span>
                    <button class="tv-template-item__delete" title="Delete template"></button>
                `,d.querySelector(".tv-template-item__name")?.addEventListener("click",()=>{Oa.applyTemplate(c.id,e)&&this._renderExpanded(e)}),d.querySelector(".tv-template-item__delete")?.addEventListener("click",f=>{f.stopPropagation(),Oa.deleteTemplate(c.id)&&(t.innerHTML="",this._createTemplateList(t,e))}),t.appendChild(d)})}}_createColorGrid(t,e,s,n){const l=["#ffffff","#e1e1e1","#b2b5be","#787b86","#5d606b","#434651","#2a2e39","#131722","#f23645","#ff9800","#ffe600","#4caf50","#00bcd4","#2962ff","#673ab7","#9c27b0","#ef9a9a","#ffe0b2","#fff9c4","#c8e6c9","#b2ebf2","#bbdefb","#d1c4e9","#e1bee7","#e57373","#ffcc80","#fff59d","#a5d6a7","#80deea","#90caf9","#b39ddb","#ce93d8","#ef5350","#ffb74d","#fff176","#81c784","#4dd0e1","#64b5f6","#9575cd","#ba68c8","#e53935","#ffa726","#ffee58","#66bb6a","#26c6da","#42a5f5","#7e57c2","#ab47bc","#d32f2f","#fb8c00","#fdd835","#43a047","#00acc1","#1e88e5","#5e35b1","#8e24aa","#c62828","#f57c00","#fbc02d","#388e3c","#0097a7","#1976d2","#512da8","#7b1fa2"],a=document.createElement("div");a.className="tv-color-picker__grid";const c=e._options||{};let d=s==="line"?c.lineColor||c.borderColor||c.color||"#2962ff":s==="text"?c.textColor||"#131722":c.backgroundColor||"#2962ff";l.forEach(v=>{const w=document.createElement("div");w.className="tv-color-picker__swatch",w.style.backgroundColor=v,d.toLowerCase().startsWith(v.toLowerCase())&&w.classList.add("active"),w.addEventListener("click",()=>{this._applyColor(e,v,s);const y=n.querySelector(".fill-btn-color");y&&(y.style.backgroundColor=v),this._updateOpacitySlider(t,v)}),a.appendChild(w)}),t.appendChild(a);const f=document.createElement("div");f.className="tv-dropdown-separator",t.appendChild(f);const p=document.createElement("div");p.className="tv-color-picker__custom-btn",p.innerHTML='<svg viewBox="0 0 24 24" width="24" height="24"><path fill="currentColor" d="M11 5h2v6h6v2h-6v6h-2v-6H5v-2h6V5Z"/></svg>';const m=document.createElement("input");m.type="color",m.className="tv-color-picker__input",m.addEventListener("input",v=>{this._applyColor(e,v.target.value,s);const w=n.querySelector(".fill-btn-color");w&&(w.style.backgroundColor=v.target.value),this._updateOpacitySlider(t,v.target.value)}),p.appendChild(m),t.appendChild(p),this._renderOpacitySlider(t,e,s)}_renderOpacitySlider(t,e,s){const n=document.createElement("div");n.className="tv-opacity-slider";const l=document.createElement("div");l.className="tv-opacity-slider__label",l.textContent="Opacity",n.appendChild(l);const a=document.createElement("div");a.className="tv-opacity-slider__controls";const c=document.createElement("div");c.className="tv-opacity-slider__track";const d=document.createElement("div");d.className="tv-opacity-slider__thumb",c.appendChild(d),a.appendChild(c);const f=document.createElement("div");f.className="tv-opacity-slider__value",a.appendChild(f),n.appendChild(a),t.appendChild(n);const p=e._options||{};let m=s==="line"?p.lineColor||p.borderColor||p.color||"#2962ff":p.backgroundColor||"#2962ff",v=1;if(m.startsWith("rgba")){const b=m.match(/rgba?\([^,]+,[^,]+,[^,]+,\s*([^)]+)\)/);b&&(v=parseFloat(b[1]))}const w=Math.round(v*100);d.style.left=`${w}%`,f.innerText=`${w}%`;const y=b=>{const S=c.getBoundingClientRect();let x=b-S.left;x=Math.max(0,Math.min(x,S.width));const U=Math.round(x/S.width*100);d.style.left=`${U}%`,f.innerText=`${U}%`,this._applyOpacity(e,U/100,s)};c.addEventListener("mousedown",b=>{this._activeDragHandlers&&(document.removeEventListener("mousemove",this._activeDragHandlers.move),document.removeEventListener("mouseup",this._activeDragHandlers.up)),y(b.clientX);const S=U=>y(U.clientX),x=()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",x),this._activeDragHandlers=null};this._activeDragHandlers={move:S,up:x},document.addEventListener("mousemove",S),document.addEventListener("mouseup",x),b.preventDefault()})}_updateOpacitySlider(t,e){const s=t.querySelector(".tv-opacity-slider__track");s&&(s.style.background=`linear-gradient(to right, #E0E3EB 0%, ${e} 100%)`)}_applyOpacity(t,e,s){const n=t._options||{};let l=s==="line"?n.lineColor||n.borderColor||n.color||"#2962ff":s==="text"?n.textColor||"#131722":n.backgroundColor||"#2962ff";if(l.startsWith("#")){const a=parseInt(l.slice(1,3),16),c=parseInt(l.slice(3,5),16),d=parseInt(l.slice(5,7),16);l=`rgba(${a}, ${c}, ${d}, ${e})`}else l.startsWith("rgb")&&(l=l.replace(/[\d\.]+\)$/g,`${e})`));this._applyColor(t,l,s)}_applyColor(t,e,s){const n=t._options||{};let l=s==="line"?n.lineColor||n.borderColor||n.color||"#2962ff":s==="text"?n.textColor||n.color||"#131722":n.backgroundColor||"#2962ff";if(!e.startsWith("rgba")){let c=1;if(l.startsWith("rgba")){const d=l.match(/rgba?\([^,]+,[^,]+,[^,]+,\s*([^)]+)\)/);d&&(c=parseFloat(d[1]))}if(c<1&&e.startsWith("#")){const d=parseInt(e.slice(1,3),16),f=parseInt(e.slice(3,5),16),p=parseInt(e.slice(5,7),16);e=`rgba(${d}, ${f}, ${p}, ${c})`}}const a={};if(s==="line"?(n.lineColor!==void 0&&(a.lineColor=e),n.borderColor!==void 0&&(a.borderColor=e),n.color!==void 0&&n.textColor===void 0&&(a.color=e),n.textColor!==void 0&&n.backgroundColor===void 0&&(a.textColor=e)):s==="text"?(n.textColor!==void 0&&(a.textColor=e),n.color!==void 0&&n.textColor===void 0&&(a.color=e)):n.backgroundColor!==void 0&&(a.backgroundColor=e),t.applyOptions(a),this._manager){const c=t.toolType||t.constructor.name;this._manager.updateToolOptions(c,a)}}_applyWidth(t,e){if(!this._manager)return;const s={};t._options?.lineWidth!==void 0&&(s.lineWidth=e),t._options?.width!==void 0&&(s.width=e),t.applyOptions(s);const n=t.toolType||t.constructor.name;this._manager.updateToolOptions(n,s)}_applyFontSize(t,e){if(!this._manager)return;const s={fontSize:e};t.applyOptions(s);const n=t.toolType||t.constructor.name;this._manager.updateToolOptions(n,s)}_saveTemplate(t){const e=prompt("Enter template name:");if(!e)return;const s=Oa.extractStyles(t);Oa.saveTemplate(e,s)}_escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}_startDrag(t){if(!this._container||!this._manager)return;this._activeDragHandlers&&(document.removeEventListener("mousemove",this._activeDragHandlers.move),document.removeEventListener("mouseup",this._activeDragHandlers.up)),t.preventDefault();const e=t.clientX,s=t.clientY,n=this._container.getBoundingClientRect(),l=n.left,a=n.top,c=f=>{if(!this._container||!this._manager){document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",d),this._activeDragHandlers=null;return}const p=f.clientX-e,m=f.clientY-s;let v=l+p,w=a+m;const y=this._manager.getChartRect(),b=this._container.getBoundingClientRect();let S=0,x=0,U=window.innerWidth-b.width,M=window.innerHeight-b.height;y&&(S=y.left,x=y.top,U=y.right-b.width,M=y.bottom-b.height),v=Math.max(S,Math.min(v,U)),w=Math.max(x,Math.min(w,M)),this._container.style.left=`${v}px`,this._container.style.top=`${w}px`},d=()=>{if(document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",d),this._activeDragHandlers=null,this._container){const f=this._container.getBoundingClientRect();this._savedPosition={x:f.left,y:f.top}}};this._activeDragHandlers={move:c,up:d},document.addEventListener("mousemove",c),document.addEventListener("mouseup",d)}}class Z6{_viewData;constructor(t){this._viewData=t}draw(t){const e=this._viewData.data;t.useBitmapCoordinateSpace(s=>{const n=s.context,l=0,a=s.bitmapSize.height,c=s.horizontalPixelRatio*this._viewData.barWidth/2,d=-1*(c+1),f=s.bitmapSize.width;e.forEach(p=>{const m=p.x*s.horizontalPixelRatio;if(m<d)return;n.fillStyle=p.color||"rgba(0, 0, 0, 0)";const v=Math.max(0,Math.round(m-c)),w=Math.min(f,Math.round(m+c));n.fillRect(v,l,w-v,a)})})}}class tI{_source;_data;constructor(t){this._source=t,this._data={data:[],barWidth:6,options:this._source._options}}update(){const t=this._source.chart.timeScale();this._data.data=this._source._backgroundColors.map(e=>({x:t.timeToCoordinate(e.time)??-100,color:e.color})),this._data.data.length>1?this._data.barWidth=this._data.data[1].x-this._data.data[0].x:this._data.barWidth=6}renderer(){return new Z6(this._data)}zOrder(){return"bottom"}}const eI={};class pg extends pC{_paneViews;_seriesData=[];_backgroundColors=[];_options;_highlighter;constructor(t,e={}){super(),this._highlighter=t,this._options={...eI,...e},this._paneViews=[new tI(this)]}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}attached(t){super.attached(t),this.dataUpdated("full")}dataUpdated(t){this._backgroundColors=this.series.data().map(e=>({time:e.time,color:this._highlighter(e.time)})),this.requestUpdate()}}const Eu=21,mC=21,sI=17,gg=4,iI=2,tw=13,ew=13,sw=5,_C=5.81,Cl=26,vC=20,i1=9,AI=[new Path2D("M5.34004 1.12254C4.7902 0.438104 3.94626 0 3 0C1.34315 0 0 1.34315 0 3C0 3.94626 0.438104 4.7902 1.12254 5.34004C1.04226 5.714 1 6.10206 1 6.5C1 9.36902 3.19675 11.725 6 11.9776V10.9725C3.75002 10.7238 2 8.81628 2 6.5C2 4.01472 4.01472 2 6.5 2C8.81628 2 10.7238 3.75002 10.9725 6H11.9776C11.9574 5.77589 11.9237 5.55565 11.8775 5.34011C12.562 4.79026 13.0001 3.9463 13.0001 3C13.0001 1.34315 11.6569 0 10.0001 0C9.05382 0 8.20988 0.438111 7.66004 1.12256C7.28606 1.04227 6.89797 1 6.5 1C6.10206 1 5.714 1.04226 5.34004 1.12254ZM4.28255 1.46531C3.93534 1.17484 3.48809 1 3 1C1.89543 1 1 1.89543 1 3C1 3.48809 1.17484 3.93534 1.46531 4.28255C2.0188 3.02768 3.02768 2.0188 4.28255 1.46531ZM8.71751 1.46534C9.97237 2.01885 10.9812 3.02774 11.5347 4.28262C11.8252 3.93541 12.0001 3.48812 12.0001 3C12.0001 1.89543 11.1047 1 10.0001 1C9.51199 1 9.06472 1.17485 8.71751 1.46534Z"),new Path2D("M7 7V4H8V8H5V7H7Z"),new Path2D("M10 8V10H8V11H10V13H11V11H13V10H11V8H10Z")],nI=[new Path2D("M5.11068 1.65894C3.38969 2.08227 1.98731 3.31569 1.33103 4.93171C0.938579 4.49019 0.700195 3.90868 0.700195 3.27148C0.700195 1.89077 1.81948 0.771484 3.2002 0.771484C3.9664 0.771484 4.65209 1.11617 5.11068 1.65894Z"),new Path2D("M12.5 3.37148C12.5 4.12192 12.1694 4.79514 11.6458 5.25338C11.0902 3.59304 9.76409 2.2857 8.09208 1.7559C8.55066 1.21488 9.23523 0.871484 10 0.871484C11.3807 0.871484 12.5 1.99077 12.5 3.37148Z"),new Path2D("M6.42896 11.4999C8.91424 11.4999 10.929 9.48522 10.929 6.99994C10.929 4.51466 8.91424 2.49994 6.42896 2.49994C3.94367 2.49994 1.92896 4.51466 1.92896 6.99994C1.92896 9.48522 3.94367 11.4999 6.42896 11.4999ZM6.00024 3.99994V6.99994H4.00024V7.99994H7.00024V3.99994H6.00024Z"),new Path2D("M4.08902 0.934101C4.4888 1.08621 4.83946 1.33793 5.11068 1.65894C5.06565 1.67001 5.02084 1.68164 4.97625 1.69382C4.65623 1.78123 4.34783 1.89682 4.0539 2.03776C3.16224 2.4653 2.40369 3.12609 1.8573 3.94108C1.64985 4.2505 1.47298 4.58216 1.33103 4.93171C1.05414 4.6202 0.853937 4.23899 0.760047 3.81771C0.720863 3.6419 0.700195 3.45911 0.700195 3.27148C0.700195 1.89077 1.81948 0.771484 3.2002 0.771484C3.51324 0.771484 3.81285 0.829023 4.08902 0.934101ZM12.3317 4.27515C12.4404 3.99488 12.5 3.69015 12.5 3.37148C12.5 1.99077 11.3807 0.871484 10 0.871484C9.66727 0.871484 9.34974 0.936485 9.05938 1.05448C8.68236 1.20769 8.35115 1.45027 8.09208 1.7559C8.43923 1.8659 8.77146 2.00942 9.08499 2.18265C9.96762 2.67034 10.702 3.39356 11.2032 4.26753C11.3815 4.57835 11.5303 4.90824 11.6458 5.25338C11.947 4.98973 12.1844 4.65488 12.3317 4.27515ZM9.18112 3.43939C8.42029 2.85044 7.46556 2.49994 6.42896 2.49994C3.94367 2.49994 1.92896 4.51466 1.92896 6.99994C1.92896 9.48522 3.94367 11.4999 6.42896 11.4999C8.91424 11.4999 10.929 9.48522 10.929 6.99994C10.929 5.55126 10.2444 4.26246 9.18112 3.43939ZM6.00024 3.99994H7.00024V7.99994H4.00024V6.99994H6.00024V3.99994Z")],rI=10,lI=new Path2D("M9.35359 1.35359C9.11789 1.11789 8.88219 0.882187 8.64648 0.646484L5.00004 4.29293L1.35359 0.646484C1.11791 0.882212 0.882212 1.11791 0.646484 1.35359L4.29293 5.00004L0.646484 8.64648C0.882336 8.88204 1.11804 9.11774 1.35359 9.35359L5.00004 5.70714L8.64648 9.35359C8.88217 9.11788 9.11788 8.88217 9.35359 8.64649L5.70714 5.00004L9.35359 1.35359Z");class Xn{_listeners=[];subscribe(t,e,s){const n={callback:t,linkedObject:e,singleshot:s===!0};this._listeners.push(n)}unsubscribe(t){const e=this._listeners.findIndex(s=>t===s.callback);e>-1&&this._listeners.splice(e,1)}unsubscribeAll(t){this._listeners=this._listeners.filter(e=>e.linkedObject!==t)}fire(t){const e=[...this._listeners];this._listeners=this._listeners.filter(s=>!s.singleshot),e.forEach(s=>s.callback(t))}hasListeners(){return this._listeners.length>0}destroy(){this._listeners=[]}}class oI{_chart=void 0;_series=void 0;_unSubscribers=[];_clicked=new Xn;_mouseMoved=new Xn;_mouseDown=new Xn;_mouseUp=new Xn;attached(t,e){this._chart=t,this._series=e;const s=this._chart.chartElement();this._addMouseEventListener(s,"mouseleave",this._mouseLeave),this._addMouseEventListener(s,"mousemove",this._mouseMove),this._addMouseEventListener(s,"click",this._mouseClick),this._addMouseEventListener(s,"mousedown",this._handleMouseDown),this._addMouseEventListener(s,"mouseup",this._handleMouseUp)}detached(){this._series=void 0,this._clicked.destroy(),this._mouseMoved.destroy(),this._mouseDown.destroy(),this._mouseUp.destroy(),this._unSubscribers.forEach(t=>{t()}),this._unSubscribers=[]}clicked(){return this._clicked}mouseMoved(){return this._mouseMoved}mouseDown(){return this._mouseDown}mouseUp(){return this._mouseUp}_addMouseEventListener(t,e,s){const n=s.bind(this);t.addEventListener(e,n);const l=()=>{t.removeEventListener(e,n)};this._unSubscribers.push(l)}_mouseLeave(){this._mouseMoved.fire(null)}_mouseMove(t){this._mouseMoved.fire(this._determineMousePosition(t))}_mouseClick(t){this._clicked.fire(this._determineMousePosition(t))}_handleMouseDown(t){this._mouseDown.fire(this._determineMousePosition(t))}_handleMouseUp(t){this._mouseUp.fire(this._determineMousePosition(t))}_determineMousePosition(t){if(!this._chart||!this._series)return null;const e=this._chart.chartElement(),s=e.getBoundingClientRect(),n=this._series.priceScale().width(),l=this._chart.timeScale().height(),a=t.clientX-s.x,c=t.clientY-s.y,d=c>e.clientHeight-l,f=e.clientWidth-n-a,p=f<0;return{x:a,y:c,xPositionRelativeToPriceScale:f,overPriceScale:p,overTimeScale:d}}}class BC{_data=null;update(t){this._data=t}}function aI(A){return Math.floor(A*.5)}function To(A,t,e=1,s){const n=Math.round(t*A),l=Math.round(e*t),a=aI(l);return{position:n-a,length:l}}class cI extends BC{draw(t){t.useBitmapCoordinateSpace(e=>{this._data&&(this._drawAlertLines(e),this._drawAlertIcons(e),this._data.alerts.some(s=>s.showHover&&s.hoverRemove)||(this._drawCrosshairLine(e),this._drawCrosshairLabelButton(e)),this._drawAlertLabel(e))})}_drawHorizontalLine(t,e){const s=t.context;try{const n=To(e.y,t.verticalPixelRatio,e.lineWidth),l=n.position+n.length/2;s.save(),s.beginPath(),s.lineWidth=e.lineWidth,s.strokeStyle=e.color;const a=4*t.horizontalPixelRatio;s.setLineDash([a,a]),s.moveTo(0,l),s.lineTo((e.width-Eu)*t.horizontalPixelRatio,l),s.stroke()}finally{s.restore()}}_drawAlertLines(t){if(!this._data?.alerts)return;const e=this._data.color;this._data.alerts.forEach(s=>{this._drawHorizontalLine(t,{width:t.mediaSize.width,lineWidth:1,color:e,y:s.y})})}_drawAlertIcons(t){if(!this._data?.alerts)return;const e=this._data.color,s=this._data.alertIcon;this._data.alerts.forEach(n=>{this._drawLabel(t,{width:t.mediaSize.width,labelHeight:sI,y:n.y,roundedCorners:2,icon:s,iconScaling:ew/tw,padding:{left:gg,top:iI},color:e})})}_calculateLabelWidth(t){return i1*2+Cl+t*_C}_drawAlertLabel(t){if(!this._data?.alerts)return;const e=t.context,s=this._data.alerts.find(c=>c.showHover);if(!s||!s.showHover)return;const n=this._calculateLabelWidth(s.text.length),l=To(t.mediaSize.width/2,t.horizontalPixelRatio,n),a=To(s.y,t.verticalPixelRatio,vC);e.save();try{const c=4*t.horizontalPixelRatio;e.beginPath(),e.roundRect(l.position,a.position,l.length,a.length,c),e.fillStyle="#FFFFFF",e.fill();const d=l.position+l.length-Cl*t.horizontalPixelRatio;s.hoverRemove&&(e.beginPath(),e.roundRect(d,a.position,Cl*t.horizontalPixelRatio,a.length,[0,c,c,0]),e.fillStyle="#F0F3FA",e.fill()),e.beginPath();const f=To(d/t.horizontalPixelRatio,t.horizontalPixelRatio,1);e.fillStyle="#F1F3FB",e.fillRect(f.position,a.position,f.length,a.length),e.beginPath(),e.roundRect(l.position,a.position,l.length,a.length,c),e.strokeStyle="#131722",e.lineWidth=1*t.horizontalPixelRatio,e.stroke(),e.beginPath(),e.fillStyle="#131722",e.textBaseline="middle",e.font=`${Math.round(12*t.verticalPixelRatio)}px sans-serif`,e.fillText(s.text,l.position+i1*t.horizontalPixelRatio,s.y*t.verticalPixelRatio),e.beginPath();const p=9;e.translate(d+t.horizontalPixelRatio*(Cl-p)/2,(s.y-5)*t.verticalPixelRatio);const m=p/rI*t.horizontalPixelRatio;e.scale(m,m),e.fillStyle="#131722",e.fill(lI,"evenodd")}finally{e.restore()}}_drawCrosshairLine(t){this._data?.crosshair&&this._drawHorizontalLine(t,{width:t.mediaSize.width,lineWidth:1,color:this._data.color,y:this._data.crosshair.y})}_drawCrosshairLabelButton(t){!this._data?.button||!this._data?.crosshair||this._drawLabel(t,{width:t.mediaSize.width,labelHeight:mC,y:this._data.crosshair.y,roundedCorners:[2,0,0,2],icon:this._data.button.crosshairLabelIcon,iconScaling:ew/tw,padding:{left:gg,top:gg},color:this._data.button.hovering?this._data.button.hoverColor:this._data.color})}_drawLabel(t,e){const s=t.context;try{s.save(),s.beginPath();const n=To(e.y,t.verticalPixelRatio,e.labelHeight),l=(e.width-(Eu+1))*t.horizontalPixelRatio;s.roundRect(l,n.position,Eu*t.horizontalPixelRatio,n.length,hI(e.roundedCorners,t.horizontalPixelRatio)),s.fillStyle=e.color,s.fill(),s.beginPath(),s.translate(l+e.padding.left*t.horizontalPixelRatio,n.position+e.padding.top*t.verticalPixelRatio),s.scale(e.iconScaling*t.horizontalPixelRatio,e.iconScaling*t.verticalPixelRatio),s.fillStyle="#FFFFFF",e.icon.forEach(a=>{s.beginPath(),s.fill(a,"evenodd")})}finally{s.restore()}}}function hI(A,t){return typeof A=="number"?A*t:A.map(e=>e*t)}class uI extends BC{draw(t){t.useBitmapCoordinateSpace(e=>{this._data&&this._drawCrosshairLabel(e)})}_drawCrosshairLabel(t){if(!this._data?.crosshair)return;const e=t.context;try{const s=t.bitmapSize.width-8*t.horizontalPixelRatio;e.save(),e.beginPath(),e.fillStyle=this._data.color;const n=To(this._data.crosshair.y,t.verticalPixelRatio,mC),l=2*t.horizontalPixelRatio;e.roundRect(0,n.position,s,n.length,[0,l,l,0]),e.fill(),e.beginPath(),e.fillStyle="#FFFFFF",e.textBaseline="middle",e.textAlign="right",e.font=`${Math.round(12*t.verticalPixelRatio)}px sans-serif`;const a=e.measureText(this._data.crosshair.text);e.fillText(this._data.crosshair.text,a.width+10*t.horizontalPixelRatio,this._data.crosshair.y*t.verticalPixelRatio)}finally{e.restore()}}}class iw{_renderer;constructor(t){this._renderer=t?new uI:new cI}zOrder(){return"top"}renderer(){return this._renderer}update(t){this._renderer.update(t)}}class dI{_alertAdded=new Xn;_alertRemoved=new Xn;_alertChanged=new Xn;_alertsChanged=new Xn;_alerts;constructor(){this._alerts=new Map,this._alertsChanged.subscribe(()=>{this._updateAlertsArray()},this)}destroy(){this._alertsChanged.unsubscribeAll(this)}alertAdded(){return this._alertAdded}alertRemoved(){return this._alertRemoved}alertChanged(){return this._alertChanged}alertsChanged(){return this._alertsChanged}addAlert(t){return this.addAlertWithCondition(t,"crossing")}addAlertWithCondition(t,e){const s=this._getNewId(),n={price:t,id:s,condition:e};return this._alerts.set(s,n),this._alertAdded.fire(n),this._alertsChanged.fire(),s}removeAlert(t){this._alerts.has(t)&&(this._alerts.delete(t),this._alertRemoved.fire(t),this._alertsChanged.fire())}updateAlertPrice(t,e){const s=this._alerts.get(t);s&&(s.price=e,this._alertChanged.fire(s),this._alertsChanged.fire())}updateAlert(t,e,s){const n=this._alerts.get(t);n&&(n.price=e,n.condition=s,this._alertChanged.fire(n),this._alertsChanged.fire())}alerts(){return this._alertsArray}_alertsArray=[];_updateAlertsArray(){this._alertsArray=Array.from(this._alerts.values()).sort((t,e)=>e.price-t.price)}_getNewId(){let t=Math.round(Math.random()*1e6).toString(16);for(;this._alerts.has(t);)t=Math.round(Math.random()*1e6).toString(16);return t}}class fI{_overlay=null;_onSave=null;_currentData=null;_overlayClickHandler=null;constructor(){this._injectStyles()}_injectStyles(){const t="alert-edit-dialog-styles";if(document.getElementById(t))return;const e=`
            .alert-edit-dialog-overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.4);
                z-index: 10001;
                display: flex;
                align-items: center;
                justify-content: center;
                font-family: -apple-system, BlinkMacSystemFont, "Trebuchet MS", Roboto, Ubuntu, sans-serif;
            }

            .alert-edit-dialog {
                background: #ffffff;
                border-radius: 8px;
                box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
                width: 400px;
                max-width: 90%;
                overflow: hidden;
                animation: dialogFadeIn 0.2s ease-out;
            }

            .alert-edit-dialog-header {
                padding: 16px 20px;
                border-bottom: 1px solid #E0E3EB;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .alert-edit-dialog-title {
                font-size: 18px;
                font-weight: 600;
                color: #131722;
                margin: 0;
            }

            .alert-edit-dialog-close {
                background: none;
                border: none;
                cursor: pointer;
                padding: 4px;
                color: #787B86;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 4px;
            }

            .alert-edit-dialog-close:hover {
                background: #F0F3FA;
                color: #131722;
            }

            .alert-edit-dialog-content {
                padding: 20px;
                display: flex;
                flex-direction: column;
                gap: 16px;
            }

            .alert-edit-form-group {
                display: flex;
                flex-direction: column;
                gap: 6px;
            }

            .alert-edit-label {
                font-size: 14px;
                color: #787B86;
            }

            .alert-edit-input, .alert-edit-select {
                padding: 8px 12px;
                border: 1px solid #E0E3EB;
                border-radius: 4px;
                font-size: 14px;
                color: #131722;
                outline: none;
                transition: border-color 0.2s;
            }

            .alert-edit-input:focus, .alert-edit-select:focus {
                border-color: #2962FF;
            }

            .alert-edit-dialog-footer {
                padding: 16px 20px;
                display: flex;
                justify-content: flex-end;
                gap: 12px;
                border-top: 1px solid #E0E3EB;
                background: #F8F9FD;
            }

            .alert-edit-btn {
                padding: 8px 16px;
                border-radius: 4px;
                font-size: 14px;
                font-weight: 500;
                cursor: pointer;
                border: none;
                transition: background 0.2s;
            }

            .alert-edit-btn-cancel {
                background: transparent;
                color: #131722;
                border: 1px solid #E0E3EB;
            }

            .alert-edit-btn-cancel:hover {
                background: #F0F3FA;
            }

            .alert-edit-btn-save {
                background: #2962FF;
                color: white;
            }

            .alert-edit-btn-save:hover {
                background: #1E53E5;
            }

            @keyframes dialogFadeIn {
                from { opacity: 0; transform: scale(0.95); }
                to { opacity: 1; transform: scale(1); }
            }
        `,s=document.createElement("style");s.id=t,s.textContent=e,document.head.appendChild(s)}show(t,e){this._currentData={...t},this._onSave=e,this._createOverlay(),document.body.appendChild(this._overlay)}hide(){this._overlay&&(this._overlayClickHandler&&(this._overlay.removeEventListener("click",this._overlayClickHandler),this._overlayClickHandler=null),this._overlay.parentNode&&this._overlay.parentNode.removeChild(this._overlay)),this._overlay=null,this._onSave=null,this._currentData=null}_createOverlay(){this._overlay=document.createElement("div"),this._overlay.className="alert-edit-dialog-overlay",this._overlayClickHandler=b=>{b.target===this._overlay&&this.hide()},this._overlay.addEventListener("click",this._overlayClickHandler);const t=document.createElement("div");t.className="alert-edit-dialog",this._overlay.appendChild(t);const e=document.createElement("div");e.className="alert-edit-dialog-header";const s=document.createElement("h2");s.className="alert-edit-dialog-title",s.textContent=`Edit alert on ${this._currentData?.symbol||""}`,e.appendChild(s);const n=document.createElement("button");n.className="alert-edit-dialog-close",n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="currentColor" d="M9 7.586L14.293 2.293l1.414 1.414L10.414 9l5.293 5.293-1.414 1.414L9 10.414l-5.293 5.293-1.414-1.414L7.586 9 2.293 3.707l1.414-1.414L9 7.586z"/></svg>',n.addEventListener("click",()=>this.hide()),e.appendChild(n),t.appendChild(e);const l=document.createElement("div");l.className="alert-edit-dialog-content";const a=document.createElement("div");a.className="alert-edit-form-group";const c=document.createElement("label");c.className="alert-edit-label",c.textContent="Condition",a.appendChild(c);const d=document.createElement("select");d.className="alert-edit-select";const f=[{value:"crossing",label:"Crossing"},{value:"crossing_up",label:"Crossing Up"},{value:"crossing_down",label:"Crossing Down"},{value:"entering",label:"Entering"},{value:"exiting",label:"Exiting"},{value:"inside",label:"Inside"},{value:"outside",label:"Outside"}];let p=f;this._currentData?.toolType==="vertical"?p=f.filter(b=>b.value==="crossing"):this._currentData?.toolType==="shape"?p=f.filter(b=>["entering","exiting","inside","outside"].includes(b.value)):p=f.filter(b=>["crossing","crossing_up","crossing_down"].includes(b.value)),p.forEach(b=>{const S=document.createElement("option");S.value=b.value,S.textContent=b.label,b.value===this._currentData?.condition&&(S.selected=!0),d.appendChild(S)}),a.appendChild(d),l.appendChild(a);let m=null;if(!this._currentData?.isTrendline){const b=document.createElement("div");b.className="alert-edit-form-group";const S=document.createElement("label");S.className="alert-edit-label",S.textContent="Value",b.appendChild(S),m=document.createElement("input"),m.className="alert-edit-input",m.type="number",m.step="0.01",m.value=this._currentData?.price.toFixed(2)||"",b.appendChild(m),l.appendChild(b)}t.appendChild(l);const v=document.createElement("div");v.className="alert-edit-dialog-footer";const w=document.createElement("button");w.className="alert-edit-btn alert-edit-btn-cancel",w.textContent="Cancel",w.addEventListener("click",()=>this.hide()),v.appendChild(w);const y=document.createElement("button");y.className="alert-edit-btn alert-edit-btn-save",y.textContent="Save",y.addEventListener("click",()=>{this._onSave&&this._currentData&&this._onSave({...this._currentData,condition:d.value,price:m?parseFloat(m.value):this._currentData.price}),this.hide()}),v.appendChild(y),t.appendChild(v)}}class Ph{static getPriceAtLogical(t,e){return t instanceof Bl?t.getPriceAtLogical(e):t instanceof Io?t._price:t instanceof No&&e>=t._point.logical?t._point.price:null}static checkAlert(t,e,s,n){return t instanceof Bl||t instanceof Io||t instanceof No?this.checkLineCrossing(t,e,s,n):t instanceof Lo?this.checkVerticalCrossing(t,s,n):t instanceof Ho?this.checkRectangleAlert(t,e,s,n):t instanceof wl?this.checkChannelAlert(t,e,s,n):!1}static checkLineCrossing(t,e,s,n){const l=this.getPriceAtLogical(t,s);if(l===null)return!1;const a=l>=e.low&&l<=e.high;return n==="crossing"?a:n==="crossing_up"?a&&e.close>=l:n==="crossing_down"?a&&e.close<=l:!1}static checkVerticalCrossing(t,e,s){return s!=="crossing"?!1:Math.round(e)===Math.round(t._logical)}static checkRectangleAlert(t,e,s,n){const l=t._p1,a=t._p2;if(l.logical===null||l.price===null||a.logical===null||a.price===null)return!1;const c=Math.min(l.logical,a.logical),d=Math.max(l.logical,a.logical),f=Math.min(l.price,a.price),p=Math.max(l.price,a.price);if(s<c||s>d)return n==="outside";const m=e.close>=f&&e.close<=p,v=e.open>=f&&e.open<=p;return n==="inside"?m:n==="outside"?!m:n==="entering"?!v&&m:n==="exiting"?v&&!m:!1}static checkChannelAlert(t,e,s,n){const l=t._p1,a=t._p2,c=t._p3;if(l.logical===null||l.price===null||a.logical===null||a.price===null||c.logical===null||c.price===null)return!1;const d=Math.min(l.logical,a.logical),f=Math.max(l.logical,a.logical);if(s<d||s>f)return!1;let p,m;if(l.logical===a.logical)return!1;const v=(a.price-l.price)/(a.logical-l.logical),w=l.price+v*(s-l.logical),y=l.price+v*(c.logical-l.logical),b=c.price-y;p=w,m=w+b;const S=Math.max(p,m),x=Math.min(p,m),U=e.close>=x&&e.close<=S,M=e.open>=x&&e.open<=S;return n==="inside"?U:n==="outside"?!U:n==="entering"?!M&&U:n==="exiting"?M&&!U:!1}}class pI extends dI{_chart=void 0;_series=void 0;_mouseHandlers;_paneViews=[];_pricePaneViews=[];_lastMouseUpdate=null;_currentCursor=null;_symbolName="";_dragState=null;_hasDragged=!1;_onAlertTriggered=new Xn;_editDialog;_requestUpdate;_onDataChangedBound;constructor(){super(),this._mouseHandlers=new oI,this._editDialog=new fI}attached({chart:t,series:e,requestUpdate:s}){this._chart=t,this._series=e,this._requestUpdate=s,this._paneViews=[new iw(!1)],this._pricePaneViews=[new iw(!0)],this._mouseHandlers.attached(t,e),this._mouseHandlers.mouseMoved().subscribe(n=>{this._lastMouseUpdate=n,s()},this),this._onDataChangedBound=this._onDataChanged.bind(this),this._series.subscribeDataChanged(this._onDataChangedBound),this._mouseHandlers.clicked().subscribe(n=>{if(this._hasDragged){this._hasDragged=!1;return}if(n&&this._series){if(this._isHovering(n)){const a=this._series.coordinateToPrice(n.y);a&&(this.openEditDialog("new",{price:a,condition:"crossing"}),s())}if(this._hoveringID){this.removeAlert(this._hoveringID),s();return}const l=this._getHoveringAlertId(n,!1);l&&this.openEditDialog(l)}},this),this._mouseHandlers.mouseDown().subscribe(n=>{if(this._hasDragged=!1,n&&this._series){const l=this._getHoveringAlertId(n,!1);l&&(this._dragState={alertId:l,startY:n.y},this._chart&&this._chart.applyOptions({handleScroll:!1,handleScale:!1,kineticScroll:{touch:!1,mouse:!1}}))}},this),this._mouseHandlers.mouseUp().subscribe(()=>{this._dragState&&this._chart&&this._chart.applyOptions({handleScroll:!0,handleScale:!0,kineticScroll:{touch:!0,mouse:!0}}),this._dragState=null},this),this._mouseHandlers.mouseMoved().subscribe(n=>{if(this._dragState&&n&&this._series){Math.abs(n.y-this._dragState.startY)>5&&(this._hasDragged=!0);const l=this._series.coordinateToPrice(n.y);l!==null&&(this.updateAlertPrice(this._dragState.alertId,l),s())}},this)}detached(){this._series&&this._onDataChangedBound&&this._series.unsubscribeDataChanged(this._onDataChangedBound),this._mouseHandlers.mouseMoved().unsubscribeAll(this),this._mouseHandlers.clicked().unsubscribeAll(this),this._mouseHandlers.mouseDown().unsubscribeAll(this),this._mouseHandlers.mouseUp().unsubscribeAll(this),this._mouseHandlers.detached(),this._series=void 0,this._requestUpdate=void 0,this._onDataChangedBound=void 0}paneViews(){return this._paneViews}priceAxisPaneViews(){return this._pricePaneViews}_onDataChanged(){if(this._series){const t=this._series.data?.();if(t&&t.length>0){const e=t[t.length-1];this.checkPriceCrossings(e),this.updateAllViews(),this._requestUpdate?.()}}}updateAllViews(){if(this._chart&&this._series){const s=this._series.data?.();if(s&&s.length>0){const n=s[s.length-1],l=this._chart.timeScale(),a=l.timeToCoordinate(n.time);if(a!==null){const c=l.coordinateToLogical(a);c!==null&&this.alerts().forEach(d=>{if(d.type==="tool"&&d.toolRef){const f=Ph.getPriceAtLogical(d.toolRef,c);f!==null&&(d.price=f)}})}}}const t=this.alerts(),e=this._calculateRendererData(t,this._lastMouseUpdate);this._currentCursor=null,(e?.button?.hovering||e?.alerts.some(s=>s.showHover&&s.hoverRemove))&&(this._currentCursor="pointer"),this._paneViews.forEach(s=>s.update(e)),this._pricePaneViews.forEach(s=>s.update(e))}hitTest(){return this._currentCursor?{cursorStyle:this._currentCursor,externalId:"user-alerts-primitive",zOrder:"top"}:null}setSymbolName(t){this._symbolName=t}openEditDialog(t,e){const s=this.alerts().find(l=>l.id===t),n=s?{alertId:s.id,price:s.price,condition:s.condition||"crossing",symbol:this._symbolName,isTrendline:s.type==="tool"}:e?{alertId:t,price:e.price,condition:e.condition,symbol:this._symbolName,isTrendline:!1}:null;n&&this._editDialog.show(n,l=>{s?this.updateAlert(l.alertId,l.price,l.condition):this.addAlertWithCondition(l.price,l.condition)})}openToolAlertDialog(t){let e=0;"_p2"in t&&t._p2&&typeof t._p2.price=="number"?e=t._p2.price:"_price"in t&&typeof t._price=="number"?e=t._price:"_point"in t&&t._point&&typeof t._point.price=="number"&&(e=t._point.price);let s="line";t instanceof Lo?s="vertical":(t instanceof Ho||t instanceof wl)&&(s="shape");const n={alertId:"new_tool",price:e,condition:s==="shape"?"entering":"crossing",symbol:this._symbolName,isTrendline:!0,toolType:s};this._editDialog.show(n,l=>{const a=this.addToolAlert(t,l.condition);"setAlertId"in t&&t.setAlertId(a)})}alertTriggered(){return this._onAlertTriggered}checkPriceCrossings(t){if(!t)return;const e=t.high!==void 0?t.high:t.value!==void 0?t.value:t.close,s=t.low!==void 0?t.low:t.value!==void 0?t.value:t.close,n=t.close!==void 0?t.close:t.value!==void 0?t.value:e,l=this.alerts(),a=[];for(const c of l){let d=!1;const f=c.condition||"crossing";if(c.type==="tool"&&c.toolRef){const p=this._chart?.timeScale();if(p&&t.time){const m=p.coordinateToLogical(p.timeToCoordinate(t.time)||0);if(m!==null){const v=Ph.getPriceAtLogical(c.toolRef,m);if(v!==null){const w=n>v?"above":n<v?"below":"at";if(!c.initialPricePosition||c.initialPricePosition==="unknown"){c.initialPricePosition=w==="at"?"unknown":w;continue}const y=v>=s&&v<=e,b=c.initialPricePosition==="above"&&n<=v,S=c.initialPricePosition==="below"&&n>=v;f==="crossing"?d=y&&(b||S):f==="crossing_up"?d=y&&S&&n>=v:f==="crossing_down"&&(d=y&&b&&n<=v),!y&&w!=="at"&&(c.initialPricePosition=w)}else d=Ph.checkAlert(c.toolRef,t,m,f)}}}else{const p=c.price>=s&&c.price<=e,m=n>c.price?"above":n<c.price?"below":"at";if(!c.initialPricePosition||c.initialPricePosition==="unknown"){c.initialPricePosition=m==="at"?"unknown":m;continue}const v=c.initialPricePosition==="above"&&n<=c.price,w=c.initialPricePosition==="below"&&n>=c.price;f==="crossing"?d=p&&(v||w):f==="crossing_up"?d=p&&w&&n>=c.price:f==="crossing_down"&&(d=p&&v&&n<=c.price),!p&&m!=="at"&&(c.initialPricePosition=m)}if(d){const p={alertId:c.id,alertPrice:c.price,crossingPrice:n,direction:n>c.price?"up":"down",condition:c.condition||"crossing",timestamp:Date.now()};this._onAlertTriggered.fire(p),a.push(c.id)}}a.forEach(c=>this.removeAlert(c))}_isHovering(t){return!!(t&&t.xPositionRelativeToPriceScale>=1&&t.xPositionRelativeToPriceScale<Eu)}_isHoveringRemoveButton(t,e,s,n){if(!t||!e||Math.abs(t.y-s)>vC/2)return!1;const l=i1*2+Cl+n*_C,a=(e+l-Cl)*.5;return Math.abs(t.x-a)<=Cl/2}_hoveringID="";_calculateRendererData(t,e){if(!this._series)return null;const s=this._series.priceFormatter(),n=e&&!e.overTimeScale,l=n,a=e&&this._series.coordinateToPrice(e.y),c=s.format(a??-100);let d=1/0,f=-1;const p=t.map((m,v)=>{const w=this._series.priceToCoordinate(m.price)??-100;if(e?.y&&w>=0){const y=Math.abs(e.y-w);y<d&&(f=v,d=y)}return{y:w,showHover:!1,price:m.price,id:m.id}});if(this._hoveringID="",f>=0&&d<sw){const m=this._chart?.timeScale().width()??0,v=p[f],w=`${this._symbolName} crossing ${this._series.priceFormatter().format(v.price)}`,y=this._isHoveringRemoveButton(e,m,v.y,w.length);p[f]={...p[f],showHover:!0,text:w,hoverRemove:y},y&&(this._hoveringID=v.id)}return{alertIcon:nI,alerts:p,button:l?{hovering:this._isHovering(e),hoverColor:"#50535E",crosshairLabelIcon:AI}:null,color:"#131722",crosshair:n?{y:e.y,text:c}:null}}_getHoveringAlertId(t,e){if(!t||!this._series||!this._chart)return null;const s=this.alerts();let n=1/0,l=-1;for(let a=0;a<s.length;a++){const c=this._series.priceToCoordinate(s[a].price)??-100;if(c>=0){const d=Math.abs(t.y-c);d<n&&(l=a,n=d)}}if(l>=0&&n<sw){if(e){const a=this._chart.timeScale().width(),c=s[l],d=this._series.priceToCoordinate(c.price)??-100,f=`${this._symbolName} crossing ${this._series.priceFormatter().format(c.price)}`;if(!this._isHoveringRemoveButton(t,a,d,f.length))return null}return s[l].id}return null}addToolAlert(t,e){const s=this._getNewId();let n=0;if("_p2"in t&&t._p2&&typeof t._p2.price=="number"?n=t._p2.price:"_price"in t&&typeof t._price=="number"?n=t._price:"_point"in t&&t._point&&typeof t._point.price=="number"&&(n=t._point.price),this._series&&this._chart){const a=this._series.data?.();if(a&&a.length>0){const c=a[a.length-1],d=this._chart.timeScale(),f=d.timeToCoordinate(c.time);if(f!==null){const p=d.coordinateToLogical(f);if(p!==null){const m=Ph.getPriceAtLogical(t,p);m!==null&&(n=m)}}}}const l={price:n,id:s,condition:e,type:"tool",toolRef:t};return this._alerts.set(s,l),this._alertAdded.fire(l),this._alertsChanged.fire(),s}}class gI{_container;_notifications=new Map;_manager;_dismissTimeouts=new Map;constructor(t){this._manager=t,this._injectStyles(),this._container=this._createContainer(),document.body.appendChild(this._container)}_injectStyles(){const t="alert-notification-styles";if(document.getElementById(t))return;const e=document.createElement("style");e.id=t,e.textContent=`
            .alert-notifications-container {
                position: fixed;
                /* Position set by JS */
                z-index: 10000;
                display: flex;
                flex-direction: column;
                gap: 12px;
                pointer-events: none;
                font-family: -apple-system, BlinkMacSystemFont, "Trebuchet MS", Roboto, Ubuntu, sans-serif;
            }

            .alert-notification {
                background: #F5F8FA;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                padding: 16px;
                min-width: 320px;
                max-width: 400px;
                display: flex;
                align-items: flex-start;
                gap: 12px;
                animation: slideIn 0.3s ease-out;
                pointer-events: auto;
            }

            .alert-notification.dismissing {
                animation: slideOut 0.3s ease-out;
            }

            .alert-notification-icon {
                font-size: 24px;
                line-height: 1;
                flex-shrink: 0;
            }

            .alert-notification-content {
                flex: 1;
                display: flex;
                flex-direction: column;
                gap: 4px;
            }

            .alert-notification-header {
                font-size: 14px;
                font-weight: 600;
                color: #131722;
                display: flex;
                align-items: center;
                gap: 4px;
            }

            .alert-notification-message {
                font-size: 13px;
                color: #131722;
                font-weight: 500;
            }

            .alert-notification-footer {
                display: flex;
                align-items: center;
                justify-content: space-between;
                margin-top: 6px;
            }

            .alert-notification-edit {
                font-size: 12px;
                color: #2962FF;
                text-decoration: none;
                cursor: pointer;
            }

            .alert-notification-edit:hover {
                text-decoration: underline;
            }

            .alert-notification-timestamp {
                font-size: 11px;
                color: #787B86;
            }

            .alert-notification-close {
                background: none;
                border: none;
                font-size: 24px;
                line-height: 1;
                color: #787B86;
                cursor: pointer;
                padding: 0;
                width: 24px;
                height: 24px;
                display: flex;
                align-items: center;
                justify-content: center;
                flex-shrink: 0;
                border-radius: 4px;
                transition: all 0.2s ease;
                z-index: 1;
            }

            .alert-notification-close:hover {
                background: rgba(0, 0, 0, 0.05);
                color: #131722;
            }

            @keyframes slideIn {
                from { opacity: 0; transform: translateX(100%); }
                to { opacity: 1; transform: translateX(0); }
            }

            @keyframes slideOut {
                from { opacity: 1; transform: translateX(0); }
                to { opacity: 0; transform: translateX(100%); }
            }
        `,document.head.appendChild(e)}show(t){if(!this._container)return;this._updatePosition(),this._notifications.has(t.alertId)&&this.dismiss(t.alertId);const e=this._createNotification(t);this._container.appendChild(e),this._notifications.set(t.alertId,e);const s=window.setTimeout(()=>{this._dismissTimeouts.delete(t.alertId),this.dismiss(t.alertId)},6e4);this._dismissTimeouts.set(t.alertId,s),this._playAlarm()}_playAlarm(){try{const t=window.AudioContext||window.webkitAudioContext;if(!t)return;const e=new t,s=e.createOscillator(),n=e.createGain();s.connect(n),n.connect(e.destination),s.type="square",s.frequency.value=2048;const l=e.currentTime;for(let a=0;a<10;a++){const c=l+a*.3;n.gain.setValueAtTime(1,c),n.gain.setValueAtTime(0,c+.15)}s.start(l),s.stop(l+3.1),s.onended=()=>e.close()}catch(t){console.error("Alarm sound failed:",t)}}_updatePosition(){if(!this._container||!this._manager)return;const t=this._manager.getChartRect();if(t){const e=t.left+15,s=window.innerHeight-t.bottom+30;this._container.style.left=`${e}px`,this._container.style.bottom=`${s}px`,this._container.style.top="auto",this._container.style.right="auto"}else this._container.style.left="20px",this._container.style.bottom="20px",this._container.style.top="auto",this._container.style.right="auto"}dismiss(t){const e=this._dismissTimeouts.get(t);e&&(clearTimeout(e),this._dismissTimeouts.delete(t));const s=this._notifications.get(t);s&&(s.classList.add("dismissing"),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s),this._notifications.delete(t)},300))}destroy(){this._dismissTimeouts.forEach(t=>{clearTimeout(t)}),this._dismissTimeouts.clear(),this._notifications.forEach((t,e)=>{this.dismiss(e)}),this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container),this._container=null,this._manager=null}_createContainer(){const t=document.createElement("div");return t.className="alert-notifications-container",t}_createNotification(t){const e=document.createElement("div");e.className="alert-notification";const s=document.createElement("div");s.className="alert-notification-icon",s.textContent="",e.appendChild(s);const n=document.createElement("div");n.className="alert-notification-content";const l=document.createElement("div");l.className="alert-notification-header",l.textContent=`Alert on ${t.symbol}`,n.appendChild(l);const a=document.createElement("div");a.className="alert-notification-message";let c="Crossing";t.condition==="crossing_up"?c="Crossing Up":t.condition==="crossing_down"?c="Crossing Down":t.condition==="entering"?c="Entering":t.condition==="exiting"?c="Exiting":t.condition==="inside"?c="Inside":t.condition==="outside"&&(c="Outside"),a.textContent=`${t.symbol} ${c} ${t.price}`,n.appendChild(a);const d=document.createElement("div");d.className="alert-notification-footer";const f=document.createElement("a");f.className="alert-notification-edit",f.href="#",f.textContent="Edit alert",f.addEventListener("click",v=>{v.preventDefault(),t.onEdit&&t.onEdit(t)}),d.appendChild(f);const p=document.createElement("span");p.className="alert-notification-timestamp",p.textContent=this._formatTime(t.timestamp),d.appendChild(p),n.appendChild(d),e.appendChild(n);const m=document.createElement("button");return m.className="alert-notification-close",m.innerHTML="",m.addEventListener("click",v=>{v.stopPropagation(),this.dismiss(t.alertId)}),e.appendChild(m),e}_formatTime(t){const e=new Date(t),s=e.getHours().toString().padStart(2,"0"),n=e.getMinutes().toString().padStart(2,"0"),l=e.getSeconds().toString().padStart(2,"0");return`${s}:${n}:${l}`}}class mI{_chart;_toolbar=null;_isDestroyed=!1;_scrollInterval=null;_handleMouseMove=null;_handleMouseLeave=null;_handleToolbarEnter=null;_handleToolbarLeave=null;_hideTimeout=null;constructor(t){this._chart=t}createControls(){const t=this._chart.chartElement?.();if(!t)return;getComputedStyle(t).position==="static"&&(t.style.position="relative"),this._toolbar=document.createElement("div"),this._toolbar.id="chart-navigation-plugin",this._applyStyles(this._toolbar),this._toolbar.innerHTML=`
            <button id="nav-zoom-out-plugin" title="Zoom Out">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6 12H18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <button id="nav-zoom-in-plugin" title="Zoom In">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 6V18M6 12H18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <button id="nav-scroll-left-plugin" title="Scroll Left">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14 16L10 12L14 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <button id="nav-scroll-right-plugin" title="Scroll Right">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 16L14 12L10 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <button id="nav-reset-plugin" title="Reset View">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C9.53616 4 7.33235 5.11333 5.86533 6.86533M5.86533 6.86533V4M5.86533 6.86533H8.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        `,t.appendChild(this._toolbar);let e=!1;const s=()=>{this._isDestroyed||(e=!0,this._hideTimeout!==null&&(window.clearTimeout(this._hideTimeout),this._hideTimeout=null),this._toolbar&&(this._toolbar.style.opacity="1"))},n=()=>{this._isDestroyed||(e=!1,this._hideTimeout=window.setTimeout(()=>{!e&&this._toolbar&&!this._isDestroyed&&(this._toolbar.style.opacity="0")},100))};this._handleMouseMove=l=>{if(this._isDestroyed)return;const a=t.getBoundingClientRect(),c=l.clientY-a.top,d=a.height,f=l.clientX-a.left,p=a.width,m=c>d-150,v=f<p-70;m&&v?s():n()},this._handleMouseLeave=n,this._handleToolbarEnter=s,this._handleToolbarLeave=n,t.addEventListener("mousemove",this._handleMouseMove),t.addEventListener("mouseleave",this._handleMouseLeave),this._toolbar&&(this._toolbar.addEventListener("mouseenter",this._handleToolbarEnter),this._toolbar.addEventListener("mouseleave",this._handleToolbarLeave)),this._attachListeners()}removeControls(){this._isDestroyed=!0,this._scrollInterval!==null&&(this._scrollInterval>1e3?window.clearInterval(this._scrollInterval):window.clearTimeout(this._scrollInterval),this._scrollInterval=null),this._hideTimeout!==null&&(window.clearTimeout(this._hideTimeout),this._hideTimeout=null);const t=this._chart.chartElement?.();t&&this._handleMouseMove&&(t.removeEventListener("mousemove",this._handleMouseMove),t.removeEventListener("mouseleave",this._handleMouseLeave),this._handleMouseMove=null,this._handleMouseLeave=null),this._toolbar&&(this._handleToolbarEnter&&(this._toolbar.removeEventListener("mouseenter",this._handleToolbarEnter),this._handleToolbarEnter=null),this._handleToolbarLeave&&(this._toolbar.removeEventListener("mouseleave",this._handleToolbarLeave),this._handleToolbarLeave=null),this._toolbar.parentNode&&this._toolbar.parentNode.removeChild(this._toolbar)),this._toolbar=null}_applyStyles(t){Object.assign(t.style,{position:"absolute",bottom:"50px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"8px",zIndex:"10",opacity:"0",transition:"opacity 0.3s ease"});const e="chart-navigation-styles";if(!document.getElementById(e)){const s=document.createElement("style");s.id=e,s.textContent=`
                #chart-navigation-plugin {
                    pointer-events: none;
                }
                #chart-navigation-plugin button {
                    background: #ffffff;
                    border: none;
                    color: #131722;
                    padding: 0;
                    border-radius: 4px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    cursor: pointer;
                    width: 30px;
                    height: 30px;
                    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                    transition: all 0.2s;
                    position: relative;
                    z-index: 1;
                    pointer-events: auto;
                }
                #chart-navigation-plugin button:hover {
                    background: #f0f3fa;
                    color: #131722;
                    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
                }
                #chart-navigation-plugin button svg {
                    width: 18px;
                    height: 18px;
                }
            `,document.head.appendChild(s)}}_attachListeners(){if(!this._toolbar)return;const t=this._chart.timeScale();this._toolbar.querySelector("#nav-zoom-in-plugin")?.addEventListener("click",()=>{const a=t.getVisibleLogicalRange();if(a){const c=a.to-a.from,d=(a.from+a.to)/2,f=c*.8;t.setVisibleLogicalRange({from:d-f/2,to:d+f/2})}}),this._toolbar.querySelector("#nav-zoom-out-plugin")?.addEventListener("click",()=>{const a=t.getVisibleLogicalRange();if(a){const c=a.to-a.from,d=(a.from+a.to)/2,f=c*1.25;t.setVisibleLogicalRange({from:d-f/2,to:d+f/2})}});const e=this._toolbar.querySelector("#nav-scroll-left-plugin"),s=this._toolbar.querySelector("#nav-scroll-right-plugin"),n=()=>{this._scrollInterval!==null&&(this._scrollInterval>1e3?window.clearInterval(this._scrollInterval):window.clearTimeout(this._scrollInterval),this._scrollInterval=null)},l=a=>{if(n(),this._isDestroyed||!this._chart)return;const c=()=>{if(this._isDestroyed||!this._chart){n();return}try{const d=this._chart.timeScale(),f=d.scrollPosition();d.scrollToPosition(f+a,!1)}catch(d){console.error("Error scrolling chart:",d),n()}};c(),this._scrollInterval=window.setTimeout(()=>{!this._isDestroyed&&this._chart&&(this._scrollInterval=window.setInterval(c,100))},400)};e&&(e.addEventListener("mousedown",a=>{a.preventDefault(),l(1)}),e.addEventListener("mouseup",n),e.addEventListener("mouseleave",n)),s&&(s.addEventListener("mousedown",a=>{a.preventDefault(),l(-1)}),s.addEventListener("mouseup",n),s.addEventListener("mouseleave",n)),this._toolbar.querySelector("#nav-reset-plugin")?.addEventListener("click",()=>{this._defaultRange?(t.setVisibleLogicalRange(this._defaultRange),t.applyOptions({rightOffset:10}),this._chart.priceScale("right").applyOptions({autoScale:!0})):(t.fitContent(),t.applyOptions({rightOffset:10}))})}_defaultRange=null;setDefaultRange(t){this._defaultRange=t}}class _I{_point;_text;_options;_selected;constructor(t,e,s,n){this._point=t,this._text=e,this._options=s,this._selected=n}draw(t){t.useMediaCoordinateSpace(e=>{if(this._point.x===null||this._point.y===null)return;const s=e.context,n=this._point.x,l=this._point.y;s.beginPath(),s.arc(n,l,3,0,2*Math.PI),s.strokeStyle=this._options.backgroundColor,s.lineWidth=1,s.stroke(),s.font=`bold ${this._options.fontSize}px ${this._options.fontFamily}`;const a=s.measureText(this._text).width,c=8,d=6,f=this._options.fontSize,p=a+c*2,m=f+d*2,v=20,w=n+v,y=l-v-m,b=4;s.fillStyle=this._options.backgroundColor,s.strokeStyle=this._options.backgroundColor,s.lineWidth=1,s.beginPath(),s.moveTo(w+b,y+m);const S=n+4,x=l-4;s.lineTo(w+10,y+m),s.lineTo(S,x),s.lineTo(w,y+m-10),s.lineTo(w,y+b),s.quadraticCurveTo(w,y,w+b,y),s.lineTo(w+p-b,y),s.quadraticCurveTo(w+p,y,w+p,y+b),s.lineTo(w+p,y+m-b),s.quadraticCurveTo(w+p,y+m,w+p-b,y+m),s.lineTo(w+b,y+m),s.fill(),s.stroke(),s.fillStyle=this._options.textColor,s.textBaseline="middle",s.textAlign="left",s.fillText(this._text,w+c,y+m/2),this._selected&&(s.strokeStyle="#2962FF",s.lineWidth=1,s.beginPath(),s.arc(n,l,6,0,2*Math.PI),s.stroke())})}}class vI{_source;_point={x:null,y:null};constructor(t){this._source=t}update(){this._point=Le(this._source._point,this._source._chart,this._source._series)}renderer(){return new _I(this._point,this._source._text,this._source._options,this._source._selected)}}const BI={backgroundColor:"#2962FF",textColor:"#FFFFFF",fontSize:12,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif'};class wI{_chart;_series;_point;_text;_paneViews;_options;_selected=!1;constructor(t,e,s,n,l){this._chart=t,this._series=e,this._point=s,this._text=n,this._options={...BI,...l},this._paneViews=[new vI(this)]}updatePoint(t){this._point=t,this.updateAllViews()}updateText(t){this._text=t,this.updateAllViews()}setSelected(t){this._selected=t,this.updateAllViews()}applyOptions(t){Object.assign(this._options,t),this.updateAllViews(),this._chart.timeScale().applyOptions({})}updatePointByIndex(t,e){t===0&&(this._point=e,this.updateAllViews())}toolHitTest(t,e){const s=this._chart.timeScale(),n=this._series,l=s.logicalToCoordinate(this._point.logical),a=n.priceToCoordinate(this._point.price);if(l===null||a===null)return null;if(Math.hypot(t-l,e-a)<10)return{hit:!0,type:"point",index:0};const c=20,d=this._options.fontSize+12,f=this._text.length*8+16,p=l+c,m=a-c-d;return t>=p&&t<=p+f&&e>=m&&e<=m+d?{hit:!0,type:"point",index:0}:null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}class yI{_p1;_p2;_options;_selected;_source;constructor(t,e,s,n,l){this._p1=t,this._p2=e,this._options=s,this._selected=n,this._source=l}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._p1.x===null||this._p1.y===null||this._p2.x===null||this._p2.y===null)return;const s=e.context,n=zt(this._p1.x,e.horizontalPixelRatio),l=zt(this._p1.y,e.verticalPixelRatio),a=zt(this._p2.x,e.horizontalPixelRatio),c=zt(this._p2.y,e.verticalPixelRatio),d=Math.min(n,a),f=Math.max(n,a),p=Math.min(l,c),m=Math.max(l,c),v=f-d,w=m-p;this._options.backgroundColor&&(s.fillStyle=this._options.backgroundColor,s.fillRect(d,p,v,w)),s.strokeStyle=this._options.borderColor,s.lineWidth=this._options.borderWidth*e.verticalPixelRatio,s.strokeRect(d,p,v,w);const y=10*e.verticalPixelRatio;s.beginPath();const b=(l+c)/2;s.moveTo(d,b),s.lineTo(f,b);const S=a-n;if(Math.abs(S)>y){const j=S>0?f:d,Z=S>0?-1:1;s.moveTo(j+y*Z,b-y),s.lineTo(j,b),s.lineTo(j+y*Z,b+y)}const x=(n+a)/2;s.moveTo(x,p),s.lineTo(x,m);const U=c-l;if(Math.abs(U)>y){const j=U>0?m:p,Z=U>0?-1:1;s.moveTo(x-y,j+y*Z),s.lineTo(x,j),s.lineTo(x+y,j+y*Z)}s.stroke();const M=this._source._p1.price,N=this._source._p2.price-M,I=M!==0?N/M*100:0,R=this._source._p1.logical,D=this._source._p2.logical,V=Math.abs(D-R),lt=this._source._series.priceFormatter().format(N),dt=N>0?"+":"",At=I>0?"+":"",ft=`${dt}${lt} (${At}${I.toFixed(2)}%)`,mt=`${V} bars`;s.font=`${12*e.verticalPixelRatio}px sans-serif`;const at=6*e.verticalPixelRatio,Ut=16*e.verticalPixelRatio,W=s.measureText(ft),E=s.measureText(mt),K=Math.max(W.width,E.width)+at*2,ot=Ut*2+at*2;let pt=x-K/2,Q=m+10*e.verticalPixelRatio;pt<0&&(pt=0),pt+K>e.mediaSize.width*e.horizontalPixelRatio&&(pt=e.mediaSize.width*e.horizontalPixelRatio-K),s.fillStyle="white",s.shadowColor="rgba(0,0,0,0.2)",s.shadowBlur=4,s.shadowOffsetY=2,s.fillRect(pt,Q,K,ot),s.shadowColor="transparent",s.shadowBlur=0,s.shadowOffsetY=0,s.strokeStyle="#ccc",s.lineWidth=1,s.strokeRect(pt,Q,K,ot),s.fillStyle="#333",s.textAlign="left",s.textBaseline="top",s.fillText(ft,pt+at,Q+at),s.fillText(mt,pt+at,Q+at+Ut),this._selected&&(qt(e,n,l),qt(e,a,c),qt(e,n,c),qt(e,a,l),qt(e,x,l),qt(e,x,c),qt(e,n,b),qt(e,a,b))})}}class CI{_source;_p1={x:null,y:null};_p2={x:null,y:null};constructor(t){this._source=t}update(){this._p1=Le(this._source._p1,this._source._chart,this._source._series),this._p2=Le(this._source._p2,this._source._chart,this._source._series)}renderer(){return new yI(this._p1,this._p2,this._source._options,this._source._selected,this._source)}}const bI={backgroundColor:"rgba(41, 98, 255, 0.2)",borderColor:"rgb(41, 98, 255)",borderWidth:2};class mg{_chart;_series;_p1;_p2;_paneViews;_options;_selected=!1;constructor(t,e,s,n,l){this._chart=t,this._series=e,this._p1=s,this._p2=n,this._options={...bI,...l},this._paneViews=[new CI(this)]}updatePoints(t,e){this._p1=t,this._p2=e,this.updateAllViews()}updatePointByIndex(t,e){switch(t){case 0:this._p1=e;break;case 1:this._p2=e;break;case 2:this._p1={...this._p1,logical:e.logical},this._p2={...this._p2,price:e.price};break;case 3:this._p2={...this._p2,logical:e.logical},this._p1={...this._p1,price:e.price};break}this.updateAllViews()}setSelected(t){this._selected=t,this.updateAllViews()}applyOptions(t){Object.assign(this._options,t),this.updateAllViews(),this._chart.timeScale().applyOptions({})}toolHitTest(t,e){const s=this._chart.timeScale(),n=this._series,l=s.logicalToCoordinate(this._p1.logical),a=n.priceToCoordinate(this._p1.price),c=s.logicalToCoordinate(this._p2.logical),d=n.priceToCoordinate(this._p2.price);if(l===null||a===null||c===null||d===null)return null;const f=8,p=Math.min(l,c),m=Math.max(l,c),v=Math.min(a,d),w=Math.max(a,d),y=(l+c)/2,b=(a+d)/2,S=[{x:l,y:a,index:0},{x:c,y:d,index:1},{x:l,y:d,index:2},{x:c,y:a,index:3},{x:y,y:v,index:4},{x:y,y:w,index:5},{x:p,y:b,index:6},{x:m,y:b,index:7}];for(const x of S)if(Math.hypot(t-x.x,e-x.y)<f)return{hit:!0,type:"point",index:x.index};return Ad({x:t,y:e},{x1:l,y1:a,x2:c,y2:d})?{hit:!0,type:"shape"}:null}autoscaleInfo(){return null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}class xI{_p1;_p2;_options;_selected;_source;constructor(t,e,s,n,l){this._p1=t,this._p2=e,this._options=s,this._selected=n,this._source=l}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._p1.x===null||this._p1.y===null||this._p2.x===null||this._p2.y===null)return;const s=e.context,n=zt(this._p1.x,e.horizontalPixelRatio),l=zt(this._p1.y,e.verticalPixelRatio),a=zt(this._p2.x,e.horizontalPixelRatio),c=zt(this._p2.y,e.verticalPixelRatio),d=Math.min(n,a),f=Math.max(n,a),p=Math.min(l,c),m=Math.max(l,c),v=f-d,w=m-p;this._options.backgroundColor&&(s.fillStyle=this._options.backgroundColor,s.fillRect(d,p,v,w)),s.strokeStyle=this._options.borderColor,s.lineWidth=this._options.borderWidth*e.verticalPixelRatio,s.strokeRect(d,p,v,w);const y=10*e.verticalPixelRatio;s.beginPath();const b=(l+c)/2;s.moveTo(d,b),s.lineTo(f,b);const S=a-n;if(Math.abs(S)>y){const Qt=S>0?f:d,se=S>0?-1:1;s.moveTo(Qt+y*se,b-y),s.lineTo(Qt,b),s.lineTo(Qt+y*se,b+y)}const x=(n+a)/2;s.moveTo(x,p),s.lineTo(x,m);const U=c-l;if(Math.abs(U)>y){const Qt=U>0?m:p,se=U>0?-1:1;s.moveTo(x-y,Qt+y*se),s.lineTo(x,Qt),s.lineTo(x+y,Qt+y*se)}s.stroke();const M=this._source._p1.price,N=this._source._p2.price-M,I=M!==0?N/M*100:0,R=this._source._p1.logical,D=this._source._p2.logical,V=Math.abs(D-R),lt=V,dt=this._source._series.priceFormatter().format(N),At=N>0?"+":"",ft=I>0?"+":"",mt=`${At}${dt} (${ft}${I.toFixed(2)}%)`,at=`${V} bars, ${lt}d`,Ut="Vol 14.27 B";s.font=`${12*e.verticalPixelRatio}px sans-serif`;const W=8*e.verticalPixelRatio,E=16*e.verticalPixelRatio,K=s.measureText(mt),ot=s.measureText(at),pt=s.measureText(Ut),Q=Math.max(K.width,ot.width,pt.width)+W*2,j=E*3+W*2;let Z=x-Q/2,rt=p-j-10*e.verticalPixelRatio;rt<0&&(rt=m+10*e.verticalPixelRatio),Z<0&&(Z=0),Z+Q>e.mediaSize.width*e.horizontalPixelRatio&&(Z=e.mediaSize.width*e.horizontalPixelRatio-Q),s.fillStyle="#2962FF",s.shadowColor="rgba(0,0,0,0.2)",s.shadowBlur=4,s.shadowOffsetY=2,s.beginPath(),s.roundRect(Z,rt,Q,j,4*e.verticalPixelRatio),s.fill(),s.shadowColor="transparent",s.shadowBlur=0,s.shadowOffsetY=0,s.fillStyle="#ffffff",s.textAlign="center",s.textBaseline="middle";const Et=Z+Q/2,xt=rt+W+E/2;s.fillText(mt,Et,xt),s.fillText(at,Et,xt+E),s.fillText(Ut,Et,xt+E*2),this._selected&&(qt(e,n,l),qt(e,a,c),qt(e,n,c),qt(e,a,l),qt(e,x,l),qt(e,x,c),qt(e,n,b),qt(e,a,b))})}}class SI{_source;_p1={x:null,y:null};_p2={x:null,y:null};constructor(t){this._source=t}update(){this._p1=Le(this._source._p1,this._source._chart,this._source._series),this._p2=Le(this._source._p2,this._source._chart,this._source._series)}renderer(){return new xI(this._p1,this._p2,this._source._options,this._source._selected,this._source)}}const EI={backgroundColor:"rgba(41, 98, 255, 0.2)",borderColor:"rgb(41, 98, 255)",borderWidth:1};class _g{_chart;_series;_p1;_p2;_paneViews;_options;_selected=!1;constructor(t,e,s,n,l){this._chart=t,this._series=e,this._p1=s,this._p2=n,this._options={...EI,...l},this._paneViews=[new SI(this)]}updatePoints(t,e){this._p1=t,this._p2=e,this.updateAllViews()}updatePointByIndex(t,e){switch(t){case 0:this._p1=e;break;case 1:this._p2=e;break;case 2:this._p1={...this._p1,logical:e.logical},this._p2={...this._p2,price:e.price};break;case 3:this._p2={...this._p2,logical:e.logical},this._p1={...this._p1,price:e.price};break}this.updateAllViews()}setSelected(t){this._selected=t,this.updateAllViews()}applyOptions(t){Object.assign(this._options,t),this.updateAllViews(),this._chart.timeScale().applyOptions({})}toolHitTest(t,e){const s=this._chart.timeScale(),n=this._series,l=s.logicalToCoordinate(this._p1.logical),a=n.priceToCoordinate(this._p1.price),c=s.logicalToCoordinate(this._p2.logical),d=n.priceToCoordinate(this._p2.price);if(l===null||a===null||c===null||d===null)return null;const f=8,p=Math.min(l,c),m=Math.max(l,c),v=Math.min(a,d),w=Math.max(a,d),y=(l+c)/2,b=(a+d)/2,S=[{x:l,y:a,index:0},{x:c,y:d,index:1},{x:l,y:d,index:2},{x:c,y:a,index:3},{x:y,y:v,index:4},{x:y,y:w,index:5},{x:p,y:b,index:6},{x:m,y:b,index:7}];for(const x of S)if(Math.hypot(t-x.x,e-x.y)<f)return{hit:!0,type:"point",index:x.index};return Ad({x:t,y:e},{x1:l,y1:a,x2:c,y2:d})?{hit:!0,type:"shape"}:null}autoscaleInfo(){return null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}class TI{_points;_options;_selected;constructor(t,e,s){this._points=t,this._options=e,this._selected=s}draw(t){t.useBitmapCoordinateSpace(e=>{if(this._points.length<2)return;const s=e.context,n=[];for(const a of this._points)a.x===null||a.y===null||n.push({x:zt(a.x,e.horizontalPixelRatio),y:zt(a.y,e.verticalPixelRatio)});if(n.length<2)return;if(n.length>=5){const a=n[2],c=n[3],d=n[4];s.beginPath(),s.moveTo(a.x,a.y),s.lineTo(c.x,c.y),s.lineTo(d.x,d.y),s.closePath(),s.fillStyle=this._options.fillColor,s.fill()}nd(s,{lineColor:this._options.lineColor,width:this._options.width,lineJoin:"round",lineCap:"round",globalAlpha:1}),s.beginPath(),s.moveTo(n[0].x,n[0].y);for(let a=1;a<n.length;a++)s.lineTo(n[a].x,n[a].y);if(s.stroke(),n.length>=5){const a=n[2],c=n[4],d=(c.y-a.y)/(c.x-a.x),f=500,p=a.x-f,m=a.y-d*f,v=c.x+f,w=c.y+d*f;s.save(),s.setLineDash([5,5]),s.strokeStyle=this._options.lineColor,s.lineWidth=1*e.verticalPixelRatio,s.beginPath(),s.moveTo(p,m),s.lineTo(v,w),s.stroke(),s.restore()}s.font=`bold ${11*e.verticalPixelRatio}px Arial`,s.textAlign="center",s.textBaseline="bottom";const l=[{index:1,label:"Left Shoulder"},{index:3,label:"Head"},{index:5,label:"Right Shoulder"}];for(const{index:a,label:c}of l){if(a>=n.length)continue;const d=n[a],f=6*e.verticalPixelRatio,p=s.measureText(c).width+f*2,m=18*e.verticalPixelRatio,v=d.x-p/2,w=d.y-m-10*e.verticalPixelRatio;s.fillStyle=this._options.labelBackground,s.beginPath(),s.roundRect(v,w,p,m,3*e.verticalPixelRatio),s.fill(),s.fillStyle=this._options.labelTextColor,s.textBaseline="middle",s.fillText(c,d.x,w+m/2)}if(this._selected)for(const a of n)qt(e,a.x,a.y);rd(s)})}}class QI{_source;_points=[];constructor(t){this._source=t}update(){this._points=id(this._source._points,this._source._chart,this._source._series)}renderer(){return new TI(this._points,this._source._options,this._source._selected)}}const FI={lineColor:"#089981",width:2,fillColor:"rgba(8, 153, 129, 0.2)",labelBackground:"#089981",labelTextColor:"#ffffff"};class vg{_chart;_series;_points;_paneViews;_options;_selected=!1;constructor(t,e,s,n){this._chart=t,this._series=e,this._points=s,this._options={...FI,...n},this._paneViews=[new QI(this)]}updatePoints(t){this._points=t,this.updateAllViews()}addPoint(t){this._points.push(t),this.updateAllViews()}setSelected(t){this._selected=t,this.updateAllViews()}updatePointByIndex(t,e){t>=0&&t<this._points.length&&(this._points[t]=e,this.updateAllViews())}applyOptions(t){Object.assign(this._options,t),this.updateAllViews(),this._chart.timeScale().applyOptions({})}toolHitTest(t,e){const s=this._chart.timeScale(),n=this._series,l=this._points.map(d=>{const f=s.logicalToCoordinate(d.logical),p=n.priceToCoordinate(d.price);return{x:f,y:p}}),a=8;for(let d=0;d<l.length;d++){const f=l[d];if(!(f.x===null||f.y===null)&&Math.hypot(t-f.x,e-f.y)<a)return{hit:!0,type:"point",index:d}}const c=5;for(let d=0;d<l.length-1;d++){const f=l[d],p=l[d+1];if(!(f.x===null||f.y===null||p.x===null||p.y===null)&&vn({x:t,y:e},f,p)<c)return{hit:!0,type:"line"}}return null}updateAllViews(){this._paneViews.forEach(t=>t.update())}paneViews(){return this._paneViews}}function nc(A){if(!A)return null;const t=[];try{A._points&&Array.isArray(A._points)?A._points.forEach(s=>{s&&typeof s.logical=="number"&&typeof s.price=="number"&&t.push({logical:s.logical,price:s.price})}):A._p1&&A._p2&&A._p3?(A._p1.logical!==void 0&&typeof A._p1.price=="number"&&t.push({logical:A._p1.logical,price:A._p1.price}),A._p2.logical!==void 0&&typeof A._p2.price=="number"&&t.push({logical:A._p2.logical,price:A._p2.price}),A._p3.logical!==void 0&&typeof A._p3.price=="number"&&t.push({logical:A._p3.logical,price:A._p3.price})):A._p1&&A._p2?(A._p1.logical!==void 0&&typeof A._p1.price=="number"&&t.push({logical:A._p1.logical,price:A._p1.price}),A._p2.logical!==void 0&&typeof A._p2.price=="number"&&t.push({logical:A._p2.logical,price:A._p2.price})):A._point?A._point.logical!==void 0&&typeof A._point.price=="number"&&t.push({logical:A._point.logical,price:A._point.price}):A._price!==void 0&&typeof A._price=="number"?t.push({logical:0,price:A._price}):A._logical!==void 0&&typeof A._logical=="number"&&t.push({logical:A._logical,price:0})}catch(s){return console.error("Error extracting tool state:",s),null}const e={};return A._options&&typeof A._options=="object"&&Object.keys(A._options).forEach(s=>{e[s]=A._options[s]}),{points:t,options:e}}function Aw(A,t){const{points:e,options:s}=t;A._points&&Array.isArray(A._points)?A._points=e.map(n=>({logical:n.logical,price:n.price})):A._p1&&A._p2&&A._p3&&e.length>=3?(A._p1={logical:e[0].logical,price:e[0].price},A._p2={logical:e[1].logical,price:e[1].price},A._p3={logical:e[2].logical,price:e[2].price}):A._p1&&A._p2&&e.length>=2?(A._p1={logical:e[0].logical,price:e[0].price},A._p2={logical:e[1].logical,price:e[1].price}):A._point&&e.length>=1?A._point={logical:e[0].logical,price:e[0].price}:A._price!==void 0&&e.length>=1?A._price=e[0].price:A._logical!==void 0&&e.length>=1&&(A._logical=e[0].logical),A._options&&s&&Object.keys(s).forEach(n=>{A._options[n]=s[n]}),A.updateAllViews&&A.updateAllViews()}class UI{_undoStack=[];_redoStack=[];MAX_HISTORY=20;recordAdd(t,e){const s=nc(t);s&&this._pushAction({type:"add",tool:t,toolType:e,newState:s})}recordDelete(t,e){const s=nc(t);s&&this._pushAction({type:"delete",tool:t,toolType:e,prevState:s})}recordModify(t,e,s){const n=nc(t);n&&this._pushAction({type:"modify",tool:t,toolType:e,prevState:s,newState:n})}popUndo(){const t=this._undoStack.pop();return t&&this._redoStack.push(t),t||null}popRedo(){const t=this._redoStack.pop();return t&&this._undoStack.push(t),t||null}canUndo(){return this._undoStack.length>0}canRedo(){return this._redoStack.length>0}clear(){this._undoStack=[],this._redoStack=[]}_pushAction(t){for(this._redoStack=[],this._undoStack.push(t);this._undoStack.length>this.MAX_HISTORY;)this._undoStack.shift()}}class MI{_input=null;_onConfirm=null;_onCancel=null;_blurHandler=null;_hasConfirmed=!1;show(t,e,s,n){this.hide(),this._hasConfirmed=!1,this._onConfirm=s||null,this._onCancel=n||null,this._input=document.createElement("input"),this._input.type="text",this._input.value=t,this._input.className="inline-text-editor",this._addStyles(),this._input.style.left=`${e.x}px`,this._input.style.top=`${e.y}px`,document.body.appendChild(this._input),setTimeout(()=>{this._input&&(this._input.focus(),this._input.select())},0),this._input.addEventListener("keydown",l=>{l.key==="Enter"?(l.preventDefault(),l.stopPropagation(),this._handleConfirm()):l.key==="Escape"&&(l.preventDefault(),l.stopPropagation(),this._handleCancel())}),this._blurHandler=()=>{setTimeout(()=>this._handleConfirm(),100)},this._input.addEventListener("blur",this._blurHandler),this._input.addEventListener("mousedown",l=>{l.stopPropagation()}),this._input.addEventListener("click",l=>{l.stopPropagation()})}hide(){this._input&&(this._blurHandler&&(this._input.removeEventListener("blur",this._blurHandler),this._blurHandler=null),this._input.parentNode&&this._input.parentNode.removeChild(this._input)),this._input=null,this._onConfirm=null,this._onCancel=null,this._hasConfirmed=!1}_handleConfirm(){if(this._hasConfirmed)return;this._hasConfirmed=!0;const t=this._input?.value||"";this._onConfirm&&this._onConfirm(t),this.hide()}_handleCancel(){this._onCancel&&this._onCancel(),this.hide()}_addStyles(){const t="inline-text-editor-styles";if(document.getElementById(t))return;const e=document.createElement("style");e.id=t,e.textContent=`
            .inline-text-editor {
                position: fixed;
                background: #ffffff;
                border: 1px solid #2962FF;
                border-radius: 0;
                padding: 4px 6px;
                font-size: 14px;
                font-family: -apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif;
                z-index: 10000;
                min-width: 80px;
                color: #2962FF;
                box-sizing: border-box;
            }

            .inline-text-editor:focus {
                outline: none;
                border-color: #2962FF;
            }

            .inline-text-editor::placeholder {
                color: #2962FF;
                opacity: 1;
            }
        `,document.head.appendChild(e)}}class II extends pC{_activeToolType="None";_activeTool=null;_points=[];_tools=[];_toolOptions=new Map;_isDrawing=!1;_lastPixelPoint=null;_isRightClick=!1;_selectedTool=null;_dragState=null;_isDragging=!1;_lastClickTime=0;_lastClickPoint=null;_contextMenuHandler=null;_userPriceAlerts=null;_alertNotifications=null;_toolbar=null;_chartControls=null;_textInputDialog=new MI;_historyManager=new UI;_dragPrevState=null;_alertSubscription=null;_lastClickedTool=null;_lastToolClickTime=0;_drawingsHidden=!1;_allDrawingsLocked=!1;_currentSymbol="";setSymbol(t){this._currentSymbol=t||""}_setNoneButtonActive(){document.querySelectorAll("button").forEach(e=>e.classList.remove("active"));const t=document.getElementById("btn-none");t&&t.classList.add("active")}_cancelActiveDrawing(){if(this._activeTool){this.series.detachPrimitive(this._activeTool);const t=this._tools.indexOf(this._activeTool);t!==-1&&this._tools.splice(t,1),this._activeTool=null}this._points=[],this._isDrawing=!1,this._lastPixelPoint=null,this._activeToolType!=="None"&&(this._activeToolType="None",this._setChartInteraction(!0)),this._deselectCurrentTool(),this._toolbar?.hide(),this._setNoneButtonActive(),this._updateCursor()}_updateCursor(){const t=this.chart.chartElement?.();t&&(this._activeToolType==="Eraser"?t.classList.add("eraser-cursor"):t.classList.remove("eraser-cursor"))}_setChartInteraction(t){this.chart.applyOptions({handleScroll:t,handleScale:t})}constructor(){super();const t="#2962FF",e={lineColor:t,color:t,lineWidth:2};["TrendLine","HorizontalLine","VerticalLine","Rectangle","Text","ParallelChannel","FibRetracement","Triangle","Brush","Callout","CrossLine","Circle","Arc","Highlighter","Path","Arrow","Ray","ExtendedLine","HorizontalRay","PriceRange","LongPosition","ShortPosition","ElliottImpulseWave","ElliottCorrectionWave","DateRange","FibExtension","UserPriceAlerts","Eraser","PriceLabel","DatePriceRange","Measure","HeadAndShoulders"].forEach(s=>{this._toolOptions.set(s,{...e})})}attached(t){super.attached(t),this.chart.subscribeClick(this._clickHandler),this.chart.subscribeCrosshairMove(this._moveHandler);const e=this.chart.chartElement?.();e&&(e.addEventListener("mousedown",this._mouseDownHandler),e.addEventListener("mouseup",this._mouseUpHandler),this._contextMenuHandler=s=>s.preventDefault(),e.addEventListener("contextmenu",this._contextMenuHandler)),window.addEventListener("mousemove",this._rawMouseMoveHandler),window.addEventListener("keydown",this._keyDownHandler),this._userPriceAlerts=new pI,this.series.attachPrimitive(this._userPriceAlerts),this._alertNotifications=new gI(this),this._alertSubscription=this._userPriceAlerts.alertTriggered().subscribe(s=>{this._alertNotifications?.show({alertId:s.alertId,symbol:this._currentSymbol||"Symbol",price:this.series.priceFormatter().format(s.alertPrice),timestamp:s.timestamp,direction:s.direction,condition:s.condition,onEdit:n=>{this._userPriceAlerts?.openEditDialog(n.alertId,{price:parseFloat(n.price),condition:n.condition})}})},this),this._toolbar=new sA(this),this._chartControls=new mI(this.chart),this._chartControls.createControls()}detached(){window.removeEventListener("mousemove",this._rawMouseMoveHandler),window.removeEventListener("keydown",this._keyDownHandler),this.chart.unsubscribeClick(this._clickHandler),this.chart.unsubscribeCrosshairMove(this._moveHandler);const t=this.chart.chartElement?.();t&&(t.removeEventListener("mousedown",this._mouseDownHandler),t.removeEventListener("mouseup",this._mouseUpHandler),this._contextMenuHandler&&(t.removeEventListener("contextmenu",this._contextMenuHandler),this._contextMenuHandler=null)),this._alertSubscription&&(this._alertSubscription.unsubscribe(this),this._alertSubscription=null),this._tools.forEach(e=>{try{this.series.detachPrimitive(e)}catch(s){console.error("Error detaching tool:",s)}}),this._userPriceAlerts&&(this.series.detachPrimitive(this._userPriceAlerts),this._userPriceAlerts=null),this._chartControls&&(this._chartControls.removeControls(),this._chartControls=null),this._toolbar&&(this._toolbar.destroy(),this._toolbar=null),this._alertNotifications&&(this._alertNotifications.destroy(),this._alertNotifications=null),this._textInputDialog&&this._textInputDialog.hide(),this._tools=[],this._activeTool=null,this._selectedTool=null,this._points=[],this._dragState=null,this._isDragging=!1,this._isDrawing=!1,this._lastPixelPoint=null,this._lastClickedTool=null,this._lastToolClickTime=0,this._dragPrevState=null,this._activeToolType="None",this._isRightClick=!1,this._historyManager.clear(),this._setChartInteraction(!0),super.detached()}startTool(t){this._isDragging&&(this._isDragging=!1,this._dragState=null,this._dragPrevState=null,this.chart.applyOptions({handleScroll:!0,handleScale:!0})),this._deselectCurrentTool(),this._activeToolType=t,this._points=[],this._activeTool=null,this._lastPixelPoint=null,t!=="None"&&t!=="Eraser"&&t!=="Measure"?this._toolbar?.showCollapsed(t):this._toolbar?.hide(),t==="Brush"||t==="Highlighter"||t==="Triangle"||t==="Arc"||t==="TrendLine"||t==="HorizontalLine"||t==="VerticalLine"||t==="Rectangle"||t==="Circle"||t==="CrossLine"||t==="Path"||t==="Arrow"||t==="Ray"||t==="ExtendedLine"||t==="HorizontalRay"||t==="PriceRange"||t==="LongPosition"||t==="ShortPosition"||t==="ElliottImpulseWave"||t==="ElliottCorrectionWave"||t==="DateRange"||t==="FibExtension"||t==="UserPriceAlerts"||t==="Eraser"||t==="PriceLabel"||t==="Measure"?this._setChartInteraction(!1):this._setChartInteraction(!0),this._updateCursor()}clearTools(){this._tools.forEach(t=>{this.series.detachPrimitive(t)}),this._tools=[],this._toolbar?.hide(),this._drawingsHidden=!1}hideAllDrawings(){this._drawingsHidden||(this._deselectCurrentTool(),this._toolbar?.hide(),this._tools.forEach(t=>{try{this.series.detachPrimitive(t)}catch{}}),this._drawingsHidden=!0,this.requestUpdate())}showAllDrawings(){this._drawingsHidden&&(this._tools.forEach(t=>{try{this.series.attachPrimitive(t)}catch{}}),this._drawingsHidden=!1,this.requestUpdate())}toggleDrawingsVisibility(){return this._drawingsHidden?this.showAllDrawings():this.hideAllDrawings(),this._drawingsHidden}areDrawingsHidden(){return this._drawingsHidden}lockAllDrawings(){this._allDrawingsLocked||(this._deselectCurrentTool(),this._toolbar?.hide(),this._tools.forEach(t=>{t._locked!==void 0&&(t._locked=!0)}),this._allDrawingsLocked=!0)}unlockAllDrawings(){this._allDrawingsLocked&&(this._tools.forEach(t=>{t._locked!==void 0&&(t._locked=!1)}),this._allDrawingsLocked=!1)}toggleDrawingsLock(){return this._allDrawingsLocked?this.unlockAllDrawings():this.lockAllDrawings(),this._allDrawingsLocked}areDrawingsLocked(){return this._allDrawingsLocked}updateToolOptions(t,e){const s=this._toolOptions.get(t)||{};this._toolOptions.set(t,{...s,...e})}getToolOptions(t){return this._toolOptions.get(t)||{}}toggleToolLock(t){t._locked=!t._locked,this.requestUpdate()}createAlertForTool(t){this.toolSupportsAlerts(t)?this._userPriceAlerts?.openToolAlertDialog(t):console.warn("Alerts not supported for this tool type yet")}toolSupportsAlerts(t){return t instanceof Bl||t instanceof Io||t instanceof No||t instanceof Lo||t instanceof Ho||t instanceof wl}enableSessionHighlighting(t){const e=this._tools.findIndex(s=>s instanceof pg);if(e!==-1){const s=this._tools[e];this.series.detachPrimitive(s),this._tools.splice(e,1)}else{const s=new pg(t);this.series.attachPrimitive(s),this._tools.push(s)}}disableSessionHighlighting(){const t=this._tools.findIndex(e=>e instanceof pg);if(t!==-1){const e=this._tools[t];this.series.detachPrimitive(e),this._tools.splice(t,1)}}getChartRect(){return this.chart.chartElement?.()?.getBoundingClientRect()||null}setDefaultRange(t){this._chartControls?.setDefaultRange(t)}_selectTool(t){t&&(this._selectedTool&&this._selectedTool!==t&&this._selectedTool.setSelected(!1),this._selectedTool=t,t.setSelected(!0),this.requestUpdate(),this._toolbar?.showExpanded(t))}_deselectCurrentTool(){this._selectedTool&&(this._selectedTool.setSelected(!1),this._selectedTool=null,this.requestUpdate(),this._toolbar?.hide())}deselectTool(){this._deselectCurrentTool()}_showTextInputDialog(t,e){t.setOnTextEdit(s=>{const n=this.chart.chartElement?.()?.getBoundingClientRect();if(!n)return;let l;if(e)l={x:n.left+e.x,y:n.top+e.y-15};else{const a=this.chart.timeScale(),c=this.series;if(t instanceof Ag){const d=a.logicalToCoordinate(t._point.logical),f=c.priceToCoordinate(t._point.price);if(d!==null&&f!==null)l={x:n.left+d,y:n.top+f-15};else return}else if(t instanceof ja){const d=a.logicalToCoordinate(t._p2.logical),f=c.priceToCoordinate(t._p2.price);if(d!==null&&f!==null)l={x:n.left+d,y:n.top+f-15};else return}else return}this._textInputDialog.show(s,l,a=>{a.trim()&&(t.updateText(a),this.requestUpdate())})}),t.editText()}deleteTool(t,e=!1){this._dragState&&this._dragState.tool===t&&(this._isDragging=!1,this._dragState=null,this._dragPrevState=null,this.chart.applyOptions({handleScroll:!0,handleScale:!0})),this._selectedTool===t&&(this._selectedTool=null);const s=this._tools.indexOf(t);if(s!==-1){if(!e){const n=t.toolType||"None";this._historyManager.recordDelete(t,n)}t instanceof Bl&&t._alertId&&this._userPriceAlerts?.removeAlert(t._alertId),this.series.detachPrimitive(t),this._tools.splice(s,1),this.requestUpdate(),this._toolbar?.hide()}}_handleToolSelection(t){if(!t.point)return;const e=t.point.x,s=t.point.y;for(let n=this._tools.length-1;n>=0;n--){const l=this._tools[n];if(l.toolHitTest&&l.toolHitTest(e,s)?.hit){this._selectTool(l);return}}this._deselectCurrentTool(),this._lastClickedTool=null,this._lastToolClickTime=0}_startDrag(t,e){if(this._selectedTool&&this._selectedTool._locked)return;const s=this.chart.timeScale(),n=this.series,l=s.coordinateToLogical(e.x),a=n.coordinateToPrice(e.y);if(!(l===null||a===null)){if(this._selectedTool){const c=nc(this._selectedTool);c&&(this._dragPrevState=c)}t.type==="point"?this._dragState={tool:this._selectedTool,type:"anchor",anchorIndex:t.index,startPoint:{logical:l,price:a}}:this._dragState={tool:this._selectedTool,type:"shape",startPoint:{logical:l,price:a}},this._isDragging=!0,this.chart.applyOptions({handleScroll:!1,handleScale:!1})}}_handleDrag(t){try{if(!this._isDragging||!this._dragState)return;if(!this._dragState.tool||this._tools.indexOf(this._dragState.tool)===-1){this._isDragging=!1,this._dragState=null,this._dragPrevState=null,this.chart.applyOptions({handleScroll:!0,handleScale:!0});return}const e=this.chart.chartElement?.()?.getBoundingClientRect();if(!e)return;const s=t.clientX-e.left,n=t.clientY-e.top,l=this.chart.timeScale(),a=this.series,c=l.coordinateToLogical(s),d=a.coordinateToPrice(n);if(c===null||d===null)return;if(this._dragState.type==="anchor")this._dragState.tool.updatePointByIndex(this._dragState.anchorIndex,{logical:c,price:d});else{const f=c-this._dragState.startPoint.logical,p=d-this._dragState.startPoint.price;this._moveToolByDelta(this._dragState.tool,f,p),this._dragState.startPoint={logical:c,price:d}}this.requestUpdate()}catch(e){console.error("Error handling drag:",e),this._isDragging=!1,this._dragState=null,this._dragPrevState=null,this.chart.applyOptions({handleScroll:!0,handleScale:!0})}}_moveToolByDelta(t,e,s){t._p1&&t._p2&&!t._p3?(t._p1={logical:t._p1.logical+e,price:t._p1.price+s},t._p2={logical:t._p2.logical+e,price:t._p2.price+s},t.updateAllViews()):t._p1&&t._p2&&t._p3?(t._p1.logical+=e,t._p1.price+=s,t._p2.logical+=e,t._p2.price+=s,t._p3.logical+=e,t._p3.price+=s,t.updateAllViews()):t._points?(t._points.forEach(n=>{n.logical+=e,n.price+=s}),t.updateAllViews()):t._point?(t._point={logical:t._point.logical+e,price:t._point.price+s},t.updateAllViews()):t._price!==void 0?(t._price+=s,t.updateAllViews()):t._logical!==void 0&&(t._logical+=e,t.updateAllViews())}_keyDownHandler=t=>{if((t.ctrlKey||t.metaKey)&&t.key==="z"&&!t.shiftKey){t.preventDefault(),this.undo();return}if((t.ctrlKey||t.metaKey)&&(t.key==="y"||t.key==="z"&&t.shiftKey)){t.preventDefault(),this.redo();return}t.key==="Escape"?this._activeTool?this._cancelActiveDrawing():this._deselectCurrentTool():(t.key==="Delete"||t.key==="Backspace")&&this._selectedTool&&(t.preventDefault(),this.deleteTool(this._selectedTool))};_clickHandler=t=>{if(this._isRightClick)return;if(this._activeToolType==="None"){this._handleToolSelection(t);return}if(this._activeToolType==="Eraser"){if(!t.point)return;const c=t.point.x,d=t.point.y;for(let f=this._tools.length-1;f>=0;f--){const p=this._tools[f];if(p.toolHitTest&&p.toolHitTest(c,d)?.hit){this.deleteTool(p);return}}return}if(!t.point||this._activeToolType==="Brush"||this._activeToolType==="Highlighter")return;const e=this.series.coordinateToPrice(t.point.y);if(e===null)return;const s=this.chart.timeScale().coordinateToLogical(t.point.x);if(s===null)return;const n={logical:s,price:e};this._points.push(n);const l=n,a=n;if(this._activeToolType==="TrendLine"||this._activeToolType==="Arrow"||this._activeToolType==="Ray"||this._activeToolType==="ExtendedLine"){if(this._points.length===1){const c=this._points[0],d={rightEnd:this._activeToolType==="Arrow"?1:0,extendRight:this._activeToolType==="Ray"||this._activeToolType==="ExtendedLine",extendLeft:this._activeToolType==="ExtendedLine",...this.getToolOptions(this._activeToolType)};this._activeTool=new Bl(this.chart,this.series,c,c,d),this.series.attachPrimitive(this._activeTool),this._addTool(this._activeTool,this._activeToolType)}else if(this._points.length===2&&this._activeTool instanceof Bl){const c=this._points[0];let d=this._points[1];this._activeTool.updatePoints(c,d);const f=this._activeTool;this._activeTool=null,this._points=[],this._selectTool(f)}}else if(this._activeToolType==="HorizontalRay"){if(this._activeTool instanceof No){const c=this._activeTool._point;this._activeTool.updatePoint(c),this._addTool(this._activeTool,this._activeToolType);const d=this._activeTool;this._activeTool=null,this.chart.timeScale().applyOptions({}),this._selectTool(d)}else{const c=l,d=new No(this.chart,this.series,c,this.getToolOptions(this._activeToolType));this.series.attachPrimitive(d),this._addTool(d,this._activeToolType),this.chart.timeScale().applyOptions({}),this._selectTool(d)}this._points=[]}else if(this._activeToolType==="HorizontalLine"){if(this._activeTool instanceof Io){this._activeTool.updatePrice(e),this._addTool(this._activeTool,this._activeToolType);const c=this._activeTool;this._activeTool=null,this.chart.timeScale().applyOptions({}),this._selectTool(c)}else{const c=new Io(this.chart,this.series,e,this.getToolOptions(this._activeToolType));this.series.attachPrimitive(c),this._addTool(c,this._activeToolType),this.chart.timeScale().applyOptions({}),this._selectTool(c)}this._points=[]}else if(this._activeToolType==="VerticalLine"){if(this._activeTool instanceof Lo){this._activeTool.updatePosition(s),this._addTool(this._activeTool,this._activeToolType);const c=this._activeTool;this._activeTool=null,this.chart.timeScale().applyOptions({}),this._selectTool(c)}else{const c=new Lo(this.chart,this.series,s,this.getToolOptions(this._activeToolType));this.series.attachPrimitive(c),this._addTool(c,this._activeToolType),this.chart.timeScale().applyOptions({}),this._selectTool(c)}this._points=[]}else if(this._activeToolType==="Text"){const c=new Ag(this.chart,this.series,l,"Add text",this.getToolOptions(this._activeToolType));this.series.attachPrimitive(c),this._addTool(c,this._activeToolType),this._points=[],this.chart.timeScale().applyOptions({}),this._selectTool(c),this._showTextInputDialog(c,t.point)}else if(this._activeToolType==="Callout"){if(this._points.length===1){const c=this._points[0];this._activeTool=new ja(this.chart,this.series,c,c,"Add text",this.getToolOptions(this._activeToolType)),this.series.attachPrimitive(this._activeTool),this._addTool(this._activeTool,this._activeToolType)}else if(this._points.length===2&&this._activeTool instanceof ja){const c=this._points[0],d=this._points[1];this._activeTool.updatePoints(c,d);const f=this._activeTool;this._activeTool=null,this._points=[],this._selectTool(f),this._showTextInputDialog(f,t.point)}}else if(this._activeToolType==="PriceLabel"){const c=this.series.priceFormatter().format(l.price),d=new wI(this.chart,this.series,l,c,this.getToolOptions(this._activeToolType));this.series.attachPrimitive(d),this._addTool(d,this._activeToolType),this._points=[],this.chart.timeScale().applyOptions({}),this._selectTool(d)}else if(this._activeToolType==="ParallelChannel"){if(this._points.length===1){const c=this._points[0];this._activeTool=new wl(this.chart,this.series,c,c,c,this.getToolOptions(this._activeToolType)),this.series.attachPrimitive(this._activeTool),this._addTool(this._activeTool,this._activeToolType)}else if(this._points.length===2){if(this._activeTool instanceof wl){const c=this._points[0],d=this._points[1];this._activeTool.updatePoints(c,d,d)}}else if(this._points.length===3&&this._activeTool instanceof wl){const c=this._points[0],d=this._points[1],f=this._points[2];this._activeTool.updatePoints(c,d,f);const p=this._activeTool;this._activeTool=null,this._points=[],this._selectTool(p)}}else if(this._activeToolType==="FibRetracement"){if(this._points.length===1){const c=this._points[0];this._activeTool=new ng(this.chart,this.series,c,c,this.getToolOptions(this._activeToolType)),this.series.attachPrimitive(this._activeTool),this._addTool(this._activeTool,this._activeToolType)}else if(this._points.length===2&&this._activeTool instanceof ng){const c=this._points[0],d=this._points[1];this._activeTool.updatePoints(c,d);const f=this._activeTool;this._activeTool=null,this._points=[],this._selectTool(f)}}else if(this._activeToolType==="Triangle"){if(this._points.length===1){const c=this._points[0];this._activeTool=new Rh(this.chart,this.series,c,c,c,this.getToolOptions(this._activeToolType)),this.series.attachPrimitive(this._activeTool),this._addTool(this._activeTool,this._activeToolType)}else if(this._points.length===2){if(this._activeTool instanceof Rh){const c=this._points[0],d=this._points[1];this._activeTool.updatePoints(c,d,d)}}else if(this._points.length===3&&this._activeTool instanceof Rh){const c=this._points[0],d=this._points[1],f=this._points[2];this._activeTool.updatePoints(c,d,f);const p=this._activeTool;this._activeTool=null,this._points=[],this._selectTool(p)}}else if(this._activeToolType==="Arc"){if(this._points.length===1){const c=this._points[0];this._activeTool=new zh(this.chart,this.series,c,c,c,this.getToolOptions(this._activeToolType)),this.series.attachPrimitive(this._activeTool),this._addTool(this._activeTool,this._activeToolType)}else if(this._points.length===2){if(this._activeTool instanceof zh){const c=this._points[0],d=this._points[1];this._activeTool.updatePoints(c,d,d)}}else if(this._points.length===3&&this._activeTool instanceof zh){const c=this._points[0],d=this._points[1],f=this._points[2];this._activeTool.updatePoints(c,d,f);const p=this._activeTool;this._activeTool=null,this._points=[],this._selectTool(p)}}else if(this._activeToolType==="LongPosition"){if(this._points.length===1){const c=this._points[0];this._activeTool=new ag(this.chart,this.series,c,c,c,this.getToolOptions(this._activeToolType)),this.series.attachPrimitive(this._activeTool),this._addTool(this._activeTool,this._activeToolType)}else if(this._points.length===2&&this._activeTool instanceof ag){const c=this._points[0],d=this._points[1],f=d.price-c.price,p=c.price-f,m={logical:d.logical,price:p};this._activeTool.updatePoints(c,m,d);const v=this._activeTool;this._activeTool=null,this._points=[],this._selectTool(v)}}else if(this._activeToolType==="ShortPosition"){if(a&&(this._points[this._points.length-1]=a),this._points.length===1){const c=this._points[0];this._activeTool=new cg(this.chart,this.series,c,c,c,this.getToolOptions(this._activeToolType)),this.series.attachPrimitive(this._activeTool),this._addTool(this._activeTool,this._activeToolType)}else if(this._points.length===2&&this._activeTool instanceof cg){const c=this._points[0],d=this._points[1],f=c.price-d.price,p=c.price+f,m={logical:d.logical,price:p};this._activeTool.updatePoints(c,m,d);const v=this._activeTool;this._activeTool=null,this._points=[],this._selectTool(v)}}else if(this._activeToolType==="CrossLine"){const c=new qB(this.chart,this.series,l,this.getToolOptions(this._activeToolType));this.series.attachPrimitive(c),this._addTool(c,this._activeToolType),this._points=[],this.chart.timeScale().applyOptions({}),this._selectTool(c)}else if(this._activeToolType==="Rectangle"){if(a&&(this._points[this._points.length-1]=a),this._points.length===1){const c=this._points[0];this._activeTool=new Ho(this.chart,this.series,c,c,this.getToolOptions(this._activeToolType)),this.series.attachPrimitive(this._activeTool),this._addTool(this._activeTool,this._activeToolType)}else if(this._points.length===2&&this._activeTool instanceof Ho){const c=this._points[0],d=this._points[1];this._activeTool.updatePoints(c,d);const f=this._activeTool;this._activeTool=null,this._points=[],this._selectTool(f)}}else if(this._activeToolType==="PriceRange"){if(a&&(this._points[this._points.length-1]=a),this._points.length===1){const c=this._points[0];this._activeTool=new og(this.chart,this.series,c,c,this.getToolOptions(this._activeToolType)),this.series.attachPrimitive(this._activeTool),this._addTool(this._activeTool,this._activeToolType)}else if(this._points.length===2&&this._activeTool instanceof og){const c=this._points[0],d=this._points[1];this._activeTool.updatePoints(c,d);const f=this._activeTool;this._activeTool=null,this._points=[],this._selectTool(f)}}else if(this._activeToolType==="Circle"){if(a&&(this._points[this._points.length-1]=a),this._points.length===1){const c=this._points[0];this._activeTool=new lg(this.chart,this.series,c,c,this.getToolOptions(this._activeToolType)),this.series.attachPrimitive(this._activeTool),this._addTool(this._activeTool,this._activeToolType)}else if(this._points.length===2&&this._activeTool instanceof lg){const c=this._points[0],d=this._points[1];this._activeTool.updatePoints(c,d);const f=this._activeTool;this._activeTool=null,this._points=[],this._selectTool(f)}}else if(this._activeToolType==="ElliottImpulseWave"){if(this._points.length===1)this._activeTool=new hg(this.chart,this.series,[l],this.getToolOptions(this._activeToolType)),this.series.attachPrimitive(this._activeTool),this._addTool(this._activeTool,this._activeToolType);else if(this._activeTool instanceof hg&&(this._activeTool.addPoint(l),this._points.length===6)){const c=this._activeTool;this._activeTool=null,this._points=[],this._selectTool(c)}}else if(this._activeToolType==="ElliottCorrectionWave"){if(this._points.length===1)this._activeTool=new ug(this.chart,this.series,[l],this.getToolOptions(this._activeToolType)),this.series.attachPrimitive(this._activeTool),this._addTool(this._activeTool,this._activeToolType);else if(this._activeTool instanceof ug&&(this._activeTool.addPoint(l),this._points.length===4)){const c=this._activeTool;this._activeTool=null,this._points=[],this._selectTool(c)}}else if(this._activeToolType==="HeadAndShoulders"){if(this._points.length===1)this._activeTool=new vg(this.chart,this.series,[l],this.getToolOptions(this._activeToolType)),this.series.attachPrimitive(this._activeTool),this._addTool(this._activeTool,this._activeToolType);else if(this._activeTool instanceof vg&&(this._activeTool.addPoint(l),this._points.length===7)){const c=this._activeTool;this._activeTool=null,this._points=[],this._selectTool(c)}}else if(this._activeToolType==="DateRange"){if(a&&(this._points[this._points.length-1]=a),this._points.length===1){const c=this._points[0];this._activeTool=new dg(this.chart,this.series,c,c,this.getToolOptions(this._activeToolType)),this.series.attachPrimitive(this._activeTool),this._addTool(this._activeTool,this._activeToolType)}else if(this._points.length===2&&this._activeTool instanceof dg){const c=this._points[0],d=this._points[1];this._activeTool.updatePoints(c,d);const f=this._activeTool;this._activeTool=null,this._points=[],this._selectTool(f)}}else if(this._activeToolType==="DatePriceRange"){if(a&&(this._points[this._points.length-1]=a),this._points.length===1){const c=this._points[0];this._activeTool=new mg(this.chart,this.series,c,c,this.getToolOptions(this._activeToolType)),this.series.attachPrimitive(this._activeTool),this._addTool(this._activeTool,this._activeToolType)}else if(this._points.length===2&&this._activeTool instanceof mg){const c=this._points[0],d=this._points[1];this._activeTool.updatePoints(c,d);const f=this._activeTool;this._activeTool=null,this._points=[],this._selectTool(f)}}else if(this._activeToolType==="Measure"){if(a&&(this._points[this._points.length-1]=a),this._points.length===1){const c=this._points[0];this._activeTool=new _g(this.chart,this.series,c,c,this.getToolOptions(this._activeToolType)),this.series.attachPrimitive(this._activeTool),this._addTool(this._activeTool,this._activeToolType)}else if(this._points.length===2&&this._activeTool instanceof _g){const c=this._points[0],d=this._points[1];this._activeTool.updatePoints(c,d);const f=this._activeTool;this._activeTool=null,this._points=[],f.setSelected(!1)}}else if(this._activeToolType==="FibExtension"){if(this._points.length===1){const c=this._points[0];this._activeTool=new Vh(this.chart,this.series,c,c,c,this.getToolOptions(this._activeToolType)),this.series.attachPrimitive(this._activeTool),this._addTool(this._activeTool,this._activeToolType)}else if(this._points.length===2){if(this._activeTool instanceof Vh){const c=this._points[0],d=this._points[1];this._activeTool.updatePoints(c,d,d)}}else if(this._points.length===3&&this._activeTool instanceof Vh){const c=this._points[0],d=this._points[1],f=this._points[2];this._activeTool.updatePoints(c,d,f);const p=this._activeTool;this._activeTool=null,this._points=[],this._selectTool(p)}}else if(this._activeToolType==="Path"){const c=Date.now();if(c-this._lastClickTime<300&&this._lastClickPoint&&t.point){const d=Math.abs(t.point.x-this._lastClickPoint.x),f=Math.abs(t.point.y-this._lastClickPoint.y);if(d<10&&f<10&&this._points.length>=2){this._points.pop(),this._activeTool instanceof ml&&this._activeTool.updatePoints([...this._points]);const p=this._activeTool;this._activeTool=null,this._points=[],this._lastClickTime=0,this._lastClickPoint=null,this._selectTool(p);return}}if(this._lastClickTime=c,this._lastClickPoint=t.point?{x:t.point.x,y:t.point.y}:null,this._points.length===1){const d={...rg.path,...this.getToolOptions(this._activeToolType)};this._activeTool=new ml(this.chart,this.series,[...this._points],d),this.series.attachPrimitive(this._activeTool),this._addTool(this._activeTool,this._activeToolType)}else this._activeTool instanceof ml&&this._activeTool.updatePoints([...this._points])}};_moveHandler=t=>{if(this._activeToolType==="None"||!t.point)return;const e=this.series.coordinateToPrice(t.point.y);if(e===null)return;const s=this.chart.timeScale().coordinateToLogical(t.point.x);if(s===null)return;const n={logical:s,price:e};if(!(this._activeToolType==="Brush"||this._activeToolType==="Highlighter")){if(this._activeToolType==="HorizontalLine"&&this._activeTool instanceof Io)this._activeTool.updatePrice(e),this.chart.timeScale().applyOptions({});else if(this._activeToolType==="VerticalLine"&&this._activeTool instanceof Lo)this._activeTool.updatePosition(s),this.chart.timeScale().applyOptions({});else if(this._activeToolType==="CrossLine"&&this._activeTool instanceof qB)this._activeTool.updatePoint(n),this.chart.timeScale().applyOptions({});else if(this._activeToolType==="HorizontalRay"&&this._activeTool instanceof No)this._activeTool.updatePoint(n),this.chart.timeScale().applyOptions({});else if((this._activeToolType==="TrendLine"||this._activeToolType==="Arrow"||this._activeToolType==="Ray"||this._activeToolType==="ExtendedLine")&&this._activeTool instanceof Bl){const l=this.chart.timeScale(),a=t.point.x,c=l.coordinateToLogical(a);if(c!==null){let d={logical:c,price:e};const f=this._points[0];this._activeTool.updatePoints(f,d),this.chart.timeScale().applyOptions({})}}else if(this._activeToolType==="FibRetracement"&&this._activeTool instanceof ng){const l=this.chart.timeScale(),a=t.point.x,c=l.coordinateToLogical(a);if(c!==null){const d={logical:c,price:e},f=this._points[0];this._activeTool.updatePoints(f,d),this.chart.timeScale().applyOptions({})}}else if(this._activeToolType==="ParallelChannel"&&this._activeTool instanceof wl){const l=this.chart.timeScale(),a=t.point.x,c=l.coordinateToLogical(a);if(c!==null){const d={logical:c,price:e};if(this._points.length===1){const f=this._points[0];this._activeTool.updatePoints(f,d,d)}else if(this._points.length===2){const f=this._points[0],p=this._points[1];this._activeTool.updatePoints(f,p,d)}this.chart.timeScale().applyOptions({})}}else if(this._activeToolType==="Triangle"&&this._activeTool instanceof Rh){const l=this.chart.timeScale(),a=t.point.x,c=l.coordinateToLogical(a);if(c!==null){const d={logical:c,price:e};if(this._points.length===1){const f=this._points[0];this._activeTool.updatePoints(f,d,d)}else if(this._points.length===2){const f=this._points[0],p=this._points[1];this._activeTool.updatePoints(f,p,d)}this.chart.timeScale().applyOptions({})}}else if(this._activeToolType==="Arc"&&this._activeTool instanceof zh){const l=this.chart.timeScale(),a=t.point.x,c=l.coordinateToLogical(a);if(c!==null){const d={logical:c,price:e};if(this._points.length===1){const f=this._points[0];this._activeTool.updatePoints(f,d,d)}else if(this._points.length===2){const f=this._points[0],p=this._points[1];this._activeTool.updatePoints(f,p,d)}this.chart.timeScale().applyOptions({})}}else if(this._activeToolType==="PriceRange"&&this._activeTool instanceof og){const l=this.chart.timeScale(),a=t.point.x,c=l.coordinateToLogical(a);if(c!==null){const d={logical:c,price:e},f=this._points[0];this._activeTool.updatePoints(f,d),this.chart.timeScale().applyOptions({})}}else if(this._activeToolType==="Circle"&&this._activeTool instanceof lg){const l=this.chart.timeScale(),a=t.point.x,c=l.coordinateToLogical(a);if(c!==null){const d={logical:c,price:e},f=this._points[0];this._activeTool.updatePoints(f,d),this.chart.timeScale().applyOptions({})}}else if(this._activeToolType==="Rectangle"&&this._activeTool instanceof Ho){const l=this.chart.timeScale(),a=t.point.x,c=l.coordinateToLogical(a);if(c!==null){const d={logical:c,price:e},f=this._points[0];this._activeTool.updatePoints(f,d),this.chart.timeScale().applyOptions({})}}else if(this._activeToolType==="Callout"&&this._activeTool instanceof ja){const l=this.chart.timeScale(),a=t.point.x,c=l.coordinateToLogical(a);if(c!==null){const d={logical:c,price:e},f=this._points[0];this._activeTool.updatePoints(f,d),this.chart.timeScale().applyOptions({})}}else if(this._activeToolType==="LongPosition"&&this._activeTool instanceof ag){const l=this.chart.timeScale(),a=t.point.x,c=l.coordinateToLogical(a);if(c!==null){const d={logical:c,price:e};if(this._points.length===1){const f=this._points[0],p=d,m=p.price-f.price,v=f.price-m,w={logical:p.logical,price:v};this._activeTool.updatePoints(f,w,p),this.chart.timeScale().applyOptions({})}}}else if(this._activeToolType==="ShortPosition"&&this._activeTool instanceof cg){const l=this.chart.timeScale(),a=t.point.x,c=l.coordinateToLogical(a);if(c!==null){const d={logical:c,price:e};if(this._points.length===1){const f=this._points[0],p=d,m=f.price-p.price,v=f.price+m,w={logical:p.logical,price:v};this._activeTool.updatePoints(f,w,p),this.chart.timeScale().applyOptions({})}}}else if(this._activeToolType==="Path"&&this._activeTool instanceof ml&&this._points.length>=1){const l=[...this._points,n];this._activeTool.updatePoints(l),this.chart.timeScale().applyOptions({})}else if(this._activeToolType==="ElliottImpulseWave"&&this._activeTool instanceof hg&&this._points.length>=1){const l=[...this._points,n];this._activeTool.updatePoints(l),this.chart.timeScale().applyOptions({})}else if(this._activeToolType==="ElliottCorrectionWave"&&this._activeTool instanceof ug&&this._points.length>=1){const l=[...this._points,n];this._activeTool.updatePoints(l),this.chart.timeScale().applyOptions({})}else if(this._activeToolType==="HeadAndShoulders"&&this._activeTool instanceof vg&&this._points.length>=1){const l=[...this._points,n];this._activeTool.updatePoints(l),this.chart.timeScale().applyOptions({})}else if(this._activeToolType==="DateRange"&&this._activeTool instanceof dg){const l=this.chart.timeScale(),a=t.point.x,c=l.coordinateToLogical(a);if(c!==null){const d={logical:c,price:e},f=this._points[0];this._activeTool.updatePoints(f,d),this.chart.timeScale().applyOptions({})}}else if(this._activeToolType==="DatePriceRange"&&this._activeTool instanceof mg){const l=this.chart.timeScale(),a=t.point.x,c=l.coordinateToLogical(a);if(c!==null){const d={logical:c,price:e},f=this._points[0];this._activeTool.updatePoints(f,d),this.chart.timeScale().applyOptions({})}}else if(this._activeToolType==="Measure"&&this._activeTool instanceof _g){const l=this.chart.timeScale(),a=t.point.x,c=l.coordinateToLogical(a);if(c!==null){const d={logical:c,price:e},f=this._points[0];this._activeTool.updatePoints(f,d),this.chart.timeScale().applyOptions({})}}else if(this._activeToolType==="FibExtension"&&this._activeTool instanceof Vh){const l=this.chart.timeScale(),a=t.point.x,c=l.coordinateToLogical(a);if(c!==null){const d={logical:c,price:e},f=this._points[0];if(this._points.length===1)this._activeTool.updatePoints(f,d,d);else if(this._points.length===2){const p=this._points[1];this._activeTool.updatePoints(f,p,d)}this.chart.timeScale().applyOptions({})}}}};_mouseDownHandler=t=>{if(this._isRightClick=t.button===2,!this._isRightClick){if(this._selectedTool&&this._activeToolType==="None"&&t.button===0){const e=this.chart.chartElement?.()?.getBoundingClientRect();if(e){const s=t.clientX-e.left,n=t.clientY-e.top,l=this._selectedTool.toolHitTest(s,n);if(l?.hit){const a=Date.now();if(this._lastClickedTool===this._selectedTool&&a-this._lastToolClickTime<300&&(this._selectedTool instanceof Ag||this._selectedTool instanceof ja)){t.preventDefault(),this._showTextInputDialog(this._selectedTool,{x:s,y:n}),this._lastClickedTool=null,this._lastToolClickTime=0;return}this._lastClickedTool=this._selectedTool,this._lastToolClickTime=a,t.preventDefault(),this._startDrag(l,{x:s,y:n});return}}}t.button===0&&(this._activeToolType==="Brush"||this._activeToolType==="Highlighter")&&(t.preventDefault(),t.stopPropagation(),this._isDrawing=!0,this._points=[],this._lastPixelPoint=null,this._activeTool=null)}};_mouseUpHandler=t=>{if(this._isDragging){this._endDrag();return}if(t.button===0&&this._isDrawing&&(t.preventDefault(),t.stopPropagation(),this._isDrawing=!1,this._activeTool&&this._selectTool(this._activeTool),this._activeTool=null,this._points=[]),t.button===2){if(t.preventDefault(),this._activeToolType==="Path"&&this._points.length>=2){this._activeTool instanceof ml&&this._activeTool.updatePoints([...this._points]);const e=this._activeTool;this._activeTool=null,this._points=[],this._selectTool(e),this._isRightClick=!1;return}this._cancelActiveDrawing(),this._isRightClick=!1;return}this._isRightClick=!1};_rawMouseMoveHandler=t=>{if(this._activeToolType!=="None"&&!this._activeTool&&this._selectedTool,this._isDragging&&this._dragState){t.preventDefault(),this._handleDrag(t);return}if(!this._isDrawing||this._activeToolType!=="Brush"&&this._activeToolType!=="Highlighter")return;const e=this.chart.chartElement?.();if(!e)return;const s=e.getBoundingClientRect(),n=t.clientX-s.left,l=t.clientY-s.top,a=this.chart.timeScale().coordinateToLogical(n),c=this.series.coordinateToPrice(l);if(a===null||c===null)return;const d={logical:a,price:c},f=10*(this.chart._impl?.model?.().rendererOptionsProvider?.().options()?.horizontalPixelRatio||window.devicePixelRatio||1);if(this._lastPixelPoint){const p=n-this._lastPixelPoint.x,m=l-this._lastPixelPoint.y;if(Math.sqrt(p*p+m*m)<f)return}if(this._points.length===0){this._points.push(d),this._lastPixelPoint={x:n,y:l};const p=this._activeToolType==="Brush"?rg.brush:rg.highlighter,m=this.getToolOptions(this._activeToolType),v={...p,...m};v.lineColor&&(v.color=v.lineColor),this._activeTool=new ml(this.chart,this.series,[d],v),this.series.attachPrimitive(this._activeTool),this._addTool(this._activeTool,this._activeToolType)}else this._activeTool instanceof ml&&(this._activeTool.addPoint(d),this._lastPixelPoint={x:n,y:l},this.chart.timeScale().applyOptions({}))};_addTool(t,e,s=!1){try{t.toolType=e,this._tools.push(t),s||nc(t)&&requestAnimationFrame(()=>{this._tools.indexOf(t)!==-1&&this._historyManager.recordAdd(t,e)})}catch(n){console.error("Error adding tool:",n);const l=this._tools.indexOf(t);throw l!==-1&&this._tools.splice(l,1),n}}_endDrag(){if(this._isDragging&&this._dragState&&this._dragPrevState){const t=this._dragState.tool,e=t.toolType||"None";this._historyManager.recordModify(t,e,this._dragPrevState)}this._isDragging=!1,this._dragState=null,this._dragPrevState=null,this.chart.applyOptions({handleScroll:!0,handleScale:!0})}undo(){if(this._isDragging)return;const t=this._historyManager.popUndo();if(t){if(this._activeTool&&this._cancelActiveDrawing(),this._deselectCurrentTool(),t.type==="add"){const e=this._tools.indexOf(t.tool);e!==-1&&(this.series.detachPrimitive(t.tool),this._tools.splice(e,1),this.requestUpdate())}else t.type==="delete"?(this.series.attachPrimitive(t.tool),this._tools.push(t.tool),this.requestUpdate()):t.type==="modify"&&t.prevState&&(Aw(t.tool,t.prevState),this.requestUpdate());this._toolbar?.hide()}}redo(){if(this._isDragging)return;const t=this._historyManager.popRedo();if(t){if(this._activeTool&&this._cancelActiveDrawing(),this._deselectCurrentTool(),t.type==="add")this.series.attachPrimitive(t.tool),this._tools.push(t.tool),this.requestUpdate();else if(t.type==="delete"){const e=this._tools.indexOf(t.tool);e!==-1&&(this.series.detachPrimitive(t.tool),this._tools.splice(e,1),this.requestUpdate())}else t.type==="modify"&&t.newState&&(Aw(t.tool,t.newState),this.requestUpdate());this._toolbar?.hide()}}getHistoryManager(){return this._historyManager}}const NI={timeframeSeconds:300,textColor:"#FFFFFF",upColor:"#089981",downColor:"#f23645",visible:!0,showTimerText:!0,fontSize:11};class LI{_priceText;_timerText;_showTimer;_y;_backgroundColor;_textColor;_fontSize;constructor(t,e,s,n,l,a,c){this._priceText=t,this._timerText=e,this._showTimer=s,this._y=n,this._backgroundColor=l,this._textColor=a,this._fontSize=c}draw(t){t.useMediaCoordinateSpace(e=>{const s=e.context;if(this._y<0||this._y>e.mediaSize.height)return;const n=9,l=4,a=this._fontSize+3;s.font=`500 ${this._fontSize}px -apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif`;const c=s.measureText(this._priceText).width,d=this._showTimer?s.measureText(this._timerText).width:0,f=Math.max(c,d)+n*2,p=this._showTimer?a*2+l*2:a+l*2,m=0,v=this._y-p/2,w=3;s.fillStyle=this._backgroundColor,s.beginPath(),s.moveTo(m,v),s.lineTo(m+f-w,v),s.quadraticCurveTo(m+f,v,m+f,v+w),s.lineTo(m+f,v+p-w),s.quadraticCurveTo(m+f,v+p,m+f-w,v+p),s.lineTo(m,v+p),s.closePath(),s.fill(),s.fillStyle=this._textColor,s.textBaseline="top",s.textAlign="left",s.fillText(this._priceText,m+n,v+l),this._showTimer&&this._timerText&&(s.fillStyle="rgba(255, 255, 255, 0.7)",s.fillText(this._timerText,m+n,v+l+a))})}}class HI{_source;_priceText="";_y=-1e4;constructor(t){this._source=t}update(){if(!this._source.isAttached()){this._y=-1e4;return}const t=this._source.getSeries();if(!t){this._y=-1e4;return}const e=t.lastValueData(!1);if(!e||e.noData){this._y=-1e4;return}const s=e.price??e.value;if(s==null){this._y=-1e4;return}const n=t.priceToCoordinate(s);if(n===null){this._y=-1e4;return}this._y=n,this._priceText=t.priceFormatter().format(s)}renderer(){const t=this._source.options();return!t.visible||this._y<0?null:new LI(this._priceText,this._source.getCountdownText(),t.showTimerText,this._y,this._source.isBullish()?t.upColor:t.downColor,t.textColor,t.fontSize)}}class DI{_chart;_series;_requestUpdate;_options;_paneViews;_intervalId=null;_countdownText="";_isBullish=!0;_lastOpen=null;_lastClose=null;constructor(t={}){this._options={...NI,...t},this._paneViews=[new HI(this)]}attached({chart:t,series:e,requestUpdate:s}){this._chart=t,this._series=e,this._requestUpdate=s,this._subscribeToDataChanges(),this._startInterval(),this._updateCountdown(),this.updateAllViews(),this.requestUpdate()}detached(){this._stopInterval(),this._unsubscribeFromDataChanges(),this._chart=void 0,this._series=void 0,this._requestUpdate=void 0}priceAxisPaneViews(){return this._paneViews}_dataChangedHandler=null;_subscribeToDataChanges(){this._series&&(this._dataChangedHandler=()=>{this._updateBullishStateFromSeriesData()},this._series.subscribeDataChanged(this._dataChangedHandler),this._updateBullishStateFromSeriesData())}_unsubscribeFromDataChanges(){this._series&&this._dataChangedHandler&&(this._series.unsubscribeDataChanged(this._dataChangedHandler),this._dataChangedHandler=null)}_updateBullishStateFromSeriesData(){if(!this._series||!this._chart)return;const t=this._series.lastValueData(!1);if(t&&!t.noData){const e=t.price??t.value,s=t.open;s!==void 0&&e!==void 0?(this._lastOpen=s,this._lastClose=e,this._isBullish=e>=s):e!==void 0&&this._lastClose!==null&&(this._lastClose=e),this.updateAllViews(),this.requestUpdate()}}_startInterval(){this._intervalId===null&&(this._intervalId=window.setInterval(()=>{this._updateCountdown(),this.updateAllViews(),this.requestUpdate()},1e3))}_stopInterval(){this._intervalId!==null&&(window.clearInterval(this._intervalId),this._intervalId=null)}_updateCountdown(){const t=this._options.timeframeSeconds,e=Math.floor(Date.now()/1e3);let s=null;if(this._series){const l=this._series.lastValueData(!1);if(l&&!l.noData){const a=l.time;if(a!=null){if(typeof a=="number")s=a;else if(typeof a=="object"&&a.year!==void 0){const f=new Date(a.year,a.month-1,a.day);s=Math.floor(f.getTime()/1e3)}}const c=l.open,d=l.close??l.price??l.value;c!==void 0&&d!==void 0&&(this._lastOpen=c,this._lastClose=d,this._isBullish=d>=c)}}let n;if(s!==null){const l=e-s;n=t-l,n<=0&&(n=t- -n%t,n===t&&(n=0))}else{const l=e%t;n=t-l}this._countdownText=this._formatTime(n)}_formatTime(t){const e=Math.floor(t/3600),s=Math.floor(t%3600/60),n=t%60;return e>0?`${this._pad(e)}:${this._pad(s)}:${this._pad(n)}`:`${this._pad(s)}:${this._pad(n)}`}_pad(t){return t.toString().padStart(2,"0")}getCountdownText(){return this._countdownText}options(){return this._options}applyOptions(t){this._options={...this._options,...t},t.timeframeSeconds!==void 0&&this._updateCountdown(),this.updateAllViews(),this.requestUpdate()}setVisible(t){this._options.visible=t,t?this._startInterval():this._stopInterval(),this.updateAllViews(),this.requestUpdate()}isVisible(){return this._options.visible}setTimerVisible(t){this._options.showTimerText=t,this.updateAllViews(),this.requestUpdate()}isTimerVisible(){return this._options.showTimerText}isAttached(){return this._series!==void 0&&this._chart!==void 0}getSeries(){return this._series}getChart(){return this._chart}isBullish(){return this._isBullish}updateCandleData(t,e){this._lastOpen=t,this._lastClose=e,this._isBullish=e>=t,this.updateAllViews(),this.requestUpdate()}getLastOHLC(){return{open:this._lastOpen,close:this._lastClose}}updateAllViews(){this._paneViews.forEach(t=>t.update())}requestUpdate(){this._chart&&this._requestUpdate&&this._requestUpdate()}}const kI="_container_1r2aj_1",jI="_dragHandle_1r2aj_31",OI="_title_1r2aj_51",RI="_controls_1r2aj_63",zI="_button_1r2aj_79",VI="_separator_1r2aj_117",PI="_speedWrapper_1r2aj_131",KI="_speedButton_1r2aj_139",GI="_speedMenu_1r2aj_155",WI="_speedItem_1r2aj_183",$I="_activeSpeed_1r2aj_207",XI="_closeButton_1r2aj_217",Ui={container:kI,dragHandle:jI,title:OI,controls:RI,button:zI,separator:VI,speedWrapper:PI,speedButton:KI,speedMenu:GI,speedItem:WI,activeSpeed:$I,closeButton:XI},YI=({isPlaying:A,speed:t,onPlayPause:e,onForward:s,onJumpTo:n,onSpeedChange:l,onClose:a})=>{const c=[.1,.5,1,3,5,10],[d,f]=ks.useState(!1);return h.jsxs("div",{className:Ui.container,children:[h.jsx("div",{className:Ui.dragHandle,children:h.jsx("div",{className:Ui.title,children:"Replay mode"})}),h.jsxs("div",{className:Ui.controls,children:[h.jsx("button",{className:Ui.button,onClick:n,title:"Jump to...",children:h.jsx(CE,{size:20})}),h.jsx("div",{className:Ui.separator}),h.jsx("button",{className:Ui.button,onClick:e,title:A?"Pause":"Play",children:A?h.jsx(oE,{size:20}):h.jsx(pE,{size:20})}),h.jsx("button",{className:Ui.button,onClick:s,title:"Forward",children:h.jsx(FE,{size:20})}),h.jsxs("div",{className:Ui.speedWrapper,children:[h.jsxs("button",{className:`${Ui.button} ${Ui.speedButton}`,onClick:()=>f(!d),title:"Replay speed",children:[h.jsxs("span",{children:[t,"x"]}),h.jsx(Bc,{size:14})]}),d&&h.jsx("div",{className:Ui.speedMenu,children:c.map(p=>h.jsxs("div",{className:`${Ui.speedItem} ${t===p?Ui.activeSpeed:""}`,onClick:()=>{l(p),f(!1)},children:[p,"x"]},p))})]}),h.jsx("div",{className:Ui.separator}),h.jsx("button",{className:`${Ui.button} ${Ui.closeButton}`,onClick:a,title:"Exit Replay mode",children:h.jsx(ji,{size:20})})]})]})},JI="_fadeOverlay_oo8e5_1",qI="_sliderContainer_oo8e5_33",ZI="_sliderLine_oo8e5_53",tN="_sliderHandle_oo8e5_79",eN="_timeTooltip_oo8e5_135",Ra={fadeOverlay:JI,sliderContainer:qI,sliderLine:ZI,sliderHandle:tN,timeTooltip:eN},sN=({chartRef:A,isReplayMode:t,replayIndex:e,fullData:s,onSliderChange:n,containerRef:l,isSelectingReplayPoint:a,isPlaying:c=!1})=>{const[d,f]=B.useState(0),[p,m]=B.useState(!1),[v,w]=B.useState(!1),[y,b]=B.useState(!1),[S,x]=B.useState(!1),[U,M]=B.useState(!1),N=B.useRef(null),I=B.useRef(null);B.useEffect(()=>{a&&(M(!1),x(!1))},[a]);const R=B.useRef(c);B.useEffect(()=>{c&&!R.current?(M(!1),x(!1)):!c&&R.current&&M(!0),R.current=c},[c]);const D=B.useRef(e);if(B.useEffect(()=>{if(!t||c||a){D.current=e;return}e!==D.current&&e!==null&&(M(!0),x(!0),setTimeout(()=>x(!1),150)),D.current=e},[e,t,c,a]),B.useEffect(()=>{if(!(!t||!s||s.length===0||e===null)&&!p&&!a&&(!v||U||c)){const ft=(e+1)/s.length,mt=l?.current?.clientWidth||0,at=ft*mt;f(at)}},[e,s,t,l,p,v,U,c,a]),B.useEffect(()=>{if(!t||!l.current)return;const ft=W=>{if((U||S||c)&&!a)return;const E=l.current.getBoundingClientRect(),K=W.clientX-E.left,ot=E.width;K>=0&&K<=ot&&(w(!0),I.current&&cancelAnimationFrame(I.current),I.current=requestAnimationFrame(()=>{f(K)}))},mt=()=>{w(!1)},at=W=>{if(a){w(!0);const ot=l.current.getBoundingClientRect(),pt=W.clientX-ot.left;pt>=0&&pt<=ot.width&&f(pt);return}if(U||c)return;w(!0);const E=l.current.getBoundingClientRect(),K=W.clientX-E.left;K>=0&&K<=E.width&&f(K)},Ut=l.current;return Ut.addEventListener("mousemove",ft),Ut.addEventListener("mouseleave",mt),Ut.addEventListener("mouseenter",at),()=>{Ut.removeEventListener("mousemove",ft),Ut.removeEventListener("mouseleave",mt),Ut.removeEventListener("mouseenter",at),I.current&&cancelAnimationFrame(I.current)}},[t,l,S,U,c]),B.useEffect(()=>{if(!p)return;let ft=0;const mt=50,at=W=>{if(!l.current||!s||s.length===0)return;const E=l.current.getBoundingClientRect(),K=W.clientX-E.left,ot=E.width,pt=Math.max(0,Math.min(K,ot));f(pt);const Q=Date.now();if(Q-ft>=mt){ft=Q;const j=pt/ot,Z=Math.max(0,Math.min(Math.floor(j*s.length),s.length-1));n&&n(Z,!1)}},Ut=W=>{if(m(!1),l.current&&s&&s.length>0){const E=l.current.getBoundingClientRect(),K=W.clientX-E.left,ot=E.width,pt=Math.max(0,Math.min(K,ot)),Q=pt/ot,j=Math.max(0,Math.min(Math.floor(Q*s.length),s.length-1));f(pt),n&&n(j,!0)}};return document.addEventListener("mousemove",at),document.addEventListener("mouseup",Ut),()=>{document.removeEventListener("mousemove",at),document.removeEventListener("mouseup",Ut)}},[p,l,s,n]),!t)return null;const V=v&&!U&&!c||p||a;(()=>{if(!A.current||!s||e===null)return null;try{const ft=A.current.timeScale(),mt=s[e]?.time;if(mt)return ft.timeToCoordinate(mt)}catch(ft){console.error("Error calculating replay position:",ft)}return null})();const dt=V&&!U&&!c,At=d;return h.jsxs(h.Fragment,{children:[dt&&At!==null&&h.jsx("div",{className:Ra.fadeOverlay,style:{left:`${At}px`,width:`calc(100% - ${At}px)`}}),V&&h.jsxs("div",{ref:N,className:Ra.sliderContainer,style:{left:`${d}px`},children:[h.jsx("div",{className:Ra.sliderLine}),h.jsx("div",{className:Ra.sliderHandle,onMouseDown:ft=>{ft.preventDefault(),ft.stopPropagation(),m(!0)},onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1)}),(y||p)&&e!==null&&s&&e<s.length&&h.jsx("div",{className:Ra.timeTooltip,children:new Date(s[e].time*1e3).toLocaleString()})]})]})},nw={cursor:"None",eraser:"Eraser",trendline:"TrendLine",arrow:"Arrow",ray:"Ray",extended_line:"ExtendedLine",horizontal:"HorizontalLine",horizontal_ray:"HorizontalRay",vertical:"VerticalLine",cross_line:"CrossLine",parallel_channel:"ParallelChannel",fibonacci:"FibRetracement",fib_extension:"FibExtension",pitchfork:"Pitchfork",brush:"Brush",highlighter:"Highlighter",rectangle:"Rectangle",circle:"Circle",arc:"Arc",path:"Path",text:"Text",callout:"Callout",price_label:"PriceLabel",pattern:"Pattern",triangle:"Triangle",abcd:"ABCD",xabcd:"XABCD",elliott_impulse:"ElliottImpulseWave",elliott_correction:"ElliottCorrectionWave",head_and_shoulders:"HeadAndShoulders",prediction:"LongPosition",prediction_short:"ShortPosition",date_range:"DateRange",price_range:"PriceRange",date_price_range:"DatePriceRange",measure:"Measure",zoom_in:"None",zoom_out:"None",remove:"None"},Qr=(A,t)=>{const e=parseInt(A.slice(1,3),16),s=parseInt(A.slice(3,5),16),n=parseInt(A.slice(5,7),16);return`rgba(${e}, ${s}, ${n}, ${t})`},iN=B.forwardRef(({symbol:A,exchange:t="NSE",interval:e,chartType:s,indicators:n,activeTool:l,onToolUsed:a,isLogScale:c,isAutoScale:d,timeRange:f,magnetMode:p,isToolbarVisible:m=!0,theme:v="dark",comparisonSymbols:w=[],onAlertsSync:y,onAlertTriggered:b,onReplayModeChange:S,isDrawingsLocked:x=!1,isDrawingsHidden:U=!1,isTimerVisible:M=!1,isSessionBreakVisible:N=!1,onIndicatorRemove:I,onIndicatorVisibilityToggle:R,chartAppearance:D={},strategyConfig:V=null,onOpenOptionChain:lt},dt)=>{const At=B.useRef(),[ft,mt]=B.useState(!0),[at,Ut]=B.useState({show:!1,x:0,y:0});B.useEffect(()=>{if(!at.show)return;const H=()=>Ut({show:!1,x:0,y:0});return document.addEventListener("click",H),()=>document.removeEventListener("click",H)},[at.show]);const W=B.useRef(!0),E=B.useRef(null),K=B.useRef(null),ot=B.useRef(null),pt=B.useRef(null),Q=B.useRef({upper:null,middle:null,lower:null}),j=B.useRef(null),Z=B.useRef(null),rt=B.useRef(null),Et=B.useRef(null),xt=B.useRef({macd:null,signal:null,histogram:null}),Qt=B.useRef({k:null,d:null}),se=B.useRef(null),oe=B.useRef(null),He=B.useRef(null),Nt=B.useRef(null),Wt=B.useRef(null),Je=B.useRef(!1),tt=B.useRef(null),Ht=B.useRef(null),Ae=B.useRef(null),te=B.useRef(null),le=B.useRef(s),Ft=B.useRef([]),Qe=B.useRef(new Map),qe=B.useRef({}),Qs=B.useRef({}),Xs=B.useRef({}),[Fe,ss]=B.useState(!1),Ss=B.useRef(!1);B.useEffect(()=>{Ss.current=Fe},[Fe]);const[wt,jt]=B.useState(!1),[he,Zt]=B.useState(1),[Ue,Ze]=B.useState(null),[$e,ls]=B.useState(!1),Pt=B.useRef([]),hs=B.useRef(null),ke=B.useRef(null),ui=B.useRef(null),Y=B.useRef(!1),vt=B.useRef(null);B.useEffect(()=>{ui.current=Ue},[Ue]),B.useEffect(()=>{Y.current=wt},[wt]);const Xt=B.useRef(!1),we=B.useRef(!0),ce=B.useRef(null),be=B.useRef(null),js=B.useRef(!1),is=B.useRef(!1),Oi=B.useRef(null),[De,AA]=B.useState(null),Os=B.useRef(A),Rs=B.useRef(t),EA=B.useRef(e),di=B.useRef(n);B.useEffect(()=>{Os.current=A},[A]),B.useEffect(()=>{Rs.current=t},[t]),B.useEffect(()=>{EA.current=e},[e]),B.useEffect(()=>{di.current=n},[n]);const An=235,bt=10,je=126,[Se,us]=B.useState(!1),ue=(H,k=An)=>{if(!E.current)return;const J=Number.isFinite(H)?H:K.current?.data()?.length??0;if(!J||J<=0)return;const X=Math.max(J-1,0),ht=Math.min(k,J),St=X+bt,Bt=St-ht;try{const It=E.current.timeScale();It.applyOptions({rightOffset:bt}),J<k?It.fitContent():It.setVisibleLogicalRange({from:Bt,to:St})}catch(It){console.warn("Failed to apply default candle position",It)}E.current.priceScale("right").applyOptions({autoScale:!0}),tt.current&&tt.current.setDefaultRange({from:Bt,to:St})},[Ai,Ri]=B.useState(null),VA=B.useRef(!0),[fi,nn]=B.useState(null),[TA,bn]=B.useState([]);B.useEffect(()=>{if(!A)return;const H=async()=>{try{const X=await fetch(`http://localhost:3001/api/signals?symbol=${encodeURIComponent(A)}`);if(!X.ok)return;const St=(await X.json()).map(Bt=>{const It=typeof Bt.time=="string"?new Date(Bt.time).getTime()/1e3:Bt.time;return Bt.type==="BUY"?{time:It,position:"belowBar",color:"#00C853",shape:"arrowUp",text:"BUY",size:2}:Bt.type==="SELL"?{time:It,position:"aboveBar",color:"#D50000",shape:"arrowDown",text:"SELL",size:2}:null}).filter(Boolean);bn(St)}catch{}};H();const k=setInterval(H,5e3);return()=>clearInterval(k)},[A]),B.useEffect(()=>{if(K.current&&TA.length>0)try{K.current.setMarkers(TA)}catch(H){console.warn("Failed to set markers",H)}},[TA,ft]);const[xn,PA]=B.useState(!1),[Ys,rn]=B.useState({}),[ln,Ks]=B.useState({}),Wr=B.useRef(null);B.useEffect(()=>{le.current=s},[s]),B.useImperativeHandle(dt,()=>({undo:()=>{tt.current&&tt.current.undo()},redo:()=>{tt.current&&tt.current.redo()},getLineToolManager:()=>tt.current,clearTools:()=>{tt.current&&tt.current.clearTools()},addPriceAlert:H=>{try{const k=tt.current,J=k&&k._userPriceAlerts;if(!J||!H||H.price==null)return;typeof J.setSymbolName=="function"&&J.setSymbolName(A);const X=Number(H.price);if(!Number.isFinite(X))return;typeof J.addAlertWithCondition=="function"?J.addAlertWithCondition(X,"crossing"):typeof J.openEditDialog=="function"&&J.openEditDialog(H.id,{price:X,condition:"crossing"})}catch(k){console.warn("Failed to add price alert to chart",k)}},removePriceAlert:H=>{try{const k=tt.current,J=k&&k._userPriceAlerts;if(!J||!H)return;typeof J.removeAlert=="function"&&J.removeAlert(H)}catch(k){console.warn("Failed to remove price alert from chart",k)}},restartPriceAlert:(H,k="crossing")=>{try{const J=tt.current,X=J&&J._userPriceAlerts;if(!X||H==null)return;const ht=Number(H);if(!Number.isFinite(ht))return;typeof X.addAlertWithCondition=="function"&&X.addAlertWithCondition(ht,k==="crossing"?"crossing":k)}catch(J){console.warn("Failed to restart price alert on chart",J)}},resetZoom:()=>{ue(Ft.current.length)},getChartContainer:()=>At.current,getCurrentPrice:()=>{if(Ft.current&&Ft.current.length>0){const H=Ft.current[Ft.current.length-1];return H.close??H.value}return null},toggleTimer:()=>{if(Ht.current){const H=Ht.current.isVisible();return Ht.current.setVisible(!H),K.current&&K.current.applyOptions({lastValueVisible:H}),!H}return!1},applyDrawingOptions:H=>{const k=tt.current;if(k&&k._selectedTool)try{return k._selectedTool.applyOptions(H),!0}catch(J){console.warn("Failed to apply drawing options:",J)}return!1},updateDefaultToolOptions:H=>{const k=tt.current;if(k&&typeof k.updateToolOptions=="function")try{k.updateToolOptions(H)}catch(J){console.warn("Failed to update default tool options:",J)}},getSelectedDrawing:()=>tt.current?._selectedTool||null,toggleReplay:()=>{ss(H=>{const k=!H;if(H){if(WA(),jt(!1),Y.current=!1,Ze(null),ui.current=null,ls(!1),ke.current&&E.current){try{E.current.removeSeries(ke.current)}catch(J){console.warn("Error removing faded series:",J)}ke.current=null}if(K.current&&Pt.current.length>0){Ft.current=Pt.current;const J=Yi(Pt.current,le.current);K.current.setData(J),nA(Pt.current,n)}}else{Pt.current=[...Ft.current],jt(!1),Y.current=!1;const J=Math.max(0,Ft.current.length-1);Ze(J),ui.current=J,setTimeout(()=>{vt.current&&vt.current(J,!1)},0)}return S&&setTimeout(()=>S(k),0),k})}}));const $r=B.useCallback((H=!0)=>{if(E.current)try{const k=E.current.timeScale(),J=k.getVisibleLogicalRange();if(!J)return;const{from:X,to:ht}=J,St=ht-X,Bt=(X+ht)/2,Ot=St*(H?.8:1.25),it=Bt-Ot/2,ne=Bt+Ot/2;k.setVisibleLogicalRange({from:it,to:ne})}catch(k){console.warn("Failed to zoom chart",k)}},[]),KA=B.useCallback(()=>{const H=[],k=n.sma;(k===!0||typeof k=="object"&&k?.enabled)&&H.push({type:"sma",name:"MA",params:"20 close 0",color:"#2962FF",value:Ys.sma,isHidden:typeof k=="object"?!!k.hidden:!1,pane:"main"});const X=n.ema;return(X===!0||typeof X=="object"&&X?.enabled)&&H.push({type:"ema",name:"EMA",params:"20 close 0",color:"#FF6D00",value:Ys.ema,isHidden:typeof X=="object"?!!X.hidden:!1,pane:"main"}),n.rsi?.enabled&&H.push({type:"rsi",name:"RSI",params:`${n.rsi.period||14}`,color:n.rsi.color||"#7B1FA2",value:Ys.rsi,isHidden:!!n.rsi.hidden,pane:"rsi"}),n.macd?.enabled&&H.push({type:"macd",name:"MACD",params:`${n.macd.fast||12},${n.macd.slow||26},${n.macd.signal||9}`,color:n.macd.macdColor||"#2962FF",value:Ys.macd,isHidden:!!n.macd.hidden,pane:"macd"}),n.bollingerBands?.enabled&&H.push({type:"bollingerBands",name:"BB",params:`${n.bollingerBands.period||20},${n.bollingerBands.stdDev||2}`,color:"rgba(33, 150, 243, 0.8)",value:Ys.bollingerBands,isHidden:!!n.bollingerBands.hidden,pane:"main"}),n.volume?.enabled&&H.push({type:"volume",name:"Volume",params:"",color:n.volume.colorUp||"#089981",value:Ys.volume,isHidden:!!n.volume.hidden,pane:"main"}),n.atr?.enabled&&H.push({type:"atr",name:"ATR",params:`${n.atr.period||14}`,color:n.atr.color||"#FF9800",value:Ys.atr,isHidden:!!n.atr.hidden,pane:"atr"}),n.stochastic?.enabled&&H.push({type:"stochastic",name:"Stoch",params:`${n.stochastic.kPeriod||14},${n.stochastic.dPeriod||3},${n.stochastic.smooth||3}`,color:n.stochastic.kColor||"#2962FF",value:Ys.stochastic,isHidden:!!n.stochastic.hidden,pane:"stochastic"}),n.vwap?.enabled&&H.push({type:"vwap",name:"VWAP",params:"",color:n.vwap.color||"#FF9800",value:Ys.vwap,isHidden:!!n.vwap.hidden,pane:"main"}),n.supertrend?.enabled&&H.push({type:"supertrend",name:"Supertrend",params:`${n.supertrend.period||10},${n.supertrend.multiplier||3}`,color:"#26a69a",value:Ys.supertrend,isHidden:!!n.supertrend.hidden,pane:"main"}),n.tpo?.enabled&&H.push({type:"tpo",name:"TPO",params:n.tpo.blockSize||"30m",color:"#FF9800",value:Ys.tpo,isHidden:!!n.tpo.hidden,pane:"main"}),H},[n,Ys]);B.useEffect(()=>{const H=k=>{Wr.current&&!Wr.current.contains(k.target)&&PA(!1)};return xn&&document.addEventListener("mousedown",H),()=>{document.removeEventListener("mousedown",H)}},[xn]),B.useEffect(()=>{if(!At.current)return;const H=()=>{try{const ht=At.current;if(!ht)return;let St=ht.querySelectorAll("table > tbody > tr");if(St.length===0&&(St=ht.querySelectorAll("table tr")),St.length===0&&(St=ht.querySelectorAll('[class*="pane"]')),console.log("Found pane elements:",St.length,"using selector"),St.length===0)return;const Bt=ht.getBoundingClientRect(),It={},Ot=[];oe.current&&Ot.push("rsi"),He.current&&Ot.push("macd"),Nt.current&&Ot.push("stochastic"),Wt.current&&Ot.push("atr"),console.log("Active pane refs:",Ot,"Expected panes:",Ot.length+1);const it=Array.from(St).filter(Ee=>Ee.getBoundingClientRect().height>10);console.log("Actual panes after filtering:",it.length);let ne=0;it.forEach((Ee,Me)=>{const ge=Ee.getBoundingClientRect().top-Bt.top;if(Me===0)It.main=ge;else{const ve=Ot[ne];ve&&(It[ve]=ge,console.log("Assigned pane:",ve,"at filtered index:",Me,"top:",ge)),ne++}}),console.log("Final pane positions:",It),Ks(It)}catch(ht){console.warn("Error updating pane positions:",ht)}},k=setTimeout(H,500),J=new MutationObserver(()=>{setTimeout(H,100)});J.observe(At.current,{childList:!0,subtree:!0});const X=new ResizeObserver(()=>{setTimeout(H,50)});return X.observe(At.current),()=>{clearTimeout(k),J.disconnect(),X.disconnect()}},[n.rsi?.enabled,n.macd?.enabled,n.stochastic?.enabled,n.atr?.enabled]),B.useEffect(()=>{if(tt.current&&l){const H=tt.current;if(l==="lock_all"){a&&a();return}if(l==="hide_drawings"){a&&a();return}if(l==="clear_all"){typeof H.clearTools=="function"&&H.clearTools(),a&&a();return}if(l==="show_timer"){a&&a();return}const k=nw[l]||"None";tt.current&&typeof tt.current.startTool=="function"&&tt.current.startTool(k)}},[l,a]),B.useEffect(()=>{if(!tt.current)return;const H=tt.current,k=typeof H.areDrawingsLocked=="function"?H.areDrawingsLocked():!1;x!==k&&(x?typeof H.lockAllDrawings=="function"&&H.lockAllDrawings():typeof H.unlockAllDrawings=="function"&&H.unlockAllDrawings())},[x]),B.useEffect(()=>{if(!tt.current)return;const H=tt.current,k=typeof H.areDrawingsHidden=="function"?H.areDrawingsHidden():!1;U!==k&&(U?typeof H.hideAllDrawings=="function"&&H.hideAllDrawings():typeof H.showAllDrawings=="function"&&H.showAllDrawings())},[U]),B.useEffect(()=>{if(!Ht.current)return;const H=Ht.current;typeof H.setVisible=="function"&&(H.setVisible(M),K.current&&K.current.applyOptions({lastValueVisible:!M}))},[M]),B.useEffect(()=>{if(!tt.current)return;const H=tt.current;if(typeof H.disableSessionHighlighting=="function"&&H.disableSessionHighlighting(),N&&typeof H.enableSessionHighlighting=="function"){const k=J=>{const ht=new Date(J*1e3).getHours();return ht===9?"rgba(41, 98, 255, 0.15)":ht===15?"rgba(255, 82, 82, 0.15)":""};H.enableSessionHighlighting(k)}},[N]),B.useEffect(()=>{const H=l==="zoom_in";if(!H&&!(l==="zoom_out")||!At.current)return;const J=St=>{St.button===0&&$r(H)},X=St=>{St.key==="Escape"&&(St.preventDefault(),a&&a())},ht=At.current;return ht.addEventListener("click",J),window.addEventListener("keydown",X),ht.style.cursor=H?"zoom-in":"zoom-out",()=>{ht.removeEventListener("click",J),window.removeEventListener("keydown",X),ht.style.cursor=""}},[l,$r,a]),B.useEffect(()=>{const H=J=>{J.key==="Shift"&&!is.current&&(is.current=!0,At.current&&(At.current.style.cursor="crosshair"))},k=J=>{J.key==="Shift"&&(is.current=!1,Oi.current=null,At.current&&(At.current.style.cursor=""),AA(null))};return window.addEventListener("keydown",H),window.addEventListener("keyup",k),()=>{window.removeEventListener("keydown",H),window.removeEventListener("keyup",k)}},[]),B.useEffect(()=>{if(!E.current||!K.current)return;const H=J=>{const X=Math.floor(J/1e3),ht=Math.floor(X/60),St=Math.floor(ht/60),Bt=Math.floor(St/24);return Bt>0?`${Bt}d ${St%24}h`:St>0?`${St}h ${ht%60}m`:ht>0?`${ht}m`:`${X}s`},k=J=>{if(!is.current||!J.point||!J.time)return;const X=E.current,ht=K.current;if(!X||!ht)return;const St=ht.coordinateToPrice(J.point.y),Bt=X.timeScale().coordinateToLogical(J.point.x);if(!Oi.current)Oi.current={price:St,logical:Bt,time:J.time,x:J.point.x,y:J.point.y},AA({isFirstPoint:!0,x:J.point.x,y:J.point.y});else{const It=Oi.current,Ot=St-It.price,it=Ot/It.price*100,ne=Math.abs(Math.round(Bt-It.logical)),Ee=new Date(It.time*1e3),Me=new Date(J.time*1e3),Ie=Math.abs(Me-Ee),ge=H(Ie);AA({priceChange:Ot,percentChange:it,barCount:ne,timeElapsed:ge,position:{x:(It.x+J.point.x)/2,y:Math.min(It.y,J.point.y)-10},line:{x1:It.x,y1:It.y,x2:J.point.x,y2:J.point.y}}),Oi.current=null}};return E.current.subscribeClick(k),()=>{if(E.current)try{E.current.unsubscribeClick(k)}catch{}}},[A,e]),B.useEffect(()=>{if(!At.current)return;const H=X=>{X&&X[0]&&(VA.current=X[0].isIntersecting)},k=new IntersectionObserver(H,{threshold:0});k.observe(At.current);const J=()=>{document.visibilityState==="hidden"&&(VA.current=!1)};return document.addEventListener("visibilitychange",J),()=>{k.disconnect(),document.removeEventListener("visibilitychange",J)}},[]);const zi=B.useCallback(()=>{if(!E.current||!K.current||!At.current)return;const H=K.current.data();if(!H||H.length===0){Ri(null);return}const k=H[H.length-1],J=k.close??k.value;if(J===void 0){Ri(null);return}const X=K.current.priceToCoordinate(J);if(X===null){Ri(null);return}let ht="#2962FF";k.open!==void 0&&k.close!==void 0&&(ht=k.close>=k.open?"#089981":"#F23645");try{let St=J.toFixed(2);if(w.length>0){const Ot=E.current.timeScale().getVisibleLogicalRange();if(Ot){const it=Math.max(0,Math.round(Ot.from));if(Ft.current&&it<Ft.current.length){const ne=Ft.current[it];if(ne){const Ee=ne.close??ne.value;if(Ee&&Ee!==0){const Me=(J-Ee)/Ee*100;St=`${Me>=0?"+":""}${Me.toFixed(2)}%`}}}}}const Bt={top:X,price:St,symbol:w.length>0?A:null,color:ht};Ri(It=>!It||It.top!==Bt.top||It.price!==Bt.price||It.symbol!==Bt.symbol||It.color!==Bt.color?Bt:It)}catch(St){console.error("Error in updateAxisLabel:",St)}},[w]),Ll=B.useCallback(()=>{if(Ft.current&&Ft.current.length>0){const H=Ft.current[Ft.current.length-1],k=Ft.current.length>1?Ft.current[Ft.current.length-2]:null,J=k?H.close-k.close:0,X=k&&k.close!==0?J/k.close*100:0;nn({open:H.open,high:H.high,low:H.low,close:H.close,change:J,changePercent:X,isUp:H.close>=H.open})}},[]);B.useEffect(()=>{let H,k=!0;const J=()=>{k&&VA.current&&document.visibilityState!=="hidden"&&(zi(),H=requestAnimationFrame(J))},X=()=>{document.visibilityState==="visible"&&VA.current&&k&&(H=requestAnimationFrame(J))};return document.addEventListener("visibilitychange",X),H=requestAnimationFrame(J),()=>{k=!1,cancelAnimationFrame(H),document.removeEventListener("visibilitychange",X)}},[zi]);const Yi=(H,k)=>{if(!H||H.length===0)return[];switch(k){case"line":case"area":case"baseline":return H.map(J=>({time:J.time,value:J.close}));case"heikin-ashi":return UM(H);case"renko":return NM(H);default:return H}},Hl=(H,k,J="")=>{const X={lastValueVisible:!0,priceScaleId:"right",title:J},ht=D.candleUpColor||"#089981",St=D.candleDownColor||"#F23645",Bt=D.wickUpColor||ht,It=D.wickDownColor||St;switch(k){case"candlestick":return H.addSeries(ka,{...X,upColor:ht,downColor:St,borderVisible:!1,wickUpColor:Bt,wickDownColor:It});case"bar":return H.addSeries(d8,{...X,upColor:ht,downColor:St,thinBars:!1});case"hollow-candlestick":return H.addSeries(ka,{...X,upColor:"transparent",downColor:St,borderUpColor:ht,borderDownColor:St,wickUpColor:Bt,wickDownColor:It});case"line":return H.addSeries(tA,{...X,color:"#2962FF",lineWidth:2});case"area":return H.addSeries(c8,{...X,topColor:"rgba(41, 98, 255, 0.4)",bottomColor:"rgba(41, 98, 255, 0.0)",lineColor:"#2962FF",lineWidth:2});case"baseline":return H.addSeries(l8,{...X,topLineColor:ht,topFillColor1:Qr(ht,.28),topFillColor2:Qr(ht,.05),bottomLineColor:St,bottomFillColor1:Qr(St,.05),bottomFillColor2:Qr(St,.28)});case"heikin-ashi":return H.addSeries(ka,{...X,upColor:ht,downColor:St,borderVisible:!1,wickUpColor:Bt,wickDownColor:It});case"renko":return H.addSeries(ka,{...X,upColor:ht,downColor:St,borderVisible:!1,wickUpColor:ht,wickDownColor:St});default:return H.addSeries(ka,{...X,upColor:ht,downColor:St,borderVisible:!1,wickUpColor:Bt,wickDownColor:It})}},GA=B.useRef(l);B.useEffect(()=>{GA.current=l},[l]);const er=H=>{if(!tt.current){const k=new II,J=k.startTool.bind(k);k.startTool=X=>{J(X);const ht=GA.current==="zoom_in"||GA.current==="zoom_out";(X==="None"||X===null)&&GA.current!==null&&GA.current!=="cursor"&&!ht&&a&&a()},H.attachPrimitive(k),tt.current=k;try{typeof k.setSymbol=="function"&&k.setSymbol(A);const X=k._userPriceAlerts;X&&typeof X.setSymbolName=="function"&&X.setSymbolName(A),X&&typeof X.alertsChanged=="function"&&typeof X.alerts=="function"&&typeof y=="function"&&X.alertsChanged().subscribe(()=>{try{const St=(X.alerts()||[]).map(Bt=>({id:Bt.id,price:Bt.price,condition:Bt.condition||"crossing",type:Bt.type||"price"}));y(St)}catch(ht){console.warn("Failed to sync chart alerts to app",ht)}},k),X&&typeof X.alertTriggered=="function"&&typeof b=="function"&&X.alertTriggered().subscribe(ht=>{try{b({externalId:ht.alertId,price:ht.alertPrice,timestamp:ht.timestamp,direction:ht.direction,condition:ht.condition})}catch(St){console.warn("Failed to propagate alertTriggered event to app",St)}},k)}catch(X){console.warn("Failed to initialize alert symbol name",X)}window.lineToolManager=k,window.chartInstance=E.current,window.seriesInstance=H}},sr=(H,k)=>{if(!Ht.current){const J=new DI({timeframeSeconds:k,visible:M,textColor:"#FFFFFF",yOffset:19,textPadding:.95});H.attachPrimitive(J),Ht.current=J}};B.useEffect(()=>{if(!At.current)return;const H=v==="dark"?D.darkBackground||"#131722":D.lightBackground||"#ffffff",k=v==="dark"?D.darkGridColor||"#2A2E39":D.lightGridColor||"#e0e3eb",J=ZU(At.current,{watermark:{visible:!1},layout:{textColor:v==="dark"?"#D1D4DC":"#131722",background:{color:H},attributionLogo:!1},grid:{vertLines:{color:k,visible:D.showVerticalGridLines!==!1},horzLines:{color:k,visible:D.showHorizontalGridLines!==!1}},crosshair:{mode:p?1:0,vertLine:{width:1,color:v==="dark"?"#758696":"#9598a1",style:3,labelBackgroundColor:v==="dark"?"#758696":"#9598a1"},horzLine:{width:1,color:v==="dark"?"#758696":"#9598a1",style:3,labelBackgroundColor:v==="dark"?"#758696":"#9598a1"}},timeScale:{borderColor:v==="dark"?"#2A2E39":"#e0e3eb",timeVisible:!0},rightPriceScale:{borderColor:v==="dark"?"#2A2E39":"#e0e3eb"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0},handleScale:{mouseWheel:!0,pinch:!0}});E.current=J;const X=()=>{At.current&&J.applyOptions({width:At.current.clientWidth,height:At.current.clientHeight})},ht=new ResizeObserver(X);ht.observe(At.current);const St=async()=>{if(!(Xt.current||!we.current)&&!(!ce.current||!K.current||!Ft.current)&&!Ss.current){Xt.current=!0,us(!0);try{const it=ce.current,ne=19800,Ee=new Date((it-ne)*1e3),Me=new Date(Ee);Me.setDate(Me.getDate()-1);const Ie=new Date(Me),ge=Os.current,ve=Rs.current,Ns=EA.current,Us=di.current;Ns.includes("m")||Ns.includes("h")?Ie.setDate(Ie.getDate()-30):Ie.setFullYear(Ie.getFullYear()-1);const Js=bi=>bi.toISOString().split("T")[0];kt.debug("[ScrollBack] Loading older data:",{symbol:ge,exchange:ve,interval:Ns,startDate:Js(Ie),endDate:Js(Me)}),be.current&&be.current.abort(),be.current=new AbortController;const ri=await E2(ge,ve,Ns,Js(Ie),Js(Me),be.current.signal);if(!ri||ri.length===0){kt.debug("[ScrollBack] No more historical data available"),we.current=!1,Xt.current=!1;return}const zs=Ft.current[0]?.time||0,Ci=ri.filter(bi=>bi.time<zs);if(Ci.length===0){kt.debug("[ScrollBack] All fetched data overlaps with existing, no more available"),we.current=!1,Xt.current=!1;return}kt.debug("[ScrollBack] Prepending",Ci.length,"older candles");const qs=J.timeScale();let Vt=null;try{Vt=qs.getVisibleLogicalRange()}catch{}const os=Ci.length,Lt=[...Ci,...Ft.current];Ft.current=Lt,ce.current=Lt[0].time;const Oe=le.current,$A=Yi(Lt,Oe);if(K.current.setData($A),Vt)try{const bi=Vt.from+os,Ar=Vt.to+os;qs.setVisibleLogicalRange({from:bi,to:Ar})}catch(bi){console.warn("[ScrollBack] Failed to restore visible range:",bi)}Pt.current&&Pt.current.length>0&&(Pt.current=[...Ci,...Pt.current]),nA(Lt,Us)}catch(it){it.name!=="AbortError"&&console.error("[ScrollBack] Error loading older data:",it)}finally{Xt.current=!1,us(!1)}}},Bt=it=>{if(!it||!K.current||!Ft.current||Ft.current.length===0)return;const Ee=J.timeScale().getVisibleLogicalRange();if(Ee){const Me=Ee.to,Ie=Math.min(Math.round(Me),Ft.current.length-1);if(Ie>=0){const ve=Ft.current[Ie];ve&&Ht.current&&ve.open!==void 0&&ve.close!==void 0&&Ht.current.updateCandleData(ve.open,ve.close)}const ge=Math.round(Ee.from);ge<=je&&we.current&&!Xt.current&&(kt.debug("[ScrollBack] Prefetching older data (user is",ge,"candles from oldest)"),St())}};J.timeScale().subscribeVisibleLogicalRangeChange(Bt);const It=it=>{if(it.preventDefault(),GA.current&&GA.current!=="cursor"){a&&a();return}Ut({show:!0,x:it.clientX,y:it.clientY})},Ot=At.current;return Ot.addEventListener("contextmenu",It,!0),()=>{window.lineToolManager=null,window.chartInstance=null,window.seriesInstance=null;try{J.timeScale().unsubscribeVisibleLogicalRangeChange(Bt)}catch(it){console.warn("Failed to unsubscribe visible logical range change",it)}try{Ot.removeEventListener("contextmenu",It,!0)}catch(it){console.warn("Failed to remove contextmenu listener",it)}try{ht.disconnect()}catch(it){console.warn("Failed to disconnect resize observer",it)}if(js.current=!0,tt.current){try{tt.current.destroy()}catch(it){console.warn("Failed to destroy lineToolManager",it)}tt.current=null}try{te.current&&te.current.close()}catch(it){console.warn("Failed to close chart WebSocket",it)}try{J.remove()}catch(it){console.warn("Failed to remove chart instance",it)}finally{E.current=null}}},[]),B.useEffect(()=>{if(!E.current)return;const H=E.current,k=Hl(H,s,V?.displayName||A);if(K.current=k,er(k),Ht.current)try{k.attachPrimitive(Ht.current)}catch(X){console.warn("Error re-attaching timer to new series:",X)}const J=Yi(Ft.current,s);if(J.length&&(k.setData(J),nA(Ft.current,n),ue(J.length),zi(),l&&l!=="cursor")){const X=nw[l]||"None";tt.current&&typeof tt.current.startTool=="function"&&tt.current.startTool(X)}if(Fe&&ke.current){try{H.removeSeries(ke.current)}catch(X){console.warn("Error removing faded series on chart type change:",X)}ke.current=null,Ue!==null&&pi(Ue)}return()=>{if(tt.current){try{tt.current.clearTools()}catch(X){console.warn("Failed to clear tools before switching chart type",X)}try{K.current&&K.current.detachPrimitive(tt.current)}catch(X){console.warn("Failed to detach line tools from series",X)}tt.current=null}if(K.current){try{H.removeSeries(K.current)}catch(X){X.message!=="Value is undefined"&&console.warn("Error removing series:",X)}K.current=null}}},[s,A,t,V?.displayName]),B.useEffect(()=>{if(!E.current)return;let H=!1,k=null;const J=new AbortController;te.current&&(te.current.close(),te.current=null),Object.values(qe.current).forEach(ht=>{ht?.close&&ht.close()}),qe.current={},Xt.current=!1,we.current=!0,ce.current=null,be.current&&(be.current.abort(),be.current=null);const X=async()=>{W.current=!0,Je.current=!1,mt(!0);try{let ht;if(V&&V.legs?.length>=2){const St=V.exchange||"NFO",Bt=V.legs.map(Ot=>yu(Ot.symbol,St,e,1e3,J.signal)),It=await Promise.all(Bt);if(H)return;Qs.current={},V.legs.forEach((Ot,it)=>{Qs.current[Ot.id]=It[it]}),ht=lM(It,V.legs),kt.debug("[Strategy] Combined data length:",ht.length,"from",V.legs.length,"legs")}else ht=await yu(A,t,e,1e3,J.signal);if(H)return;if(Array.isArray(ht)&&ht.length>0&&K.current){Ft.current=ht,ce.current=ht[0].time;const St=le.current,Bt=Yi(ht,St);K.current.setData(Bt),Je.current=!0;const It=Za(e);if(!Ht.current&&K.current&&Number.isFinite(It)&&It>0?sr(K.current,It):Ht.current&&Number.isFinite(It)&&It>0&&Ht.current.applyOptions({timeframeSeconds:It}),k&&cancelAnimationFrame(k),k=requestAnimationFrame(()=>{H||nA(ht,n)}),ue(Bt.length,An),setTimeout(()=>{H||(W.current=!1,mt(!1),zi())},50),V&&V.legs?.length>=2){const Ot=V.exchange||"NFO",it=ne=>Ee=>{if(H||!Ee)return;const Me=Number(Ee.close);if(!Number.isFinite(Me)||Me<=0||(Xs.current[ne.id]=Me,!V.legs.every(Lt=>Xs.current[Lt.id]!=null)))return;const ge=V.legs.reduce((Lt,Oe)=>{const $A=Xs.current[Oe.id],bi=Oe.direction==="buy"?1:-1,Ar=Oe.quantity||1;return Lt+bi*Ar*$A},0),ve=Ft.current;if(!ve||ve.length===0)return;const Ns=Za(e);if(!Number.isFinite(Ns)||Ns<=0)return;const Us=ve.length-1,Js=ve[Us].time;OB()&&ju();const ri=jB(),zs=Math.floor(ri/Ns)*Ns,Ci=zs>Js;let qs;if(Ci)qs={time:zs,open:ge,high:ge,low:ge,close:ge},ve.push(qs);else{const Lt=ve[Us];qs={time:Js,open:Lt.open,high:Math.max(Lt.high,ge),low:Math.min(Lt.low,ge),close:ge},ve[Us]=qs}Ft.current=ve;const Vt=le.current,os=Yi([qs],Vt)[0];os&&K.current&&!Ss.current&&(K.current.update(os),yi(ve),zi(),Ll(),Ht.current&&Ht.current.updateCandleData(qs.open,qs.close))};V.legs.forEach(ne=>{qe.current[ne.id]=Gg(ne.symbol,Ot,e,it(ne))})}else te.current=Gg(A,t,e,Ot=>{if(H||!Ot)return;const it=Number(Ot.close);if(!Number.isFinite(it)||it<=0){console.warn("Received invalid close price:",Ot);return}const ne=Ft.current;if(!ne||ne.length===0)return;const Ee=Za(e);if(!Number.isFinite(Ee)||Ee<=0)return;const Me=ne.length-1,Ie=ne[Me].time;OB()&&ju();const ge=jB(),ve=Math.floor(ge/Ee)*Ee,Ns=ve>Ie;let Us;if(Ns)Us={time:ve,open:it,high:it,low:it,close:it},ne.push(Us),kt.debug("[WebSocket] Created new candle at time:",ve,"price:",it);else{const zs=ne[Me];Us={time:Ie,open:zs.open,high:Math.max(zs.high,it),low:Math.min(zs.low,it),close:it},ne[Me]=Us}Ft.current=ne;const Js=le.current,ri=Yi([Us],Js)[0];ri&&K.current&&!Ss.current&&(K.current.update(ri),yi(ne),zi(),Ll(),Ht.current&&Ht.current.updateCandleData(Us.open,Us.close))})}else Ft.current=[],K.current?.setData([]),W.current=!1,mt(!1)}catch(ht){if(ht.name==="AbortError")return;console.error("Error loading chart data:",ht),H||(W.current=!1,mt(!1))}};return ni.current=null,X(),()=>{H=!0,k&&cancelAnimationFrame(k),J.abort(),te.current&&(te.current.close(),te.current=null),Object.values(qe.current).forEach(ht=>{ht&&ht.close()}),qe.current={},Xs.current={},Qs.current={}}},[A,t,e,V]);const ni=B.useRef(null),yi=B.useCallback(H=>{if(!E.current)return;const k=H.length-1,J=H[k];if(n.sma&&ot.current)if(H.length<20){const X=ig(H,20);X&&X.length>0&&ot.current.setData(X)}else{const X=H.slice(-20),St=X.reduce((Bt,It)=>Bt+It.close,0)/X.length;ot.current.update({time:J.time,value:St})}if(n.ema&&pt.current)if(H.length<20||ni.current===null){const X=jh(H,20);X&&X.length>0&&(ni.current=X[X.length-1].value,pt.current.setData(X))}else{const ht=(J.close-ni.current)*.09523809523809523+ni.current;ni.current=ht,pt.current.update({time:J.time,value:ht})}},[n]),nA=B.useCallback((H,k)=>{if(!E.current)return;const J=Je.current,X=k.sma,ht=X===!0||typeof X=="object"&&X?.enabled,St=typeof X=="object"&&X?.hidden,Bt=typeof X=="object"&&X?.period||20,It=typeof X=="object"&&X?.color||"#2196F3";if(ht){if(!ot.current&&J&&(ot.current=E.current.addSeries(tA,{color:It,lineWidth:2,title:`SMA ${Bt}`,priceLineVisible:!1,lastValueVisible:!1,visible:!St})),ot.current&&ot.current.applyOptions({color:It,title:`SMA ${Bt}`,visible:!St}),ot.current&&typeof ig=="function"){const Vt=ig(H,Bt);Vt&&Vt.length>0&&ot.current.setData(Vt),ot.current.applyOptions({visible:!St})}}else ot.current&&(E.current.removeSeries(ot.current),ot.current=null);const Ot=k.ema,it=Ot===!0||typeof Ot=="object"&&Ot?.enabled,ne=typeof Ot=="object"&&Ot?.hidden,Ee=typeof Ot=="object"&&Ot?.period||20,Me=typeof Ot=="object"&&Ot?.color||"#FF9800";if(it){if(!pt.current&&J&&(pt.current=E.current.addSeries(tA,{color:Me,lineWidth:2,title:`EMA ${Ee}`,priceLineVisible:!1,lastValueVisible:!1,visible:!ne})),pt.current&&pt.current.applyOptions({color:Me,title:`EMA ${Ee}`,visible:!ne}),pt.current&&typeof jh=="function"){const Vt=jh(H,Ee);Vt&&Vt.length>0&&pt.current.setData(Vt),pt.current.applyOptions({visible:!ne})}}else pt.current&&(E.current.removeSeries(pt.current),pt.current=null);const Ie=k.bollingerBands?.hidden;if(k.bollingerBands?.enabled){const Vt=k.bollingerBands.period||20,os=k.bollingerBands.stdDev||2,Lt=fM(H,Vt,os);J&&Lt.upper&&Lt.upper.length>0&&(Q.current.upper||(Q.current.upper=E.current.addSeries(tA,{color:"rgba(33, 150, 243, 0.5)",lineWidth:1,priceLineVisible:!1,lastValueVisible:!1,title:"",visible:!Ie})),Q.current.upper.setData(Lt.upper),Q.current.upper.applyOptions({visible:!Ie}),Q.current.middle||(Q.current.middle=E.current.addSeries(tA,{color:"rgba(33, 150, 243, 0.8)",lineWidth:1,lineStyle:2,priceLineVisible:!1,lastValueVisible:!1,title:"BB",visible:!Ie})),Q.current.middle.setData(Lt.middle),Q.current.middle.applyOptions({visible:!Ie}),Q.current.lower||(Q.current.lower=E.current.addSeries(tA,{color:"rgba(33, 150, 243, 0.5)",lineWidth:1,priceLineVisible:!1,lastValueVisible:!1,title:"",visible:!Ie})),Q.current.lower.setData(Lt.lower),Q.current.lower.applyOptions({visible:!Ie}))}else Q.current.upper&&(E.current.removeSeries(Q.current.upper),Q.current.upper=null),Q.current.middle&&(E.current.removeSeries(Q.current.middle),Q.current.middle=null),Q.current.lower&&(E.current.removeSeries(Q.current.lower),Q.current.lower=null);const ge=k.vwap?.hidden;if(k.vwap?.enabled){if(!j.current&&J&&(j.current=E.current.addSeries(tA,{color:k.vwap.color||"#FF9800",lineWidth:2,title:"VWAP",priceLineVisible:!1,lastValueVisible:!ge,visible:!ge})),j.current&&typeof VB=="function"){const Vt=VB(H);Vt&&Vt.length>0&&j.current.setData(Vt),j.current.applyOptions({visible:!ge,lastValueVisible:!ge})}}else j.current&&(E.current.removeSeries(j.current),j.current=null);const ve=k.supertrend?.hidden;if(k.supertrend?.enabled){if(!Z.current&&J&&(Z.current=E.current.addSeries(tA,{color:"#26a69a",lineWidth:2,title:"Supertrend",priceLineVisible:!1,lastValueVisible:!ve,visible:!ve,crosshairMarkerVisible:!0})),Z.current&&typeof RB=="function"){const Vt=k.supertrend.period||10,os=k.supertrend.multiplier||3,Lt=RB(H,Vt,os);Lt&&Lt.length>0&&Z.current.setData(Lt),Z.current.applyOptions({visible:!ve,lastValueVisible:!ve})}}else Z.current&&(E.current.removeSeries(Z.current),Z.current=null);const Ns=k.tpo?.hidden;if(k.tpo?.enabled){const Vt=EA.current;Vt&&(Vt.includes("m")||Vt.includes("h"))||console.warn("TPO Profile works best on intraday timeframes (1m, 5m, 15m, 30m, 1h). Current:",Vt);const Lt=k.tpo,Oe={tickSize:Lt.tickSize||"auto",blockSize:Lt.blockSize||"30m",sessionType:Lt.sessionType||"daily",sessionStart:Lt.sessionStart||"09:15",sessionEnd:Lt.sessionEnd||"15:30",valueAreaPercent:Lt.valueAreaPercent||70,allHours:Lt.allHours??!0},$A=SM(H,Oe);!Ae.current&&K.current&&(Ae.current=new FM({visible:!Ns,showLetters:Lt.showLetters??!0,showPOC:Lt.showPOC??!0,showValueArea:Lt.showValueArea??!0,showInitialBalance:Lt.showInitialBalance??!0,showVAH:Lt.showVAH??!0,showVAL:Lt.showVAL??!0,showPoorHigh:Lt.showPoorHigh??!1,showPoorLow:Lt.showPoorLow??!1,showSinglePrints:Lt.showSinglePrints??!1,showMidpoint:Lt.showMidpoint??!1,showOpen:Lt.showOpen??!1,showClose:Lt.showClose??!1,useGradientColors:Lt.useGradientColors??!0,position:Lt.position||"right",pocColor:Lt.pocColor||"#FF9800",vahColor:Lt.vahColor||"#26a69a",valColor:Lt.valColor||"#ef5350",poorHighColor:Lt.poorHighColor||"#ef5350",poorLowColor:Lt.poorLowColor||"#26a69a",singlePrintColor:Lt.singlePrintColor||"#FFEB3B",midpointColor:Lt.midpointColor||"#9C27B0"}),K.current.attachPrimitive(Ae.current)),Ae.current&&(Ae.current.setData($A),Ae.current.applyOptions({visible:!Ns,showLetters:Lt.showLetters??!0,showPOC:Lt.showPOC??!0,showValueArea:Lt.showValueArea??!0,showInitialBalance:Lt.showInitialBalance??!0,showVAH:Lt.showVAH??!0,showVAL:Lt.showVAL??!0,showPoorHigh:Lt.showPoorHigh??!1,showPoorLow:Lt.showPoorLow??!1,showSinglePrints:Lt.showSinglePrints??!1,showMidpoint:Lt.showMidpoint??!1,showOpen:Lt.showOpen??!1,showClose:Lt.showClose??!1,useGradientColors:Lt.useGradientColors??!0,pocColor:Lt.pocColor||"#FF9800",vahColor:Lt.vahColor||"#26a69a",valColor:Lt.valColor||"#ef5350",poorHighColor:Lt.poorHighColor||"#ef5350",poorLowColor:Lt.poorLowColor||"#26a69a",singlePrintColor:Lt.singlePrintColor||"#FFEB3B",midpointColor:Lt.midpointColor||"#9C27B0"}))}else if(Ae.current&&K.current){try{K.current.detachPrimitive(Ae.current)}catch(Vt){console.warn("Error detaching TPO primitive:",Vt)}Ae.current=null}const Us=k.volume?.hidden;if(k.volume?.enabled){if(!rt.current&&J&&(rt.current=E.current.addSeries(MB,{priceFormat:{type:"volume"},priceScaleId:"volume",priceLineVisible:!1,lastValueVisible:!1,visible:!Us}),rt.current.priceScale().applyOptions({scaleMargins:{top:.85,bottom:0}})),rt.current){const Vt=k.volume.colorUp||"#26a69a80",os=k.volume.colorDown||"#ef535080",Lt=gM(H,Vt,os);Lt&&Lt.length>0&&rt.current.setData(Lt),rt.current.applyOptions({visible:!Us})}}else rt.current&&(E.current.removeSeries(rt.current),rt.current=null);const Js=k.rsi?.hidden;if(k.rsi?.enabled){if(!oe.current&&J&&(oe.current=E.current.addPane({height:100})),Js)Et.current&&Et.current.applyOptions({visible:!1,lastValueVisible:!1});else if(oe.current&&!Et.current&&J&&(Et.current=oe.current.addSeries(tA,{color:k.rsi?.color||"#7B1FA2",lineWidth:2,priceLineVisible:!1,lastValueVisible:!0,title:"RSI",visible:!0})),Et.current){const Vt=k.rsi.period||14,os=hM(H,Vt);os&&os.length>0&&Et.current.setData(os),Et.current.applyOptions({visible:!0,lastValueVisible:!0})}}else{if(Et.current&&oe.current){try{oe.current.removeSeries(Et.current)}catch(Vt){console.warn("Error removing RSI series:",Vt)}Et.current=null}if(oe.current){try{const Vt=E.current.panes().indexOf(oe.current);Vt>0&&E.current.removePane(Vt)}catch(Vt){console.warn("Error removing RSI pane:",Vt)}oe.current=null}}const ri=k.macd?.hidden;if(k.macd?.enabled){!He.current&&J&&(He.current=E.current.addPane({height:120})),ri||(xt.current.histogram||(xt.current.histogram=He.current.addSeries(MB,{priceLineVisible:!1,lastValueVisible:!1})),xt.current.macd||(xt.current.macd=He.current.addSeries(tA,{color:k.macd?.macdColor||"#2962FF",lineWidth:2,priceLineVisible:!1,lastValueVisible:!0,title:"MACD"})),xt.current.signal||(xt.current.signal=He.current.addSeries(tA,{color:k.macd?.signalColor||"#FF6D00",lineWidth:2,priceLineVisible:!1,lastValueVisible:!0,title:"Signal"})));const Vt=k.macd.fast||12,os=k.macd.slow||26,Lt=k.macd.signal||9,Oe=dM(H,Vt,os,Lt);xt.current.histogram&&Oe?.histogram&&(xt.current.histogram.setData(Oe.histogram),xt.current.histogram.applyOptions({visible:!ri})),xt.current.macd&&Oe?.macdLine&&(xt.current.macd.setData(Oe.macdLine),xt.current.macd.applyOptions({visible:!ri,lastValueVisible:!ri})),xt.current.signal&&Oe?.signalLine&&(xt.current.signal.setData(Oe.signalLine),xt.current.signal.applyOptions({visible:!ri,lastValueVisible:!ri}))}else if(He.current){try{const Vt=E.current.panes().indexOf(He.current);Vt>0&&E.current.removePane(Vt)}catch(Vt){console.warn("Error removing MACD pane:",Vt)}He.current=null,xt.current.histogram=null,xt.current.macd=null,xt.current.signal=null}const zs=k.stochastic?.hidden;if(k.stochastic?.enabled){!Nt.current&&J&&(Nt.current=E.current.addPane({height:100})),Nt.current&&J&&(Qt.current.k||(Qt.current.k=Nt.current.addSeries(tA,{color:k.stochastic?.kColor||"#2962FF",lineWidth:2,priceLineVisible:!1,lastValueVisible:!zs,title:"%K",visible:!zs})),Qt.current.d||(Qt.current.d=Nt.current.addSeries(tA,{color:k.stochastic?.dColor||"#FF6D00",lineWidth:2,priceLineVisible:!1,lastValueVisible:!zs,title:"%D",visible:!zs})));const Vt=k.stochastic.kPeriod||14,os=k.stochastic.dPeriod||3,Lt=k.stochastic.smooth||3,Oe=uM(H,Vt,os,Lt);Qt.current.k&&Oe?.kLine&&(Qt.current.k.setData(Oe.kLine),Qt.current.k.applyOptions({visible:!zs,lastValueVisible:!zs})),Qt.current.d&&Oe?.dLine&&(Qt.current.d.setData(Oe.dLine),Qt.current.d.applyOptions({visible:!zs,lastValueVisible:!zs}))}else if(Nt.current){try{const Vt=E.current.panes().indexOf(Nt.current);Vt>0&&E.current.removePane(Vt)}catch(Vt){console.warn("Error removing Stochastic pane:",Vt)}Nt.current=null,Qt.current.k=null,Qt.current.d=null}const Ci=k.atr?.hidden;if(k.atr?.enabled){if(!Wt.current&&J&&(Wt.current=E.current.addPane({height:80})),Wt.current&&!se.current&&J&&(se.current=Wt.current.addSeries(tA,{color:k.atr?.color||"#FF9800",lineWidth:2,priceLineVisible:!1,lastValueVisible:!Ci,title:"ATR",visible:!Ci})),se.current){const Vt=k.atr.period||14,os=pM(H,Vt);os&&os.length>0&&se.current.setData(os),se.current.applyOptions({visible:!Ci,lastValueVisible:!Ci})}}else{if(se.current&&Wt.current){try{Wt.current.removeSeries(se.current)}catch(Vt){console.warn("Error removing ATR series:",Vt)}se.current=null}if(Wt.current){try{const Vt=E.current.panes().indexOf(Wt.current);Vt>0&&E.current.removePane(Vt)}catch(Vt){console.warn("Error removing ATR pane:",Vt)}Wt.current=null}}const qs=k.volume?.enabled;K.current&&K.current.priceScale().applyOptions({scaleMargins:qs?{top:.02,bottom:.18}:{top:.1,bottom:.1}})},[]);B.useEffect(()=>{if(ni.current=null,Ft.current.length>0)try{if(nA(Ft.current,n),pt.current&&Ft.current.length>=20){const H=jh(Ft.current,20);H&&H.length>0&&(ni.current=H[H.length-1].value,pt.current.setData(H))}}catch(H){console.error("Error updating indicators:",H)}},[n,nA]),B.useEffect(()=>{E.current&&E.current.applyOptions({crosshair:{mode:p?1:0}})},[p]),B.useEffect(()=>{if(!E.current||!K.current)return;const H=k=>{if(!k||!k.point||!k.seriesData||k.seriesData.size===0||!K.current){if(Ft.current&&Ft.current.length>0){const ht=Ft.current[Ft.current.length-1],St=Ft.current.length>1?Ft.current[Ft.current.length-2]:null,Bt=St?ht.close-St.close:0,It=St&&St.close!==0?Bt/St.close*100:0;nn({open:ht.open,high:ht.high,low:ht.low,close:ht.close,change:Bt,changePercent:It,isUp:ht.close>=ht.open});const Ot={};if(ot.current){const it=ot.current.data();it&&it.length>0&&(Ot.sma=it[it.length-1].value)}if(pt.current){const it=pt.current.data();it&&it.length>0&&(Ot.ema=it[it.length-1].value)}if(Et.current){const it=Et.current.data();it&&it.length>0&&(Ot.rsi=it[it.length-1].value)}if(xt.current?.macd){const it=xt.current.macd.data();it&&it.length>0&&(Ot.macd=it[it.length-1].value)}if(Qt.current?.k){const it=Qt.current.k.data();it&&it.length>0&&(Ot.stochastic=it[it.length-1].value)}if(se.current){const it=se.current.data();it&&it.length>0&&(Ot.atr=it[it.length-1].value)}if(Q.current?.middle){const it=Q.current.middle.data();it&&it.length>0&&(Ot.bollingerBands=it[it.length-1].value)}if(rt.current){const it=rt.current.data();it&&it.length>0&&(Ot.volume=it[it.length-1].value)}if(j.current){const it=j.current.data();it&&it.length>0&&(Ot.vwap=it[it.length-1].value)}rn(Ot)}return}const X=k.seriesData.get(K.current);if(X&&X.open!==void 0){const ht=Ft.current.findIndex(it=>it.time===X.time),St=ht>0?Ft.current[ht-1]:null,Bt=St?X.close-St.close:0,It=St&&St.close!==0?Bt/St.close*100:0;nn({open:X.open,high:X.high,low:X.low,close:X.close,change:Bt,changePercent:It,isUp:X.close>=X.open});const Ot={};if(ot.current){const it=k.seriesData.get(ot.current);it&&it.value!==void 0&&(Ot.sma=it.value)}if(pt.current){const it=k.seriesData.get(pt.current);it&&it.value!==void 0&&(Ot.ema=it.value)}if(Et.current){const it=k.seriesData.get(Et.current);it&&it.value!==void 0&&(Ot.rsi=it.value)}if(xt.current?.macd){const it=k.seriesData.get(xt.current.macd);it&&it.value!==void 0&&(Ot.macd=it.value)}if(Qt.current?.k){const it=k.seriesData.get(Qt.current.k);it&&it.value!==void 0&&(Ot.stochastic=it.value)}if(se.current){const it=k.seriesData.get(se.current);it&&it.value!==void 0&&(Ot.atr=it.value)}if(Q.current?.middle){const it=k.seriesData.get(Q.current.middle);it&&it.value!==void 0&&(Ot.bollingerBands=it.value)}if(rt.current){const it=k.seriesData.get(rt.current);it&&it.value!==void 0&&(Ot.volume=it.value)}if(j.current){const it=k.seriesData.get(j.current);it&&it.value!==void 0&&(Ot.vwap=it.value)}rn(Ot)}};if(E.current.subscribeCrosshairMove(H),Ft.current&&Ft.current.length>0){const k=Ft.current[Ft.current.length-1],J=Ft.current.length>1?Ft.current[Ft.current.length-2]:null,X=J?k.close-J.close:0,ht=J&&J.close!==0?X/J.close*100:0;nn({open:k.open,high:k.high,low:k.low,close:k.close,change:X,changePercent:ht,isUp:k.close>=k.open})}return()=>{if(E.current)try{E.current.unsubscribeCrosshairMove(H)}catch{}}},[A,t,e]),B.useEffect(()=>{if(!E.current)return;const H=new AbortController;let k=!1;const J=new Set(w.map(Bt=>Bt.symbol)),X=Qe.current;X.forEach((Bt,It)=>{if(!J.has(It)){try{E.current.removeSeries(Bt)}catch{}X.delete(It)}});const ht=async Bt=>{if(X.has(Bt.symbol))return;const It=E.current.addSeries(tA,{color:Bt.color,lineWidth:2,priceScaleId:"right",title:Bt.symbol});X.set(Bt.symbol,It);try{const Ot=await yu(Bt.symbol,Bt.exchange||"NSE",e,1e3,H.signal);if(k||!X.has(Bt.symbol))return;if(Ot&&Ot.length>0){const it=Ot.map(ne=>({time:ne.time,value:ne.close}));It.setData(it)}}catch(Ot){Ot.name!=="AbortError"&&console.error(`Failed to load comparison data for ${Bt.symbol}`,Ot)}};w.forEach(Bt=>ht(Bt));const St=w.length>0?2:c?1:0;return E.current.priceScale("right").applyOptions({mode:St,autoScale:d}),()=>{k=!0,H.abort()}},[w,e,c,d]),B.useEffect(()=>{if(E.current){const H=v==="dark"?D.darkBackground||"#131722":D.lightBackground||"#ffffff",k=v==="dark"?D.darkGridColor||"#2A2E39":D.lightGridColor||"#e0e3eb";if(E.current.applyOptions({layout:{textColor:v==="dark"?"#D1D4DC":"#131722",background:{color:H}},grid:{vertLines:{color:k,visible:D.showVerticalGridLines!==!1},horzLines:{color:k,visible:D.showHorizontalGridLines!==!1}},crosshair:{vertLine:{color:v==="dark"?"#758696":"#9598a1",labelBackgroundColor:v==="dark"?"#758696":"#9598a1"},horzLine:{color:v==="dark"?"#758696":"#9598a1",labelBackgroundColor:v==="dark"?"#758696":"#9598a1"}},timeScale:{borderColor:k},rightPriceScale:{borderColor:k}}),K.current){const J=D.candleUpColor||"#089981",X=D.candleDownColor||"#F23645",ht=D.wickUpColor||J,St=D.wickDownColor||X,Bt=le.current;Bt==="candlestick"||Bt==="heikin-ashi"?K.current.applyOptions({upColor:J,downColor:X,wickUpColor:ht,wickDownColor:St}):Bt==="bar"?K.current.applyOptions({upColor:J,downColor:X}):Bt==="hollow-candlestick"?K.current.applyOptions({downColor:X,borderUpColor:J,borderDownColor:X,wickUpColor:ht,wickDownColor:St}):Bt==="baseline"&&K.current.applyOptions({topLineColor:J,topFillColor1:Qr(J,.28),topFillColor2:Qr(J,.05),bottomLineColor:X,bottomFillColor1:Qr(X,.05),bottomFillColor2:Qr(X,.28)})}}},[v,D]),B.useEffect(()=>{if(E.current&&f&&!ft){const H=Math.floor(Date.now()/1e3);let k=H;const J=H;switch(f){case"1D":k=H-86400;break;case"5D":k=H-86400*5;break;case"1M":k=H-86400*30;break;case"3M":k=H-86400*90;break;case"6M":k=H-86400*180;break;case"YTD":{k=new Date(new Date().getFullYear(),0,1).getTime()/1e3;break}case"1Y":k=H-86400*365;break;case"5Y":k=H-86400*365*5;break;case"All":ue();return;default:return}if(k&&J&&!isNaN(k)&&!isNaN(J))try{E.current.timeScale().setVisibleRange({from:k,to:J})}catch(X){X.message!=="Value is null"&&console.warn("Failed to set visible range:",X)}}},[f,ft]);const WA=()=>{hs.current&&(clearInterval(hs.current),hs.current=null)},pi=B.useCallback((H,k=!0,J=!1)=>{if(!K.current||!Pt.current||!E.current)return;const X=Math.max(0,Math.min(H,Pt.current.length-1));let ht=null;if(J&&E.current)try{ht=E.current.timeScale().getVisibleLogicalRange()}catch{}const St=Pt.current.slice(0,X+1);if(k){Ft.current=St;const Bt=Yi(St,le.current);K.current.setData(Bt)}else{Ft.current=Pt.current;const Bt=Yi(Pt.current,le.current);K.current.setData(Bt)}if(nA(St,di.current),zi(),Ht.current&&St.length>0){const Bt=St[St.length-1];Bt&&Bt.open!==void 0&&Bt.close!==void 0&&Ht.current.updateCandleData(Bt.open,Bt.close)}if(ui.current=X,J&&ht&&E.current)try{setTimeout(()=>{E.current.timeScale().setVisibleLogicalRange(ht)},0)}catch{}},[]);B.useEffect(()=>{vt.current=pi},[pi]);const Dl=()=>{jt(H=>!H)},ir=()=>{const H=ui.current;if(H!==null&&H<Pt.current.length-1){const k=H+1;Ze(k),pi(k)}},Sn=()=>{if(ls(!0),jt(!1),K.current&&Pt.current&&Pt.current.length>0){let H=null;if(E.current)try{H=E.current.timeScale().getVisibleRange()}catch{}const k=ui.current;Ft.current=Pt.current;const J=Yi(Pt.current,le.current);K.current.setData(J),nA(Pt.current,n),setTimeout(()=>{if(E.current&&Pt.current&&Pt.current.length>0)try{const X=E.current.timeScale();if(H&&H.from&&H.to)X.setVisibleRange(H);else if(k!==null&&k>=0){const ht=k;if(Pt.current[ht]?.time){const It=Math.max(0,ht-100),Ot=Math.min(Pt.current.length-1,ht+200/2),it=Pt.current[It]?.time,ne=Pt.current[Ot]?.time;it&&ne&&X.setVisibleRange({from:it,to:ne})}}else try{X.fitContent()}catch{}}catch(X){console.warn("Failed to restore visible range in Jump to Bar:",X)}},50)}At.current&&(At.current.style.cursor="crosshair")},Fs=B.useCallback((H,k=!0)=>{H>=0&&H<Pt.current.length&&(Y.current&&(jt(!1),Y.current=!1,WA()),Ze(H),pi(H,k))},[pi]);return B.useEffect(()=>{if(wt&&Fe){WA();const H=ui.current;H!==null&&pi(H,!0);const k=1e3/he;hs.current=setInterval(()=>{const J=ui.current;if(J===null||J>=Pt.current.length-1){jt(!1),Y.current=!1;return}const X=J+1;Ze(X),pi(X,!0)},k)}else WA();return()=>WA()},[wt,Fe,he,pi]),B.useEffect(()=>{if(!E.current||!Fe||$e||wt||!K.current)return;const H=k=>{if(k&&!(!Pt.current||Pt.current.length===0)&&!$e&&!Y.current)try{let J=null;if(k.time?J=k.time:k.point&&(J=E.current.timeScale().coordinateToTime(k.point.x)),!J)return;let X=-1,ht=1/0;for(let Bt=0;Bt<Pt.current.length;Bt++){const It=Math.abs(Pt.current[Bt].time-J);It<ht&&(ht=It,X=Bt)}X===-1&&(X=Pt.current.length-1),X=Math.max(0,Math.min(X,Pt.current.length-1));let St=null;try{St=E.current.timeScale().getVisibleRange()}catch{}Ze(X),ui.current=X,pi(X,!0),St&&E.current&&setTimeout(()=>{try{const Bt=E.current.timeScale(),It=Pt.current[X]?.time;if(It&&St.to>It){const Ot=St.to-St.from,it=It,ne=it-Ot;Bt.setVisibleRange({from:ne,to:it})}else Bt.setVisibleRange(St)}catch{}},0)}catch(J){console.warn("Error handling replay click:",J)}};return E.current.subscribeClick(H),()=>{E.current&&E.current.unsubscribeClick(H)}},[Fe,$e,wt,pi]),B.useEffect(()=>{if(!E.current||!$e||!K.current)return;const H=k=>{if(!(!k||!$e)&&!(!Pt.current||Pt.current.length===0))try{let J=null;if(k.time)J=k.time;else if(k.point){const ht=E.current.timeScale(),St=k.point.x;J=ht.coordinateToTime(St)}if(!J)return;let X=Pt.current.findIndex(ht=>ht.time===J);if(X===-1){let ht=1/0;Pt.current.forEach((St,Bt)=>{const It=Math.abs(St.time-J);It<ht&&(ht=It,X=Bt)})}if(X=Math.max(0,Math.min(X,Pt.current.length-1)),X>=0&&X<Pt.current.length){const ht=X;let St=null,Bt=null;try{const ne=E.current.timeScale();St=ne.getVisibleRange(),Bt=ne.getVisibleLogicalRange()}catch{}let It=null;St&&St.from&&St.to&&(It=St.to-St.from),Ze(ht),ui.current=ht;const Ot=Pt.current[ht]?.time;let it=null;if(Ot&&It&&It>0){const ne=Ot-It/2,Ee=Ot+It/2,Me=Pt.current[0]?.time,Ie=Pt.current[ht]?.time;if(Me&&Ie){let ge=Math.max(Me,ne),ve=Math.min(Ie,Ee);ge===Me&&ve<Ee?ve=Math.min(Ie,ge+It):ve===Ie&&ge>ne&&(ge=Math.max(Me,ve-It)),ve>ge&&ve-ge>=It*.3&&(it={from:ge,to:ve})}}if(!it&&Ot){const Ee=Math.max(0,ht-150),Me=ht,Ie=Pt.current[Ee]?.time,ge=Pt.current[Me]?.time;Ie&&ge&&(it={from:Ie,to:ge})}if(pi(ht,!0,!1),ls(!1),At.current&&(At.current.style.cursor="default"),it&&E.current)try{E.current.timeScale().setVisibleRange(it),setTimeout(()=>{if(E.current)try{E.current.timeScale().setVisibleRange(it)}catch{}},10),setTimeout(()=>{if(E.current)try{E.current.timeScale().setVisibleRange(it)}catch{}},100)}catch(ne){console.warn("Failed to set visible range after selection:",ne)}}}catch(J){console.warn("Error handling chart click in Jump to Bar:",J)}};return E.current.subscribeClick(H),()=>{E.current&&E.current.unsubscribeClick(H)}},[$e,pi]),h.jsxs("div",{className:`${Ve.chartWrapper} ${m?Ve.toolbarVisible:""}`,style:{display:"flex",flexDirection:"column"},children:[h.jsx("div",{id:"container",ref:At,className:Ve.chartContainer,style:{position:"relative",touchAction:"none",flex:"1 1 100%",minHeight:200}}),ft&&W.current&&h.jsxs("div",{className:Ve.loadingOverlay,children:[h.jsx("div",{className:Ve.spinner}),h.jsx("div",{children:"Loading..."})]}),fi&&h.jsxs("div",{className:Ve.ohlcHeader,style:{left:m?"55px":"10px"},children:[h.jsxs("span",{className:Ve.ohlcSymbol,children:[V?.displayName||`${A}:${t}`,"  ",e.toUpperCase()]}),h.jsx("span",{className:`${Ve.ohlcDot} ${fi.isUp?"":Ve.down}`}),h.jsxs("div",{className:Ve.ohlcValues,children:[h.jsxs("span",{className:Ve.ohlcItem,children:[h.jsx("span",{className:Ve.ohlcLabel,children:"O"}),h.jsx("span",{className:Ve.ohlcValue,children:fi.open?.toFixed(2)})]}),h.jsxs("span",{className:Ve.ohlcItem,children:[h.jsx("span",{className:Ve.ohlcLabel,children:"H"}),h.jsx("span",{className:Ve.ohlcValue,children:fi.high?.toFixed(2)})]}),h.jsxs("span",{className:Ve.ohlcItem,children:[h.jsx("span",{className:Ve.ohlcLabel,children:"L"}),h.jsx("span",{className:Ve.ohlcValue,children:fi.low?.toFixed(2)})]}),h.jsxs("span",{className:Ve.ohlcItem,children:[h.jsx("span",{className:Ve.ohlcLabel,children:"C"}),h.jsx("span",{className:`${Ve.ohlcValue} ${fi.isUp?Ve.up:Ve.down}`,children:fi.close?.toFixed(2)})]}),h.jsx("span",{className:Ve.ohlcChange,children:h.jsxs("span",{className:`${Ve.ohlcChangeValue} ${fi.change>=0?Ve.up:Ve.down}`,children:[fi.change>=0?"+":"",fi.change?.toFixed(2)," (",fi.changePercent>=0?"+":"",fi.changePercent?.toFixed(2),"%)"]})})]})]}),h.jsx(tM,{indicators:KA(),panePositions:ln,isToolbarVisible:m,isCollapsed:xn,onToggleCollapse:()=>PA(H=>!H),onVisibilityToggle:R,onRemove:I}),De&&!De.isFirstPoint&&h.jsxs("div",{className:Ve.measureOverlay,style:{left:De.position.x,top:De.position.y},children:[h.jsx("svg",{className:Ve.measureLine,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:99},children:h.jsx("line",{x1:De.line.x1,y1:De.line.y1,x2:De.line.x2,y2:De.line.y2,stroke:De.priceChange>=0?"#26a69a":"#ef5350",strokeWidth:"1",strokeDasharray:"4,4"})}),h.jsxs("div",{className:Ve.measureBox,children:[h.jsxs("div",{className:De.priceChange>=0?Ve.measureUp:Ve.measureDown,children:[De.priceChange>=0?"+":"",De.priceChange.toFixed(2)," ","(",De.percentChange>=0?"+":"",De.percentChange.toFixed(2),"%)"]}),h.jsxs("div",{className:Ve.measureDetails,children:[De.barCount," bars  ",De.timeElapsed]})]})]}),De&&De.isFirstPoint&&h.jsx("div",{className:Ve.measureStartPoint,style:{left:De.x-4,top:De.y-4}}),Fe&&h.jsx(YI,{isPlaying:wt,speed:he,onPlayPause:Dl,onForward:ir,onJumpTo:Sn,onSpeedChange:Zt,onClose:()=>{if(ss(!1),S&&S(!1),K.current&&Pt.current.length>0){Ft.current=Pt.current;const H=Yi(Pt.current,le.current);K.current.setData(H),nA(Pt.current,n)}}}),Fe&&h.jsx(sN,{chartRef:E,isReplayMode:Fe,replayIndex:Ue,fullData:Pt.current,onSliderChange:Fs,containerRef:At,isSelectingReplayPoint:$e,isPlaying:wt}),at.show&&h.jsx("div",{className:Ve.contextMenu,style:{left:at.x,top:at.y},onClick:H=>H.stopPropagation(),children:h.jsx("button",{className:Ve.contextMenuItem,onClick:()=>{lt?.(A,t),Ut({show:!1,x:0,y:0})},children:"View Option Chain"})})]})}),AN="_overlay_173ht_1",nN="_modal_173ht_29",rN="_titleHeader_173ht_55",lN="_title_173ht_55",oN="_closeBtn_173ht_83",aN="_searchRow_173ht_121",cN="_searchContainer_173ht_129",hN="_searchIcon_173ht_159",uN="_input_173ht_171",dN="_filterTabs_173ht_199",fN="_filterTab_173ht_199",pN="_filterTabActive_173ht_245",gN="_list_173ht_269",mN="_item_173ht_281",_N="_keyboardActive_173ht_307",vN="_symbolIcon_173ht_317",BN="_itemSymbol_173ht_345",wN="_highlight_173ht_361",yN="_itemDesc_173ht_371",CN="_itemMeta_173ht_401",bN="_typeLabel_173ht_415",xN="_exchangeBadge_173ht_427",SN="_loading_173ht_441",EN="_noResults_173ht_455",TN="_sectionHeader_173ht_507",QN="_addedSection_173ht_525",FN="_addedItem_173ht_537",UN="_checkIcon_173ht_547",MN="_starButton_173ht_589",IN="_starActive_173ht_625",NN="_sectionLabel_173ht_649",LN="_sectionIcon_173ht_683",HN="_favoriteItem_173ht_715",ee={overlay:AN,modal:nN,titleHeader:rN,title:lN,closeBtn:oN,searchRow:aN,searchContainer:cN,searchIcon:hN,input:uN,filterTabs:dN,filterTab:fN,filterTabActive:pN,list:gN,item:mN,keyboardActive:_N,symbolIcon:vN,itemSymbol:BN,highlight:wN,itemDesc:yN,itemMeta:CN,typeLabel:bN,exchangeBadge:xN,loading:SN,noResults:EN,sectionHeader:TN,addedSection:QN,addedItem:FN,checkIcon:UN,starButton:MN,starActive:IN,sectionLabel:NN,sectionIcon:LN,favoriteItem:HN},DN=["button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","a[href]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Nl(A,t={}){const{autoFocus:e=!0,restoreFocus:s=!0}=t,n=B.useRef(null),l=B.useRef(null),a=B.useCallback(()=>n.current?Array.from(n.current.querySelectorAll(DN)).filter(d=>{const f=window.getComputedStyle(d);return f.display!=="none"&&f.visibility!=="hidden"}):[],[]),c=B.useCallback(d=>{if(d.key!=="Tab"||!n.current)return;const f=a();if(f.length===0)return;const p=f[0],m=f[f.length-1];d.shiftKey&&document.activeElement===p?(d.preventDefault(),m.focus()):!d.shiftKey&&document.activeElement===m&&(d.preventDefault(),p.focus())},[a]);return B.useEffect(()=>{if(A&&(s&&(l.current=document.activeElement),e)){const d=setTimeout(()=>{const f=a();f.length>0?f[0].focus():n.current&&(n.current.setAttribute("tabindex","-1"),n.current.focus())},10);return()=>clearTimeout(d)}},[A,e,s,a]),B.useEffect(()=>{if(A)return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[A,c]),B.useEffect(()=>()=>{s&&l.current&&setTimeout(()=>{l.current&&typeof l.current.focus=="function"&&l.current.focus()},10)},[s]),n}function Gr(A={}){const{enabled:t=!0,onEscape:e,onEnter:s,onArrowUp:n,onArrowDown:l,onArrowLeft:a,onArrowRight:c}=A,d=B.useCallback(f=>{const p=["INPUT","TEXTAREA","SELECT"].includes(f.target.tagName);switch(f.key){case"Escape":e&&(f.preventDefault(),e(f));break;case"Enter":s&&!p&&(f.preventDefault(),s(f));break;case"ArrowUp":n&&!p&&(f.preventDefault(),n(f));break;case"ArrowDown":l&&!p&&(f.preventDefault(),l(f));break;case"ArrowLeft":a&&!p&&(f.preventDefault(),a(f));break;case"ArrowRight":c&&!p&&(f.preventDefault(),c(f));break}},[e,s,n,l,a,c]);B.useEffect(()=>{if(t)return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[t,d])}function P1(A={}){const{enabled:t=!0,itemCount:e=0,activeIndex:s=0,setActiveIndex:n,onSelect:l,loop:a=!0,orientation:c="vertical"}=A,d=B.useCallback(()=>{!n||e===0||n(b=>b<=0?a?e-1:0:b-1)},[n,e,a]),f=B.useCallback(()=>{!n||e===0||n(b=>b>=e-1?a?0:e-1:b+1)},[n,e,a]),p=B.useCallback(()=>{l&&s>=0&&s<e&&l(s)},[l,s,e]);return Gr({enabled:t,onArrowUp:c==="vertical"?d:void 0,onArrowDown:c==="vertical"?f:void 0,onArrowLeft:c==="horizontal"?d:void 0,onArrowRight:c==="horizontal"?f:void 0,onEnter:p}),{activeIndex:s,navigateUp:d,navigateDown:f,handleSelect:p}}const kN=10,rw="tv_symbol_favorites",lw="tv_recent_symbols",ow=(A,t)=>{try{return A?JSON.parse(A):t}catch{return t}},rc=A=>A?typeof A=="string"?{symbol:A,exchange:"NSE"}:{symbol:A.symbol||A.tradingsymbol||"",exchange:A.exchange||"NSE",name:A.name||A.description||A.symbol||"",instrumenttype:A.instrumenttype||"EQ"}:null,wo=(A,t)=>{const e=rc(A),s=rc(t);return!e||!s?!1:e.symbol===s.symbol&&e.exchange===s.exchange},jN=()=>{const[A,t]=B.useState(()=>{const m=ow(localStorage.getItem(rw),[]);return Array.isArray(m)?m:[]}),[e,s]=B.useState(()=>{const m=ow(localStorage.getItem(lw),[]);return Array.isArray(m)?m:[]});B.useEffect(()=>{try{localStorage.setItem(rw,JSON.stringify(A))}catch(m){console.error("Failed to persist favorites:",m)}},[A]),B.useEffect(()=>{try{localStorage.setItem(lw,JSON.stringify(e))}catch(m){console.error("Failed to persist recent symbols:",m)}},[e]);const n=B.useCallback(m=>A.some(v=>wo(v,m)),[A]),l=B.useCallback(m=>{const v=rc(m);!v||!v.symbol||t(w=>w.some(b=>wo(b,v))?w.filter(b=>!wo(b,v)):[v,...w])},[]),a=B.useCallback(m=>{const v=rc(m);!v||!v.symbol||s(w=>{const y=w.filter(b=>!wo(b,v));return[v,...y].slice(0,kN)})},[]),c=B.useCallback(m=>{s(v=>v.filter(w=>!wo(w,m)))},[]),d=B.useCallback(()=>{s([])},[]),f=B.useCallback(()=>{t([])},[]),p=B.useCallback(()=>e.filter(m=>!n(m)),[e,n]);return{favorites:A,recentSymbols:e,isFavorite:n,toggleFavorite:l,addToRecent:a,removeFromRecent:c,clearRecent:d,clearFavorites:f,getRecentExcludingFavorites:p,normalizeSymbol:rc,isSameSymbol:wo}},wC=(A,t)=>{if(!A||!t)return Math.max(A?.length||0,t?.length||0);const e=A.length,s=t.length;if(e===0)return s;if(s===0)return e;if(A===t)return 0;const n=Array(e+1).fill(null).map(()=>Array(s+1).fill(0));for(let l=0;l<=e;l++)n[l][0]=l;for(let l=0;l<=s;l++)n[0][l]=l;for(let l=1;l<=e;l++)for(let a=1;a<=s;a++){const c=A[l-1]===t[a-1]?0:1;n[l][a]=Math.min(n[l-1][a]+1,n[l][a-1]+1,n[l-1][a-1]+c)}return n[e][s]},ON=(A,t)=>{if(!A||!t)return 0;if(A===t)return 1;const e=Math.max(A.length,t.length);return e===0?1:1-wC(A,t)/e},RN=(A,t)=>{if(!A||!t)return{match:!1,score:0};const e=A.toUpperCase().trim(),s=t.toUpperCase().trim();if(e.length===0)return{match:!1,score:0};if(e===s)return{match:!0,score:1};if(s.startsWith(e))return{match:!0,score:.9};if(e.startsWith(s))return{match:!0,score:.85};if(s.includes(e))return{match:!0,score:.7};if(e.includes(s))return{match:!0,score:.65};const n=wC(e,s),l=Math.max(e.length,s.length),a=e.length<=4?2:3;if(n<=a)return{match:!0,score:.3+(1-n/l)*.2};if(e.length>=3&&s.length>=3&&e.substring(0,2)===s.substring(0,2)){const c=ON(e,s);if(c>.6)return{match:!0,score:c*.5}}return{match:!1,score:0}},zN=(A,t,e=["symbol","name"],s=.2)=>{if(!A||!t||t.length===0)return t||[];const n=[];for(const l of t){let a=0,c=null;for(const d of e){const f=l[d];if(!f||typeof f!="string")continue;const{match:p,score:m}=RN(A,f);p&&m>a&&(a=m,c=d)}a>=s&&n.push({item:l,score:a,matchedKey:c})}return n.sort((l,a)=>a.score-l.score),n.map(l=>l.item)},VN=(A,t)=>{if(!A||!t)return[{text:A||"",highlight:!1}];const e=A.toLowerCase(),s=t.toLowerCase(),n=e.indexOf(s);if(n===-1)return[{text:A,highlight:!1}];const l=[];return n>0&&l.push({text:A.substring(0,n),highlight:!1}),l.push({text:A.substring(n,n+t.length),highlight:!0}),n+t.length<A.length&&l.push({text:A.substring(n+t.length),highlight:!1}),l},aw=[{label:"All",exchange:null,instrumenttype:null},{label:"Stocks",exchange:"NSE",instrumenttype:"EQ"},{label:"Futures",exchange:"NFO",instrumenttype:"FUT"},{label:"Options",exchange:"NFO",instrumenttype:null},{label:"Indices",exchange:"NSE_INDEX",instrumenttype:null}],Kh=(A,t,e)=>{const s=A.toUpperCase();return(s==="NIFTY"||s.includes("NIFTY50"))&&!s.includes("BANK")&&!s.includes("NXT")?{text:"50",color:"#2962ff",bgColor:"#e3f2fd"}:s.includes("BANKNIFTY")||s==="BANKNIFTY"?{text:"",color:null,bgColor:"#fff3e0",isFlag:!0}:s.includes("CNX")||s.includes("NIFTY_MID")||s.includes("CNXSMALLCAP")?{text:"",color:null,bgColor:"#e8f5e9",isFlag:!0}:s.includes("NIFTY")?{text:"50",color:"#2962ff",bgColor:"#e3f2fd"}:s.includes("CNXIT")||s==="CNXIT"?{text:"",color:null,bgColor:"#e3f2fd",isFlag:!0}:{text:s.charAt(0),color:"#607d8b",bgColor:"#eceff1"}},Gh=(A,t,e)=>A==="NSE_INDEX"||A==="BSE_INDEX"||e.includes("INDEX")||e.includes("Index")?"index":t==="FUT"||e.includes("-FUT")||e.includes("FUTURES")?"futures":t==="CE"||t==="PE"?"options":t==="EQ"?"stock":null,Wh=A=>{const t=(A||"").toUpperCase();return t==="BSE_INDEX"||t==="BSE"||t==="BFO"?"BSE":t==="NSE_INDEX"||t==="NSE"||t==="NFO"?"NSE":t==="MCX"?"MCX":A||"NSE"},cw=({text:A,highlight:t})=>{if(!t||!A)return h.jsx(h.Fragment,{children:A});const e=l=>l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),s=new RegExp(`(${e(t)})`,"gi"),n=A.split(s);return h.jsx(h.Fragment,{children:n.map((l,a)=>s.test(l)?h.jsx("span",{className:ee.highlight,children:l},a):h.jsx("span",{children:l},a))})},PN=({isOpen:A,onClose:t,onSelect:e,addedSymbols:s=[],isCompareMode:n=!1})=>{const[l,a]=B.useState(""),[c,d]=B.useState([]),[f,p]=B.useState(!1),[m,v]=B.useState([]),[w,y]=B.useState(0),[b,S]=B.useState(0),x=aw[w],{favorites:U,isFavorite:M,toggleFavorite:N,addToRecent:I,getRecentExcludingFavorites:R}=jN(),D=Nl(A,{autoFocus:!1});Gr({enabled:A,onEscape:t}),B.useEffect(()=>{let E=!0;return A&&m.length===0&&E&&v([{symbol:"NIFTY",exchange:"NSE_INDEX",instrumenttype:"INDEX",name:"Nifty 50 Index"},{symbol:"BANKNIFTY",exchange:"NSE_INDEX",instrumenttype:"INDEX",name:"Nifty Bank Index"},{symbol:"CNXSMALLCAP",exchange:"NSE_INDEX",instrumenttype:"INDEX",name:"Nifty SmallCap 100 Index"},{symbol:"NIFTY_MID_SELECT",exchange:"NSE_INDEX",instrumenttype:"INDEX",name:"Nifty MidCap Select Index"},{symbol:"CNXIT",exchange:"NSE_INDEX",instrumenttype:"INDEX",name:"Nifty IT Index"},{symbol:"CNXFINANCE",exchange:"NSE_INDEX",instrumenttype:"INDEX",name:"Nifty Financial Services Index"},{symbol:"RELIANCE",exchange:"NSE",instrumenttype:"EQ",name:"Reliance Industries Ltd"},{symbol:"TCS",exchange:"NSE",instrumenttype:"EQ",name:"Tata Consultancy Services"},{symbol:"INFY",exchange:"NSE",instrumenttype:"EQ",name:"Infosys Ltd"},{symbol:"HDFCBANK",exchange:"NSE",instrumenttype:"EQ",name:"HDFC Bank Ltd"}]),()=>{E=!1}},[A,m.length]),B.useEffect(()=>{if(!l||l.length<2){d([]);return}const E=setTimeout(async()=>{p(!0);try{const ot=(await F1(l)||[]).map(Z=>({symbol:Z.symbol||Z.tradingsymbol||Z.name,exchange:Z.exchange||"NSE",instrumenttype:Z.instrumenttype||"EQ",name:Z.name||Z.description||Z.symbol,expiry:Z.expiry||null,strike:Z.strike||null}));let pt=ot;x.label!=="All"&&(pt=ot.filter(Z=>{const rt=Z.instrumenttype?.toUpperCase()||"",Et=Z.exchange?.toUpperCase()||"";switch(x.label){case"Stocks":return rt==="EQ"&&(Et==="NSE"||Et==="BSE");case"Futures":return rt==="FUT";case"Options":return rt==="CE"||rt==="PE";case"Indices":return Et==="NSE_INDEX"||Et==="BSE_INDEX"||Et.includes("INDEX");default:return!0}}));const Q=l.toUpperCase().replace(/\s+/g,""),j=pt.sort((Z,rt)=>{const Et=Z.symbol.toUpperCase(),xt=rt.symbol.toUpperCase(),Qt=(Z.name||"").toUpperCase(),se=(rt.name||"").toUpperCase(),oe=Et===Q||Et===Q.replace("50","")||Et==="NIFTY",He=xt===Q||xt===Q.replace("50","")||xt==="NIFTY";if(oe&&!He)return-1;if(He&&!oe)return 1;const Nt=Et.startsWith(Q.split(" ")[0]),Wt=xt.startsWith(Q.split(" ")[0]);if(Nt&&!Wt)return-1;if(Wt&&!Nt)return 1;if(Q.includes("50")||Q.includes("NIFTY")){const Je=Qt.includes("50")&&Qt.includes("INDEX"),tt=se.includes("50")&&se.includes("INDEX");if(Je&&!tt)return-1;if(tt&&!Je)return 1}return Et.length-xt.length});d(j.slice(0,50))}catch(K){console.error("Error searching symbols:",K),d([])}finally{p(!1)}},300);return()=>clearTimeout(E)},[l,x]);const V=B.useMemo(()=>x.label==="All"?m:m.filter(E=>x.exchange==="NSE_INDEX"?E.exchange==="NSE_INDEX"||E.exchange==="BSE_INDEX":x.instrumenttype?E.instrumenttype===x.instrumenttype:x.label==="Options"?E.instrumenttype==="CE"||E.instrumenttype==="PE":!0),[m,x]),lt=B.useMemo(()=>l&&l.length>=2?c:V,[l,c,V]);B.useEffect(()=>{S(0)},[lt]);const dt=B.useCallback(E=>{I(E),e({symbol:E.symbol,exchange:E.exchange}),n||t()},[e,t,n,I]);P1({enabled:A&&lt.length>0,itemCount:lt.length,activeIndex:b,setActiveIndex:S,onSelect:E=>{const K=lt[E];K&&dt(K)}});const At=E=>{y(E),l&&l.length>=2&&d([])},ft=B.useCallback((E,K)=>{E.stopPropagation(),N(K)},[N]),mt=B.useMemo(()=>R(),[R]),at=B.useMemo(()=>!n&&x.label==="All"?U:U.filter(E=>{const K=E.instrumenttype?.toUpperCase()||"",ot=E.exchange?.toUpperCase()||"";switch(x.label){case"Stocks":return K==="EQ"&&(ot==="NSE"||ot==="BSE");case"Futures":return K==="FUT";case"Options":return K==="CE"||K==="PE";case"Indices":return ot==="NSE_INDEX"||ot==="BSE_INDEX"||ot.includes("INDEX");default:return!0}}),[U,x,n]),Ut=B.useMemo(()=>!n&&x.label==="All"?mt:mt.filter(E=>{const K=E.instrumenttype?.toUpperCase()||"",ot=E.exchange?.toUpperCase()||"";switch(x.label){case"Stocks":return K==="EQ"&&(ot==="NSE"||ot==="BSE");case"Futures":return K==="FUT";case"Options":return K==="CE"||K==="PE";case"Indices":return ot==="NSE_INDEX"||ot==="BSE_INDEX"||ot.includes("INDEX");default:return!0}}),[mt,x,n]);if(!A)return null;const W=E=>s.some(K=>{const ot=typeof K=="string"?K:K.symbol,pt=typeof K=="string"?null:K.exchange;return pt?ot===E.symbol&&pt===E.exchange:ot===E.symbol});return h.jsx("div",{className:ee.overlay,onClick:t,children:h.jsxs("div",{ref:D,role:"dialog","aria-modal":"true","aria-labelledby":"symbol-search-title",className:ee.modal,onClick:E=>E.stopPropagation(),children:[h.jsxs("div",{className:ee.titleHeader,children:[h.jsx("h2",{id:"symbol-search-title",className:ee.title,children:n?"Compare symbol":"Symbol Search"}),h.jsx("button",{className:ee.closeBtn,onClick:t,"aria-label":"Close search",children:h.jsx(ji,{size:20})})]}),h.jsx("div",{className:ee.searchRow,children:h.jsxs("div",{className:ee.searchContainer,children:[h.jsx(N1,{size:18,className:ee.searchIcon,"aria-hidden":"true"}),h.jsx("input",{type:"text",className:ee.input,placeholder:"Search...",value:l,onChange:E=>a(E.target.value),autoFocus:!0,"aria-label":"Search for symbols","aria-describedby":"search-results-count"})]})}),h.jsxs("div",{id:"search-results-count",className:"sr-only","aria-live":"polite",children:[lt.length," results available"]}),n&&s.length>0&&h.jsxs("div",{className:ee.addedSection,children:[h.jsx("div",{className:ee.sectionHeader,children:"ADDED SYMBOLS"}),s.map((E,K)=>{const ot=typeof E=="string"?{symbol:E,exchange:"NSE",name:E}:E,pt=Kh(ot.symbol,ot.exchange,ot.instrumenttype),Q=Gh(ot.exchange,ot.instrumenttype,ot.symbol),j=Wh(ot.exchange);return h.jsxs("div",{className:`${ee.item} ${ee.addedItem}`,children:[h.jsx("div",{className:ee.symbolIcon,style:{backgroundColor:pt.bgColor,color:pt.color},children:pt.text}),h.jsx("div",{className:ee.itemSymbol,children:ot.symbol}),h.jsx("div",{className:ee.itemDesc,children:ot.name||ot.symbol}),h.jsxs("div",{className:ee.itemMeta,children:[Q&&h.jsx("span",{className:ee.typeLabel,children:Q}),h.jsx("span",{className:ee.exchangeBadge,children:j}),h.jsx("div",{className:ee.checkIcon,onClick:Z=>{Z.stopPropagation(),e(ot)},children:h.jsx(jo,{size:20})})]})]},`added-${K}`)})]}),!n&&h.jsx("div",{className:ee.filterTabs,children:aw.map((E,K)=>h.jsx("button",{className:`${ee.filterTab} ${w===K?ee.filterTabActive:""}`,onClick:()=>At(K),children:E.label},E.label))}),h.jsxs("div",{className:ee.list,role:"listbox","aria-label":"Search results",children:[f&&h.jsx("div",{className:ee.loading,role:"status",children:"Searching..."}),!f&&!l&&at.length>0&&!n&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:ee.sectionLabel,children:[h.jsx(Hr,{size:12,className:ee.sectionIcon}),"FAVORITES"]}),at.map((E,K)=>{const ot=Kh(E.symbol,E.exchange,E.instrumenttype),pt=Gh(E.exchange,E.instrumenttype,E.symbol),Q=Wh(E.exchange);return h.jsxs("div",{className:`${ee.item} ${ee.favoriteItem}`,onClick:()=>dt(E),children:[h.jsx("button",{className:`${ee.starButton} ${ee.starActive}`,onClick:j=>ft(j,E),"aria-label":"Remove from favorites",children:h.jsx(Hr,{size:16,fill:"currentColor"})}),h.jsx("div",{className:ee.symbolIcon,style:{backgroundColor:ot.bgColor,color:ot.color},children:ot.text}),h.jsx("div",{className:ee.itemSymbol,children:E.symbol}),h.jsx("div",{className:ee.itemDesc,children:E.name||E.symbol}),h.jsxs("div",{className:ee.itemMeta,children:[pt&&h.jsx("span",{className:ee.typeLabel,children:pt}),h.jsx("span",{className:ee.exchangeBadge,children:Q})]})]},`fav-${E.exchange}-${E.symbol}`)})]}),!f&&!l&&Ut.length>0&&!n&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:ee.sectionLabel,children:"RECENT"}),Ut.map((E,K)=>{const ot=Kh(E.symbol,E.exchange,E.instrumenttype),pt=Gh(E.exchange,E.instrumenttype,E.symbol),Q=Wh(E.exchange),j=M(E);return h.jsxs("div",{className:ee.item,onClick:()=>dt(E),children:[h.jsx("button",{className:`${ee.starButton} ${j?ee.starActive:""}`,onClick:Z=>ft(Z,E),"aria-label":j?"Remove from favorites":"Add to favorites",children:h.jsx(Hr,{size:16,fill:j?"currentColor":"none"})}),h.jsx("div",{className:ee.symbolIcon,style:{backgroundColor:ot.bgColor,color:ot.color},children:ot.text}),h.jsx("div",{className:ee.itemSymbol,children:E.symbol}),h.jsx("div",{className:ee.itemDesc,children:E.name||E.symbol}),h.jsxs("div",{className:ee.itemMeta,children:[pt&&h.jsx("span",{className:ee.typeLabel,children:pt}),h.jsx("span",{className:ee.exchangeBadge,children:Q})]})]},`recent-${E.exchange}-${E.symbol}`)})]}),!f&&!l&&(at.length>0||Ut.length>0)&&V.length>0&&!n&&h.jsx("div",{className:ee.sectionLabel,children:"POPULAR"}),!f&&lt.map((E,K)=>{if(!l&&!n){const Et=at.some(Qt=>Qt.symbol===E.symbol&&Qt.exchange===E.exchange),xt=Ut.some(Qt=>Qt.symbol===E.symbol&&Qt.exchange===E.exchange);if(Et||xt)return null}const ot=Kh(E.symbol,E.exchange,E.instrumenttype),pt=Gh(E.exchange,E.instrumenttype,E.symbol),Q=Wh(E.exchange),j=n&&W(E),Z=K===b,rt=M(E);return h.jsxs("div",{id:`symbol-option-${K}`,role:"option","aria-selected":Z,className:`${ee.item} ${j?ee.addedItem:""} ${Z?ee.keyboardActive:""}`,onClick:()=>dt(E),children:[h.jsx("button",{className:`${ee.starButton} ${rt?ee.starActive:""}`,onClick:Et=>ft(Et,E),"aria-label":rt?"Remove from favorites":"Add to favorites",children:h.jsx(Hr,{size:16,fill:rt?"currentColor":"none"})}),h.jsx("div",{className:ee.symbolIcon,style:{backgroundColor:ot.bgColor,color:ot.color},children:ot.text}),h.jsx("div",{className:ee.itemSymbol,children:h.jsx(cw,{text:E.symbol,highlight:l})}),h.jsx("div",{className:ee.itemDesc,children:h.jsx(cw,{text:E.name,highlight:l})}),h.jsxs("div",{className:ee.itemMeta,children:[pt&&h.jsx("span",{className:ee.typeLabel,children:pt}),h.jsx("span",{className:ee.exchangeBadge,children:Q}),j&&h.jsx("div",{className:ee.checkIcon,onClick:Et=>{Et.stopPropagation(),e(E)},children:h.jsx(jo,{size:20})})]})]},`${E.exchange}-${E.symbol}-${K}`)}),!f&&lt.length===0&&l.length>=2&&h.jsx("div",{className:ee.noResults,children:"No symbols found"})]})]})})},KN="_toast_gjl2w_1",GN="_slideIn_gjl2w_1",WN="_error_gjl2w_51",$N="_success_gjl2w_59",XN="_info_gjl2w_67",YN="_warning_gjl2w_75",JN="_icon_gjl2w_83",qN="_content_gjl2w_129",ZN="_message_gjl2w_143",tL="_actionBtn_gjl2w_153",eL="_closeBtn_gjl2w_189",sL="_snapshotToast_gjl2w_225",iL="_fadeIn_gjl2w_1",AL="_snapshotContent_gjl2w_259",nL="_snapshotIcon_gjl2w_277",rL="_checkIcon_gjl2w_285",tn={toast:KN,slideIn:GN,error:WN,success:$N,info:XN,warning:YN,icon:JN,content:qN,message:ZN,actionBtn:tL,closeBtn:eL,snapshotToast:sL,fadeIn:iL,snapshotContent:AL,snapshotIcon:nL,checkIcon:rL},yC=({message:A,type:t="error",onClose:e,action:s})=>{const n={error:h.jsx(Q4,{size:20,"aria-hidden":"true"}),success:h.jsx(U4,{size:20,"aria-hidden":"true"}),info:h.jsx(Y4,{size:20,"aria-hidden":"true"}),warning:h.jsx(LE,{size:20,"aria-hidden":"true"})},l=t==="error"||t==="warning"?"assertive":"polite",a={error:"Error",success:"Success",info:"Information",warning:"Warning"};return h.jsxs("div",{role:"alert","aria-live":l,"aria-atomic":"true",className:`${tn.toast} ${tn[t]}`,children:[h.jsx("div",{className:tn.icon,children:n[t]}),h.jsxs("div",{className:tn.content,children:[h.jsxs("span",{className:"sr-only",children:[a[t],": "]}),h.jsx("div",{className:tn.message,children:A}),s&&h.jsx("button",{className:tn.actionBtn,onClick:s.onClick,children:s.label})]}),h.jsx("button",{className:tn.closeBtn,onClick:e,"aria-label":"Dismiss notification",children:h.jsx(ji,{size:16,"aria-hidden":"true"})})]})};yC.propTypes={message:_e.string.isRequired,type:_e.oneOf(["error","success","info","warning"]),onClose:_e.func.isRequired,action:_e.shape({label:_e.string.isRequired,onClick:_e.func.isRequired})};const CC=({message:A,onClose:t})=>h.jsx("div",{className:tn.snapshotToast,children:h.jsxs("div",{className:tn.snapshotContent,children:[h.jsx("div",{className:tn.checkIcon,children:h.jsx(jo,{size:12,strokeWidth:3})}),h.jsx("span",{children:A}),h.jsx("span",{className:tn.snapshotIcon,children:""})]})});CC.propTypes={message:_e.string.isRequired,onClose:_e.func};var A1=function(A,t){return A1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,s){e.__proto__=s}||function(e,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])},A1(A,t)};function sn(A,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");A1(A,t);function e(){this.constructor=A}A.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var n1=function(){return n1=Object.assign||function(t){for(var e,s=1,n=arguments.length;s<n;s++){e=arguments[s];for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(t[l]=e[l])}return t},n1.apply(this,arguments)};function iA(A,t,e,s){function n(l){return l instanceof e?l:new e(function(a){a(l)})}return new(e||(e=Promise))(function(l,a){function c(p){try{f(s.next(p))}catch(m){a(m)}}function d(p){try{f(s.throw(p))}catch(m){a(m)}}function f(p){p.done?l(p.value):n(p.value).then(c,d)}f((s=s.apply(A,[])).next())})}function Gi(A,t){var e={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,n,l,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(f){return function(p){return d([f,p])}}function d(f){if(s)throw new TypeError("Generator is already executing.");for(;e;)try{if(s=1,n&&(l=f[0]&2?n.return:f[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,f[1])).done)return l;switch(n=0,l&&(f=[f[0]&2,l.value]),f[0]){case 0:case 1:l=f;break;case 4:return e.label++,{value:f[1],done:!1};case 5:e.label++,n=f[1],f=[0];continue;case 7:f=e.ops.pop(),e.trys.pop();continue;default:if(l=e.trys,!(l=l.length>0&&l[l.length-1])&&(f[0]===6||f[0]===2)){e=0;continue}if(f[0]===3&&(!l||f[1]>l[0]&&f[1]<l[3])){e.label=f[1];break}if(f[0]===6&&e.label<l[1]){e.label=l[1],l=f;break}if(l&&e.label<l[2]){e.label=l[2],e.ops.push(f);break}l[2]&&e.ops.pop(),e.trys.pop();continue}f=t.call(A,e)}catch(p){f=[6,p],n=0}finally{s=l=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function $h(A,t,e){if(arguments.length===2)for(var s=0,n=t.length,l;s<n;s++)(l||!(s in t))&&(l||(l=Array.prototype.slice.call(t,0,s)),l[s]=t[s]);return A.concat(l||t)}var Jn=(function(){function A(t,e,s,n){this.left=t,this.top=e,this.width=s,this.height=n}return A.prototype.add=function(t,e,s,n){return new A(this.left+t,this.top+e,this.width+s,this.height+n)},A.fromClientRect=function(t,e){return new A(e.left+t.windowBounds.left,e.top+t.windowBounds.top,e.width,e.height)},A.fromDOMRectList=function(t,e){var s=Array.from(e).find(function(n){return n.width!==0});return s?new A(s.left+t.windowBounds.left,s.top+t.windowBounds.top,s.width,s.height):A.EMPTY},A.EMPTY=new A(0,0,0,0),A})(),ld=function(A,t){return Jn.fromClientRect(A,t.getBoundingClientRect())},lL=function(A){var t=A.body,e=A.documentElement;if(!t||!e)throw new Error("Unable to get document size");var s=Math.max(Math.max(t.scrollWidth,e.scrollWidth),Math.max(t.offsetWidth,e.offsetWidth),Math.max(t.clientWidth,e.clientWidth)),n=Math.max(Math.max(t.scrollHeight,e.scrollHeight),Math.max(t.offsetHeight,e.offsetHeight),Math.max(t.clientHeight,e.clientHeight));return new Jn(0,0,s,n)},od=function(A){for(var t=[],e=0,s=A.length;e<s;){var n=A.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){var l=A.charCodeAt(e++);(l&64512)===56320?t.push(((n&1023)<<10)+(l&1023)+65536):(t.push(n),e--)}else t.push(n)}return t},si=function(){for(var A=[],t=0;t<arguments.length;t++)A[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,A);var e=A.length;if(!e)return"";for(var s=[],n=-1,l="";++n<e;){var a=A[n];a<=65535?s.push(a):(a-=65536,s.push((a>>10)+55296,a%1024+56320)),(n+1===e||s.length>16384)&&(l+=String.fromCharCode.apply(String,s),s.length=0)}return l},hw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oL=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Xh=0;Xh<hw.length;Xh++)oL[hw.charCodeAt(Xh)]=Xh;var uw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ga=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Yh=0;Yh<uw.length;Yh++)Ga[uw.charCodeAt(Yh)]=Yh;var aL=function(A){var t=A.length*.75,e=A.length,s,n=0,l,a,c,d;A[A.length-1]==="="&&(t--,A[A.length-2]==="="&&t--);var f=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),p=Array.isArray(f)?f:new Uint8Array(f);for(s=0;s<e;s+=4)l=Ga[A.charCodeAt(s)],a=Ga[A.charCodeAt(s+1)],c=Ga[A.charCodeAt(s+2)],d=Ga[A.charCodeAt(s+3)],p[n++]=l<<2|a>>4,p[n++]=(a&15)<<4|c>>2,p[n++]=(c&3)<<6|d&63;return f},cL=function(A){for(var t=A.length,e=[],s=0;s<t;s+=2)e.push(A[s+1]<<8|A[s]);return e},hL=function(A){for(var t=A.length,e=[],s=0;s<t;s+=4)e.push(A[s+3]<<24|A[s+2]<<16|A[s+1]<<8|A[s]);return e},El=5,K1=11,Bg=2,uL=K1-El,bC=65536>>El,dL=1<<El,wg=dL-1,fL=1024>>El,pL=bC+fL,gL=pL,mL=32,_L=gL+mL,vL=65536>>K1,BL=1<<uL,wL=BL-1,dw=function(A,t,e){return A.slice?A.slice(t,e):new Uint16Array(Array.prototype.slice.call(A,t,e))},yL=function(A,t,e){return A.slice?A.slice(t,e):new Uint32Array(Array.prototype.slice.call(A,t,e))},CL=function(A,t){var e=aL(A),s=Array.isArray(e)?hL(e):new Uint32Array(e),n=Array.isArray(e)?cL(e):new Uint16Array(e),l=24,a=dw(n,l/2,s[4]/2),c=s[5]===2?dw(n,(l+s[4])/2):yL(s,Math.ceil((l+s[4])/4));return new bL(s[0],s[1],s[2],s[3],a,c)},bL=(function(){function A(t,e,s,n,l,a){this.initialValue=t,this.errorValue=e,this.highStart=s,this.highValueIndex=n,this.index=l,this.data=a}return A.prototype.get=function(t){var e;if(t>=0){if(t<55296||t>56319&&t<=65535)return e=this.index[t>>El],e=(e<<Bg)+(t&wg),this.data[e];if(t<=65535)return e=this.index[bC+(t-55296>>El)],e=(e<<Bg)+(t&wg),this.data[e];if(t<this.highStart)return e=_L-vL+(t>>K1),e=this.index[e],e+=t>>El&wL,e=this.index[e],e=(e<<Bg)+(t&wg),this.data[e];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},A})(),fw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xL=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Jh=0;Jh<fw.length;Jh++)xL[fw.charCodeAt(Jh)]=Jh;var SL="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",pw=50,EL=1,xC=2,SC=3,TL=4,QL=5,gw=7,EC=8,mw=9,jr=10,r1=11,_w=12,l1=13,FL=14,Wa=15,o1=16,qh=17,za=18,UL=19,vw=20,a1=21,Va=22,yg=23,yo=24,xA=25,$a=26,Xa=27,Co=28,ML=29,yl=30,IL=31,Zh=32,tu=33,c1=34,h1=35,u1=36,gc=37,d1=38,Tu=39,Qu=40,Cg=41,TC=42,NL=43,LL=[9001,65288],QC="!",We="",eu="",f1=CL(SL),Pn=[yl,u1],p1=[EL,xC,SC,QL],FC=[jr,EC],Bw=[Xa,$a],HL=p1.concat(FC),ww=[d1,Tu,Qu,c1,h1],DL=[Wa,l1],kL=function(A,t){t===void 0&&(t="strict");var e=[],s=[],n=[];return A.forEach(function(l,a){var c=f1.get(l);if(c>pw?(n.push(!0),c-=pw):n.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(l)!==-1)return s.push(a),e.push(o1);if(c===TL||c===r1){if(a===0)return s.push(a),e.push(yl);var d=e[a-1];return HL.indexOf(d)===-1?(s.push(s[a-1]),e.push(d)):(s.push(a),e.push(yl))}if(s.push(a),c===IL)return e.push(t==="strict"?a1:gc);if(c===TC||c===ML)return e.push(yl);if(c===NL)return l>=131072&&l<=196605||l>=196608&&l<=262141?e.push(gc):e.push(yl);e.push(c)}),[s,e,n]},bg=function(A,t,e,s){var n=s[e];if(Array.isArray(A)?A.indexOf(n)!==-1:A===n)for(var l=e;l<=s.length;){l++;var a=s[l];if(a===t)return!0;if(a!==jr)break}if(n===jr)for(var l=e;l>0;){l--;var c=s[l];if(Array.isArray(A)?A.indexOf(c)!==-1:A===c)for(var d=e;d<=s.length;){d++;var a=s[d];if(a===t)return!0;if(a!==jr)break}if(c!==jr)break}return!1},yw=function(A,t){for(var e=A;e>=0;){var s=t[e];if(s===jr)e--;else return s}return 0},jL=function(A,t,e,s,n){if(e[s]===0)return We;var l=s-1;if(Array.isArray(n)&&n[l]===!0)return We;var a=l-1,c=l+1,d=t[l],f=a>=0?t[a]:0,p=t[c];if(d===xC&&p===SC)return We;if(p1.indexOf(d)!==-1)return QC;if(p1.indexOf(p)!==-1||FC.indexOf(p)!==-1)return We;if(yw(l,t)===EC)return eu;if(f1.get(A[l])===r1||(d===Zh||d===tu)&&f1.get(A[c])===r1||d===gw||p===gw||d===mw||[jr,l1,Wa].indexOf(d)===-1&&p===mw||[qh,za,UL,yo,Co].indexOf(p)!==-1||yw(l,t)===Va||bg(yg,Va,l,t)||bg([qh,za],a1,l,t)||bg(_w,_w,l,t))return We;if(d===jr)return eu;if(d===yg||p===yg)return We;if(p===o1||d===o1)return eu;if([l1,Wa,a1].indexOf(p)!==-1||d===FL||f===u1&&DL.indexOf(d)!==-1||d===Co&&p===u1||p===vw||Pn.indexOf(p)!==-1&&d===xA||Pn.indexOf(d)!==-1&&p===xA||d===Xa&&[gc,Zh,tu].indexOf(p)!==-1||[gc,Zh,tu].indexOf(d)!==-1&&p===$a||Pn.indexOf(d)!==-1&&Bw.indexOf(p)!==-1||Bw.indexOf(d)!==-1&&Pn.indexOf(p)!==-1||[Xa,$a].indexOf(d)!==-1&&(p===xA||[Va,Wa].indexOf(p)!==-1&&t[c+1]===xA)||[Va,Wa].indexOf(d)!==-1&&p===xA||d===xA&&[xA,Co,yo].indexOf(p)!==-1)return We;if([xA,Co,yo,qh,za].indexOf(p)!==-1)for(var m=l;m>=0;){var v=t[m];if(v===xA)return We;if([Co,yo].indexOf(v)!==-1)m--;else break}if([Xa,$a].indexOf(p)!==-1)for(var m=[qh,za].indexOf(d)!==-1?a:l;m>=0;){var v=t[m];if(v===xA)return We;if([Co,yo].indexOf(v)!==-1)m--;else break}if(d1===d&&[d1,Tu,c1,h1].indexOf(p)!==-1||[Tu,c1].indexOf(d)!==-1&&[Tu,Qu].indexOf(p)!==-1||[Qu,h1].indexOf(d)!==-1&&p===Qu||ww.indexOf(d)!==-1&&[vw,$a].indexOf(p)!==-1||ww.indexOf(p)!==-1&&d===Xa||Pn.indexOf(d)!==-1&&Pn.indexOf(p)!==-1||d===yo&&Pn.indexOf(p)!==-1||Pn.concat(xA).indexOf(d)!==-1&&p===Va&&LL.indexOf(A[c])===-1||Pn.concat(xA).indexOf(p)!==-1&&d===za)return We;if(d===Cg&&p===Cg){for(var w=e[l],y=1;w>0&&(w--,t[w]===Cg);)y++;if(y%2!==0)return We}return d===Zh&&p===tu?We:eu},OL=function(A,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var e=kL(A,t.lineBreak),s=e[0],n=e[1],l=e[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(n=n.map(function(c){return[xA,yl,TC].indexOf(c)!==-1?gc:c}));var a=t.wordBreak==="keep-all"?l.map(function(c,d){return c&&A[d]>=19968&&A[d]<=40959}):void 0;return[s,n,a]},RL=(function(){function A(t,e,s,n){this.codePoints=t,this.required=e===QC,this.start=s,this.end=n}return A.prototype.slice=function(){return si.apply(void 0,this.codePoints.slice(this.start,this.end))},A})(),zL=function(A,t){var e=od(A),s=OL(e,t),n=s[0],l=s[1],a=s[2],c=e.length,d=0,f=0;return{next:function(){if(f>=c)return{done:!0,value:null};for(var p=We;f<c&&(p=jL(e,l,n,++f,a))===We;);if(p!==We||f===c){var m=new RL(e,p,d,f);return d=f,{value:m,done:!1}}return{done:!0,value:null}}}},VL=1,PL=2,Cc=4,Cw=8,Ou=10,bw=47,lc=92,KL=9,GL=32,su=34,Pa=61,WL=35,$L=36,XL=37,iu=39,Au=40,Ka=41,YL=95,dA=45,JL=33,qL=60,ZL=62,tH=64,eH=91,sH=93,iH=61,AH=123,nu=63,nH=125,xw=124,rH=126,lH=128,Sw=65533,xg=42,bl=43,oH=44,aH=58,cH=59,mc=46,hH=0,uH=8,dH=11,fH=14,pH=31,gH=127,gn=-1,UC=48,MC=97,IC=101,mH=102,_H=117,vH=122,NC=65,LC=69,HC=70,BH=85,wH=90,$i=function(A){return A>=UC&&A<=57},yH=function(A){return A>=55296&&A<=57343},bo=function(A){return $i(A)||A>=NC&&A<=HC||A>=MC&&A<=mH},CH=function(A){return A>=MC&&A<=vH},bH=function(A){return A>=NC&&A<=wH},xH=function(A){return CH(A)||bH(A)},SH=function(A){return A>=lH},ru=function(A){return A===Ou||A===KL||A===GL},Ru=function(A){return xH(A)||SH(A)||A===YL},Ew=function(A){return Ru(A)||$i(A)||A===dA},EH=function(A){return A>=hH&&A<=uH||A===dH||A>=fH&&A<=pH||A===gH},Lr=function(A,t){return A!==lc?!1:t!==Ou},lu=function(A,t,e){return A===dA?Ru(t)||Lr(t,e):Ru(A)?!0:!!(A===lc&&Lr(A,t))},Sg=function(A,t,e){return A===bl||A===dA?$i(t)?!0:t===mc&&$i(e):$i(A===mc?t:A)},TH=function(A){var t=0,e=1;(A[t]===bl||A[t]===dA)&&(A[t]===dA&&(e=-1),t++);for(var s=[];$i(A[t]);)s.push(A[t++]);var n=s.length?parseInt(si.apply(void 0,s),10):0;A[t]===mc&&t++;for(var l=[];$i(A[t]);)l.push(A[t++]);var a=l.length,c=a?parseInt(si.apply(void 0,l),10):0;(A[t]===LC||A[t]===IC)&&t++;var d=1;(A[t]===bl||A[t]===dA)&&(A[t]===dA&&(d=-1),t++);for(var f=[];$i(A[t]);)f.push(A[t++]);var p=f.length?parseInt(si.apply(void 0,f),10):0;return e*(n+c*Math.pow(10,-a))*Math.pow(10,d*p)},QH={type:2},FH={type:3},UH={type:4},MH={type:13},IH={type:8},NH={type:21},LH={type:9},HH={type:10},DH={type:11},kH={type:12},jH={type:14},ou={type:23},OH={type:1},RH={type:25},zH={type:24},VH={type:26},PH={type:27},KH={type:28},GH={type:29},WH={type:31},g1={type:32},DC=(function(){function A(){this._value=[]}return A.prototype.write=function(t){this._value=this._value.concat(od(t))},A.prototype.read=function(){for(var t=[],e=this.consumeToken();e!==g1;)t.push(e),e=this.consumeToken();return t},A.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case su:return this.consumeStringToken(su);case WL:var e=this.peekCodePoint(0),s=this.peekCodePoint(1),n=this.peekCodePoint(2);if(Ew(e)||Lr(s,n)){var l=lu(e,s,n)?PL:VL,a=this.consumeName();return{type:5,value:a,flags:l}}break;case $L:if(this.peekCodePoint(0)===Pa)return this.consumeCodePoint(),MH;break;case iu:return this.consumeStringToken(iu);case Au:return QH;case Ka:return FH;case xg:if(this.peekCodePoint(0)===Pa)return this.consumeCodePoint(),jH;break;case bl:if(Sg(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case oH:return UH;case dA:var c=t,d=this.peekCodePoint(0),f=this.peekCodePoint(1);if(Sg(c,d,f))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(lu(c,d,f))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(d===dA&&f===ZL)return this.consumeCodePoint(),this.consumeCodePoint(),zH;break;case mc:if(Sg(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case bw:if(this.peekCodePoint(0)===xg)for(this.consumeCodePoint();;){var p=this.consumeCodePoint();if(p===xg&&(p=this.consumeCodePoint(),p===bw))return this.consumeToken();if(p===gn)return this.consumeToken()}break;case aH:return VH;case cH:return PH;case qL:if(this.peekCodePoint(0)===JL&&this.peekCodePoint(1)===dA&&this.peekCodePoint(2)===dA)return this.consumeCodePoint(),this.consumeCodePoint(),RH;break;case tH:var m=this.peekCodePoint(0),v=this.peekCodePoint(1),w=this.peekCodePoint(2);if(lu(m,v,w)){var a=this.consumeName();return{type:7,value:a}}break;case eH:return KH;case lc:if(Lr(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case sH:return GH;case iH:if(this.peekCodePoint(0)===Pa)return this.consumeCodePoint(),IH;break;case AH:return DH;case nH:return kH;case _H:case BH:var y=this.peekCodePoint(0),b=this.peekCodePoint(1);return y===bl&&(bo(b)||b===nu)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case xw:if(this.peekCodePoint(0)===Pa)return this.consumeCodePoint(),LH;if(this.peekCodePoint(0)===xw)return this.consumeCodePoint(),NH;break;case rH:if(this.peekCodePoint(0)===Pa)return this.consumeCodePoint(),HH;break;case gn:return g1}return ru(t)?(this.consumeWhiteSpace(),WH):$i(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):Ru(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:si(t)}},A.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},A.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},A.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},A.prototype.consumeUnicodeRangeToken=function(){for(var t=[],e=this.consumeCodePoint();bo(e)&&t.length<6;)t.push(e),e=this.consumeCodePoint();for(var s=!1;e===nu&&t.length<6;)t.push(e),e=this.consumeCodePoint(),s=!0;if(s){var n=parseInt(si.apply(void 0,t.map(function(d){return d===nu?UC:d})),16),l=parseInt(si.apply(void 0,t.map(function(d){return d===nu?HC:d})),16);return{type:30,start:n,end:l}}var a=parseInt(si.apply(void 0,t),16);if(this.peekCodePoint(0)===dA&&bo(this.peekCodePoint(1))){this.consumeCodePoint(),e=this.consumeCodePoint();for(var c=[];bo(e)&&c.length<6;)c.push(e),e=this.consumeCodePoint();var l=parseInt(si.apply(void 0,c),16);return{type:30,start:a,end:l}}else return{type:30,start:a,end:a}},A.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===Au?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Au?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},A.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===gn)return{type:22,value:""};var e=this.peekCodePoint(0);if(e===iu||e===su){var s=this.consumeStringToken(this.consumeCodePoint());return s.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===gn||this.peekCodePoint(0)===Ka)?(this.consumeCodePoint(),{type:22,value:s.value}):(this.consumeBadUrlRemnants(),ou)}for(;;){var n=this.consumeCodePoint();if(n===gn||n===Ka)return{type:22,value:si.apply(void 0,t)};if(ru(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===gn||this.peekCodePoint(0)===Ka?(this.consumeCodePoint(),{type:22,value:si.apply(void 0,t)}):(this.consumeBadUrlRemnants(),ou);if(n===su||n===iu||n===Au||EH(n))return this.consumeBadUrlRemnants(),ou;if(n===lc)if(Lr(n,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),ou;else t.push(n)}},A.prototype.consumeWhiteSpace=function(){for(;ru(this.peekCodePoint(0));)this.consumeCodePoint()},A.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===Ka||t===gn)return;Lr(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},A.prototype.consumeStringSlice=function(t){for(var e=5e4,s="";t>0;){var n=Math.min(e,t);s+=si.apply(void 0,this._value.splice(0,n)),t-=n}return this._value.shift(),s},A.prototype.consumeStringToken=function(t){var e="",s=0;do{var n=this._value[s];if(n===gn||n===void 0||n===t)return e+=this.consumeStringSlice(s),{type:0,value:e};if(n===Ou)return this._value.splice(0,s),OH;if(n===lc){var l=this._value[s+1];l!==gn&&l!==void 0&&(l===Ou?(e+=this.consumeStringSlice(s),s=-1,this._value.shift()):Lr(n,l)&&(e+=this.consumeStringSlice(s),e+=si(this.consumeEscapedCodePoint()),s=-1))}s++}while(!0)},A.prototype.consumeNumber=function(){var t=[],e=Cc,s=this.peekCodePoint(0);for((s===bl||s===dA)&&t.push(this.consumeCodePoint());$i(this.peekCodePoint(0));)t.push(this.consumeCodePoint());s=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(s===mc&&$i(n))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=Cw;$i(this.peekCodePoint(0));)t.push(this.consumeCodePoint());s=this.peekCodePoint(0),n=this.peekCodePoint(1);var l=this.peekCodePoint(2);if((s===LC||s===IC)&&((n===bl||n===dA)&&$i(l)||$i(n)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=Cw;$i(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[TH(t),e]},A.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),e=t[0],s=t[1],n=this.peekCodePoint(0),l=this.peekCodePoint(1),a=this.peekCodePoint(2);if(lu(n,l,a)){var c=this.consumeName();return{type:15,number:e,flags:s,unit:c}}return n===XL?(this.consumeCodePoint(),{type:16,number:e,flags:s}):{type:17,number:e,flags:s}},A.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(bo(t)){for(var e=si(t);bo(this.peekCodePoint(0))&&e.length<6;)e+=si(this.consumeCodePoint());ru(this.peekCodePoint(0))&&this.consumeCodePoint();var s=parseInt(e,16);return s===0||yH(s)||s>1114111?Sw:s}return t===gn?Sw:t},A.prototype.consumeName=function(){for(var t="";;){var e=this.consumeCodePoint();if(Ew(e))t+=si(e);else if(Lr(e,this.peekCodePoint(0)))t+=si(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(e),t}},A})(),kC=(function(){function A(t){this._tokens=t}return A.create=function(t){var e=new DC;return e.write(t),new A(e.read())},A.parseValue=function(t){return A.create(t).parseComponentValue()},A.parseValues=function(t){return A.create(t).parseComponentValues()},A.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var e=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},A.prototype.parseComponentValues=function(){for(var t=[];;){var e=this.consumeComponentValue();if(e.type===32)return t;t.push(e),t.push()}},A.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},A.prototype.consumeSimpleBlock=function(t){for(var e={type:t,values:[]},s=this.consumeToken();;){if(s.type===32||XH(s,t))return e;this.reconsumeToken(s),e.values.push(this.consumeComponentValue()),s=this.consumeToken()}},A.prototype.consumeFunction=function(t){for(var e={name:t.value,values:[],type:18};;){var s=this.consumeToken();if(s.type===32||s.type===3)return e;this.reconsumeToken(s),e.values.push(this.consumeComponentValue())}},A.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?g1:t},A.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},A})(),bc=function(A){return A.type===15},Xo=function(A){return A.type===17},ys=function(A){return A.type===20},$H=function(A){return A.type===0},m1=function(A,t){return ys(A)&&A.value===t},jC=function(A){return A.type!==31},Go=function(A){return A.type!==31&&A.type!==4},yn=function(A){var t=[],e=[];return A.forEach(function(s){if(s.type===4){if(e.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(e),e=[];return}s.type!==31&&e.push(s)}),e.length&&t.push(e),t},XH=function(A,t){return t===11&&A.type===12||t===28&&A.type===29?!0:t===2&&A.type===3},Kr=function(A){return A.type===17||A.type===15},hi=function(A){return A.type===16||Kr(A)},OC=function(A){return A.length>1?[A[0],A[1]]:[A[0]]},ki={type:17,number:0,flags:Cc},G1={type:16,number:50,flags:Cc},Or={type:16,number:100,flags:Cc},Ya=function(A,t,e){var s=A[0],n=A[1];return[Ts(s,t),Ts(typeof n<"u"?n:s,e)]},Ts=function(A,t){if(A.type===16)return A.number/100*t;if(bc(A))switch(A.unit){case"rem":case"em":return 16*A.number;default:return A.number}return A.number},RC="deg",zC="grad",VC="rad",PC="turn",ad={name:"angle",parse:function(A,t){if(t.type===15)switch(t.unit){case RC:return Math.PI*t.number/180;case zC:return Math.PI/200*t.number;case VC:return t.number;case PC:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},KC=function(A){return A.type===15&&(A.unit===RC||A.unit===zC||A.unit===VC||A.unit===PC)},GC=function(A){var t=A.filter(ys).map(function(e){return e.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ki,ki];case"to top":case"bottom":return RA(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ki,Or];case"to right":case"left":return RA(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Or,Or];case"to bottom":case"top":return RA(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Or,ki];case"to left":case"right":return RA(270)}return 0},RA=function(A){return Math.PI*A/180},zr={name:"color",parse:function(A,t){if(t.type===18){var e=YH[t.name];if(typeof e>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return e(A,t.values)}if(t.type===5){if(t.value.length===3){var s=t.value.substring(0,1),n=t.value.substring(1,2),l=t.value.substring(2,3);return Rr(parseInt(s+s,16),parseInt(n+n,16),parseInt(l+l,16),1)}if(t.value.length===4){var s=t.value.substring(0,1),n=t.value.substring(1,2),l=t.value.substring(2,3),a=t.value.substring(3,4);return Rr(parseInt(s+s,16),parseInt(n+n,16),parseInt(l+l,16),parseInt(a+a,16)/255)}if(t.value.length===6){var s=t.value.substring(0,2),n=t.value.substring(2,4),l=t.value.substring(4,6);return Rr(parseInt(s,16),parseInt(n,16),parseInt(l,16),1)}if(t.value.length===8){var s=t.value.substring(0,2),n=t.value.substring(2,4),l=t.value.substring(4,6),a=t.value.substring(6,8);return Rr(parseInt(s,16),parseInt(n,16),parseInt(l,16),parseInt(a,16)/255)}}if(t.type===20){var c=Yn[t.value.toUpperCase()];if(typeof c<"u")return c}return Yn.TRANSPARENT}},Vr=function(A){return(255&A)===0},wi=function(A){var t=255&A,e=255&A>>8,s=255&A>>16,n=255&A>>24;return t<255?"rgba("+n+","+s+","+e+","+t/255+")":"rgb("+n+","+s+","+e+")"},Rr=function(A,t,e,s){return(A<<24|t<<16|e<<8|Math.round(s*255)<<0)>>>0},Tw=function(A,t){if(A.type===17)return A.number;if(A.type===16){var e=t===3?1:255;return t===3?A.number/100*e:Math.round(A.number/100*e)}return 0},Qw=function(A,t){var e=t.filter(Go);if(e.length===3){var s=e.map(Tw),n=s[0],l=s[1],a=s[2];return Rr(n,l,a,1)}if(e.length===4){var c=e.map(Tw),n=c[0],l=c[1],a=c[2],d=c[3];return Rr(n,l,a,d)}return 0};function Eg(A,t,e){return e<0&&(e+=1),e>=1&&(e-=1),e<1/6?(t-A)*e*6+A:e<1/2?t:e<2/3?(t-A)*6*(2/3-e)+A:A}var Fw=function(A,t){var e=t.filter(Go),s=e[0],n=e[1],l=e[2],a=e[3],c=(s.type===17?RA(s.number):ad.parse(A,s))/(Math.PI*2),d=hi(n)?n.number/100:0,f=hi(l)?l.number/100:0,p=typeof a<"u"&&hi(a)?Ts(a,1):1;if(d===0)return Rr(f*255,f*255,f*255,1);var m=f<=.5?f*(d+1):f+d-f*d,v=f*2-m,w=Eg(v,m,c+1/3),y=Eg(v,m,c),b=Eg(v,m,c-1/3);return Rr(w*255,y*255,b*255,p)},YH={hsl:Fw,hsla:Fw,rgb:Qw,rgba:Qw},oc=function(A,t){return zr.parse(A,kC.create(t).parseComponentValue())},Yn={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},JH={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(A,t){return t.map(function(e){if(ys(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},qH={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},cd=function(A,t){var e=zr.parse(A,t[0]),s=t[1];return s&&hi(s)?{color:e,stop:s}:{color:e,stop:null}},Uw=function(A,t){var e=A[0],s=A[A.length-1];e.stop===null&&(e.stop=ki),s.stop===null&&(s.stop=Or);for(var n=[],l=0,a=0;a<A.length;a++){var c=A[a].stop;if(c!==null){var d=Ts(c,t);d>l?n.push(d):n.push(l),l=d}else n.push(null)}for(var f=null,a=0;a<n.length;a++){var p=n[a];if(p===null)f===null&&(f=a);else if(f!==null){for(var m=a-f,v=n[f-1],w=(p-v)/(m+1),y=1;y<=m;y++)n[f+y-1]=w*y;f=null}}return A.map(function(b,S){var x=b.color;return{color:x,stop:Math.max(Math.min(1,n[S]/t),0)}})},ZH=function(A,t,e){var s=t/2,n=e/2,l=Ts(A[0],t)-s,a=n-Ts(A[1],e);return(Math.atan2(a,l)+Math.PI*2)%(Math.PI*2)},t9=function(A,t,e){var s=typeof A=="number"?A:ZH(A,t,e),n=Math.abs(t*Math.sin(s))+Math.abs(e*Math.cos(s)),l=t/2,a=e/2,c=n/2,d=Math.sin(s-Math.PI/2)*c,f=Math.cos(s-Math.PI/2)*c;return[n,l-f,l+f,a-d,a+d]},qA=function(A,t){return Math.sqrt(A*A+t*t)},Mw=function(A,t,e,s,n){var l=[[0,0],[0,t],[A,0],[A,t]];return l.reduce(function(a,c){var d=c[0],f=c[1],p=qA(e-d,s-f);return(n?p<a.optimumDistance:p>a.optimumDistance)?{optimumCorner:c,optimumDistance:p}:a},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner},e9=function(A,t,e,s,n){var l=0,a=0;switch(A.size){case 0:A.shape===0?l=a=Math.min(Math.abs(t),Math.abs(t-s),Math.abs(e),Math.abs(e-n)):A.shape===1&&(l=Math.min(Math.abs(t),Math.abs(t-s)),a=Math.min(Math.abs(e),Math.abs(e-n)));break;case 2:if(A.shape===0)l=a=Math.min(qA(t,e),qA(t,e-n),qA(t-s,e),qA(t-s,e-n));else if(A.shape===1){var c=Math.min(Math.abs(e),Math.abs(e-n))/Math.min(Math.abs(t),Math.abs(t-s)),d=Mw(s,n,t,e,!0),f=d[0],p=d[1];l=qA(f-t,(p-e)/c),a=c*l}break;case 1:A.shape===0?l=a=Math.max(Math.abs(t),Math.abs(t-s),Math.abs(e),Math.abs(e-n)):A.shape===1&&(l=Math.max(Math.abs(t),Math.abs(t-s)),a=Math.max(Math.abs(e),Math.abs(e-n)));break;case 3:if(A.shape===0)l=a=Math.max(qA(t,e),qA(t,e-n),qA(t-s,e),qA(t-s,e-n));else if(A.shape===1){var c=Math.max(Math.abs(e),Math.abs(e-n))/Math.max(Math.abs(t),Math.abs(t-s)),m=Mw(s,n,t,e,!1),f=m[0],p=m[1];l=qA(f-t,(p-e)/c),a=c*l}break}return Array.isArray(A.size)&&(l=Ts(A.size[0],s),a=A.size.length===2?Ts(A.size[1],n):l),[l,a]},s9=function(A,t){var e=RA(180),s=[];return yn(t).forEach(function(n,l){if(l===0){var a=n[0];if(a.type===20&&a.value==="to"){e=GC(n);return}else if(KC(a)){e=ad.parse(A,a);return}}var c=cd(A,n);s.push(c)}),{angle:e,stops:s,type:1}},au=function(A,t){var e=RA(180),s=[];return yn(t).forEach(function(n,l){if(l===0){var a=n[0];if(a.type===20&&["top","left","right","bottom"].indexOf(a.value)!==-1){e=GC(n);return}else if(KC(a)){e=(ad.parse(A,a)+RA(270))%RA(360);return}}var c=cd(A,n);s.push(c)}),{angle:e,stops:s,type:1}},i9=function(A,t){var e=RA(180),s=[],n=1,l=0,a=3,c=[];return yn(t).forEach(function(d,f){var p=d[0];if(f===0){if(ys(p)&&p.value==="linear"){n=1;return}else if(ys(p)&&p.value==="radial"){n=2;return}}if(p.type===18){if(p.name==="from"){var m=zr.parse(A,p.values[0]);s.push({stop:ki,color:m})}else if(p.name==="to"){var m=zr.parse(A,p.values[0]);s.push({stop:Or,color:m})}else if(p.name==="color-stop"){var v=p.values.filter(Go);if(v.length===2){var m=zr.parse(A,v[1]),w=v[0];Xo(w)&&s.push({stop:{type:16,number:w.number*100,flags:w.flags},color:m})}}}}),n===1?{angle:(e+RA(180))%RA(360),stops:s,type:n}:{size:a,shape:l,stops:s,position:c,type:n}},WC="closest-side",$C="farthest-side",XC="closest-corner",YC="farthest-corner",JC="circle",qC="ellipse",ZC="cover",tb="contain",A9=function(A,t){var e=0,s=3,n=[],l=[];return yn(t).forEach(function(a,c){var d=!0;if(c===0){var f=!1;d=a.reduce(function(m,v){if(f)if(ys(v))switch(v.value){case"center":return l.push(G1),m;case"top":case"left":return l.push(ki),m;case"right":case"bottom":return l.push(Or),m}else(hi(v)||Kr(v))&&l.push(v);else if(ys(v))switch(v.value){case JC:return e=0,!1;case qC:return e=1,!1;case"at":return f=!0,!1;case WC:return s=0,!1;case ZC:case $C:return s=1,!1;case tb:case XC:return s=2,!1;case YC:return s=3,!1}else if(Kr(v)||hi(v))return Array.isArray(s)||(s=[]),s.push(v),!1;return m},d)}if(d){var p=cd(A,a);n.push(p)}}),{size:s,shape:e,stops:n,position:l,type:2}},cu=function(A,t){var e=0,s=3,n=[],l=[];return yn(t).forEach(function(a,c){var d=!0;if(c===0?d=a.reduce(function(p,m){if(ys(m))switch(m.value){case"center":return l.push(G1),!1;case"top":case"left":return l.push(ki),!1;case"right":case"bottom":return l.push(Or),!1}else if(hi(m)||Kr(m))return l.push(m),!1;return p},d):c===1&&(d=a.reduce(function(p,m){if(ys(m))switch(m.value){case JC:return e=0,!1;case qC:return e=1,!1;case tb:case WC:return s=0,!1;case $C:return s=1,!1;case XC:return s=2,!1;case ZC:case YC:return s=3,!1}else if(Kr(m)||hi(m))return Array.isArray(s)||(s=[]),s.push(m),!1;return p},d)),d){var f=cd(A,a);n.push(f)}}),{size:s,shape:e,stops:n,position:l,type:2}},n9=function(A){return A.type===1},r9=function(A){return A.type===2},W1={name:"image",parse:function(A,t){if(t.type===22){var e={url:t.value,type:0};return A.cache.addImage(t.value),e}if(t.type===18){var s=eb[t.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return s(A,t.values)}throw new Error("Unsupported image type "+t.type)}};function l9(A){return!(A.type===20&&A.value==="none")&&(A.type!==18||!!eb[A.name])}var eb={"linear-gradient":s9,"-moz-linear-gradient":au,"-ms-linear-gradient":au,"-o-linear-gradient":au,"-webkit-linear-gradient":au,"radial-gradient":A9,"-moz-radial-gradient":cu,"-ms-radial-gradient":cu,"-o-radial-gradient":cu,"-webkit-radial-gradient":cu,"-webkit-gradient":i9},o9={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(A,t){if(t.length===0)return[];var e=t[0];return e.type===20&&e.value==="none"?[]:t.filter(function(s){return Go(s)&&l9(s)}).map(function(s){return W1.parse(A,s)})}},a9={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(A,t){return t.map(function(e){if(ys(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},c9={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(A,t){return yn(t).map(function(e){return e.filter(hi)}).map(OC)}},h9={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(A,t){return yn(t).map(function(e){return e.filter(ys).map(function(s){return s.value}).join(" ")}).map(u9)}},u9=function(A){switch(A){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}},zo;(function(A){A.AUTO="auto",A.CONTAIN="contain",A.COVER="cover"})(zo||(zo={}));var d9={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(A,t){return yn(t).map(function(e){return e.filter(f9)})}},f9=function(A){return ys(A)||hi(A)},hd=function(A){return{name:"border-"+A+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},p9=hd("top"),g9=hd("right"),m9=hd("bottom"),_9=hd("left"),ud=function(A){return{name:"border-radius-"+A,initialValue:"0 0",prefix:!1,type:1,parse:function(t,e){return OC(e.filter(hi))}}},v9=ud("top-left"),B9=ud("top-right"),w9=ud("bottom-right"),y9=ud("bottom-left"),dd=function(A){return{name:"border-"+A+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,e){switch(e){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},C9=dd("top"),b9=dd("right"),x9=dd("bottom"),S9=dd("left"),fd=function(A){return{name:"border-"+A+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return bc(e)?e.number:0}}},E9=fd("top"),T9=fd("right"),Q9=fd("bottom"),F9=fd("left"),U9={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},M9={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(A,t){return t==="rtl"?1:0}},I9={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(A,t){return t.filter(ys).reduce(function(e,s){return e|N9(s.value)},0)}},N9=function(A){switch(A){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},L9={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(A,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},H9={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(A,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},zu;(function(A){A.NORMAL="normal",A.STRICT="strict"})(zu||(zu={}));var D9={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(A,t){return t==="strict"?zu.STRICT:zu.NORMAL}},k9={name:"line-height",initialValue:"normal",prefix:!1,type:4},Iw=function(A,t){return ys(A)&&A.value==="normal"?1.2*t:A.type===17?t*A.number:hi(A)?Ts(A,t):t},j9={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(A,t){return t.type===20&&t.value==="none"?null:W1.parse(A,t)}},O9={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(A,t){return t==="inside"?0:1}},_1={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(A,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},pd=function(A){return{name:"margin-"+A,initialValue:"0",prefix:!1,type:4}},R9=pd("top"),z9=pd("right"),V9=pd("bottom"),P9=pd("left"),K9={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(A,t){return t.filter(ys).map(function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},G9={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(A,t){return t==="break-word"?"break-word":"normal"}},gd=function(A){return{name:"padding-"+A,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},W9=gd("top"),$9=gd("right"),X9=gd("bottom"),Y9=gd("left"),J9={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(A,t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},q9={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(A,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Z9={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(A,t){return t.length===1&&m1(t[0],"none")?[]:yn(t).map(function(e){for(var s={color:Yn.TRANSPARENT,offsetX:ki,offsetY:ki,blur:ki},n=0,l=0;l<e.length;l++){var a=e[l];Kr(a)?(n===0?s.offsetX=a:n===1?s.offsetY=a:s.blur=a,n++):s.color=zr.parse(A,a)}return s})}},t7={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(A,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},e7={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(A,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var e=A7[t.name];if(typeof e>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return e(t.values)}return null}},s7=function(A){var t=A.filter(function(e){return e.type===17}).map(function(e){return e.number});return t.length===6?t:null},i7=function(A){var t=A.filter(function(d){return d.type===17}).map(function(d){return d.number}),e=t[0],s=t[1];t[2],t[3];var n=t[4],l=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var a=t[12],c=t[13];return t[14],t[15],t.length===16?[e,s,n,l,a,c]:null},A7={matrix:s7,matrix3d:i7},Nw={type:16,number:50,flags:Cc},n7=[Nw,Nw],r7={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(A,t){var e=t.filter(hi);return e.length!==2?n7:[e[0],e[1]]}},l7={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(A,t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}},ac;(function(A){A.NORMAL="normal",A.BREAK_ALL="break-all",A.KEEP_ALL="keep-all"})(ac||(ac={}));var o7={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(A,t){switch(t){case"break-all":return ac.BREAK_ALL;case"keep-all":return ac.KEEP_ALL;default:return ac.NORMAL}}},a7={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(A,t){if(t.type===20)return{auto:!0,order:0};if(Xo(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},sb={name:"time",parse:function(A,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},c7={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(A,t){return Xo(t)?t.number:1}},h7={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},u7={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(A,t){return t.filter(ys).map(function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(e){return e!==0})}},d7={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(A,t){var e=[],s=[];return t.forEach(function(n){switch(n.type){case 20:case 0:e.push(n.value);break;case 17:e.push(n.number.toString());break;case 4:s.push(e.join(" ")),e.length=0;break}}),e.length&&s.push(e.join(" ")),s.map(function(n){return n.indexOf(" ")===-1?n:"'"+n+"'"})}},f7={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},p7={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(A,t){return Xo(t)?t.number:ys(t)&&t.value==="bold"?700:400}},g7={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(A,t){return t.filter(ys).map(function(e){return e.value})}},m7={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(A,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},mi=function(A,t){return(A&t)!==0},_7={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(A,t){if(t.length===0)return[];var e=t[0];return e.type===20&&e.value==="none"?[]:t}},v7={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(A,t){if(t.length===0)return null;var e=t[0];if(e.type===20&&e.value==="none")return null;for(var s=[],n=t.filter(jC),l=0;l<n.length;l++){var a=n[l],c=n[l+1];if(a.type===20){var d=c&&Xo(c)?c.number:1;s.push({counter:a.value,increment:d})}}return s}},B7={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(A,t){if(t.length===0)return[];for(var e=[],s=t.filter(jC),n=0;n<s.length;n++){var l=s[n],a=s[n+1];if(ys(l)&&l.value!=="none"){var c=a&&Xo(a)?a.number:0;e.push({counter:l.value,reset:c})}}return e}},w7={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(A,t){return t.filter(bc).map(function(e){return sb.parse(A,e)})}},y7={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(A,t){if(t.length===0)return null;var e=t[0];if(e.type===20&&e.value==="none")return null;var s=[],n=t.filter($H);if(n.length%2!==0)return null;for(var l=0;l<n.length;l+=2){var a=n[l].value,c=n[l+1].value;s.push({open:a,close:c})}return s}},Lw=function(A,t,e){if(!A)return"";var s=A[Math.min(t,A.length-1)];return s?e?s.open:s.close:""},C7={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(A,t){return t.length===1&&m1(t[0],"none")?[]:yn(t).map(function(e){for(var s={color:255,offsetX:ki,offsetY:ki,blur:ki,spread:ki,inset:!1},n=0,l=0;l<e.length;l++){var a=e[l];m1(a,"inset")?s.inset=!0:Kr(a)?(n===0?s.offsetX=a:n===1?s.offsetY=a:n===2?s.blur=a:s.spread=a,n++):s.color=zr.parse(A,a)}return s})}},b7={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(A,t){var e=[0,1,2],s=[];return t.filter(ys).forEach(function(n){switch(n.value){case"stroke":s.push(1);break;case"fill":s.push(0);break;case"markers":s.push(2);break}}),e.forEach(function(n){s.indexOf(n)===-1&&s.push(n)}),s}},x7={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},S7={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(A,t){return bc(t)?t.number:0}},E7=(function(){function A(t,e){var s,n;this.animationDuration=$t(t,w7,e.animationDuration),this.backgroundClip=$t(t,JH,e.backgroundClip),this.backgroundColor=$t(t,qH,e.backgroundColor),this.backgroundImage=$t(t,o9,e.backgroundImage),this.backgroundOrigin=$t(t,a9,e.backgroundOrigin),this.backgroundPosition=$t(t,c9,e.backgroundPosition),this.backgroundRepeat=$t(t,h9,e.backgroundRepeat),this.backgroundSize=$t(t,d9,e.backgroundSize),this.borderTopColor=$t(t,p9,e.borderTopColor),this.borderRightColor=$t(t,g9,e.borderRightColor),this.borderBottomColor=$t(t,m9,e.borderBottomColor),this.borderLeftColor=$t(t,_9,e.borderLeftColor),this.borderTopLeftRadius=$t(t,v9,e.borderTopLeftRadius),this.borderTopRightRadius=$t(t,B9,e.borderTopRightRadius),this.borderBottomRightRadius=$t(t,w9,e.borderBottomRightRadius),this.borderBottomLeftRadius=$t(t,y9,e.borderBottomLeftRadius),this.borderTopStyle=$t(t,C9,e.borderTopStyle),this.borderRightStyle=$t(t,b9,e.borderRightStyle),this.borderBottomStyle=$t(t,x9,e.borderBottomStyle),this.borderLeftStyle=$t(t,S9,e.borderLeftStyle),this.borderTopWidth=$t(t,E9,e.borderTopWidth),this.borderRightWidth=$t(t,T9,e.borderRightWidth),this.borderBottomWidth=$t(t,Q9,e.borderBottomWidth),this.borderLeftWidth=$t(t,F9,e.borderLeftWidth),this.boxShadow=$t(t,C7,e.boxShadow),this.color=$t(t,U9,e.color),this.direction=$t(t,M9,e.direction),this.display=$t(t,I9,e.display),this.float=$t(t,L9,e.cssFloat),this.fontFamily=$t(t,d7,e.fontFamily),this.fontSize=$t(t,f7,e.fontSize),this.fontStyle=$t(t,m7,e.fontStyle),this.fontVariant=$t(t,g7,e.fontVariant),this.fontWeight=$t(t,p7,e.fontWeight),this.letterSpacing=$t(t,H9,e.letterSpacing),this.lineBreak=$t(t,D9,e.lineBreak),this.lineHeight=$t(t,k9,e.lineHeight),this.listStyleImage=$t(t,j9,e.listStyleImage),this.listStylePosition=$t(t,O9,e.listStylePosition),this.listStyleType=$t(t,_1,e.listStyleType),this.marginTop=$t(t,R9,e.marginTop),this.marginRight=$t(t,z9,e.marginRight),this.marginBottom=$t(t,V9,e.marginBottom),this.marginLeft=$t(t,P9,e.marginLeft),this.opacity=$t(t,c7,e.opacity);var l=$t(t,K9,e.overflow);this.overflowX=l[0],this.overflowY=l[l.length>1?1:0],this.overflowWrap=$t(t,G9,e.overflowWrap),this.paddingTop=$t(t,W9,e.paddingTop),this.paddingRight=$t(t,$9,e.paddingRight),this.paddingBottom=$t(t,X9,e.paddingBottom),this.paddingLeft=$t(t,Y9,e.paddingLeft),this.paintOrder=$t(t,b7,e.paintOrder),this.position=$t(t,q9,e.position),this.textAlign=$t(t,J9,e.textAlign),this.textDecorationColor=$t(t,h7,(s=e.textDecorationColor)!==null&&s!==void 0?s:e.color),this.textDecorationLine=$t(t,u7,(n=e.textDecorationLine)!==null&&n!==void 0?n:e.textDecoration),this.textShadow=$t(t,Z9,e.textShadow),this.textTransform=$t(t,t7,e.textTransform),this.transform=$t(t,e7,e.transform),this.transformOrigin=$t(t,r7,e.transformOrigin),this.visibility=$t(t,l7,e.visibility),this.webkitTextStrokeColor=$t(t,x7,e.webkitTextStrokeColor),this.webkitTextStrokeWidth=$t(t,S7,e.webkitTextStrokeWidth),this.wordBreak=$t(t,o7,e.wordBreak),this.zIndex=$t(t,a7,e.zIndex)}return A.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},A.prototype.isTransparent=function(){return Vr(this.backgroundColor)},A.prototype.isTransformed=function(){return this.transform!==null},A.prototype.isPositioned=function(){return this.position!==0},A.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},A.prototype.isFloating=function(){return this.float!==0},A.prototype.isInlineLevel=function(){return mi(this.display,4)||mi(this.display,33554432)||mi(this.display,268435456)||mi(this.display,536870912)||mi(this.display,67108864)||mi(this.display,134217728)},A})(),T7=(function(){function A(t,e){this.content=$t(t,_7,e.content),this.quotes=$t(t,y7,e.quotes)}return A})(),Hw=(function(){function A(t,e){this.counterIncrement=$t(t,v7,e.counterIncrement),this.counterReset=$t(t,B7,e.counterReset)}return A})(),$t=function(A,t,e){var s=new DC,n=e!==null&&typeof e<"u"?e.toString():t.initialValue;s.write(n);var l=new kC(s.read());switch(t.type){case 2:var a=l.parseComponentValue();return t.parse(A,ys(a)?a.value:t.initialValue);case 0:return t.parse(A,l.parseComponentValue());case 1:return t.parse(A,l.parseComponentValues());case 4:return l.parseComponentValue();case 3:switch(t.format){case"angle":return ad.parse(A,l.parseComponentValue());case"color":return zr.parse(A,l.parseComponentValue());case"image":return W1.parse(A,l.parseComponentValue());case"length":var c=l.parseComponentValue();return Kr(c)?c:ki;case"length-percentage":var d=l.parseComponentValue();return hi(d)?d:ki;case"time":return sb.parse(A,l.parseComponentValue())}break}},Q7="data-html2canvas-debug",F7=function(A){var t=A.getAttribute(Q7);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},v1=function(A,t){var e=F7(A);return e===1||t===e},Cn=(function(){function A(t,e){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,v1(e,3))debugger;this.styles=new E7(t,window.getComputedStyle(e,null)),y1(e)&&(this.styles.animationDuration.some(function(s){return s>0})&&(e.style.animationDuration="0s"),this.styles.transform!==null&&(e.style.transform="none")),this.bounds=ld(this.context,e),v1(e,4)&&(this.flags|=16)}return A})(),U7="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Dw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ja=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var hu=0;hu<Dw.length;hu++)Ja[Dw.charCodeAt(hu)]=hu;var M7=function(A){var t=A.length*.75,e=A.length,s,n=0,l,a,c,d;A[A.length-1]==="="&&(t--,A[A.length-2]==="="&&t--);var f=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),p=Array.isArray(f)?f:new Uint8Array(f);for(s=0;s<e;s+=4)l=Ja[A.charCodeAt(s)],a=Ja[A.charCodeAt(s+1)],c=Ja[A.charCodeAt(s+2)],d=Ja[A.charCodeAt(s+3)],p[n++]=l<<2|a>>4,p[n++]=(a&15)<<4|c>>2,p[n++]=(c&3)<<6|d&63;return f},I7=function(A){for(var t=A.length,e=[],s=0;s<t;s+=2)e.push(A[s+1]<<8|A[s]);return e},N7=function(A){for(var t=A.length,e=[],s=0;s<t;s+=4)e.push(A[s+3]<<24|A[s+2]<<16|A[s+1]<<8|A[s]);return e},Tl=5,$1=11,Tg=2,L7=$1-Tl,ib=65536>>Tl,H7=1<<Tl,Qg=H7-1,D7=1024>>Tl,k7=ib+D7,j7=k7,O7=32,R7=j7+O7,z7=65536>>$1,V7=1<<L7,P7=V7-1,kw=function(A,t,e){return A.slice?A.slice(t,e):new Uint16Array(Array.prototype.slice.call(A,t,e))},K7=function(A,t,e){return A.slice?A.slice(t,e):new Uint32Array(Array.prototype.slice.call(A,t,e))},G7=function(A,t){var e=M7(A),s=Array.isArray(e)?N7(e):new Uint32Array(e),n=Array.isArray(e)?I7(e):new Uint16Array(e),l=24,a=kw(n,l/2,s[4]/2),c=s[5]===2?kw(n,(l+s[4])/2):K7(s,Math.ceil((l+s[4])/4));return new W7(s[0],s[1],s[2],s[3],a,c)},W7=(function(){function A(t,e,s,n,l,a){this.initialValue=t,this.errorValue=e,this.highStart=s,this.highValueIndex=n,this.index=l,this.data=a}return A.prototype.get=function(t){var e;if(t>=0){if(t<55296||t>56319&&t<=65535)return e=this.index[t>>Tl],e=(e<<Tg)+(t&Qg),this.data[e];if(t<=65535)return e=this.index[ib+(t-55296>>Tl)],e=(e<<Tg)+(t&Qg),this.data[e];if(t<this.highStart)return e=R7-z7+(t>>$1),e=this.index[e],e+=t>>Tl&P7,e=this.index[e],e=(e<<Tg)+(t&Qg),this.data[e];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},A})(),jw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$7=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var uu=0;uu<jw.length;uu++)$7[jw.charCodeAt(uu)]=uu;var X7=1,Fg=2,Ug=3,Ow=4,Rw=5,Y7=7,zw=8,Mg=9,Ig=10,Vw=11,Pw=12,Kw=13,Gw=14,Ng=15,J7=function(A){for(var t=[],e=0,s=A.length;e<s;){var n=A.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){var l=A.charCodeAt(e++);(l&64512)===56320?t.push(((n&1023)<<10)+(l&1023)+65536):(t.push(n),e--)}else t.push(n)}return t},q7=function(){for(var A=[],t=0;t<arguments.length;t++)A[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,A);var e=A.length;if(!e)return"";for(var s=[],n=-1,l="";++n<e;){var a=A[n];a<=65535?s.push(a):(a-=65536,s.push((a>>10)+55296,a%1024+56320)),(n+1===e||s.length>16384)&&(l+=String.fromCharCode.apply(String,s),s.length=0)}return l},Z7=G7(U7),jA="",Lg="",tD=function(A){return Z7.get(A)},eD=function(A,t,e){var s=e-2,n=t[s],l=t[e-1],a=t[e];if(l===Fg&&a===Ug)return jA;if(l===Fg||l===Ug||l===Ow||a===Fg||a===Ug||a===Ow)return Lg;if(l===zw&&[zw,Mg,Vw,Pw].indexOf(a)!==-1||(l===Vw||l===Mg)&&(a===Mg||a===Ig)||(l===Pw||l===Ig)&&a===Ig||a===Kw||a===Rw||a===Y7||l===X7)return jA;if(l===Kw&&a===Gw){for(;n===Rw;)n=t[--s];if(n===Gw)return jA}if(l===Ng&&a===Ng){for(var c=0;n===Ng;)c++,n=t[--s];if(c%2===0)return jA}return Lg},sD=function(A){var t=J7(A),e=t.length,s=0,n=0,l=t.map(tD);return{next:function(){if(s>=e)return{done:!0,value:null};for(var a=jA;s<e&&(a=eD(t,l,++s))===jA;);if(a!==jA||s===e){var c=q7.apply(null,t.slice(n,s));return n=s,{value:c,done:!1}}return{done:!0,value:null}}}},iD=function(A){for(var t=sD(A),e=[],s;!(s=t.next()).done;)s.value&&e.push(s.value.slice());return e},AD=function(A){var t=123;if(A.createRange){var e=A.createRange();if(e.getBoundingClientRect){var s=A.createElement("boundtest");s.style.height=t+"px",s.style.display="block",A.body.appendChild(s),e.selectNode(s);var n=e.getBoundingClientRect(),l=Math.round(n.height);if(A.body.removeChild(s),l===t)return!0}}return!1},nD=function(A){var t=A.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",A.body.appendChild(t);var e=A.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var s=t.firstChild,n=od(s.data).map(function(d){return si(d)}),l=0,a={},c=n.every(function(d,f){e.setStart(s,l),e.setEnd(s,l+d.length);var p=e.getBoundingClientRect();l+=d.length;var m=p.x>a.x||p.y>a.y;return a=p,f===0?!0:m});return A.body.removeChild(t),c},rD=function(){return typeof new Image().crossOrigin<"u"},lD=function(){return typeof new XMLHttpRequest().responseType=="string"},oD=function(A){var t=new Image,e=A.createElement("canvas"),s=e.getContext("2d");if(!s)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{s.drawImage(t,0,0),e.toDataURL()}catch{return!1}return!0},Ww=function(A){return A[0]===0&&A[1]===255&&A[2]===0&&A[3]===255},aD=function(A){var t=A.createElement("canvas"),e=100;t.width=e,t.height=e;var s=t.getContext("2d");if(!s)return Promise.reject(!1);s.fillStyle="rgb(0, 255, 0)",s.fillRect(0,0,e,e);var n=new Image,l=t.toDataURL();n.src=l;var a=B1(e,e,0,0,n);return s.fillStyle="red",s.fillRect(0,0,e,e),$w(a).then(function(c){s.drawImage(c,0,0);var d=s.getImageData(0,0,e,e).data;s.fillStyle="red",s.fillRect(0,0,e,e);var f=A.createElement("div");return f.style.backgroundImage="url("+l+")",f.style.height=e+"px",Ww(d)?$w(B1(e,e,0,0,f)):Promise.reject(!1)}).then(function(c){return s.drawImage(c,0,0),Ww(s.getImageData(0,0,e,e).data)}).catch(function(){return!1})},B1=function(A,t,e,s,n){var l="http://www.w3.org/2000/svg",a=document.createElementNS(l,"svg"),c=document.createElementNS(l,"foreignObject");return a.setAttributeNS(null,"width",A.toString()),a.setAttributeNS(null,"height",t.toString()),c.setAttributeNS(null,"width","100%"),c.setAttributeNS(null,"height","100%"),c.setAttributeNS(null,"x",e.toString()),c.setAttributeNS(null,"y",s.toString()),c.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(c),c.appendChild(n),a},$w=function(A){return new Promise(function(t,e){var s=new Image;s.onload=function(){return t(s)},s.onerror=e,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(A))})},Li={get SUPPORT_RANGE_BOUNDS(){var A=AD(document);return Object.defineProperty(Li,"SUPPORT_RANGE_BOUNDS",{value:A}),A},get SUPPORT_WORD_BREAKING(){var A=Li.SUPPORT_RANGE_BOUNDS&&nD(document);return Object.defineProperty(Li,"SUPPORT_WORD_BREAKING",{value:A}),A},get SUPPORT_SVG_DRAWING(){var A=oD(document);return Object.defineProperty(Li,"SUPPORT_SVG_DRAWING",{value:A}),A},get SUPPORT_FOREIGNOBJECT_DRAWING(){var A=typeof Array.from=="function"&&typeof window.fetch=="function"?aD(document):Promise.resolve(!1);return Object.defineProperty(Li,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:A}),A},get SUPPORT_CORS_IMAGES(){var A=rD();return Object.defineProperty(Li,"SUPPORT_CORS_IMAGES",{value:A}),A},get SUPPORT_RESPONSE_TYPE(){var A=lD();return Object.defineProperty(Li,"SUPPORT_RESPONSE_TYPE",{value:A}),A},get SUPPORT_CORS_XHR(){var A="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Li,"SUPPORT_CORS_XHR",{value:A}),A},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var A=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Li,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:A}),A}},cc=(function(){function A(t,e){this.text=t,this.bounds=e}return A})(),cD=function(A,t,e,s){var n=dD(t,e),l=[],a=0;return n.forEach(function(c){if(e.textDecorationLine.length||c.trim().length>0)if(Li.SUPPORT_RANGE_BOUNDS){var d=Xw(s,a,c.length).getClientRects();if(d.length>1){var f=X1(c),p=0;f.forEach(function(v){l.push(new cc(v,Jn.fromDOMRectList(A,Xw(s,p+a,v.length).getClientRects()))),p+=v.length})}else l.push(new cc(c,Jn.fromDOMRectList(A,d)))}else{var m=s.splitText(c.length);l.push(new cc(c,hD(A,s))),s=m}else Li.SUPPORT_RANGE_BOUNDS||(s=s.splitText(c.length));a+=c.length}),l},hD=function(A,t){var e=t.ownerDocument;if(e){var s=e.createElement("html2canvaswrapper");s.appendChild(t.cloneNode(!0));var n=t.parentNode;if(n){n.replaceChild(s,t);var l=ld(A,s);return s.firstChild&&n.replaceChild(s.firstChild,s),l}}return Jn.EMPTY},Xw=function(A,t,e){var s=A.ownerDocument;if(!s)throw new Error("Node has no owner document");var n=s.createRange();return n.setStart(A,t),n.setEnd(A,t+e),n},X1=function(A){if(Li.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(A)).map(function(e){return e.segment})}return iD(A)},uD=function(A,t){if(Li.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(e.segment(A)).map(function(s){return s.segment})}return pD(A,t)},dD=function(A,t){return t.letterSpacing!==0?X1(A):uD(A,t)},fD=[32,160,4961,65792,65793,4153,4241],pD=function(A,t){for(var e=zL(A,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),s=[],n,l=function(){if(n.value){var a=n.value.slice(),c=od(a),d="";c.forEach(function(f){fD.indexOf(f)===-1?d+=si(f):(d.length&&s.push(d),s.push(si(f)),d="")}),d.length&&s.push(d)}};!(n=e.next()).done;)l();return s},gD=(function(){function A(t,e,s){this.text=mD(e.data,s.textTransform),this.textBounds=cD(t,this.text,s,e)}return A})(),mD=function(A,t){switch(t){case 1:return A.toLowerCase();case 3:return A.replace(_D,vD);case 2:return A.toUpperCase();default:return A}},_D=/(^|\s|:|-|\(|\))([a-z])/g,vD=function(A,t,e){return A.length>0?t+e.toUpperCase():A},Ab=(function(A){sn(t,A);function t(e,s){var n=A.call(this,e,s)||this;return n.src=s.currentSrc||s.src,n.intrinsicWidth=s.naturalWidth,n.intrinsicHeight=s.naturalHeight,n.context.cache.addImage(n.src),n}return t})(Cn),nb=(function(A){sn(t,A);function t(e,s){var n=A.call(this,e,s)||this;return n.canvas=s,n.intrinsicWidth=s.width,n.intrinsicHeight=s.height,n}return t})(Cn),rb=(function(A){sn(t,A);function t(e,s){var n=A.call(this,e,s)||this,l=new XMLSerializer,a=ld(e,s);return s.setAttribute("width",a.width+"px"),s.setAttribute("height",a.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(l.serializeToString(s)),n.intrinsicWidth=s.width.baseVal.value,n.intrinsicHeight=s.height.baseVal.value,n.context.cache.addImage(n.svg),n}return t})(Cn),lb=(function(A){sn(t,A);function t(e,s){var n=A.call(this,e,s)||this;return n.value=s.value,n}return t})(Cn),w1=(function(A){sn(t,A);function t(e,s){var n=A.call(this,e,s)||this;return n.start=s.start,n.reversed=typeof s.reversed=="boolean"&&s.reversed===!0,n}return t})(Cn),BD=[{type:15,flags:0,unit:"px",number:3}],wD=[{type:16,flags:0,number:50}],yD=function(A){return A.width>A.height?new Jn(A.left+(A.width-A.height)/2,A.top,A.height,A.height):A.width<A.height?new Jn(A.left,A.top+(A.height-A.width)/2,A.width,A.width):A},CD=function(A){var t=A.type===bD?new Array(A.value.length+1).join(""):A.value;return t.length===0?A.placeholder||"":t},Vu="checkbox",Pu="radio",bD="password",Yw=707406591,Y1=(function(A){sn(t,A);function t(e,s){var n=A.call(this,e,s)||this;switch(n.type=s.type.toLowerCase(),n.checked=s.checked,n.value=CD(s),(n.type===Vu||n.type===Pu)&&(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=yD(n.bounds)),n.type){case Vu:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=BD;break;case Pu:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=wD;break}return n}return t})(Cn),ob=(function(A){sn(t,A);function t(e,s){var n=A.call(this,e,s)||this,l=s.options[s.selectedIndex||0];return n.value=l&&l.text||"",n}return t})(Cn),ab=(function(A){sn(t,A);function t(e,s){var n=A.call(this,e,s)||this;return n.value=s.value,n}return t})(Cn),cb=(function(A){sn(t,A);function t(e,s){var n=A.call(this,e,s)||this;n.src=s.src,n.width=parseInt(s.width,10)||0,n.height=parseInt(s.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(s.contentWindow&&s.contentWindow.document&&s.contentWindow.document.documentElement){n.tree=ub(e,s.contentWindow.document.documentElement);var l=s.contentWindow.document.documentElement?oc(e,getComputedStyle(s.contentWindow.document.documentElement).backgroundColor):Yn.TRANSPARENT,a=s.contentWindow.document.body?oc(e,getComputedStyle(s.contentWindow.document.body).backgroundColor):Yn.TRANSPARENT;n.backgroundColor=Vr(l)?Vr(a)?n.styles.backgroundColor:a:l}}catch{}return n}return t})(Cn),xD=["OL","UL","MENU"],Fu=function(A,t,e,s){for(var n=t.firstChild,l=void 0;n;n=l)if(l=n.nextSibling,db(n)&&n.data.trim().length>0)e.textNodes.push(new gD(A,n,e.styles));else if(Do(n))if(mb(n)&&n.assignedNodes)n.assignedNodes().forEach(function(c){return Fu(A,c,e,s)});else{var a=hb(A,n);a.styles.isVisible()&&(SD(n,a,s)?a.flags|=4:ED(a.styles)&&(a.flags|=2),xD.indexOf(n.tagName)!==-1&&(a.flags|=8),e.elements.push(a),n.slot,n.shadowRoot?Fu(A,n.shadowRoot,a,s):!Ku(n)&&!fb(n)&&!Gu(n)&&Fu(A,n,a,s))}},hb=function(A,t){return C1(t)?new Ab(A,t):pb(t)?new nb(A,t):fb(t)?new rb(A,t):TD(t)?new lb(A,t):QD(t)?new w1(A,t):FD(t)?new Y1(A,t):Gu(t)?new ob(A,t):Ku(t)?new ab(A,t):gb(t)?new cb(A,t):new Cn(A,t)},ub=function(A,t){var e=hb(A,t);return e.flags|=4,Fu(A,t,e,e),e},SD=function(A,t,e){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||J1(A)&&e.styles.isTransparent()},ED=function(A){return A.isPositioned()||A.isFloating()},db=function(A){return A.nodeType===Node.TEXT_NODE},Do=function(A){return A.nodeType===Node.ELEMENT_NODE},y1=function(A){return Do(A)&&typeof A.style<"u"&&!Uu(A)},Uu=function(A){return typeof A.className=="object"},TD=function(A){return A.tagName==="LI"},QD=function(A){return A.tagName==="OL"},FD=function(A){return A.tagName==="INPUT"},UD=function(A){return A.tagName==="HTML"},fb=function(A){return A.tagName==="svg"},J1=function(A){return A.tagName==="BODY"},pb=function(A){return A.tagName==="CANVAS"},Jw=function(A){return A.tagName==="VIDEO"},C1=function(A){return A.tagName==="IMG"},gb=function(A){return A.tagName==="IFRAME"},qw=function(A){return A.tagName==="STYLE"},MD=function(A){return A.tagName==="SCRIPT"},Ku=function(A){return A.tagName==="TEXTAREA"},Gu=function(A){return A.tagName==="SELECT"},mb=function(A){return A.tagName==="SLOT"},Zw=function(A){return A.tagName.indexOf("-")>0},ID=(function(){function A(){this.counters={}}return A.prototype.getCounterValue=function(t){var e=this.counters[t];return e&&e.length?e[e.length-1]:1},A.prototype.getCounterValues=function(t){var e=this.counters[t];return e||[]},A.prototype.pop=function(t){var e=this;t.forEach(function(s){return e.counters[s].pop()})},A.prototype.parse=function(t){var e=this,s=t.counterIncrement,n=t.counterReset,l=!0;s!==null&&s.forEach(function(c){var d=e.counters[c.counter];d&&c.increment!==0&&(l=!1,d.length||d.push(1),d[Math.max(0,d.length-1)]+=c.increment)});var a=[];return l&&n.forEach(function(c){var d=e.counters[c.counter];a.push(c.counter),d||(d=e.counters[c.counter]=[]),d.push(c.reset)}),a},A})(),t2={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},e2={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ND={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},LD={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},xo=function(A,t,e,s,n,l){return A<t||A>e?_c(A,n,l.length>0):s.integers.reduce(function(a,c,d){for(;A>=c;)A-=c,a+=s.values[d];return a},"")+l},_b=function(A,t,e,s){var n="";do e||A--,n=s(A)+n,A/=t;while(A*t>=t);return n},ei=function(A,t,e,s,n){var l=e-t+1;return(A<0?"-":"")+(_b(Math.abs(A),l,s,function(a){return si(Math.floor(a%l)+t)})+n)},_l=function(A,t,e){e===void 0&&(e=". ");var s=t.length;return _b(Math.abs(A),s,!1,function(n){return t[Math.floor(n%s)]})+e},Qo=1,Mr=2,Ir=4,qa=8,Kn=function(A,t,e,s,n,l){if(A<-9999||A>9999)return _c(A,4,n.length>0);var a=Math.abs(A),c=n;if(a===0)return t[0]+c;for(var d=0;a>0&&d<=4;d++){var f=a%10;f===0&&mi(l,Qo)&&c!==""?c=t[f]+c:f>1||f===1&&d===0||f===1&&d===1&&mi(l,Mr)||f===1&&d===1&&mi(l,Ir)&&A>100||f===1&&d>1&&mi(l,qa)?c=t[f]+(d>0?e[d-1]:"")+c:f===1&&d>0&&(c=e[d-1]+c),a=Math.floor(a/10)}return(A<0?s:"")+c},s2="",i2="",A2="",Hg="",_c=function(A,t,e){var s=e?". ":"",n=e?"":"",l=e?", ":"",a=e?" ":"";switch(t){case 0:return""+a;case 1:return""+a;case 2:return""+a;case 5:var c=ei(A,48,57,!0,s);return c.length<4?"0"+c:c;case 4:return _l(A,"",n);case 6:return xo(A,1,3999,t2,3,s).toLowerCase();case 7:return xo(A,1,3999,t2,3,s);case 8:return ei(A,945,969,!1,s);case 9:return ei(A,97,122,!1,s);case 10:return ei(A,65,90,!1,s);case 11:return ei(A,1632,1641,!0,s);case 12:case 49:return xo(A,1,9999,e2,3,s);case 35:return xo(A,1,9999,e2,3,s).toLowerCase();case 13:return ei(A,2534,2543,!0,s);case 14:case 30:return ei(A,6112,6121,!0,s);case 15:return _l(A,"",n);case 16:return _l(A,"",n);case 17:case 48:return Kn(A,"",s2,"",n,Mr|Ir|qa);case 47:return Kn(A,"",i2,"",n,Qo|Mr|Ir|qa);case 42:return Kn(A,"",s2,"",n,Mr|Ir|qa);case 41:return Kn(A,"",i2,"",n,Qo|Mr|Ir|qa);case 26:return Kn(A,"","",A2,n,0);case 25:return Kn(A,"","",A2,n,Qo|Mr|Ir);case 31:return Kn(A,"","",Hg,l,Qo|Mr|Ir);case 33:return Kn(A,"","",Hg,l,0);case 32:return Kn(A,"","",Hg,l,Qo|Mr|Ir);case 18:return ei(A,2406,2415,!0,s);case 20:return xo(A,1,19999,LD,3,s);case 21:return ei(A,2790,2799,!0,s);case 22:return ei(A,2662,2671,!0,s);case 22:return xo(A,1,10999,ND,3,s);case 23:return _l(A,"");case 24:return _l(A,"");case 27:return ei(A,3302,3311,!0,s);case 28:return _l(A,"",n);case 29:return _l(A,"",n);case 34:return ei(A,3792,3801,!0,s);case 37:return ei(A,6160,6169,!0,s);case 38:return ei(A,4160,4169,!0,s);case 39:return ei(A,2918,2927,!0,s);case 40:return ei(A,1776,1785,!0,s);case 43:return ei(A,3046,3055,!0,s);case 44:return ei(A,3174,3183,!0,s);case 45:return ei(A,3664,3673,!0,s);case 46:return ei(A,3872,3881,!0,s);default:return ei(A,48,57,!0,s)}},vb="data-html2canvas-ignore",n2=(function(){function A(t,e,s){if(this.context=t,this.options=s,this.scrolledElements=[],this.referenceElement=e,this.counters=new ID,this.quoteDepth=0,!e.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(e.ownerDocument.documentElement,!1)}return A.prototype.toIFrame=function(t,e){var s=this,n=HD(t,e);if(!n.contentWindow)return Promise.reject("Unable to find iframe window");var l=t.defaultView.pageXOffset,a=t.defaultView.pageYOffset,c=n.contentWindow,d=c.document,f=jD(n).then(function(){return iA(s,void 0,void 0,function(){var p,m;return Gi(this,function(v){switch(v.label){case 0:return this.scrolledElements.forEach(VD),c&&(c.scrollTo(e.left,e.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(c.scrollY!==e.top||c.scrollX!==e.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(c.scrollX-e.left,c.scrollY-e.top,0,0))),p=this.options.onclone,m=this.clonedReferenceElement,typeof m>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:d.fonts&&d.fonts.ready?[4,d.fonts.ready]:[3,2];case 1:v.sent(),v.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,kD(d)]:[3,4];case 3:v.sent(),v.label=4;case 4:return typeof p=="function"?[2,Promise.resolve().then(function(){return p(d,m)}).then(function(){return n})]:[2,n]}})})});return d.open(),d.write(RD(document.doctype)+"<html></html>"),zD(this.referenceElement.ownerDocument,l,a),d.replaceChild(d.adoptNode(this.documentElement),d.documentElement),d.close(),f},A.prototype.createElementClone=function(t){if(v1(t,2))debugger;if(pb(t))return this.createCanvasClone(t);if(Jw(t))return this.createVideoClone(t);if(qw(t))return this.createStyleClone(t);var e=t.cloneNode(!1);return C1(e)&&(C1(t)&&t.currentSrc&&t.currentSrc!==t.src&&(e.src=t.currentSrc,e.srcset=""),e.loading==="lazy"&&(e.loading="eager")),Zw(e)?this.createCustomElementClone(e):e},A.prototype.createCustomElementClone=function(t){var e=document.createElement("html2canvascustomelement");return Dg(t.style,e),e},A.prototype.createStyleClone=function(t){try{var e=t.sheet;if(e&&e.cssRules){var s=[].slice.call(e.cssRules,0).reduce(function(l,a){return a&&typeof a.cssText=="string"?l+a.cssText:l},""),n=t.cloneNode(!1);return n.textContent=s,n}}catch(l){if(this.context.logger.error("Unable to access cssRules property",l),l.name!=="SecurityError")throw l}return t.cloneNode(!1)},A.prototype.createCanvasClone=function(t){var e;if(this.options.inlineImages&&t.ownerDocument){var s=t.ownerDocument.createElement("img");try{return s.src=t.toDataURL(),s}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var n=t.cloneNode(!1);try{n.width=t.width,n.height=t.height;var l=t.getContext("2d"),a=n.getContext("2d");if(a)if(!this.options.allowTaint&&l)a.putImageData(l.getImageData(0,0,t.width,t.height),0,0);else{var c=(e=t.getContext("webgl2"))!==null&&e!==void 0?e:t.getContext("webgl");if(c){var d=c.getContextAttributes();d?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}a.drawImage(t,0,0)}return n}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return n},A.prototype.createVideoClone=function(t){var e=t.ownerDocument.createElement("canvas");e.width=t.offsetWidth,e.height=t.offsetHeight;var s=e.getContext("2d");try{return s&&(s.drawImage(t,0,0,e.width,e.height),this.options.allowTaint||s.getImageData(0,0,e.width,e.height)),e}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var n=t.ownerDocument.createElement("canvas");return n.width=t.offsetWidth,n.height=t.offsetHeight,n},A.prototype.appendChildNode=function(t,e,s){(!Do(e)||!MD(e)&&!e.hasAttribute(vb)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(e)))&&(!this.options.copyStyles||!Do(e)||!qw(e))&&t.appendChild(this.cloneNode(e,s))},A.prototype.cloneChildNodes=function(t,e,s){for(var n=this,l=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;l;l=l.nextSibling)if(Do(l)&&mb(l)&&typeof l.assignedNodes=="function"){var a=l.assignedNodes();a.length&&a.forEach(function(c){return n.appendChildNode(e,c,s)})}else this.appendChildNode(e,l,s)},A.prototype.cloneNode=function(t,e){if(db(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var s=t.ownerDocument.defaultView;if(s&&Do(t)&&(y1(t)||Uu(t))){var n=this.createElementClone(t);n.style.transitionProperty="none";var l=s.getComputedStyle(t),a=s.getComputedStyle(t,":before"),c=s.getComputedStyle(t,":after");this.referenceElement===t&&y1(n)&&(this.clonedReferenceElement=n),J1(n)&&GD(n);var d=this.counters.parse(new Hw(this.context,l)),f=this.resolvePseudoContent(t,n,a,hc.BEFORE);Zw(t)&&(e=!0),Jw(t)||this.cloneChildNodes(t,n,e),f&&n.insertBefore(f,n.firstChild);var p=this.resolvePseudoContent(t,n,c,hc.AFTER);return p&&n.appendChild(p),this.counters.pop(d),(l&&(this.options.copyStyles||Uu(t))&&!gb(t)||e)&&Dg(l,n),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([n,t.scrollLeft,t.scrollTop]),(Ku(t)||Gu(t))&&(Ku(n)||Gu(n))&&(n.value=t.value),n}return t.cloneNode(!1)},A.prototype.resolvePseudoContent=function(t,e,s,n){var l=this;if(s){var a=s.content,c=e.ownerDocument;if(!(!c||!a||a==="none"||a==="-moz-alt-content"||s.display==="none")){this.counters.parse(new Hw(this.context,s));var d=new T7(this.context,s),f=c.createElement("html2canvaspseudoelement");Dg(s,f),d.content.forEach(function(m){if(m.type===0)f.appendChild(c.createTextNode(m.value));else if(m.type===22){var v=c.createElement("img");v.src=m.value,v.style.opacity="1",f.appendChild(v)}else if(m.type===18){if(m.name==="attr"){var w=m.values.filter(ys);w.length&&f.appendChild(c.createTextNode(t.getAttribute(w[0].value)||""))}else if(m.name==="counter"){var y=m.values.filter(Go),b=y[0],S=y[1];if(b&&ys(b)){var x=l.counters.getCounterValue(b.value),U=S&&ys(S)?_1.parse(l.context,S.value):3;f.appendChild(c.createTextNode(_c(x,U,!1)))}}else if(m.name==="counters"){var M=m.values.filter(Go),b=M[0],N=M[1],S=M[2];if(b&&ys(b)){var I=l.counters.getCounterValues(b.value),R=S&&ys(S)?_1.parse(l.context,S.value):3,D=N&&N.type===0?N.value:"",V=I.map(function(At){return _c(At,R,!1)}).join(D);f.appendChild(c.createTextNode(V))}}}else if(m.type===20)switch(m.value){case"open-quote":f.appendChild(c.createTextNode(Lw(d.quotes,l.quoteDepth++,!0)));break;case"close-quote":f.appendChild(c.createTextNode(Lw(d.quotes,--l.quoteDepth,!1)));break;default:f.appendChild(c.createTextNode(m.value))}}),f.className=b1+" "+x1;var p=n===hc.BEFORE?" "+b1:" "+x1;return Uu(e)?e.className.baseValue+=p:e.className+=p,f}}},A.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},A})(),hc;(function(A){A[A.BEFORE=0]="BEFORE",A[A.AFTER=1]="AFTER"})(hc||(hc={}));var HD=function(A,t){var e=A.createElement("iframe");return e.className="html2canvas-container",e.style.visibility="hidden",e.style.position="fixed",e.style.left="-10000px",e.style.top="0px",e.style.border="0",e.width=t.width.toString(),e.height=t.height.toString(),e.scrolling="no",e.setAttribute(vb,"true"),A.body.appendChild(e),e},DD=function(A){return new Promise(function(t){if(A.complete){t();return}if(!A.src){t();return}A.onload=t,A.onerror=t})},kD=function(A){return Promise.all([].slice.call(A.images,0).map(DD))},jD=function(A){return new Promise(function(t,e){var s=A.contentWindow;if(!s)return e("No window assigned for iframe");var n=s.document;s.onload=A.onload=function(){s.onload=A.onload=null;var l=setInterval(function(){n.body.childNodes.length>0&&n.readyState==="complete"&&(clearInterval(l),t(A))},50)}})},OD=["all","d","content"],Dg=function(A,t){for(var e=A.length-1;e>=0;e--){var s=A.item(e);OD.indexOf(s)===-1&&t.style.setProperty(s,A.getPropertyValue(s))}return t},RD=function(A){var t="";return A&&(t+="<!DOCTYPE ",A.name&&(t+=A.name),A.internalSubset&&(t+=A.internalSubset),A.publicId&&(t+='"'+A.publicId+'"'),A.systemId&&(t+='"'+A.systemId+'"'),t+=">"),t},zD=function(A,t,e){A&&A.defaultView&&(t!==A.defaultView.pageXOffset||e!==A.defaultView.pageYOffset)&&A.defaultView.scrollTo(t,e)},VD=function(A){var t=A[0],e=A[1],s=A[2];t.scrollLeft=e,t.scrollTop=s},PD=":before",KD=":after",b1="___html2canvas___pseudoelement_before",x1="___html2canvas___pseudoelement_after",r2=`{
    content: "" !important;
    display: none !important;
}`,GD=function(A){WD(A,"."+b1+PD+r2+`
         .`+x1+KD+r2)},WD=function(A,t){var e=A.ownerDocument;if(e){var s=e.createElement("style");s.textContent=t,A.appendChild(s)}},Bb=(function(){function A(){}return A.getOrigin=function(t){var e=A._link;return e?(e.href=t,e.href=e.href,e.protocol+e.hostname+e.port):"about:blank"},A.isSameOrigin=function(t){return A.getOrigin(t)===A._origin},A.setContext=function(t){A._link=t.document.createElement("a"),A._origin=A.getOrigin(t.location.href)},A._origin="about:blank",A})(),$D=(function(){function A(t,e){this.context=t,this._options=e,this._cache={}}return A.prototype.addImage=function(t){var e=Promise.resolve();return this.has(t)||(jg(t)||qD(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),e},A.prototype.match=function(t){return this._cache[t]},A.prototype.loadImage=function(t){return iA(this,void 0,void 0,function(){var e,s,n,l,a=this;return Gi(this,function(c){switch(c.label){case 0:return e=Bb.isSameOrigin(t),s=!kg(t)&&this._options.useCORS===!0&&Li.SUPPORT_CORS_IMAGES&&!e,n=!kg(t)&&!e&&!jg(t)&&typeof this._options.proxy=="string"&&Li.SUPPORT_CORS_XHR&&!s,!e&&this._options.allowTaint===!1&&!kg(t)&&!jg(t)&&!n&&!s?[2]:(l=t,n?[4,this.proxy(l)]:[3,2]);case 1:l=c.sent(),c.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(d,f){var p=new Image;p.onload=function(){return d(p)},p.onerror=f,(ZD(l)||s)&&(p.crossOrigin="anonymous"),p.src=l,p.complete===!0&&setTimeout(function(){return d(p)},500),a._options.imageTimeout>0&&setTimeout(function(){return f("Timed out ("+a._options.imageTimeout+"ms) loading image")},a._options.imageTimeout)})];case 3:return[2,c.sent()]}})})},A.prototype.has=function(t){return typeof this._cache[t]<"u"},A.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},A.prototype.proxy=function(t){var e=this,s=this._options.proxy;if(!s)throw new Error("No proxy defined");var n=t.substring(0,256);return new Promise(function(l,a){var c=Li.SUPPORT_RESPONSE_TYPE?"blob":"text",d=new XMLHttpRequest;d.onload=function(){if(d.status===200)if(c==="text")l(d.response);else{var m=new FileReader;m.addEventListener("load",function(){return l(m.result)},!1),m.addEventListener("error",function(v){return a(v)},!1),m.readAsDataURL(d.response)}else a("Failed to proxy resource "+n+" with status code "+d.status)},d.onerror=a;var f=s.indexOf("?")>-1?"&":"?";if(d.open("GET",""+s+f+"url="+encodeURIComponent(t)+"&responseType="+c),c!=="text"&&d instanceof XMLHttpRequest&&(d.responseType=c),e._options.imageTimeout){var p=e._options.imageTimeout;d.timeout=p,d.ontimeout=function(){return a("Timed out ("+p+"ms) proxying "+n)}}d.send()})},A})(),XD=/^data:image\/svg\+xml/i,YD=/^data:image\/.*;base64,/i,JD=/^data:image\/.*/i,qD=function(A){return Li.SUPPORT_SVG_DRAWING||!tk(A)},kg=function(A){return JD.test(A)},ZD=function(A){return YD.test(A)},jg=function(A){return A.substr(0,4)==="blob"},tk=function(A){return A.substr(-3).toLowerCase()==="svg"||XD.test(A)},Gt=(function(){function A(t,e){this.type=0,this.x=t,this.y=e}return A.prototype.add=function(t,e){return new A(this.x+t,this.y+e)},A})(),So=function(A,t,e){return new Gt(A.x+(t.x-A.x)*e,A.y+(t.y-A.y)*e)},du=(function(){function A(t,e,s,n){this.type=1,this.start=t,this.startControl=e,this.endControl=s,this.end=n}return A.prototype.subdivide=function(t,e){var s=So(this.start,this.startControl,t),n=So(this.startControl,this.endControl,t),l=So(this.endControl,this.end,t),a=So(s,n,t),c=So(n,l,t),d=So(a,c,t);return e?new A(this.start,s,a,d):new A(d,c,l,this.end)},A.prototype.add=function(t,e){return new A(this.start.add(t,e),this.startControl.add(t,e),this.endControl.add(t,e),this.end.add(t,e))},A.prototype.reverse=function(){return new A(this.end,this.endControl,this.startControl,this.start)},A})(),OA=function(A){return A.type===1},ek=(function(){function A(t){var e=t.styles,s=t.bounds,n=Ya(e.borderTopLeftRadius,s.width,s.height),l=n[0],a=n[1],c=Ya(e.borderTopRightRadius,s.width,s.height),d=c[0],f=c[1],p=Ya(e.borderBottomRightRadius,s.width,s.height),m=p[0],v=p[1],w=Ya(e.borderBottomLeftRadius,s.width,s.height),y=w[0],b=w[1],S=[];S.push((l+d)/s.width),S.push((y+m)/s.width),S.push((a+b)/s.height),S.push((f+v)/s.height);var x=Math.max.apply(Math,S);x>1&&(l/=x,a/=x,d/=x,f/=x,m/=x,v/=x,y/=x,b/=x);var U=s.width-d,M=s.height-v,N=s.width-m,I=s.height-b,R=e.borderTopWidth,D=e.borderRightWidth,V=e.borderBottomWidth,lt=e.borderLeftWidth,dt=Ts(e.paddingTop,t.bounds.width),At=Ts(e.paddingRight,t.bounds.width),ft=Ts(e.paddingBottom,t.bounds.width),mt=Ts(e.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=l>0||a>0?Hs(s.left+lt/3,s.top+R/3,l-lt/3,a-R/3,ds.TOP_LEFT):new Gt(s.left+lt/3,s.top+R/3),this.topRightBorderDoubleOuterBox=l>0||a>0?Hs(s.left+U,s.top+R/3,d-D/3,f-R/3,ds.TOP_RIGHT):new Gt(s.left+s.width-D/3,s.top+R/3),this.bottomRightBorderDoubleOuterBox=m>0||v>0?Hs(s.left+N,s.top+M,m-D/3,v-V/3,ds.BOTTOM_RIGHT):new Gt(s.left+s.width-D/3,s.top+s.height-V/3),this.bottomLeftBorderDoubleOuterBox=y>0||b>0?Hs(s.left+lt/3,s.top+I,y-lt/3,b-V/3,ds.BOTTOM_LEFT):new Gt(s.left+lt/3,s.top+s.height-V/3),this.topLeftBorderDoubleInnerBox=l>0||a>0?Hs(s.left+lt*2/3,s.top+R*2/3,l-lt*2/3,a-R*2/3,ds.TOP_LEFT):new Gt(s.left+lt*2/3,s.top+R*2/3),this.topRightBorderDoubleInnerBox=l>0||a>0?Hs(s.left+U,s.top+R*2/3,d-D*2/3,f-R*2/3,ds.TOP_RIGHT):new Gt(s.left+s.width-D*2/3,s.top+R*2/3),this.bottomRightBorderDoubleInnerBox=m>0||v>0?Hs(s.left+N,s.top+M,m-D*2/3,v-V*2/3,ds.BOTTOM_RIGHT):new Gt(s.left+s.width-D*2/3,s.top+s.height-V*2/3),this.bottomLeftBorderDoubleInnerBox=y>0||b>0?Hs(s.left+lt*2/3,s.top+I,y-lt*2/3,b-V*2/3,ds.BOTTOM_LEFT):new Gt(s.left+lt*2/3,s.top+s.height-V*2/3),this.topLeftBorderStroke=l>0||a>0?Hs(s.left+lt/2,s.top+R/2,l-lt/2,a-R/2,ds.TOP_LEFT):new Gt(s.left+lt/2,s.top+R/2),this.topRightBorderStroke=l>0||a>0?Hs(s.left+U,s.top+R/2,d-D/2,f-R/2,ds.TOP_RIGHT):new Gt(s.left+s.width-D/2,s.top+R/2),this.bottomRightBorderStroke=m>0||v>0?Hs(s.left+N,s.top+M,m-D/2,v-V/2,ds.BOTTOM_RIGHT):new Gt(s.left+s.width-D/2,s.top+s.height-V/2),this.bottomLeftBorderStroke=y>0||b>0?Hs(s.left+lt/2,s.top+I,y-lt/2,b-V/2,ds.BOTTOM_LEFT):new Gt(s.left+lt/2,s.top+s.height-V/2),this.topLeftBorderBox=l>0||a>0?Hs(s.left,s.top,l,a,ds.TOP_LEFT):new Gt(s.left,s.top),this.topRightBorderBox=d>0||f>0?Hs(s.left+U,s.top,d,f,ds.TOP_RIGHT):new Gt(s.left+s.width,s.top),this.bottomRightBorderBox=m>0||v>0?Hs(s.left+N,s.top+M,m,v,ds.BOTTOM_RIGHT):new Gt(s.left+s.width,s.top+s.height),this.bottomLeftBorderBox=y>0||b>0?Hs(s.left,s.top+I,y,b,ds.BOTTOM_LEFT):new Gt(s.left,s.top+s.height),this.topLeftPaddingBox=l>0||a>0?Hs(s.left+lt,s.top+R,Math.max(0,l-lt),Math.max(0,a-R),ds.TOP_LEFT):new Gt(s.left+lt,s.top+R),this.topRightPaddingBox=d>0||f>0?Hs(s.left+Math.min(U,s.width-D),s.top+R,U>s.width+D?0:Math.max(0,d-D),Math.max(0,f-R),ds.TOP_RIGHT):new Gt(s.left+s.width-D,s.top+R),this.bottomRightPaddingBox=m>0||v>0?Hs(s.left+Math.min(N,s.width-lt),s.top+Math.min(M,s.height-V),Math.max(0,m-D),Math.max(0,v-V),ds.BOTTOM_RIGHT):new Gt(s.left+s.width-D,s.top+s.height-V),this.bottomLeftPaddingBox=y>0||b>0?Hs(s.left+lt,s.top+Math.min(I,s.height-V),Math.max(0,y-lt),Math.max(0,b-V),ds.BOTTOM_LEFT):new Gt(s.left+lt,s.top+s.height-V),this.topLeftContentBox=l>0||a>0?Hs(s.left+lt+mt,s.top+R+dt,Math.max(0,l-(lt+mt)),Math.max(0,a-(R+dt)),ds.TOP_LEFT):new Gt(s.left+lt+mt,s.top+R+dt),this.topRightContentBox=d>0||f>0?Hs(s.left+Math.min(U,s.width+lt+mt),s.top+R+dt,U>s.width+lt+mt?0:d-lt+mt,f-(R+dt),ds.TOP_RIGHT):new Gt(s.left+s.width-(D+At),s.top+R+dt),this.bottomRightContentBox=m>0||v>0?Hs(s.left+Math.min(N,s.width-(lt+mt)),s.top+Math.min(M,s.height+R+dt),Math.max(0,m-(D+At)),v-(V+ft),ds.BOTTOM_RIGHT):new Gt(s.left+s.width-(D+At),s.top+s.height-(V+ft)),this.bottomLeftContentBox=y>0||b>0?Hs(s.left+lt+mt,s.top+I,Math.max(0,y-(lt+mt)),b-(V+ft),ds.BOTTOM_LEFT):new Gt(s.left+lt+mt,s.top+s.height-(V+ft))}return A})(),ds;(function(A){A[A.TOP_LEFT=0]="TOP_LEFT",A[A.TOP_RIGHT=1]="TOP_RIGHT",A[A.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",A[A.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ds||(ds={}));var Hs=function(A,t,e,s,n){var l=4*((Math.sqrt(2)-1)/3),a=e*l,c=s*l,d=A+e,f=t+s;switch(n){case ds.TOP_LEFT:return new du(new Gt(A,f),new Gt(A,f-c),new Gt(d-a,t),new Gt(d,t));case ds.TOP_RIGHT:return new du(new Gt(A,t),new Gt(A+a,t),new Gt(d,f-c),new Gt(d,f));case ds.BOTTOM_RIGHT:return new du(new Gt(d,t),new Gt(d,t+c),new Gt(A+a,f),new Gt(A,f));case ds.BOTTOM_LEFT:default:return new du(new Gt(d,f),new Gt(d-a,f),new Gt(A,t+c),new Gt(A,t))}},Wu=function(A){return[A.topLeftBorderBox,A.topRightBorderBox,A.bottomRightBorderBox,A.bottomLeftBorderBox]},sk=function(A){return[A.topLeftContentBox,A.topRightContentBox,A.bottomRightContentBox,A.bottomLeftContentBox]},$u=function(A){return[A.topLeftPaddingBox,A.topRightPaddingBox,A.bottomRightPaddingBox,A.bottomLeftPaddingBox]},ik=(function(){function A(t,e,s){this.offsetX=t,this.offsetY=e,this.matrix=s,this.type=0,this.target=6}return A})(),fu=(function(){function A(t,e){this.path=t,this.target=e,this.type=1}return A})(),Ak=(function(){function A(t){this.opacity=t,this.type=2,this.target=6}return A})(),nk=function(A){return A.type===0},wb=function(A){return A.type===1},rk=function(A){return A.type===2},l2=function(A,t){return A.length===t.length?A.some(function(e,s){return e===t[s]}):!1},lk=function(A,t,e,s,n){return A.map(function(l,a){switch(a){case 0:return l.add(t,e);case 1:return l.add(t+s,e);case 2:return l.add(t+s,e+n);case 3:return l.add(t,e+n)}return l})},yb=(function(){function A(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return A})(),Cb=(function(){function A(t,e){if(this.container=t,this.parent=e,this.effects=[],this.curves=new ek(this.container),this.container.styles.opacity<1&&this.effects.push(new Ak(this.container.styles.opacity)),this.container.styles.transform!==null){var s=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,l=this.container.styles.transform;this.effects.push(new ik(s,n,l))}if(this.container.styles.overflowX!==0){var a=Wu(this.curves),c=$u(this.curves);l2(a,c)?this.effects.push(new fu(a,6)):(this.effects.push(new fu(a,2)),this.effects.push(new fu(c,4)))}}return A.prototype.getEffects=function(t){for(var e=[2,3].indexOf(this.container.styles.position)===-1,s=this.parent,n=this.effects.slice(0);s;){var l=s.effects.filter(function(d){return!wb(d)});if(e||s.container.styles.position!==0||!s.parent){if(n.unshift.apply(n,l),e=[2,3].indexOf(s.container.styles.position)===-1,s.container.styles.overflowX!==0){var a=Wu(s.curves),c=$u(s.curves);l2(a,c)||n.unshift(new fu(c,6))}}else n.unshift.apply(n,l);s=s.parent}return n.filter(function(d){return mi(d.target,t)})},A})(),S1=function(A,t,e,s){A.container.elements.forEach(function(n){var l=mi(n.flags,4),a=mi(n.flags,2),c=new Cb(n,A);mi(n.styles.display,2048)&&s.push(c);var d=mi(n.flags,8)?[]:s;if(l||a){var f=l||n.styles.isPositioned()?e:t,p=new yb(c);if(n.styles.isPositioned()||n.styles.opacity<1||n.styles.isTransformed()){var m=n.styles.zIndex.order;if(m<0){var v=0;f.negativeZIndex.some(function(y,b){return m>y.element.container.styles.zIndex.order?(v=b,!1):v>0}),f.negativeZIndex.splice(v,0,p)}else if(m>0){var w=0;f.positiveZIndex.some(function(y,b){return m>=y.element.container.styles.zIndex.order?(w=b+1,!1):w>0}),f.positiveZIndex.splice(w,0,p)}else f.zeroOrAutoZIndexOrTransformedOrOpacity.push(p)}else n.styles.isFloating()?f.nonPositionedFloats.push(p):f.nonPositionedInlineLevel.push(p);S1(c,p,l?p:e,d)}else n.styles.isInlineLevel()?t.inlineLevel.push(c):t.nonInlineLevel.push(c),S1(c,t,e,d);mi(n.flags,8)&&bb(n,d)})},bb=function(A,t){for(var e=A instanceof w1?A.start:1,s=A instanceof w1?A.reversed:!1,n=0;n<t.length;n++){var l=t[n];l.container instanceof lb&&typeof l.container.value=="number"&&l.container.value!==0&&(e=l.container.value),l.listValue=_c(e,l.container.styles.listStyleType,!0),e+=s?-1:1}},ok=function(A){var t=new Cb(A,null),e=new yb(t),s=[];return S1(t,e,e,s),bb(t.container,s),e},o2=function(A,t){switch(t){case 0:return zA(A.topLeftBorderBox,A.topLeftPaddingBox,A.topRightBorderBox,A.topRightPaddingBox);case 1:return zA(A.topRightBorderBox,A.topRightPaddingBox,A.bottomRightBorderBox,A.bottomRightPaddingBox);case 2:return zA(A.bottomRightBorderBox,A.bottomRightPaddingBox,A.bottomLeftBorderBox,A.bottomLeftPaddingBox);default:return zA(A.bottomLeftBorderBox,A.bottomLeftPaddingBox,A.topLeftBorderBox,A.topLeftPaddingBox)}},ak=function(A,t){switch(t){case 0:return zA(A.topLeftBorderBox,A.topLeftBorderDoubleOuterBox,A.topRightBorderBox,A.topRightBorderDoubleOuterBox);case 1:return zA(A.topRightBorderBox,A.topRightBorderDoubleOuterBox,A.bottomRightBorderBox,A.bottomRightBorderDoubleOuterBox);case 2:return zA(A.bottomRightBorderBox,A.bottomRightBorderDoubleOuterBox,A.bottomLeftBorderBox,A.bottomLeftBorderDoubleOuterBox);default:return zA(A.bottomLeftBorderBox,A.bottomLeftBorderDoubleOuterBox,A.topLeftBorderBox,A.topLeftBorderDoubleOuterBox)}},ck=function(A,t){switch(t){case 0:return zA(A.topLeftBorderDoubleInnerBox,A.topLeftPaddingBox,A.topRightBorderDoubleInnerBox,A.topRightPaddingBox);case 1:return zA(A.topRightBorderDoubleInnerBox,A.topRightPaddingBox,A.bottomRightBorderDoubleInnerBox,A.bottomRightPaddingBox);case 2:return zA(A.bottomRightBorderDoubleInnerBox,A.bottomRightPaddingBox,A.bottomLeftBorderDoubleInnerBox,A.bottomLeftPaddingBox);default:return zA(A.bottomLeftBorderDoubleInnerBox,A.bottomLeftPaddingBox,A.topLeftBorderDoubleInnerBox,A.topLeftPaddingBox)}},hk=function(A,t){switch(t){case 0:return pu(A.topLeftBorderStroke,A.topRightBorderStroke);case 1:return pu(A.topRightBorderStroke,A.bottomRightBorderStroke);case 2:return pu(A.bottomRightBorderStroke,A.bottomLeftBorderStroke);default:return pu(A.bottomLeftBorderStroke,A.topLeftBorderStroke)}},pu=function(A,t){var e=[];return OA(A)?e.push(A.subdivide(.5,!1)):e.push(A),OA(t)?e.push(t.subdivide(.5,!0)):e.push(t),e},zA=function(A,t,e,s){var n=[];return OA(A)?n.push(A.subdivide(.5,!1)):n.push(A),OA(e)?n.push(e.subdivide(.5,!0)):n.push(e),OA(s)?n.push(s.subdivide(.5,!0).reverse()):n.push(s),OA(t)?n.push(t.subdivide(.5,!1).reverse()):n.push(t),n},xb=function(A){var t=A.bounds,e=A.styles;return t.add(e.borderLeftWidth,e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth),-(e.borderTopWidth+e.borderBottomWidth))},Xu=function(A){var t=A.styles,e=A.bounds,s=Ts(t.paddingLeft,e.width),n=Ts(t.paddingRight,e.width),l=Ts(t.paddingTop,e.width),a=Ts(t.paddingBottom,e.width);return e.add(s+t.borderLeftWidth,l+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+s+n),-(t.borderTopWidth+t.borderBottomWidth+l+a))},uk=function(A,t){return A===0?t.bounds:A===2?Xu(t):xb(t)},dk=function(A,t){return A===0?t.bounds:A===2?Xu(t):xb(t)},Og=function(A,t,e){var s=uk(Fo(A.styles.backgroundOrigin,t),A),n=dk(Fo(A.styles.backgroundClip,t),A),l=fk(Fo(A.styles.backgroundSize,t),e,s),a=l[0],c=l[1],d=Ya(Fo(A.styles.backgroundPosition,t),s.width-a,s.height-c),f=pk(Fo(A.styles.backgroundRepeat,t),d,l,s,n),p=Math.round(s.left+d[0]),m=Math.round(s.top+d[1]);return[f,p,m,a,c]},Eo=function(A){return ys(A)&&A.value===zo.AUTO},gu=function(A){return typeof A=="number"},fk=function(A,t,e){var s=t[0],n=t[1],l=t[2],a=A[0],c=A[1];if(!a)return[0,0];if(hi(a)&&c&&hi(c))return[Ts(a,e.width),Ts(c,e.height)];var d=gu(l);if(ys(a)&&(a.value===zo.CONTAIN||a.value===zo.COVER)){if(gu(l)){var f=e.width/e.height;return f<l!=(a.value===zo.COVER)?[e.width,e.width/l]:[e.height*l,e.height]}return[e.width,e.height]}var p=gu(s),m=gu(n),v=p||m;if(Eo(a)&&(!c||Eo(c))){if(p&&m)return[s,n];if(!d&&!v)return[e.width,e.height];if(v&&d){var w=p?s:n*l,y=m?n:s/l;return[w,y]}var b=p?s:e.width,S=m?n:e.height;return[b,S]}if(d){var x=0,U=0;return hi(a)?x=Ts(a,e.width):hi(c)&&(U=Ts(c,e.height)),Eo(a)?x=U*l:(!c||Eo(c))&&(U=x/l),[x,U]}var M=null,N=null;if(hi(a)?M=Ts(a,e.width):c&&hi(c)&&(N=Ts(c,e.height)),M!==null&&(!c||Eo(c))&&(N=p&&m?M/s*n:e.height),N!==null&&Eo(a)&&(M=p&&m?N/n*s:e.width),M!==null&&N!==null)return[M,N];throw new Error("Unable to calculate background-size for element")},Fo=function(A,t){var e=A[t];return typeof e>"u"?A[0]:e},pk=function(A,t,e,s,n){var l=t[0],a=t[1],c=e[0],d=e[1];switch(A){case 2:return[new Gt(Math.round(s.left),Math.round(s.top+a)),new Gt(Math.round(s.left+s.width),Math.round(s.top+a)),new Gt(Math.round(s.left+s.width),Math.round(d+s.top+a)),new Gt(Math.round(s.left),Math.round(d+s.top+a))];case 3:return[new Gt(Math.round(s.left+l),Math.round(s.top)),new Gt(Math.round(s.left+l+c),Math.round(s.top)),new Gt(Math.round(s.left+l+c),Math.round(s.height+s.top)),new Gt(Math.round(s.left+l),Math.round(s.height+s.top))];case 1:return[new Gt(Math.round(s.left+l),Math.round(s.top+a)),new Gt(Math.round(s.left+l+c),Math.round(s.top+a)),new Gt(Math.round(s.left+l+c),Math.round(s.top+a+d)),new Gt(Math.round(s.left+l),Math.round(s.top+a+d))];default:return[new Gt(Math.round(n.left),Math.round(n.top)),new Gt(Math.round(n.left+n.width),Math.round(n.top)),new Gt(Math.round(n.left+n.width),Math.round(n.height+n.top)),new Gt(Math.round(n.left),Math.round(n.height+n.top))]}},gk="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",a2="Hidden Text",mk=(function(){function A(t){this._data={},this._document=t}return A.prototype.parseMetrics=function(t,e){var s=this._document.createElement("div"),n=this._document.createElement("img"),l=this._document.createElement("span"),a=this._document.body;s.style.visibility="hidden",s.style.fontFamily=t,s.style.fontSize=e,s.style.margin="0",s.style.padding="0",s.style.whiteSpace="nowrap",a.appendChild(s),n.src=gk,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",l.style.fontFamily=t,l.style.fontSize=e,l.style.margin="0",l.style.padding="0",l.appendChild(this._document.createTextNode(a2)),s.appendChild(l),s.appendChild(n);var c=n.offsetTop-l.offsetTop+2;s.removeChild(l),s.appendChild(this._document.createTextNode(a2)),s.style.lineHeight="normal",n.style.verticalAlign="super";var d=n.offsetTop-s.offsetTop+2;return a.removeChild(s),{baseline:c,middle:d}},A.prototype.getMetrics=function(t,e){var s=t+" "+e;return typeof this._data[s]>"u"&&(this._data[s]=this.parseMetrics(t,e)),this._data[s]},A})(),Sb=(function(){function A(t,e){this.context=t,this.options=e}return A})(),_k=1e4,vk=(function(A){sn(t,A);function t(e,s){var n=A.call(this,e,s)||this;return n._activeEffects=[],n.canvas=s.canvas?s.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),s.canvas||(n.canvas.width=Math.floor(s.width*s.scale),n.canvas.height=Math.floor(s.height*s.scale),n.canvas.style.width=s.width+"px",n.canvas.style.height=s.height+"px"),n.fontMetrics=new mk(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-s.x,-s.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+s.width+"x"+s.height+") with scale "+s.scale),n}return t.prototype.applyEffects=function(e){for(var s=this;this._activeEffects.length;)this.popEffect();e.forEach(function(n){return s.applyEffect(n)})},t.prototype.applyEffect=function(e){this.ctx.save(),rk(e)&&(this.ctx.globalAlpha=e.opacity),nk(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),wb(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(e){return iA(this,void 0,void 0,function(){var s;return Gi(this,function(n){switch(n.label){case 0:return s=e.element.container.styles,s.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(e){return iA(this,void 0,void 0,function(){return Gi(this,function(s){switch(s.label){case 0:if(mi(e.container.flags,16))debugger;return e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return s.sent(),[4,this.renderNodeContent(e)];case 2:s.sent(),s.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(e,s,n){var l=this;if(s===0)this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+n);else{var a=X1(e.text);a.reduce(function(c,d){return l.ctx.fillText(d,c,e.bounds.top+n),c+l.ctx.measureText(d).width},e.bounds.left)}},t.prototype.createFontStyle=function(e){var s=e.fontVariant.filter(function(a){return a==="normal"||a==="small-caps"}).join(""),n=bk(e.fontFamily).join(", "),l=bc(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,s,e.fontWeight,l,n].join(" "),n,l]},t.prototype.renderTextNode=function(e,s){return iA(this,void 0,void 0,function(){var n,l,a,c,d,f,p,m,v=this;return Gi(this,function(w){return n=this.createFontStyle(s),l=n[0],a=n[1],c=n[2],this.ctx.font=l,this.ctx.direction=s.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",d=this.fontMetrics.getMetrics(a,c),f=d.baseline,p=d.middle,m=s.paintOrder,e.textBounds.forEach(function(y){m.forEach(function(b){switch(b){case 0:v.ctx.fillStyle=wi(s.color),v.renderTextWithLetterSpacing(y,s.letterSpacing,f);var S=s.textShadow;S.length&&y.text.trim().length&&(S.slice(0).reverse().forEach(function(x){v.ctx.shadowColor=wi(x.color),v.ctx.shadowOffsetX=x.offsetX.number*v.options.scale,v.ctx.shadowOffsetY=x.offsetY.number*v.options.scale,v.ctx.shadowBlur=x.blur.number,v.renderTextWithLetterSpacing(y,s.letterSpacing,f)}),v.ctx.shadowColor="",v.ctx.shadowOffsetX=0,v.ctx.shadowOffsetY=0,v.ctx.shadowBlur=0),s.textDecorationLine.length&&(v.ctx.fillStyle=wi(s.textDecorationColor||s.color),s.textDecorationLine.forEach(function(x){switch(x){case 1:v.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top+f),y.bounds.width,1);break;case 2:v.ctx.fillRect(y.bounds.left,Math.round(y.bounds.top),y.bounds.width,1);break;case 3:v.ctx.fillRect(y.bounds.left,Math.ceil(y.bounds.top+p),y.bounds.width,1);break}}));break;case 1:s.webkitTextStrokeWidth&&y.text.trim().length&&(v.ctx.strokeStyle=wi(s.webkitTextStrokeColor),v.ctx.lineWidth=s.webkitTextStrokeWidth,v.ctx.lineJoin=window.chrome?"miter":"round",v.ctx.strokeText(y.text,y.bounds.left,y.bounds.top+f)),v.ctx.strokeStyle="",v.ctx.lineWidth=0,v.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(e,s,n){if(n&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var l=Xu(e),a=$u(s);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,e.intrinsicWidth,e.intrinsicHeight,l.left,l.top,l.width,l.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(e){return iA(this,void 0,void 0,function(){var s,n,l,a,c,d,U,U,f,p,m,v,N,w,y,I,b,S,x,U,M,N,I;return Gi(this,function(R){switch(R.label){case 0:this.applyEffects(e.getEffects(4)),s=e.container,n=e.curves,l=s.styles,a=0,c=s.textNodes,R.label=1;case 1:return a<c.length?(d=c[a],[4,this.renderTextNode(d,l)]):[3,4];case 2:R.sent(),R.label=3;case 3:return a++,[3,1];case 4:if(!(s instanceof Ab))return[3,8];R.label=5;case 5:return R.trys.push([5,7,,8]),[4,this.context.cache.match(s.src)];case 6:return U=R.sent(),this.renderReplacedElement(s,n,U),[3,8];case 7:return R.sent(),this.context.logger.error("Error loading image "+s.src),[3,8];case 8:if(s instanceof nb&&this.renderReplacedElement(s,n,s.canvas),!(s instanceof rb))return[3,12];R.label=9;case 9:return R.trys.push([9,11,,12]),[4,this.context.cache.match(s.svg)];case 10:return U=R.sent(),this.renderReplacedElement(s,n,U),[3,12];case 11:return R.sent(),this.context.logger.error("Error loading svg "+s.svg.substring(0,255)),[3,12];case 12:return s instanceof cb&&s.tree?(f=new t(this.context,{scale:this.options.scale,backgroundColor:s.backgroundColor,x:0,y:0,width:s.width,height:s.height}),[4,f.render(s.tree)]):[3,14];case 13:p=R.sent(),s.width&&s.height&&this.ctx.drawImage(p,0,0,s.width,s.height,s.bounds.left,s.bounds.top,s.bounds.width,s.bounds.height),R.label=14;case 14:if(s instanceof Y1&&(m=Math.min(s.bounds.width,s.bounds.height),s.type===Vu?s.checked&&(this.ctx.save(),this.path([new Gt(s.bounds.left+m*.39363,s.bounds.top+m*.79),new Gt(s.bounds.left+m*.16,s.bounds.top+m*.5549),new Gt(s.bounds.left+m*.27347,s.bounds.top+m*.44071),new Gt(s.bounds.left+m*.39694,s.bounds.top+m*.5649),new Gt(s.bounds.left+m*.72983,s.bounds.top+m*.23),new Gt(s.bounds.left+m*.84,s.bounds.top+m*.34085),new Gt(s.bounds.left+m*.39363,s.bounds.top+m*.79)]),this.ctx.fillStyle=wi(Yw),this.ctx.fill(),this.ctx.restore()):s.type===Pu&&s.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(s.bounds.left+m/2,s.bounds.top+m/2,m/4,0,Math.PI*2,!0),this.ctx.fillStyle=wi(Yw),this.ctx.fill(),this.ctx.restore())),Bk(s)&&s.value.length){switch(v=this.createFontStyle(l),N=v[0],w=v[1],y=this.fontMetrics.getMetrics(N,w).baseline,this.ctx.font=N,this.ctx.fillStyle=wi(l.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=yk(s.styles.textAlign),I=Xu(s),b=0,s.styles.textAlign){case 1:b+=I.width/2;break;case 2:b+=I.width;break}S=I.add(b,0,0,-I.height/2+1),this.ctx.save(),this.path([new Gt(I.left,I.top),new Gt(I.left+I.width,I.top),new Gt(I.left+I.width,I.top+I.height),new Gt(I.left,I.top+I.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new cc(s.value,S),l.letterSpacing,y),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!mi(s.styles.display,2048))return[3,20];if(s.styles.listStyleImage===null)return[3,19];if(x=s.styles.listStyleImage,x.type!==0)return[3,18];U=void 0,M=x.url,R.label=15;case 15:return R.trys.push([15,17,,18]),[4,this.context.cache.match(M)];case 16:return U=R.sent(),this.ctx.drawImage(U,s.bounds.left-(U.width+10),s.bounds.top),[3,18];case 17:return R.sent(),this.context.logger.error("Error loading list-style-image "+M),[3,18];case 18:return[3,20];case 19:e.listValue&&s.styles.listStyleType!==-1&&(N=this.createFontStyle(l)[0],this.ctx.font=N,this.ctx.fillStyle=wi(l.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",I=new Jn(s.bounds.left,s.bounds.top+Ts(s.styles.paddingTop,s.bounds.width),s.bounds.width,Iw(l.lineHeight,l.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new cc(e.listValue,I),l.letterSpacing,Iw(l.lineHeight,l.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),R.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(e){return iA(this,void 0,void 0,function(){var s,n,x,l,a,x,c,d,x,f,p,x,m,v,x,w,y,x,b,S,x;return Gi(this,function(U){switch(U.label){case 0:if(mi(e.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:U.sent(),s=0,n=e.negativeZIndex,U.label=2;case 2:return s<n.length?(x=n[s],[4,this.renderStack(x)]):[3,5];case 3:U.sent(),U.label=4;case 4:return s++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:U.sent(),l=0,a=e.nonInlineLevel,U.label=7;case 7:return l<a.length?(x=a[l],[4,this.renderNode(x)]):[3,10];case 8:U.sent(),U.label=9;case 9:return l++,[3,7];case 10:c=0,d=e.nonPositionedFloats,U.label=11;case 11:return c<d.length?(x=d[c],[4,this.renderStack(x)]):[3,14];case 12:U.sent(),U.label=13;case 13:return c++,[3,11];case 14:f=0,p=e.nonPositionedInlineLevel,U.label=15;case 15:return f<p.length?(x=p[f],[4,this.renderStack(x)]):[3,18];case 16:U.sent(),U.label=17;case 17:return f++,[3,15];case 18:m=0,v=e.inlineLevel,U.label=19;case 19:return m<v.length?(x=v[m],[4,this.renderNode(x)]):[3,22];case 20:U.sent(),U.label=21;case 21:return m++,[3,19];case 22:w=0,y=e.zeroOrAutoZIndexOrTransformedOrOpacity,U.label=23;case 23:return w<y.length?(x=y[w],[4,this.renderStack(x)]):[3,26];case 24:U.sent(),U.label=25;case 25:return w++,[3,23];case 26:b=0,S=e.positiveZIndex,U.label=27;case 27:return b<S.length?(x=S[b],[4,this.renderStack(x)]):[3,30];case 28:U.sent(),U.label=29;case 29:return b++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},t.prototype.formatPath=function(e){var s=this;e.forEach(function(n,l){var a=OA(n)?n.start:n;l===0?s.ctx.moveTo(a.x,a.y):s.ctx.lineTo(a.x,a.y),OA(n)&&s.ctx.bezierCurveTo(n.startControl.x,n.startControl.y,n.endControl.x,n.endControl.y,n.end.x,n.end.y)})},t.prototype.renderRepeat=function(e,s,n,l){this.path(e),this.ctx.fillStyle=s,this.ctx.translate(n,l),this.ctx.fill(),this.ctx.translate(-n,-l)},t.prototype.resizeImage=function(e,s,n){var l;if(e.width===s&&e.height===n)return e;var a=(l=this.canvas.ownerDocument)!==null&&l!==void 0?l:document,c=a.createElement("canvas");c.width=Math.max(1,s),c.height=Math.max(1,n);var d=c.getContext("2d");return d.drawImage(e,0,0,e.width,e.height,0,0,s,n),c},t.prototype.renderBackgroundImage=function(e){return iA(this,void 0,void 0,function(){var s,n,l,a,c,d;return Gi(this,function(f){switch(f.label){case 0:s=e.styles.backgroundImage.length-1,n=function(p){var m,v,w,dt,W,E,mt,at,V,y,dt,W,E,mt,at,b,S,x,U,M,N,I,R,D,V,lt,dt,At,ft,mt,at,Ut,W,E,K,ot,pt,Q,j,Z,rt,Et;return Gi(this,function(xt){switch(xt.label){case 0:if(p.type!==0)return[3,5];m=void 0,v=p.url,xt.label=1;case 1:return xt.trys.push([1,3,,4]),[4,l.context.cache.match(v)];case 2:return m=xt.sent(),[3,4];case 3:return xt.sent(),l.context.logger.error("Error loading background-image "+v),[3,4];case 4:return m&&(w=Og(e,s,[m.width,m.height,m.width/m.height]),dt=w[0],W=w[1],E=w[2],mt=w[3],at=w[4],V=l.ctx.createPattern(l.resizeImage(m,mt,at),"repeat"),l.renderRepeat(dt,V,W,E)),[3,6];case 5:n9(p)?(y=Og(e,s,[null,null,null]),dt=y[0],W=y[1],E=y[2],mt=y[3],at=y[4],b=t9(p.angle,mt,at),S=b[0],x=b[1],U=b[2],M=b[3],N=b[4],I=document.createElement("canvas"),I.width=mt,I.height=at,R=I.getContext("2d"),D=R.createLinearGradient(x,M,U,N),Uw(p.stops,S).forEach(function(Qt){return D.addColorStop(Qt.stop,wi(Qt.color))}),R.fillStyle=D,R.fillRect(0,0,mt,at),mt>0&&at>0&&(V=l.ctx.createPattern(I,"repeat"),l.renderRepeat(dt,V,W,E))):r9(p)&&(lt=Og(e,s,[null,null,null]),dt=lt[0],At=lt[1],ft=lt[2],mt=lt[3],at=lt[4],Ut=p.position.length===0?[G1]:p.position,W=Ts(Ut[0],mt),E=Ts(Ut[Ut.length-1],at),K=e9(p,W,E,mt,at),ot=K[0],pt=K[1],ot>0&&pt>0&&(Q=l.ctx.createRadialGradient(At+W,ft+E,0,At+W,ft+E,ot),Uw(p.stops,ot*2).forEach(function(Qt){return Q.addColorStop(Qt.stop,wi(Qt.color))}),l.path(dt),l.ctx.fillStyle=Q,ot!==pt?(j=e.bounds.left+.5*e.bounds.width,Z=e.bounds.top+.5*e.bounds.height,rt=pt/ot,Et=1/rt,l.ctx.save(),l.ctx.translate(j,Z),l.ctx.transform(1,0,0,rt,0,0),l.ctx.translate(-j,-Z),l.ctx.fillRect(At,Et*(ft-Z)+Z,mt,at*Et),l.ctx.restore()):l.ctx.fill())),xt.label=6;case 6:return s--,[2]}})},l=this,a=0,c=e.styles.backgroundImage.slice(0).reverse(),f.label=1;case 1:return a<c.length?(d=c[a],[5,n(d)]):[3,4];case 2:f.sent(),f.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(e,s,n){return iA(this,void 0,void 0,function(){return Gi(this,function(l){return this.path(o2(n,s)),this.ctx.fillStyle=wi(e),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(e,s,n,l){return iA(this,void 0,void 0,function(){var a,c;return Gi(this,function(d){switch(d.label){case 0:return s<3?[4,this.renderSolidBorder(e,n,l)]:[3,2];case 1:return d.sent(),[2];case 2:return a=ak(l,n),this.path(a),this.ctx.fillStyle=wi(e),this.ctx.fill(),c=ck(l,n),this.path(c),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(e){return iA(this,void 0,void 0,function(){var s,n,l,a,c,d,f,p,m=this;return Gi(this,function(v){switch(v.label){case 0:return this.applyEffects(e.getEffects(2)),s=e.container.styles,n=!Vr(s.backgroundColor)||s.backgroundImage.length,l=[{style:s.borderTopStyle,color:s.borderTopColor,width:s.borderTopWidth},{style:s.borderRightStyle,color:s.borderRightColor,width:s.borderRightWidth},{style:s.borderBottomStyle,color:s.borderBottomColor,width:s.borderBottomWidth},{style:s.borderLeftStyle,color:s.borderLeftColor,width:s.borderLeftWidth}],a=wk(Fo(s.backgroundClip,0),e.curves),n||s.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),Vr(s.backgroundColor)||(this.ctx.fillStyle=wi(s.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:v.sent(),this.ctx.restore(),s.boxShadow.slice(0).reverse().forEach(function(w){m.ctx.save();var y=Wu(e.curves),b=w.inset?0:_k,S=lk(y,-b+(w.inset?1:-1)*w.spread.number,(w.inset?1:-1)*w.spread.number,w.spread.number*(w.inset?-2:2),w.spread.number*(w.inset?-2:2));w.inset?(m.path(y),m.ctx.clip(),m.mask(S)):(m.mask(y),m.ctx.clip(),m.path(S)),m.ctx.shadowOffsetX=w.offsetX.number+b,m.ctx.shadowOffsetY=w.offsetY.number,m.ctx.shadowColor=wi(w.color),m.ctx.shadowBlur=w.blur.number,m.ctx.fillStyle=w.inset?wi(w.color):"rgba(0,0,0,1)",m.ctx.fill(),m.ctx.restore()}),v.label=2;case 2:c=0,d=0,f=l,v.label=3;case 3:return d<f.length?(p=f[d],p.style!==0&&!Vr(p.color)&&p.width>0?p.style!==2?[3,5]:[4,this.renderDashedDottedBorder(p.color,p.width,c,e.curves,2)]:[3,11]):[3,13];case 4:return v.sent(),[3,11];case 5:return p.style!==3?[3,7]:[4,this.renderDashedDottedBorder(p.color,p.width,c,e.curves,3)];case 6:return v.sent(),[3,11];case 7:return p.style!==4?[3,9]:[4,this.renderDoubleBorder(p.color,p.width,c,e.curves)];case 8:return v.sent(),[3,11];case 9:return[4,this.renderSolidBorder(p.color,c,e.curves)];case 10:v.sent(),v.label=11;case 11:c++,v.label=12;case 12:return d++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(e,s,n,l,a){return iA(this,void 0,void 0,function(){var c,d,f,p,m,v,w,y,b,S,x,U,M,N,I,R,I,R;return Gi(this,function(D){return this.ctx.save(),c=hk(l,n),d=o2(l,n),a===2&&(this.path(d),this.ctx.clip()),OA(d[0])?(f=d[0].start.x,p=d[0].start.y):(f=d[0].x,p=d[0].y),OA(d[1])?(m=d[1].end.x,v=d[1].end.y):(m=d[1].x,v=d[1].y),n===0||n===2?w=Math.abs(f-m):w=Math.abs(p-v),this.ctx.beginPath(),a===3?this.formatPath(c):this.formatPath(d.slice(0,2)),y=s<3?s*3:s*2,b=s<3?s*2:s,a===3&&(y=s,b=s),S=!0,w<=y*2?S=!1:w<=y*2+b?(x=w/(2*y+b),y*=x,b*=x):(U=Math.floor((w+b)/(y+b)),M=(w-U*y)/(U-1),N=(w-(U+1)*y)/U,b=N<=0||Math.abs(b-M)<Math.abs(b-N)?M:N),S&&(a===3?this.ctx.setLineDash([0,y+b]):this.ctx.setLineDash([y,b])),a===3?(this.ctx.lineCap="round",this.ctx.lineWidth=s):this.ctx.lineWidth=s*2+1.1,this.ctx.strokeStyle=wi(e),this.ctx.stroke(),this.ctx.setLineDash([]),a===2&&(OA(d[0])&&(I=d[3],R=d[0],this.ctx.beginPath(),this.formatPath([new Gt(I.end.x,I.end.y),new Gt(R.start.x,R.start.y)]),this.ctx.stroke()),OA(d[1])&&(I=d[1],R=d[2],this.ctx.beginPath(),this.formatPath([new Gt(I.end.x,I.end.y),new Gt(R.start.x,R.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(e){return iA(this,void 0,void 0,function(){var s;return Gi(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=wi(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),s=ok(e),[4,this.renderStack(s)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},t})(Sb),Bk=function(A){return A instanceof ab||A instanceof ob?!0:A instanceof Y1&&A.type!==Pu&&A.type!==Vu},wk=function(A,t){switch(A){case 0:return Wu(t);case 2:return sk(t);default:return $u(t)}},yk=function(A){switch(A){case 1:return"center";case 2:return"right";default:return"left"}},Ck=["-apple-system","system-ui"],bk=function(A){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?A.filter(function(t){return Ck.indexOf(t)===-1}):A},xk=(function(A){sn(t,A);function t(e,s){var n=A.call(this,e,s)||this;return n.canvas=s.canvas?s.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=s,n.canvas.width=Math.floor(s.width*s.scale),n.canvas.height=Math.floor(s.height*s.scale),n.canvas.style.width=s.width+"px",n.canvas.style.height=s.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-s.x,-s.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+s.width+"x"+s.height+" at "+s.x+","+s.y+") with scale "+s.scale),n}return t.prototype.render=function(e){return iA(this,void 0,void 0,function(){var s,n;return Gi(this,function(l){switch(l.label){case 0:return s=B1(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,Sk(s)];case 1:return n=l.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=wi(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t})(Sb),Sk=function(A){return new Promise(function(t,e){var s=new Image;s.onload=function(){t(s)},s.onerror=e,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(A))})},Ek=(function(){function A(t){var e=t.id,s=t.enabled;this.id=e,this.enabled=s,this.start=Date.now()}return A.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,$h([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},A.prototype.getTime=function(){return Date.now()-this.start},A.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,$h([this.id,this.getTime()+"ms"],t))},A.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,$h([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},A.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,$h([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},A.instances={},A})(),Tk=(function(){function A(t,e){var s;this.windowBounds=e,this.instanceName="#"+A.instanceCount++,this.logger=new Ek({id:this.instanceName,enabled:t.logging}),this.cache=(s=t.cache)!==null&&s!==void 0?s:new $D(this,t)}return A.instanceCount=1,A})(),c2=function(A,t){return t===void 0&&(t={}),Qk(A,t)};typeof window<"u"&&Bb.setContext(window);var Qk=function(A,t){return iA(void 0,void 0,void 0,function(){var e,s,n,l,a,c,d,f,p,m,v,w,y,b,S,x,U,M,N,I,D,R,D,V,lt,dt,At,ft,mt,at,Ut,W,E,K,ot,pt,Q,j,Z,rt;return Gi(this,function(Et){switch(Et.label){case 0:if(!A||typeof A!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(e=A.ownerDocument,!e)throw new Error("Element is not attached to a Document");if(s=e.defaultView,!s)throw new Error("Document is not attached to a Window");return n={allowTaint:(V=t.allowTaint)!==null&&V!==void 0?V:!1,imageTimeout:(lt=t.imageTimeout)!==null&&lt!==void 0?lt:15e3,proxy:t.proxy,useCORS:(dt=t.useCORS)!==null&&dt!==void 0?dt:!1},l=n1({logging:(At=t.logging)!==null&&At!==void 0?At:!0,cache:t.cache},n),a={windowWidth:(ft=t.windowWidth)!==null&&ft!==void 0?ft:s.innerWidth,windowHeight:(mt=t.windowHeight)!==null&&mt!==void 0?mt:s.innerHeight,scrollX:(at=t.scrollX)!==null&&at!==void 0?at:s.pageXOffset,scrollY:(Ut=t.scrollY)!==null&&Ut!==void 0?Ut:s.pageYOffset},c=new Jn(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),d=new Tk(l,c),f=(W=t.foreignObjectRendering)!==null&&W!==void 0?W:!1,p={allowTaint:(E=t.allowTaint)!==null&&E!==void 0?E:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:f,copyStyles:f},d.logger.debug("Starting document clone with size "+c.width+"x"+c.height+" scrolled to "+-c.left+","+-c.top),m=new n2(d,A,p),v=m.clonedReferenceElement,v?[4,m.toIFrame(e,c)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return w=Et.sent(),y=J1(v)||UD(v)?lL(v.ownerDocument):ld(d,v),b=y.width,S=y.height,x=y.left,U=y.top,M=Fk(d,v,t.backgroundColor),N={canvas:t.canvas,backgroundColor:M,scale:(ot=(K=t.scale)!==null&&K!==void 0?K:s.devicePixelRatio)!==null&&ot!==void 0?ot:1,x:((pt=t.x)!==null&&pt!==void 0?pt:0)+x,y:((Q=t.y)!==null&&Q!==void 0?Q:0)+U,width:(j=t.width)!==null&&j!==void 0?j:Math.ceil(b),height:(Z=t.height)!==null&&Z!==void 0?Z:Math.ceil(S)},f?(d.logger.debug("Document cloned, using foreign object rendering"),D=new xk(d,N),[4,D.render(v)]):[3,3];case 2:return I=Et.sent(),[3,5];case 3:return d.logger.debug("Document cloned, element located at "+x+","+U+" with size "+b+"x"+S+" using computed rendering"),d.logger.debug("Starting DOM parsing"),R=ub(d,v),M===R.styles.backgroundColor&&(R.styles.backgroundColor=Yn.TRANSPARENT),d.logger.debug("Starting renderer for element at "+N.x+","+N.y+" with size "+N.width+"x"+N.height),D=new vk(d,N),[4,D.render(R)];case 4:I=Et.sent(),Et.label=5;case 5:return(!((rt=t.removeContainer)!==null&&rt!==void 0)||rt)&&(n2.destroy(w)||d.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),d.logger.debug("Finished rendering"),[2,I]}})})},Fk=function(A,t,e){var s=t.ownerDocument,n=s.documentElement?oc(A,getComputedStyle(s.documentElement).backgroundColor):Yn.TRANSPARENT,l=s.body?oc(A,getComputedStyle(s.body).backgroundColor):Yn.TRANSPARENT,a=typeof e=="string"?oc(A,e):e===null?Yn.TRANSPARENT:4294967295;return t===s.documentElement?Vr(n)?Vr(l)?a:l:n:a};const Uk="_bottomBar_5hllu_1",Mk="_withLeftToolbar_5hllu_29",Ik="_leftSection_5hllu_39",Nk="_rightSection_5hllu_51",Lk="_timeRangeItem_5hllu_63",Hk="_active_5hllu_91",Dk="_item_5hllu_101",kk="_actionItem_5hllu_113",jk="_timezone_5hllu_141",Ok="_separator_5hllu_159",Rk="_timeDisplay_5hllu_173",zk="_timeLabel_5hllu_185",Vk="_timeValue_5hllu_195",Pk="_serverTime_5hllu_209",Kk="_syncDot_5hllu_221",Gk="_synced_5hllu_237",Wk="_notSynced_5hllu_247",$k="_connectionStatus_5hllu_289",Xk="_connectionIcon_5hllu_301",rs={bottomBar:Uk,withLeftToolbar:Mk,leftSection:Ik,rightSection:Nk,timeRangeItem:Lk,active:Hk,item:Dk,actionItem:kk,timezone:jk,separator:Ok,timeDisplay:Rk,timeLabel:zk,timeValue:Vk,serverTime:Pk,syncDot:Kk,synced:Gk,notSynced:Wk,connectionStatus:$k,connectionIcon:Xk},Yk=({onTimeRangeChange:A,currentTimeRange:t,timezone:e="UTC+5:30",isLogScale:s,isAutoScale:n,onToggleLogScale:l,onToggleAutoScale:a,onResetZoom:c,isToolbarVisible:d=!0})=>{const[f,p]=B.useState(new Date),[m,v]=B.useState(null),[w,y]=B.useState(!1),[b,S]=B.useState(mn.DISCONNECTED);B.useEffect(()=>{const R=setInterval(()=>{p(new Date);const V=s1();v(new Date(V*1e3)),y(kB())},1e3),D=s1();return v(new Date(D*1e3)),y(kB()),()=>clearInterval(R)},[]),B.useEffect(()=>JS(S),[]);const x=R=>R?R.toLocaleTimeString("en-IN",{hour12:!1}):"--:--:--",U=()=>b===mn.CONNECTED?{color:"#089981",title:"WebSocket connected - receiving live data"}:{color:"#F23645",title:"WebSocket disconnected"},M=({color:R})=>h.jsxs("svg",{className:rs.connectionIcon,width:"18",height:"14",viewBox:"0 0 2400 1810",fill:R,children:[h.jsx("path",{d:"M2402.000000,1798.000000 C2402.000000,1799.500000 2402.000000,1801.000000 2401.063232,1803.284302 C2398.805176,1804.090210 2397.484131,1804.130493 2396.162842,1804.130493 C1915.898682,1804.138794 1435.634521,1804.119751 955.370422,1804.316895 C945.151428,1804.321167 937.899475,1800.835571 930.840942,1793.756714 C826.119202,1688.734131 721.198059,1583.910400 616.330872,1479.032837 C605.384583,1468.085327 605.353760,1468.014282 616.050964,1457.307251 C678.238586,1395.062134 740.452576,1332.843262 802.656982,1270.614868 C815.271667,1257.995361 815.276489,1257.988159 802.357971,1245.069336 C638.805664,1081.514038 475.303497,917.908447 311.545044,754.559814 C303.303711,746.339111 299.925323,737.958435 299.975800,726.413208 C300.350098,640.760559 300.171967,555.105469 300.182861,469.451141 C300.185333,449.881622 300.213074,449.852844 319.531036,449.850342 C406.518524,449.839020 493.505981,449.844849 580.493469,449.848083 C583.159607,449.848175 585.830688,449.790497 588.490906,449.926941 C597.649414,450.396667 599.328430,452.104645 599.776123,461.446930 C599.919556,464.440460 599.853821,467.444855 599.854187,470.444275 C599.859741,515.104492 600.112183,559.767212 599.676208,604.423157 C599.573486,614.943115 602.917542,622.540222 610.354858,629.925232 C675.391602,694.504517 740.107910,759.406372 804.928650,824.203247 C816.616028,835.886353 816.811768,835.896912 828.570801,824.139587 C926.380005,726.344116 1024.180420,628.539734 1121.973389,530.728027 C1133.969604,518.729492 1133.965088,518.679077 1121.659302,506.369720 C1058.509033,443.201691 995.381348,380.011169 932.164062,316.910370 C915.425842,300.202972 920.219543,301.845093 895.652222,301.839539 C703.013306,301.795807 510.374268,301.749725 317.735657,301.984375 C306.947571,301.997498 299.171082,298.838562 291.441925,291.065338 C199.323303,198.421509 106.864388,106.115906 14.409930,13.806523 C10.703942,10.106350 6.155775,7.249680 2.000000,4.000000 C2.332518,3.333333 2.630198,2.112344 3.003141,2.088905 C5.657150,1.922106 8.326538,2.000000 10.991030,2.000000 C354.710480,2.000000 698.429932,2.000000 1043.286865,2.643872 C1047.146362,6.627746 1049.614868,10.218153 1052.629761,13.268730 C1080.039673,41.003563 1107.556763,68.632607 1135.020020,96.314751 C1201.903564,163.730942 1268.654175,231.279587 1335.686035,298.547913 C1400.852905,363.944763 1466.315552,429.046967 1531.612427,494.314301 C1538.918213,501.616821 1546.124756,509.029266 1553.120972,516.626709 C1557.400024,521.273376 1557.190674,522.932617 1553.079712,527.746643 C1552.000366,529.010498 1550.760620,530.138367 1549.581055,531.315247 C1521.740234,559.093872 1493.886963,586.859924 1466.060425,614.652893 C1454.021973,626.676819 1454.025635,626.723145 1466.306641,639.008240 C1525.687134,698.409302 1585.079956,757.797729 1644.467896,817.191284 C1646.588989,819.312500 1648.588257,821.572083 1650.843140,823.539124 C1656.008789,828.045410 1658.126343,833.695374 1657.798218,840.444641 C1657.668945,843.103882 1657.819336,845.776062 1657.819336,848.442383 C1657.821655,976.762146 1657.822388,1105.081909 1657.815796,1233.401733 C1657.815674,1236.734009 1657.976562,1240.093994 1657.601807,1243.388550 C1657.368896,1245.437134 1656.267334,1247.387085 1655.023193,1250.873169 C1650.626709,1246.829346 1647.166748,1243.869995 1643.956177,1240.661255 C1514.532227,1111.311646 1385.130737,981.939453 1255.725098,852.571411 C1253.368042,850.215088 1251.067139,847.795959 1248.613281,845.544312 C1242.105103,839.572571 1240.301758,839.626404 1233.550781,845.797913 C1232.321655,846.921509 1231.161865,848.121704 1229.983398,849.299927 C1202.405151,876.870300 1174.814697,904.428223 1147.259399,932.021606 C1136.476562,942.819397 1136.493530,943.165894 1147.445068,954.159363 C1201.310547,1008.230896 1255.148560,1062.329590 1309.072876,1116.342285 C1367.237427,1174.602173 1425.487305,1232.777100 1483.699341,1290.989746 C1503.260376,1310.551147 1522.838867,1330.095093 1542.355347,1349.700806 C1544.781372,1352.138184 1546.873657,1354.907593 1550.677124,1359.335083 C1543.889893,1359.700684 1539.693970,1360.123291 1535.498047,1360.124390 C1405.178467,1360.158936 1274.858643,1360.042969 1144.539795,1360.344727 C1133.294800,1360.370728 1125.208862,1356.822876 1117.346680,1348.896118 C1057.260498,1288.317505 996.812012,1228.098145 936.472107,1167.771362 C934.115356,1165.415161 931.698608,1163.119019 929.341125,1160.763550 C925.921631,1157.346924 922.462952,1157.018555 918.894653,1160.525635 C916.993225,1162.394531 915.054565,1164.225830 913.169312,1166.110596 C885.591492,1193.681274 858.015625,1221.253906 830.448792,1248.835449 C819.305969,1259.984253 819.302490,1260.008301 830.725281,1271.432495 C904.723267,1345.440063 978.704163,1419.464478 1052.748413,1493.425659 C1068.551758,1509.211304 1064.294434,1507.822266 1087.526978,1507.824219 C1418.825317,1507.852539 1750.123779,1507.843506 2081.422119,1507.844604 C2086.088379,1507.844604 2090.771973,1508.121094 2095.416748,1507.808594 C2103.364258,1507.273926 2109.281250,1510.475586 2114.853027,1516.014771 C2193.544678,1594.248535 2272.379395,1672.338501 2351.159180,1750.483765 C2364.410156,1763.627930 2377.462158,1776.974976 2390.838867,1789.988892 C2394.084961,1793.146851 2398.254883,1795.355103 2402.000000,1798.000000 z"}),h.jsx("path",{d:"M1615.015137,575.984924 C1674.430176,635.347351 1733.867065,694.687988 1793.245483,754.086914 C1808.788452,769.635376 1807.807861,765.466858 1807.810913,788.797668 C1807.834473,972.771667 1807.821045,1156.745728 1807.830444,1340.719727 C1807.831421,1359.611328 1808.007202,1359.792847 1826.707886,1359.796265 C1913.029053,1359.811523 1999.350220,1359.807983 2085.671387,1359.800537 C2106.141113,1359.798828 2106.160400,1359.779663 2106.161133,1339.335571 C2106.166748,1175.025391 2106.165771,1010.715332 2106.164551,846.405212 C2106.164062,783.080811 2106.046387,719.755981 2106.281250,656.432495 C2106.314453,647.459839 2103.723145,640.592285 2097.212402,634.299500 C2081.639404,619.248169 2066.644043,603.600891 2051.339355,588.270142 C1961.155762,497.933044 1870.955444,407.612579 1780.745483,317.301880 C1770.261353,306.806152 1769.890381,306.811462 1759.413940,317.285828 C1696.012817,380.674683 1632.628906,444.080566 1569.250000,507.491547 C1567.131470,509.611176 1565.046631,511.775391 1563.087891,514.041260 C1560.238892,517.336609 1560.426025,520.720398 1563.282227,523.918884 C1565.278320,526.154297 1567.361450,528.316467 1569.479248,530.437927 C1584.313477,545.297913 1599.167114,560.138672 1615.015137,575.984924 z"})]}),N=U(),I=[{label:"1D",value:"1D",interval:"1m"},{label:"5D",value:"5D",interval:"5m"},{label:"1M",value:"1M",interval:"30m"},{label:"3M",value:"3M",interval:"1h"},{label:"6M",value:"6M",interval:"4h"},{label:"YTD",value:"YTD",interval:"1d"},{label:"1Y",value:"1Y",interval:"1d"},{label:"5Y",value:"5Y",interval:"1w"},{label:"All",value:"All",interval:"1d"}];return h.jsxs("div",{className:Tt(rs.bottomBar,{[rs.withLeftToolbar]:d}),children:[h.jsx("div",{className:rs.leftSection,children:I.map(R=>h.jsx("div",{className:Tt(rs.timeRangeItem,{[rs.active]:t===R.value}),onClick:()=>A&&A(R.value,R.interval),children:R.label},R.value))}),h.jsxs("div",{className:rs.rightSection,children:[h.jsx("div",{className:rs.connectionStatus,title:N.title,children:h.jsx(M,{color:N.color})}),h.jsx("div",{className:rs.separator}),h.jsxs("div",{className:rs.timeDisplay,children:[h.jsx("span",{className:rs.timeLabel,children:"Local:"}),h.jsx("span",{className:rs.timeValue,children:x(f)})]}),h.jsx("div",{className:rs.separator}),h.jsxs("div",{className:rs.timeDisplay,children:[h.jsx("span",{className:Tt(rs.syncDot,{[rs.synced]:w,[rs.notSynced]:!w}),title:w?"Time synced with WorldTimeAPI":"Time not synced - using local time"}),h.jsx("span",{className:rs.timeLabel,children:"IST:"}),h.jsx("span",{className:Tt(rs.timeValue,rs.serverTime),children:m?x(m):"--:--:--"})]}),h.jsx("div",{className:rs.separator}),h.jsx("div",{className:rs.item,children:h.jsx("span",{className:rs.timezone,children:e})}),h.jsx("div",{className:rs.separator}),h.jsx("div",{className:Tt(rs.item,rs.actionItem,{[rs.active]:s}),onClick:l,children:"log"}),h.jsx("div",{className:Tt(rs.item,rs.actionItem,{[rs.active]:n}),onClick:a,children:"auto"}),h.jsx("div",{className:Tt(rs.item,rs.actionItem),onClick:c,title:"Reset Chart View",children:"reset"})]})]})},Jk="_gridContainer_hfa5d_1",qk="_chartWrapper_hfa5d_17",Zk="_active_hfa5d_33",tj="_grid1_hfa5d_45",ej="_grid2_hfa5d_55",sj="_grid3_hfa5d_65",ij="_grid4_hfa5d_75",vl={gridContainer:Jk,chartWrapper:qk,active:Zk,grid1:tj,grid2:ej,grid3:sj,grid4:ij},Aj=({charts:A,layout:t,activeChartId:e,onActiveChartChange:s,chartRefs:n,onAlertsSync:l,onAlertTriggered:a,onReplayModeChange:c,...d})=>{const f=()=>{switch(t){case"2":return vl.grid2;case"3":return vl.grid3;case"4":return vl.grid4;default:return vl.grid1}};return h.jsx("div",{className:`${vl.gridContainer} ${f()}`,children:A.map(p=>h.jsx("div",{className:`${vl.chartWrapper} ${e===p.id&&t!=="1"?vl.active:""}`,onClick:()=>s(p.id),children:h.jsx(iN,{ref:m=>{n.current&&(n.current[p.id]=m)},symbol:p.symbol,exchange:p.exchange||"NSE",interval:p.interval,onAlertsSync:l?m=>l(p.id,p.symbol,p.exchange||"NSE",m):void 0,onAlertTriggered:a?m=>a(p.id,p.symbol,p.exchange||"NSE",m):void 0,onReplayModeChange:c?m=>c(p.id,m):void 0,...d,indicators:p.indicators,comparisonSymbols:p.comparisonSymbols,strategyConfig:p.strategyConfig})},p.id))})},nj="_overlay_ew3zy_1",rj="_dialog_ew3zy_27",lj="_header_ew3zy_53",oj="_title_ew3zy_77",aj="_closeButton_ew3zy_89",cj="_content_ew3zy_127",hj="_field_ew3zy_135",uj="_label_ew3zy_143",dj="_select_ew3zy_157",fj="_input_ew3zy_159",pj="_footer_ew3zy_207",gj="_button_ew3zy_221",mj="_cancelButton_ew3zy_239",_j="_saveButton_ew3zy_277",Mi={overlay:nj,dialog:rj,header:lj,title:oj,closeButton:aj,content:cj,field:hj,label:uj,select:dj,input:fj,footer:pj,button:gj,cancelButton:mj,saveButton:_j},vj=({isOpen:A,onClose:t,onSave:e,initialPrice:s,theme:n="dark"})=>{const[l,a]=B.useState("Crossing"),[c,d]=B.useState(""),f=B.useCallback(()=>{t()},[t]),p=Nl(A);if(Gr({enabled:A,onEscape:f}),B.useEffect(()=>{A&&s&&d(s.toString())},[A,s]),!A)return null;const m=()=>{e({condition:l,value:c}),t()};return h.jsx("div",{className:Mi.overlay,onClick:f,children:h.jsxs("div",{ref:p,role:"dialog","aria-modal":"true","aria-labelledby":"alert-dialog-title",className:Mi.dialog,onClick:v=>v.stopPropagation(),children:[h.jsxs("div",{className:Mi.header,children:[h.jsx("h2",{id:"alert-dialog-title",className:Mi.title,children:"Edit alert on"}),h.jsx("button",{className:Mi.closeButton,onClick:f,"aria-label":"Close alert dialog",children:h.jsx(ji,{size:20})})]}),h.jsxs("div",{className:Mi.content,children:[h.jsxs("div",{className:Mi.field,children:[h.jsx("label",{htmlFor:"alert-condition",className:Mi.label,children:"Condition"}),h.jsxs("select",{id:"alert-condition",className:Mi.select,value:l,onChange:v=>a(v.target.value),children:[h.jsx("option",{value:"Crossing",children:"Crossing"}),h.jsx("option",{value:"Crossing Up",children:"Crossing Up"}),h.jsx("option",{value:"Crossing Down",children:"Crossing Down"}),h.jsx("option",{value:"Greater Than",children:"Greater Than"}),h.jsx("option",{value:"Less Than",children:"Less Than"})]})]}),h.jsxs("div",{className:Mi.field,children:[h.jsx("label",{htmlFor:"alert-value",className:Mi.label,children:"Value"}),h.jsx("input",{id:"alert-value",type:"number",className:Mi.input,value:c,onChange:v=>d(v.target.value)})]})]}),h.jsxs("div",{className:Mi.footer,children:[h.jsx("button",{className:`${Mi.button} ${Mi.cancelButton}`,onClick:f,children:"Cancel"}),h.jsx("button",{className:`${Mi.button} ${Mi.saveButton}`,onClick:m,children:"Save"})]})]})})},Bj="_toolbar_1d5ro_1",wj="_tool_1d5ro_1",yj="_active_1d5ro_55",Cj="_badge_1d5ro_70",mu={toolbar:Bj,tool:wj,active:yj,badge:Cj},bj=({activePanel:A,onPanelChange:t,badges:e={}})=>{const s=[{id:"watchlist",icon:tE,label:"Watchlist"},{id:"position_tracker",icon:wc,label:"Position Flow"},{id:"alerts",icon:M1,label:"Alerts"}],n=l=>{t(A===l?null:l)};return h.jsx("div",{className:mu.toolbar,children:s.map(l=>h.jsxs("div",{className:Tt(mu.tool,{[mu.active]:A===l.id}),onClick:()=>n(l.id),title:l.label,children:[h.jsx(l.icon,{size:20,strokeWidth:1.5}),e[l.id]>0&&h.jsx("span",{className:mu.badge,children:e[l.id]})]},l.id))})},xj="_panel_1arq0_1",Sj="_header_1arq0_19",Ej="_title_1arq0_37",Tj="_tabs_1arq0_47",Qj="_tab_1arq0_47",Fj="_activeTab_1arq0_91",Uj="_logCount_1arq0_101",Mj="_content_1arq0_119",Ij="_list_1arq0_129",Nj="_emptyState_1arq0_139",Lj="_item_1arq0_153",Hj="_itemHeader_1arq0_169",Dj="_symbol_1arq0_181",kj="_symbolRow_1arq0_191",jj="_alertId_1arq0_203",Oj="_status_1arq0_217",Rj="_active_1arq0_91",zj="_triggered_1arq0_239",Vj="_paused_1arq0_249",Pj="_condition_1arq0_267",Kj="_itemFooter_1arq0_277",Gj="_time_1arq0_291",Wj="_itemActions_1arq0_301",$j="_actionIcon_1arq0_311",Xj="_logItem_1arq0_331",Yj="_logHeader_1arq0_341",Jj="_message_1arq0_353",ts={panel:xj,header:Sj,title:Ej,tabs:Tj,tab:Qj,activeTab:Fj,logCount:Uj,content:Mj,list:Ij,emptyState:Nj,item:Lj,itemHeader:Hj,symbol:Dj,symbolRow:kj,alertId:jj,status:Oj,active:Rj,triggered:zj,paused:Vj,condition:Pj,itemFooter:Kj,time:Gj,itemActions:Wj,actionIcon:$j,logItem:Xj,logHeader:Yj,message:Jj},qj=({alerts:A,logs:t,onRemoveAlert:e,onRestartAlert:s,onPauseAlert:n})=>{const[l,a]=B.useState("alerts");return h.jsxs("div",{className:ts.panel,children:[h.jsxs("div",{className:ts.header,children:[h.jsx("span",{className:ts.title,children:"Alerts"}),h.jsx("div",{className:ts.actions})]}),h.jsxs("div",{className:ts.tabs,children:[h.jsx("div",{className:Tt(ts.tab,{[ts.activeTab]:l==="alerts"}),onClick:()=>a("alerts"),children:"Alerts"}),h.jsxs("div",{className:Tt(ts.tab,{[ts.activeTab]:l==="log"}),onClick:()=>a("log"),children:["Log",t.length>0&&h.jsx("span",{className:ts.logCount,children:t.length})]})]}),h.jsx("div",{className:ts.content,children:l==="alerts"?h.jsx("div",{className:ts.list,children:A.length===0?h.jsx("div",{className:ts.emptyState,children:"No active alerts"}):A.map(c=>{const d=c.status||"Active",f=d.toLowerCase();return h.jsxs("div",{className:Tt(ts.item,ts[f]),children:[h.jsxs("div",{className:ts.itemHeader,children:[h.jsxs("span",{className:ts.symbol,children:[c.symbol,c.exchange?`:${c.exchange}`:""]}),h.jsx("span",{className:Tt(ts.status,ts[f]),children:d})]}),h.jsx("div",{className:ts.condition,children:c.condition}),h.jsxs("div",{className:ts.itemFooter,children:[h.jsxs("span",{className:ts.time,children:[new Date(c.created_at).toLocaleDateString()," ",new Date(c.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})]}),h.jsxs("div",{className:ts.itemActions,children:[d==="Active"&&h.jsx(I4,{size:16,className:ts.actionIcon,onClick:()=>n(c.id),title:"Pause Alert"}),(d==="Triggered"||d==="Paused")&&h.jsx(L4,{size:16,className:ts.actionIcon,onClick:()=>s(c.id),title:"Resume Alert"}),h.jsx(Il,{size:16,className:ts.actionIcon,onClick:()=>e(c.id),title:"Remove Alert"})]})]})]},c.id)})}):h.jsx("div",{className:ts.list,children:t.length===0?h.jsx("div",{className:ts.emptyState,children:"No logs"}):t.map(c=>h.jsxs("div",{className:ts.logItem,children:[h.jsxs("div",{className:ts.logHeader,children:[h.jsxs("span",{className:ts.symbol,children:[c.symbol,c.exchange?`:${c.exchange}`:""]}),h.jsx("span",{className:ts.time,children:new Date(c.time).toLocaleTimeString()})]}),h.jsx("div",{className:ts.message,children:c.message})]},c.id))})})]})},Zj="http://127.0.0.1:5000",tO=({onSave:A,onClose:t})=>{const[e,s]=B.useState(()=>localStorage.getItem("oa_host_url")||Zj),[n,l]=B.useState(""),[a,c]=B.useState(!1),[d,f]=B.useState(""),[p,m]=B.useState(!1),v=async S=>{if(S.preventDefault(),!n.trim()){f("Please enter your API key");return}m(!0),f("");try{localStorage.setItem("oa_host_url",e);const x=await fetch(`${e}/api/v1/chart?apikey=${encodeURIComponent(n.trim())}`,{method:"GET"});if(x.ok){localStorage.setItem("oa_apikey",n.trim());try{const U=await x.json(),M=U.data||U;M&&typeof M=="object"&&(Object.entries(M).forEach(([N,I])=>{I!=null&&localStorage.setItem(N,I)}),localStorage.setItem("_cloud_sync_done","true"))}catch{console.warn("[ApiKeyDialog] Could not parse preferences, cloud sync will handle it")}A(n.trim())}else x.status===400||x.status===401||x.status===403?f("Invalid API key. Please check your credentials and try again."):f(`Server error: ${x.status}. Please try again later.`)}catch(x){console.error("[ApiKeyDialog] Validation error:",x),f("Could not connect to OpenAlgo server. Please check if the server is running.")}finally{m(!1)}},w={width:"100%",padding:"12px",backgroundColor:"#131722",border:"1px solid #363a45",borderRadius:"4px",color:"#d1d4dc",fontSize:"14px",outline:"none",boxSizing:"border-box"},y={display:"block",color:"#d1d4dc",fontSize:"13px",marginBottom:"8px",fontWeight:500},b={margin:"6px 0 0 0",color:"#787b86",fontSize:"11px",lineHeight:1.4};return h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},children:h.jsxs("div",{style:{backgroundColor:"#1e222d",borderRadius:"8px",padding:"24px",width:"420px",maxWidth:"90%",boxShadow:"0 4px 24px rgba(0, 0, 0, 0.4)"},children:[h.jsx("h2",{style:{margin:"0 0 8px 0",color:"#d1d4dc",fontSize:"18px",fontWeight:500},children:"Connect to OpenAlgo"}),h.jsx("p",{style:{margin:"0 0 20px 0",color:"#787b86",fontSize:"13px",lineHeight:1.5},children:"Configure your OpenAlgo server connection."}),h.jsxs("form",{onSubmit:v,children:[h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsx("label",{style:y,children:"Host URL"}),h.jsx("input",{type:"text",value:e,onChange:S=>s(S.target.value),placeholder:"http://127.0.0.1:5000",style:w}),h.jsx("p",{style:b,children:"Default: http://127.0.0.1:5000"})]}),h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsx("label",{style:y,children:"API Key"}),h.jsxs("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[h.jsx("input",{type:a?"text":"password",value:n,onChange:S=>{l(S.target.value),f("")},placeholder:"Enter your API key",autoFocus:!0,style:{...w,paddingRight:"40px",border:d?"1px solid #f23645":"1px solid #363a45"}}),h.jsx("button",{type:"button",onClick:()=>c(!a),title:a?"Hide API key":"Show API key",style:{position:"absolute",right:"8px",display:"flex",alignItems:"center",justifyContent:"center",background:"none",border:"none",color:"#787b86",cursor:"pointer",padding:"4px",borderRadius:"4px"},children:a?h.jsx(H2,{size:16}):h.jsx(D2,{size:16})})]}),d&&h.jsx("p",{style:{margin:"8px 0 0 0",color:"#f23645",fontSize:"12px"},children:d}),h.jsxs("p",{style:b,children:["Find your API key in the"," ",h.jsx("a",{href:`${e}/apikey`,target:"_blank",rel:"noopener noreferrer",style:{color:"#2962ff"},children:"OpenAlgo Dashboard"})]})]}),h.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"20px",justifyContent:"flex-end"},children:[h.jsx("a",{href:`${e}/auth/login`,style:{padding:"10px 16px",backgroundColor:"transparent",border:"1px solid #363a45",borderRadius:"4px",color:"#787b86",fontSize:"14px",cursor:"pointer",textDecoration:"none"},children:"Login to OpenAlgo"}),h.jsx("button",{type:"submit",disabled:p,style:{padding:"10px 24px",backgroundColor:p?"#4a5568":"#2962ff",border:"none",borderRadius:"4px",color:"#fff",fontSize:"14px",cursor:p?"not-allowed":"pointer",opacity:p?.7:1},children:p?"Validating...":"Connect"})]})]})]})})},eO="_overlay_18jix_1",sO="_popup_18jix_27",iO="_header_18jix_51",AO="_title_18jix_67",nO="_closeButton_18jix_81",rO="_content_18jix_117",lO="_sidebar_18jix_131",oO="_sidebarItem_18jix_147",aO="_active_18jix_187",cO="_sidebarIcon_18jix_197",hO="_sidebarLabel_18jix_213",uO="_main_18jix_221",dO="_section_18jix_233",fO="_sectionTitle_18jix_241",pO="_optionGroup_18jix_259",gO="_checkboxLabel_18jix_267",mO="_checkbox_18jix_267",_O="_checkmark_18jix_307",vO="_inputGroup_18jix_381",BO="_inputLabel_18jix_389",wO="_input_18jix_381",yO="_inputHint_18jix_447",CO="_link_18jix_461",bO="_select_18jix_479",xO="_levelDescriptions_18jix_537",SO="_inputWithIcon_18jix_565",EO="_eyeButton_18jix_585",TO="_light_18jix_625",QO="_footer_18jix_643",FO="_cancelButton_18jix_659",UO="_okButton_18jix_661",MO="_colorRow_18jix_733",IO="_colorLabel_18jix_757",NO="_colorInputWrapper_18jix_767",LO="_colorInput_18jix_767",HO="_hexInput_18jix_827",DO="_resetButton_18jix_871",Rt={overlay:eO,popup:sO,header:iO,title:AO,closeButton:nO,content:rO,sidebar:lO,sidebarItem:oO,active:aO,sidebarIcon:cO,sidebarLabel:hO,main:uO,section:dO,sectionTitle:fO,optionGroup:pO,checkboxLabel:gO,checkbox:mO,checkmark:_O,inputGroup:vO,inputLabel:BO,input:wO,inputHint:yO,link:CO,select:bO,levelDescriptions:xO,inputWithIcon:SO,eyeButton:EO,light:TO,footer:QO,cancelButton:FO,okButton:UO,colorRow:MO,colorLabel:IO,colorInputWrapper:NO,colorInput:LO,hexInput:HO,resetButton:DO},h2={candleUpColor:"#089981",candleDownColor:"#F23645",wickUpColor:"#089981",wickDownColor:"#F23645",showVerticalGridLines:!0,showHorizontalGridLines:!0,darkBackground:"#131722",lightBackground:"#ffffff",darkGridColor:"#2A2E39",lightGridColor:"#e0e3eb"},kO=({isOpen:A,onClose:t,theme:e="dark",isTimerVisible:s=!1,onTimerToggle:n,isSessionBreakVisible:l=!1,onSessionBreakToggle:a,hostUrl:c="http://127.0.0.1:5000",onHostUrlSave:d,apiKey:f="",onApiKeySave:p,websocketUrl:m="127.0.0.1:8765",onWebsocketUrlSave:v,chartAppearance:w=h2,onChartAppearanceChange:y,onResetChartAppearance:b})=>{const[S,x]=B.useState(YS),[U,M]=B.useState("scales"),[N,I]=B.useState(c),[R,D]=B.useState(f),[V,lt]=B.useState(m),[dt,At]=B.useState(!1),[ft,mt]=B.useState(!1),[at,Ut]=B.useState(w),W=B.useCallback(()=>{I(c),D(f),lt(m),Ut(w),t()},[c,f,m,w,t]),E=Nl(A);if(Gr({enabled:A,onEscape:W}),B.useEffect(()=>{I(c)},[c]),B.useEffect(()=>{D(f)},[f]),B.useEffect(()=>{lt(m)},[m]),B.useEffect(()=>{Ut(w)},[w]),B.useEffect(()=>{const Q=N!==c,j=R!==f,Z=V!==m,rt=JSON.stringify(at)!==JSON.stringify(w);At(Q||j||Z||rt)},[N,R,V,at,c,f,m,w]),!A)return null;const K=()=>{N!==c&&d?.(N),R!==f&&p?.(R),V!==m&&v?.(V),JSON.stringify(at)!==JSON.stringify(w)&&y?.(at),t()},ot=()=>{Ut(h2)},pt=[{id:"scales",label:"Scales and lines",icon:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"18",height:"18",fill:"none",stroke:"currentColor",children:h.jsx("path",{d:"M10.5 20.5a2 2 0 1 1-2-2m2 2a2 2 0 0 0-2-2m2 2h14m-16-2v-14m16 16L21 17m3.5 3.5L21 24M8.5 4.5L12 8M8.5 4.5L5 8"})})},{id:"openalgo",label:"OpenAlgo",icon:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"18",height:"18",fill:"currentColor",children:h.jsx("path",{d:"M14 5a2 2 0 0 0-2 2v2h4V7a2 2 0 0 0-2-2Zm3 4V7a3 3 0 1 0-6 0v2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2Zm-8 2a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1h-8a1 1 0 0 1-1-1v-8Zm5 3a1 1 0 0 0-.5.13v-.13a.5.5 0 0 0-1 0v2.5a.5.5 0 0 0 1 0v-.13A1 1 0 1 0 14 14Z"})})},{id:"logging",label:"Logging",icon:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"18",height:"18",fill:"currentColor",children:h.jsx("path",{d:"M4 6h20v2H4V6zm0 5h20v2H4v-2zm0 5h14v2H4v-2zm0 5h10v2H4v-2z"})})},{id:"appearance",label:"Appearance",icon:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"18",height:"18",fill:"currentColor",children:[h.jsx("path",{d:"M14 4a10 10 0 1 0 0 20 10 10 0 0 0 0-20ZM5 14a9 9 0 1 1 18 0 9 9 0 0 1-18 0Z"}),h.jsx("path",{d:"M14 8a6 6 0 0 0-6 6h12a6 6 0 0 0-6-6Z"})]})}];return h.jsx("div",{className:Rt.overlay,onClick:W,children:h.jsxs("div",{ref:E,role:"dialog","aria-modal":"true","aria-labelledby":"settings-dialog-title",className:`${Rt.popup} ${e==="light"?Rt.light:""}`,onClick:Q=>Q.stopPropagation(),children:[h.jsxs("div",{className:Rt.header,children:[h.jsx("h2",{id:"settings-dialog-title",className:Rt.title,children:"Settings"}),h.jsx("button",{className:Rt.closeButton,onClick:W,"aria-label":"Close settings",children:h.jsx(ji,{size:20})})]}),h.jsxs("div",{className:Rt.content,children:[h.jsx("div",{className:Rt.sidebar,children:pt.map(Q=>h.jsxs("button",{className:`${Rt.sidebarItem} ${U===Q.id?Rt.active:""}`,onClick:()=>M(Q.id),children:[h.jsx("span",{className:Rt.sidebarIcon,children:Q.icon}),h.jsx("span",{className:Rt.sidebarLabel,children:Q.label})]},Q.id))}),h.jsxs("div",{className:Rt.main,children:[U==="scales"&&h.jsxs("div",{className:Rt.section,children:[h.jsx("h3",{className:Rt.sectionTitle,children:"PRICE SCALE"}),h.jsx("div",{className:Rt.optionGroup,children:h.jsxs("label",{className:Rt.checkboxLabel,children:[h.jsx("input",{type:"checkbox",checked:s,onChange:()=>n?.(),className:Rt.checkbox}),h.jsx("span",{className:Rt.checkmark}),h.jsx("span",{children:"Countdown to bar close"})]})}),h.jsx("div",{className:Rt.optionGroup,children:h.jsxs("label",{className:Rt.checkboxLabel,children:[h.jsx("input",{type:"checkbox",checked:l,onChange:()=>a?.(),className:Rt.checkbox}),h.jsx("span",{className:Rt.checkmark}),h.jsx("span",{children:"Session breaks"})]})})]}),U==="openalgo"&&h.jsxs("div",{className:Rt.section,children:[h.jsx("h3",{className:Rt.sectionTitle,children:"OPENALGO CONNECTION"}),h.jsxs("div",{className:Rt.inputGroup,children:[h.jsx("label",{className:Rt.inputLabel,children:"Host URL"}),h.jsx("input",{type:"text",value:N,onChange:Q=>I(Q.target.value),placeholder:"http://127.0.0.1:5000",className:Rt.input}),h.jsx("p",{className:Rt.inputHint,children:"Default: http://127.0.0.1:5000. Change to use a custom OpenAlgo server URL."})]}),h.jsxs("div",{className:Rt.inputGroup,children:[h.jsx("label",{className:Rt.inputLabel,children:"API Key"}),h.jsxs("div",{className:Rt.inputWithIcon,children:[h.jsx("input",{type:ft?"text":"password",value:R,onChange:Q=>D(Q.target.value),placeholder:"Enter your OpenAlgo API key",className:Rt.input}),h.jsx("button",{type:"button",className:Rt.eyeButton,onClick:()=>mt(!ft),title:ft?"Hide API key":"Show API key",children:ft?h.jsx(H2,{size:16}):h.jsx(D2,{size:16})})]}),h.jsxs("p",{className:Rt.inputHint,children:["Find your API key in the"," ",h.jsx("a",{href:`${N}/apikey`,target:"_blank",rel:"noopener noreferrer",className:Rt.link,children:"OpenAlgo Dashboard"})]})]}),h.jsxs("div",{className:Rt.inputGroup,children:[h.jsx("label",{className:Rt.inputLabel,children:"WebSocket URL"}),h.jsx("input",{type:"text",value:V,onChange:Q=>lt(Q.target.value),placeholder:"127.0.0.1:8765",className:Rt.input}),h.jsx("p",{className:Rt.inputHint,children:"Default: 127.0.0.1:8765. Change to use a custom domain (e.g., openalgo.example.com:8765)"})]})]}),U==="logging"&&h.jsxs("div",{className:Rt.section,children:[h.jsx("h3",{className:Rt.sectionTitle,children:"CONSOLE LOGGING"}),h.jsxs("div",{className:Rt.inputGroup,children:[h.jsx("label",{className:Rt.inputLabel,children:"Log Level"}),h.jsx("select",{value:S,onChange:Q=>{const j=parseInt(Q.target.value,10);x(j),XS(j)},className:Rt.select,children:Object.entries(Xi).map(([Q,j])=>h.jsx("option",{value:j,children:w2[j]},Q))}),h.jsx("p",{className:Rt.inputHint,children:'Controls which messages appear in the browser console. Set to "Debug" for detailed troubleshooting.'})]}),h.jsx("div",{className:Rt.optionGroup,style:{marginTop:"16px"},children:h.jsxs("div",{className:Rt.levelDescriptions,children:[h.jsxs("p",{children:[h.jsx("strong",{children:"Debug:"})," All messages including detailed tracing"]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Info:"})," General information and above"]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Warnings:"})," Warnings and errors only"]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Errors:"})," Only error messages"]}),h.jsxs("p",{children:[h.jsx("strong",{children:"None:"})," Silent mode - no console output"]})]})})]}),U==="appearance"&&h.jsxs("div",{className:Rt.section,children:[h.jsx("h3",{className:Rt.sectionTitle,children:"CANDLE COLORS"}),h.jsxs("div",{className:Rt.colorRow,children:[h.jsx("label",{className:Rt.colorLabel,children:"Up Color (Bullish)"}),h.jsxs("div",{className:Rt.colorInputWrapper,children:[h.jsx("input",{type:"color",value:at.candleUpColor,onChange:Q=>Ut(j=>({...j,candleUpColor:Q.target.value,wickUpColor:Q.target.value})),className:Rt.colorInput}),h.jsx("input",{type:"text",value:at.candleUpColor,onChange:Q=>{let j=Q.target.value;j.startsWith("#")||(j="#"+j),/^#[0-9A-Fa-f]{0,6}$/.test(j)&&Ut(Z=>({...Z,candleUpColor:j,wickUpColor:j}))},className:Rt.hexInput,maxLength:7,placeholder:"#000000"})]})]}),h.jsxs("div",{className:Rt.colorRow,children:[h.jsx("label",{className:Rt.colorLabel,children:"Down Color (Bearish)"}),h.jsxs("div",{className:Rt.colorInputWrapper,children:[h.jsx("input",{type:"color",value:at.candleDownColor,onChange:Q=>Ut(j=>({...j,candleDownColor:Q.target.value,wickDownColor:Q.target.value})),className:Rt.colorInput}),h.jsx("input",{type:"text",value:at.candleDownColor,onChange:Q=>{let j=Q.target.value;j.startsWith("#")||(j="#"+j),/^#[0-9A-Fa-f]{0,6}$/.test(j)&&Ut(Z=>({...Z,candleDownColor:j,wickDownColor:j}))},className:Rt.hexInput,maxLength:7,placeholder:"#000000"})]})]}),h.jsx("h3",{className:Rt.sectionTitle,style:{marginTop:"24px"},children:"GRID LINES"}),h.jsx("div",{className:Rt.optionGroup,children:h.jsxs("label",{className:Rt.checkboxLabel,children:[h.jsx("input",{type:"checkbox",checked:at.showVerticalGridLines,onChange:()=>Ut(Q=>({...Q,showVerticalGridLines:!Q.showVerticalGridLines})),className:Rt.checkbox}),h.jsx("span",{className:Rt.checkmark}),h.jsx("span",{children:"Vertical grid lines"})]})}),h.jsx("div",{className:Rt.optionGroup,children:h.jsxs("label",{className:Rt.checkboxLabel,children:[h.jsx("input",{type:"checkbox",checked:at.showHorizontalGridLines,onChange:()=>Ut(Q=>({...Q,showHorizontalGridLines:!Q.showHorizontalGridLines})),className:Rt.checkbox}),h.jsx("span",{className:Rt.checkmark}),h.jsx("span",{children:"Horizontal grid lines"})]})}),h.jsx("h3",{className:Rt.sectionTitle,style:{marginTop:"24px"},children:"BACKGROUND COLOR"}),h.jsxs("div",{className:Rt.colorRow,children:[h.jsx("label",{className:Rt.colorLabel,children:"Dark Theme"}),h.jsxs("div",{className:Rt.colorInputWrapper,children:[h.jsx("input",{type:"color",value:at.darkBackground,onChange:Q=>Ut(j=>({...j,darkBackground:Q.target.value})),className:Rt.colorInput}),h.jsx("input",{type:"text",value:at.darkBackground,onChange:Q=>{let j=Q.target.value;j.startsWith("#")||(j="#"+j),/^#[0-9A-Fa-f]{0,6}$/.test(j)&&Ut(Z=>({...Z,darkBackground:j}))},className:Rt.hexInput,maxLength:7,placeholder:"#000000"})]})]}),h.jsxs("div",{className:Rt.colorRow,children:[h.jsx("label",{className:Rt.colorLabel,children:"Light Theme"}),h.jsxs("div",{className:Rt.colorInputWrapper,children:[h.jsx("input",{type:"color",value:at.lightBackground,onChange:Q=>Ut(j=>({...j,lightBackground:Q.target.value})),className:Rt.colorInput}),h.jsx("input",{type:"text",value:at.lightBackground,onChange:Q=>{let j=Q.target.value;j.startsWith("#")||(j="#"+j),/^#[0-9A-Fa-f]{0,6}$/.test(j)&&Ut(Z=>({...Z,lightBackground:j}))},className:Rt.hexInput,maxLength:7,placeholder:"#000000"})]})]}),h.jsx("button",{className:Rt.resetButton,onClick:ot,style:{marginTop:"24px"},children:"Reset to Defaults"})]})]})]}),h.jsxs("div",{className:Rt.footer,children:[h.jsx("button",{className:Rt.cancelButton,onClick:W,children:"Cancel"}),h.jsx("button",{className:Rt.okButton,onClick:K,children:"Ok"})]})]})})},jO="_nav_19nnr_1",OO="_tabs_19nnr_27",RO="_tab_19nnr_27",zO="_active_19nnr_105",VO="_icon_19nnr_113",PO="_label_19nnr_143",KO="_badge_19nnr_161",GO="_light_19nnr_195",Fr={nav:jO,tabs:OO,tab:RO,active:zO,icon:VO,label:PO,badge:KO,light:GO},WO=()=>h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[h.jsx("path",{d:"M3 3v18h18"}),h.jsx("path",{d:"M7 16l4-4 4 4 5-6"})]}),$O=()=>h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[h.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),h.jsx("path",{d:"M7 8h10M7 12h10M7 16h6"})]}),XO=()=>h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[h.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),h.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),YO=()=>h.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),JO=()=>h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[h.jsx("circle",{cx:"12",cy:"12",r:"3"}),h.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),qO=[{id:"chart",label:"Chart",Icon:WO},{id:"watchlist",label:"Watchlist",Icon:$O},{id:"alerts",label:"Alerts",Icon:XO},{id:"tools",label:"Tools",Icon:YO},{id:"settings",label:"Settings",Icon:JO}],ZO=({activeTab:A="chart",onTabChange:t,alertCount:e=0,theme:s="dark"})=>{const n=a=>{t&&t(a)},l=(a,c)=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),n(c))};return h.jsx("nav",{className:`${Fr.nav} ${s==="light"?Fr.light:""}`,role:"navigation","aria-label":"Main navigation",children:h.jsx("div",{className:Fr.tabs,children:qO.map(({id:a,label:c,Icon:d})=>h.jsxs("button",{type:"button",className:`${Fr.tab} ${A===a?Fr.active:""}`,onClick:()=>n(a),onKeyDown:f=>l(f,a),"aria-current":A===a?"page":void 0,"aria-label":a==="alerts"&&e>0?`${c} (${e} unread)`:c,children:[h.jsxs("span",{className:Fr.icon,children:[h.jsx(d,{}),a==="alerts"&&e>0&&h.jsx("span",{className:Fr.badge,"aria-hidden":"true",children:e>99?"99+":e})]}),h.jsx("span",{className:Fr.label,children:c})]},a))})})},tR={mobile:"(max-width: 480px)"};function eR(A){const[t,e]=B.useState(()=>typeof window>"u"?!1:window.matchMedia(A).matches);return B.useEffect(()=>{if(typeof window>"u")return;const s=window.matchMedia(A);e(s.matches);const n=l=>e(l.matches);return s.addEventListener?(s.addEventListener("change",n),()=>s.removeEventListener("change",n)):(s.addListener(n),()=>s.removeListener(n))},[A]),t}function sR(){return eR(tR.mobile)}const iR=5,u2="tv_recent_commands",AR=(A,t)=>{try{return A?JSON.parse(A):t}catch{return t}},Ps={CHART:"chart",INDICATOR:"indicator",DRAWING:"drawing",TOOL:"tool",ACTION:"action"},_u={[Ps.CHART]:{label:"Chart Types",order:1},[Ps.INDICATOR]:{label:"Indicators",order:2},[Ps.DRAWING]:{label:"Drawing Tools",order:3},[Ps.TOOL]:{label:"Tools",order:4},[Ps.ACTION]:{label:"Actions",order:5}},nR=A=>{const t=[];return[{id:"candlestick",title:"Candlestick",keywords:["candle","ohlc"]},{id:"bar",title:"Bar Chart",keywords:["bars","ohlc"]},{id:"hollow-candlestick",title:"Hollow Candles",keywords:["hollow"]},{id:"line",title:"Line Chart",keywords:["line"]},{id:"area",title:"Area Chart",keywords:["area","filled"]},{id:"baseline",title:"Baseline",keywords:["baseline","zero"]},{id:"heikin-ashi",title:"Heikin Ashi",keywords:["heikin","ashi","ha"]},{id:"renko",title:"Renko",keywords:["renko","brick","box"]}].forEach((a,c)=>{t.push({id:`chart.${a.id}`,title:a.title,category:Ps.CHART,keywords:["chart","type",...a.keywords],shortcut:c<7?`${c+1}`:void 0,action:()=>A.onChartTypeChange?.(a.id)})}),[{id:"sma",title:"SMA",description:"Simple Moving Average",keywords:["moving","average","simple"]},{id:"ema",title:"EMA",description:"Exponential Moving Average",keywords:["moving","average","exponential"]},{id:"rsi",title:"RSI",description:"Relative Strength Index",keywords:["relative","strength","oscillator"]},{id:"macd",title:"MACD",description:"Moving Average Convergence Divergence",keywords:["convergence","divergence","momentum"]},{id:"bollingerBands",title:"Bollinger Bands",description:"Volatility Bands",keywords:["bollinger","bands","volatility","bb"]},{id:"volume",title:"Volume",description:"Volume Bars",keywords:["volume","bars"]},{id:"atr",title:"ATR",description:"Average True Range",keywords:["average","true","range","volatility"]},{id:"stochastic",title:"Stochastic",description:"Stochastic Oscillator",keywords:["stochastic","oscillator","%k","%d"]},{id:"vwap",title:"VWAP",description:"Volume Weighted Average Price",keywords:["volume","weighted","average","price"]}].forEach(a=>{t.push({id:`indicator.${a.id}`,title:a.title,description:a.description,category:Ps.INDICATOR,keywords:["indicator",...a.keywords],action:()=>A.toggleIndicator?.(a.id)})}),[{id:"trendline",title:"Trendline",keywords:["trend","line","diagonal"]},{id:"horizontal",title:"Horizontal Line",keywords:["horizontal","support","resistance"]},{id:"vertical",title:"Vertical Line",keywords:["vertical"]},{id:"ray",title:"Ray",keywords:["ray","line"]},{id:"arrow",title:"Arrow",keywords:["arrow","pointer"]},{id:"parallel_channel",title:"Parallel Channel",keywords:["channel","parallel"]},{id:"fibonacci",title:"Fibonacci Retracement",keywords:["fibonacci","fib","retracement"]},{id:"fib_extension",title:"Fibonacci Extension",keywords:["fibonacci","fib","extension"]},{id:"rectangle",title:"Rectangle",keywords:["rectangle","box","shape"]},{id:"circle",title:"Circle",keywords:["circle","ellipse","shape"]},{id:"triangle",title:"Triangle",keywords:["triangle","shape"]},{id:"text",title:"Text",keywords:["text","label","annotation"]},{id:"callout",title:"Callout",keywords:["callout","bubble","annotation"]},{id:"brush",title:"Brush",keywords:["brush","draw","freehand"]},{id:"highlighter",title:"Highlighter",keywords:["highlighter","mark"]}].forEach(a=>{t.push({id:`drawing.${a.id}`,title:a.title,category:Ps.DRAWING,keywords:["draw","drawing",...a.keywords],action:()=>A.onToolChange?.(a.id)})}),[{id:"cursor",title:"Cursor",keywords:["cursor","pointer","select"]},{id:"eraser",title:"Eraser",keywords:["eraser","delete","remove"]},{id:"zoom_in",title:"Zoom In",keywords:["zoom","in","magnify"]},{id:"zoom_out",title:"Zoom Out",keywords:["zoom","out","shrink"]},{id:"measure",title:"Measure",keywords:["measure","ruler","distance"]}].forEach(a=>{t.push({id:`tool.${a.id}`,title:a.title,category:Ps.TOOL,keywords:["tool",...a.keywords],action:()=>A.onToolChange?.(a.id)})}),t.push({id:"action.search",title:"Search Symbol",category:Ps.ACTION,keywords:["search","symbol","find","ticker"],shortcut:"P",action:()=>A.openSymbolSearch?.("switch")},{id:"action.add",title:"Add Symbol",category:Ps.ACTION,keywords:["add","symbol","new"],action:()=>A.openSymbolSearch?.("add")},{id:"action.compare",title:"Compare Symbols",category:Ps.ACTION,keywords:["compare","symbol","overlay"],action:()=>A.openSymbolSearch?.("compare")},{id:"action.settings",title:"Settings",category:Ps.ACTION,keywords:["settings","preferences","config","options"],action:()=>A.openSettings?.()},{id:"action.undo",title:"Undo",category:Ps.ACTION,keywords:["undo","back","revert"],shortcut:"Z",action:()=>A.onUndo?.()},{id:"action.redo",title:"Redo",category:Ps.ACTION,keywords:["redo","forward"],shortcut:"Y",action:()=>A.onRedo?.()},{id:"action.theme",title:"Toggle Theme",category:Ps.ACTION,keywords:["theme","dark","light","mode","toggle"],action:()=>A.toggleTheme?.()},{id:"action.fullscreen",title:"Toggle Fullscreen",category:Ps.ACTION,keywords:["fullscreen","full","screen","maximize"],shortcut:"F11",action:()=>A.toggleFullscreen?.()},{id:"action.screenshot",title:"Take Screenshot",category:Ps.ACTION,keywords:["screenshot","capture","image","download"],action:()=>A.takeScreenshot?.()},{id:"action.copy",title:"Copy Chart Image",category:Ps.ACTION,keywords:["copy","clipboard","image"],action:()=>A.copyImage?.()},{id:"action.alert",title:"Create Alert",category:Ps.ACTION,keywords:["alert","notification","price"],action:()=>A.createAlert?.()},{id:"action.clear",title:"Clear All Drawings",category:Ps.ACTION,keywords:["clear","delete","remove","drawings","all"],action:()=>A.clearDrawings?.()},{id:"action.shortcuts",title:"Keyboard Shortcuts",category:Ps.ACTION,keywords:["keyboard","shortcuts","keys","hotkeys","help"],shortcut:"?",action:()=>A.openShortcutsDialog?.()}),t},rR=A=>{const[t,e]=B.useState(()=>{const p=AR(localStorage.getItem(u2),[]);return Array.isArray(p)?p:[]}),s=B.useMemo(()=>nR(A),[A]);B.useEffect(()=>{try{localStorage.setItem(u2,JSON.stringify(t))}catch(p){console.error("Failed to persist recent commands:",p)}},[t]);const n=B.useMemo(()=>t.map(p=>s.find(m=>m.id===p)).filter(Boolean),[t,s]),l=B.useCallback(p=>{e(m=>{const v=m.filter(w=>w!==p);return[p,...v].slice(0,iR)})},[]),a=B.useCallback(p=>!p||p.trim()===""?s:zN(p,s,["title","description"],.2),[s]),c=B.useCallback(p=>{p&&p.action&&(l(p.id),p.action())},[l]),d=B.useMemo(()=>{const p={};return s.forEach(v=>{p[v.category]||(p[v.category]=[]),p[v.category].push(v)}),Object.entries(p).sort(([v],[w])=>(_u[v]?.order||99)-(_u[w]?.order||99)).map(([v,w])=>({category:v,label:_u[v]?.label||v,commands:w}))},[s]),f=B.useCallback(()=>{e([])},[]);return{commands:s,recentCommands:n,recentCommandIds:t,groupedCommands:d,searchCommands:a,executeCommand:c,addToRecent:l,clearRecent:f,COMMAND_CATEGORIES:Ps,CATEGORY_CONFIG:_u}},fs={NAVIGATION:"navigation",CHART:"chart",DRAWING:"drawing",ZOOM:"zoom",ACTIONS:"actions"},lR={[fs.NAVIGATION]:"Navigation",[fs.CHART]:"Chart Types",[fs.DRAWING]:"Drawing Tools",[fs.ZOOM]:"Zoom",[fs.ACTIONS]:"Actions"},Eb={openCommandPalette:{key:"k",modifiers:["cmd"],category:fs.NAVIGATION,label:"Open Command Palette",action:"openCommandPalette"},openShortcutsHelp:{key:"?",modifiers:[],category:fs.NAVIGATION,label:"Keyboard Shortcuts",action:"openShortcutsHelp"},openSymbolSearch:{key:"p",modifiers:[],category:fs.NAVIGATION,label:"Symbol Search",action:"openSymbolSearch"},closeDialog:{key:"Escape",modifiers:[],category:fs.NAVIGATION,label:"Close / Cancel",action:"closeDialog"},chartCandlestick:{key:"1",modifiers:[],category:fs.CHART,label:"Candlestick Chart",action:"setChartType",payload:"Candlestick"},chartBar:{key:"2",modifiers:[],category:fs.CHART,label:"Bar Chart",action:"setChartType",payload:"Bar"},chartHollowCandles:{key:"3",modifiers:[],category:fs.CHART,label:"Hollow Candles",action:"setChartType",payload:"Hollow candles"},chartLine:{key:"4",modifiers:[],category:fs.CHART,label:"Line Chart",action:"setChartType",payload:"Line"},chartArea:{key:"5",modifiers:[],category:fs.CHART,label:"Area Chart",action:"setChartType",payload:"Area"},chartBaseline:{key:"6",modifiers:[],category:fs.CHART,label:"Baseline Chart",action:"setChartType",payload:"Baseline"},chartHeikinAshi:{key:"7",modifiers:[],category:fs.CHART,label:"Heikin Ashi",action:"setChartType",payload:"Heikin Ashi"},activateDrawMode:{key:"d",modifiers:[],category:fs.DRAWING,label:"Draw Mode",action:"activateDrawMode"},activateCursorMode:{key:"c",modifiers:[],category:fs.DRAWING,label:"Cursor Mode",action:"activateCursorMode"},zoomIn:{key:"+",modifiers:[],category:fs.ZOOM,label:"Zoom In",action:"zoomIn",altKey:"="},zoomOut:{key:"-",modifiers:[],category:fs.ZOOM,label:"Zoom Out",action:"zoomOut"},undo:{key:"z",modifiers:["cmd"],category:fs.ACTIONS,label:"Undo",action:"undo"},redo:{key:"y",modifiers:["cmd"],category:fs.ACTIONS,label:"Redo",action:"redo"},createAlert:{key:"a",modifiers:[],category:fs.ACTIONS,label:"Create Alert",action:"createAlert"},toggleFullscreen:{key:"F11",modifiers:[],category:fs.ACTIONS,label:"Toggle Fullscreen",action:"toggleFullscreen"}},Tb=()=>typeof navigator>"u"?!1:navigator.platform.toUpperCase().indexOf("MAC")>=0,oR=A=>{if(!A)return"";const t=[],e=Tb();A.modifiers?.includes("cmd")&&t.push(e?"":"Ctrl"),A.modifiers?.includes("shift")&&t.push(e?"":"Shift"),A.modifiers?.includes("alt")&&t.push(e?"":"Alt");let s=A.key;return s==="Escape"?s="Esc":s===" "?s="Space":s.length===1&&(s=s.toUpperCase()),t.push(s),e?t.join(""):t.join("+")},aR=()=>{const A={};return Object.values(fs).forEach(t=>{A[t]=[]}),Object.entries(Eb).forEach(([t,e])=>{A[e.category]&&A[e.category].push({id:t,...e,formatted:oR(e)})}),A},cR=(A,t)=>{if(!t)return!1;const e=Tb(),s=A.key,n=e?A.metaKey:A.ctrlKey,l=A.altKey,a=t.modifiers?.includes("cmd")||!1,c=t.modifiers?.includes("alt")||!1;if(n!==a||l!==c)return!1;if(!["?","+","!","@","#","$","%","^","&","*","(",")","_","{","}","|",":",'"',"<",">","~"].includes(t.key)){const v=A.shiftKey,w=t.modifiers?.includes("shift")||!1;if(v!==w)return!1}const p=t.key.toLowerCase(),m=s.toLowerCase();return!!(m===p||t.altKey&&m===t.altKey.toLowerCase())},hR=A=>{const t=A.target;if(!t)return!1;const e=t.tagName?.toLowerCase();return t.isContentEditable||(e==="input"||e==="textarea"||e==="select")};function uR(A={},t={}){const{enabled:e=!0,disabledShortcuts:s=[],dialogOpen:n=!1}=t,l=B.useRef(A),a=B.useRef({enabled:e,disabledShortcuts:s,dialogOpen:n});B.useEffect(()=>{l.current=A},[A]),B.useEffect(()=>{a.current={enabled:e,disabledShortcuts:s,dialogOpen:n}},[e,s,n]);const c=B.useCallback(d=>{const{enabled:f,disabledShortcuts:p,dialogOpen:m}=a.current,v=l.current;if(!f)return;const w=hR(d);let y=null,b=null;for(const[U,M]of Object.entries(Eb))if(cR(d,M)){y=M,b=U;break}if(!y||!b||p.includes(b))return;const S=y.modifiers?.length>0;if(w&&!(y.key==="Escape")&&!S)return;if(m){const U=y.key==="Escape",M=y.action==="closeDialog";if(!U&&!M&&!S)return}const x=v[y.action];x&&(d.preventDefault(),d.stopPropagation(),y.payload!==void 0?x(y.payload):x())},[]);B.useEffect(()=>(document.addEventListener("keydown",c,!0),()=>document.removeEventListener("keydown",c,!0)),[c])}const dR="_overlay_1ogby_3",fR="_modal_1ogby_53",pR="_searchRow_1ogby_103",gR="_searchContainer_1ogby_113",mR="_searchIcon_1ogby_143",_R="_input_1ogby_155",vR="_shortcutHint_1ogby_181",BR="_list_1ogby_205",wR="_section_1ogby_255",yR="_sectionLabel_1ogby_263",CR="_sectionIcon_1ogby_287",bR="_item_1ogby_297",xR="_itemActive_1ogby_339",SR="_itemIcon_1ogby_355",ER="_itemContent_1ogby_389",TR="_itemTitle_1ogby_405",QR="_itemDescription_1ogby_425",FR="_itemShortcut_1ogby_441",UR="_highlight_1ogby_473",MR="_noResults_1ogby_485",IR="_footer_1ogby_501",NR="_footerHint_1ogby_521",bs={overlay:dR,modal:fR,searchRow:pR,searchContainer:gR,searchIcon:mR,input:_R,shortcutHint:vR,list:BR,section:wR,sectionLabel:yR,sectionIcon:CR,item:bR,itemActive:xR,itemIcon:SR,itemContent:ER,itemTitle:TR,itemDescription:QR,itemShortcut:FR,highlight:UR,noResults:MR,footer:IR,footerHint:NR},d2=A=>{switch(A){case"chart":return U1;case"indicator":return wc;case"drawing":return dE;case"tool":return TE;case"action":return V2;default:return k4}},LR=({text:A,query:t})=>{if(!t)return h.jsx("span",{children:A});const e=VN(A,t);return h.jsx("span",{children:e.map((s,n)=>s.highlight?h.jsx("span",{className:bs.highlight,children:s.text},n):h.jsx("span",{children:s.text},n))})},HR=({isOpen:A,onClose:t,commands:e,recentCommands:s,groupedCommands:n,searchCommands:l,executeCommand:a})=>{const[c,d]=B.useState(""),[f,p]=B.useState(0),m=B.useRef(null),v=B.useRef(null),w=Nl(A,{autoFocus:!1}),y=B.useMemo(()=>c.trim()?l(c):null,[c,l]),b=B.useMemo(()=>{if(y)return y;const D=[];return s.length>0&&s.forEach(V=>{D.push({...V,section:"recent"})}),n.forEach(V=>{V.commands.forEach(lt=>{D.push({...lt,section:V.category})})}),D},[y,s,n]);B.useEffect(()=>{A&&(d(""),p(0),setTimeout(()=>m.current?.focus(),50))},[A]),B.useEffect(()=>{if(v.current&&f>=0){const V=v.current.querySelectorAll("[data-command-item]")[f];V&&V.scrollIntoView({block:"nearest",behavior:"smooth"})}},[f]),Gr({enabled:A,onEscape:t}),P1({enabled:A&&b.length>0,itemCount:b.length,activeIndex:f,setActiveIndex:p,onSelect:D=>{const V=b[D];V&&x(V)}});const S=B.useCallback(D=>{d(D.target.value),p(0)},[]),x=B.useCallback(D=>{a(D),t()},[a,t]),U=B.useCallback(D=>{D.target===D.currentTarget&&t()},[t]),N=B.useMemo(()=>typeof navigator<"u"&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),[])?"":"Ctrl";if(!A)return null;const I=(D,V,lt=!1)=>{const dt=f===V,At=d2(D.category);return h.jsxs("button",{"data-command-item":!0,className:`${bs.item} ${dt?bs.itemActive:""}`,onClick:()=>x(D),onMouseEnter:()=>p(V),children:[h.jsx("span",{className:bs.itemIcon,children:h.jsx(At,{size:16})}),h.jsxs("span",{className:bs.itemContent,children:[h.jsx("span",{className:bs.itemTitle,children:h.jsx(LR,{text:D.title,query:c})}),D.description&&h.jsx("span",{className:bs.itemDescription,children:D.description})]}),D.shortcut&&h.jsx("span",{className:bs.itemShortcut,children:D.shortcut.includes("F")?D.shortcut:`${N}${D.shortcut}`})]},`${D.id}-${lt?"recent":"cmd"}`)};let R=0;return h.jsx("div",{className:bs.overlay,onClick:U,role:"dialog","aria-modal":"true","aria-labelledby":"command-palette-title",children:h.jsxs("div",{ref:w,className:bs.modal,children:[h.jsx("div",{className:bs.searchRow,children:h.jsxs("div",{className:bs.searchContainer,children:[h.jsx(N1,{size:18,className:bs.searchIcon}),h.jsx("input",{ref:m,type:"text",value:c,onChange:S,placeholder:"Type a command or search...",className:bs.input,id:"command-palette-title",autoComplete:"off",spellCheck:"false"}),h.jsxs("span",{className:bs.shortcutHint,children:[N,"K"]})]})}),h.jsx("div",{ref:v,className:bs.list,role:"listbox",children:y?y.length>0?y.map((D,V)=>I(D,V)):h.jsxs("div",{className:bs.noResults,children:['No commands found for "',c,'"']}):h.jsxs(h.Fragment,{children:[s.length>0&&h.jsxs("div",{className:bs.section,children:[h.jsxs("div",{className:bs.sectionLabel,children:[h.jsx(M1,{size:14,className:bs.sectionIcon}),"Recent"]}),s.map(D=>{const V=R++;return I(D,V,!0)})]}),n.map(D=>{const V=d2(D.category);return h.jsxs("div",{className:bs.section,children:[h.jsxs("div",{className:bs.sectionLabel,children:[h.jsx(V,{size:14,className:bs.sectionIcon}),D.label]}),D.commands.map(lt=>{const dt=R++;return I(lt,dt)})]},D.category)})]})}),h.jsxs("div",{className:bs.footer,children:[h.jsxs("span",{className:bs.footerHint,children:[h.jsx("kbd",{children:""})," Navigate"]}),h.jsxs("span",{className:bs.footerHint,children:[h.jsx("kbd",{children:""})," Execute"]}),h.jsxs("span",{className:bs.footerHint,children:[h.jsx("kbd",{children:"Esc"})," Close"]})]})]})})},Qb="tv_layout_templates",Wo=50,Fb="1.0",DR=(A,t)=>{try{return A?JSON.parse(A):t}catch{return t}},Ub=()=>`template_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,tr=()=>{const A=DR(localStorage.getItem(Qb),[]);return Array.isArray(A)?A:[]},Mb=A=>tr().find(e=>e.id===A)||null,vc=A=>{try{return localStorage.setItem(Qb,JSON.stringify(A)),!0}catch(t){return console.error("Failed to save templates:",t),!1}},kR=A=>{const t=tr(),e=new Date().toISOString();if(A.id){const s=t.findIndex(n=>n.id===A.id);if(s===-1)return{success:!1,error:"Template not found"};t[s]={...t[s],...A,updatedAt:e}}else{if(t.length>=Wo)return{success:!1,error:`Maximum ${Wo} templates allowed. Please delete some templates first.`};const s={...A,id:Ub(),createdAt:e,updatedAt:e,isFavorite:!1};return t.unshift(s),vc(t)?{success:!0,template:s}:{success:!1,error:"Failed to save template"}}return vc(t)?{success:!0,template:t.find(s=>s.id===A.id)}:{success:!1,error:"Failed to save template"}},jR=A=>{const t=tr(),e=t.filter(s=>s.id!==A);return e.length===t.length?{success:!1,error:"Template not found"}:vc(e)?{success:!0}:{success:!1,error:"Failed to delete template"}},OR=A=>{const t=tr(),e=t.findIndex(s=>s.id===A);return e===-1?{success:!1,error:"Template not found"}:(t[e]={...t[e],isFavorite:!t[e].isFavorite,updatedAt:new Date().toISOString()},vc(t)?{success:!0,template:t[e]}:{success:!1,error:"Failed to update template"})},RR=()=>{const A=tr(),t={version:Fb,exportedAt:new Date().toISOString(),templates:A};return JSON.stringify(t,null,2)},zR=A=>{const t=Mb(A);if(!t)return null;const e={version:Fb,exportedAt:new Date().toISOString(),templates:[t]};return JSON.stringify(e,null,2)},VR=A=>{let t;try{t=JSON.parse(A)}catch{return{success:!1,error:"Invalid JSON format"}}if(!t.templates||!Array.isArray(t.templates))return{success:!1,error:"Invalid template format: missing templates array"};const e=tr(),s=[],n=[];for(const l of t.templates){if(!l.name||!l.layout||!l.charts){n.push(`Skipped invalid template: ${l.name||"unnamed"}`);continue}if(e.length+s.length>=Wo){n.push(`Maximum ${Wo} templates reached. Some templates were not imported.`);break}const a={...l,id:Ub(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isFavorite:!1};s.push(a)}if(s.length>0){const l=[...s,...e];return vc(l)?{success:!0,imported:s.length,errors:n.length>0?n:null}:{success:!1,error:"Failed to save imported templates"}}return{success:!1,error:n.length>0?n.join("; "):"No valid templates to import"}},PR=(A,t,e="")=>{const{layout:s,charts:n,chartType:l,chartAppearance:a,theme:c}=A,d=n.map(f=>({id:f.id,symbol:f.symbol,exchange:f.exchange,interval:f.interval,indicators:JSON.parse(JSON.stringify(f.indicators||{})),comparisonSymbols:JSON.parse(JSON.stringify(f.comparisonSymbols||[]))}));return{name:t,description:e,layout:s,chartType:l,charts:d,appearance:{chartAppearance:a?JSON.parse(JSON.stringify(a)):null,theme:c}}},KR=()=>tr().sort((t,e)=>t.isFavorite&&!e.isFavorite?-1:!t.isFavorite&&e.isFavorite?1:new Date(e.updatedAt)-new Date(t.updatedAt)),Ib=()=>tr().length,GR=()=>Ib()>=Wo,WR=A=>{if(!A)return"";const t=[];return A.sma&&t.push("SMA"),A.ema&&t.push("EMA"),A.rsi?.enabled&&t.push("RSI"),A.macd?.enabled&&t.push("MACD"),A.bollingerBands?.enabled&&t.push("BB"),A.volume?.enabled&&t.push("Vol"),A.atr?.enabled&&t.push("ATR"),A.stochastic?.enabled&&t.push("Stoch"),A.vwap?.enabled&&t.push("VWAP"),t.join(", ")||"None"},eA={getAll:tr,getAllSorted:KR,getById:Mb,save:kR,delete:jR,toggleFavorite:OR,exportAll:RR,exportOne:zR,importTemplates:VR,captureCurrentLayout:PR,getCount:Ib,isAtMaxCapacity:GR,getIndicatorSummary:WR,MAX_TEMPLATES:Wo},$R="_overlay_ls4dn_3",XR="_modal_ls4dn_51",YR="_header_ls4dn_103",JR="_title_ls4dn_119",qR="_closeBtn_ls4dn_139",ZR="_content_ls4dn_179",tz="_sidebar_ls4dn_195",ez="_sidebarHeader_ls4dn_213",sz="_sidebarTitle_ls4dn_229",iz="_templateCount_ls4dn_245",Az="_templateList_ls4dn_263",nz="_templateItem_ls4dn_301",rz="_templateItemActive_ls4dn_335",lz="_starIcon_ls4dn_351",oz="_templateName_ls4dn_361",az="_templateLayout_ls4dn_387",cz="_emptyList_ls4dn_405",hz="_sidebarActions_ls4dn_421",uz="_sidebarBtn_ls4dn_437",dz="_sidebarDivider_ls4dn_485",fz="_main_ls4dn_499",pz="_previewEmpty_ls4dn_519",gz="_preview_ls4dn_519",mz="_previewHeader_ls4dn_563",_z="_previewTitle_ls4dn_575",vz="_favoriteBtn_ls4dn_589",Bz="_favoriteActive_ls4dn_625",wz="_previewDescription_ls4dn_633",yz="_previewMeta_ls4dn_649",Cz="_metaItem_ls4dn_661",bz="_previewCharts_ls4dn_679",xz="_previewSubtitle_ls4dn_687",Sz="_chartGrid_ls4dn_705",Ez="_chartCard_ls4dn_747",Tz="_chartSymbol_ls4dn_761",Qz="_chartInterval_ls4dn_775",Fz="_chartIndicators_ls4dn_789",Uz="_previewActions_ls4dn_807",Mz="_saveFormContainer_ls4dn_825",Iz="_saveFormTitle_ls4dn_837",Nz="_saveForm_ls4dn_825",Lz="_formGroup_ls4dn_869",Hz="_formLabel_ls4dn_881",Dz="_formInput_ls4dn_893",kz="_formTextarea_ls4dn_931",jz="_formActions_ls4dn_975",Oz="_footer_ls4dn_991",Rz="_btnPrimary_ls4dn_1009",zz="_btnSecondary_ls4dn_1059",Vz="_btnDanger_ls4dn_1099",re={overlay:$R,modal:XR,header:YR,title:JR,closeBtn:qR,content:ZR,sidebar:tz,sidebarHeader:ez,sidebarTitle:sz,templateCount:iz,templateList:Az,templateItem:nz,templateItemActive:rz,starIcon:lz,templateName:oz,templateLayout:az,emptyList:cz,sidebarActions:hz,sidebarBtn:uz,sidebarDivider:dz,main:fz,previewEmpty:pz,preview:gz,previewHeader:mz,previewTitle:_z,favoriteBtn:vz,favoriteActive:Bz,previewDescription:wz,previewMeta:yz,metaItem:Cz,previewCharts:bz,previewSubtitle:xz,chartGrid:Sz,chartCard:Ez,chartSymbol:Tz,chartInterval:Qz,chartIndicators:Fz,previewActions:Uz,saveFormContainer:Mz,saveFormTitle:Iz,saveForm:Nz,formGroup:Lz,formLabel:Hz,formInput:Dz,formTextarea:kz,formActions:jz,footer:Oz,btnPrimary:Rz,btnSecondary:zz,btnDanger:Vz},Pz=A=>A?new Date(A).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",Kz=A=>({1:"1 Chart",2:"2 Charts",3:"3 Charts",4:"4 Charts"})[A]||`${A} Charts`,Gz=({onSave:A,onCancel:t})=>{const[e,s]=B.useState(""),[n,l]=B.useState(""),a=B.useRef(null);B.useEffect(()=>{a.current?.focus()},[]);const c=d=>{d.preventDefault(),e.trim()&&A(e.trim(),n.trim())};return h.jsxs("form",{onSubmit:c,className:re.saveForm,children:[h.jsxs("div",{className:re.formGroup,children:[h.jsx("label",{className:re.formLabel,children:"Template Name *"}),h.jsx("input",{ref:a,type:"text",value:e,onChange:d=>s(d.target.value),placeholder:"My Trading Setup",className:re.formInput,maxLength:50})]}),h.jsxs("div",{className:re.formGroup,children:[h.jsx("label",{className:re.formLabel,children:"Description (optional)"}),h.jsx("textarea",{value:n,onChange:d=>l(d.target.value),placeholder:"Description of this layout...",className:re.formTextarea,rows:2,maxLength:200})]}),h.jsxs("div",{className:re.formActions,children:[h.jsx("button",{type:"button",onClick:t,className:re.btnSecondary,children:"Cancel"}),h.jsx("button",{type:"submit",disabled:!e.trim(),className:re.btnPrimary,children:"Save Template"})]})]})},Wz=({template:A,onLoad:t,onDelete:e,onToggleFavorite:s})=>{if(!A)return h.jsxs("div",{className:re.previewEmpty,children:[h.jsx(I1,{size:48,strokeWidth:1}),h.jsx("p",{children:"Select a template to preview"})]});const n=A.charts?.map(l=>({symbol:l.symbol,exchange:l.exchange||"NSE",interval:l.interval,indicators:eA.getIndicatorSummary(l.indicators)}))||[];return h.jsxs("div",{className:re.preview,children:[h.jsxs("div",{className:re.previewHeader,children:[h.jsx("h3",{className:re.previewTitle,children:A.name}),h.jsx("button",{onClick:()=>s(A.id),className:`${re.favoriteBtn} ${A.isFavorite?re.favoriteActive:""}`,title:A.isFavorite?"Remove from favorites":"Add to favorites",children:h.jsx(Hr,{size:18,fill:A.isFavorite?"currentColor":"none"})})]}),A.description&&h.jsx("p",{className:re.previewDescription,children:A.description}),h.jsxs("div",{className:re.previewMeta,children:[h.jsxs("div",{className:re.metaItem,children:[h.jsx(G4,{size:14}),h.jsx("span",{children:Kz(A.layout)})]}),h.jsxs("div",{className:re.metaItem,children:[h.jsx(M1,{size:14}),h.jsx("span",{children:Pz(A.createdAt)})]}),A.chartType&&h.jsxs("div",{className:re.metaItem,children:[h.jsx(U1,{size:14}),h.jsx("span",{children:A.chartType})]})]}),h.jsxs("div",{className:re.previewCharts,children:[h.jsx("h4",{className:re.previewSubtitle,children:"Charts"}),h.jsx("div",{className:re.chartGrid,"data-layout":A.layout,children:n.map((l,a)=>h.jsxs("div",{className:re.chartCard,children:[h.jsxs("div",{className:re.chartSymbol,children:[l.symbol,":",l.exchange," ",h.jsx("span",{className:re.chartInterval,children:l.interval})]}),l.indicators&&h.jsxs("div",{className:re.chartIndicators,children:[h.jsx(wc,{size:12}),h.jsx("span",{children:l.indicators})]})]},a))})]}),h.jsxs("div",{className:re.previewActions,children:[h.jsx("button",{onClick:()=>t(A),className:re.btnPrimary,children:"Load Template"}),h.jsxs("button",{onClick:()=>e(A.id),className:re.btnDanger,children:[h.jsx(Il,{size:16}),"Delete"]})]})]})},$z=({isOpen:A,onClose:t,currentState:e,onLoadTemplate:s,showToast:n})=>{const[l,a]=B.useState([]),[c,d]=B.useState(null),[f,p]=B.useState(!1),[m,v]=B.useState(0),w=B.useRef(null),y=Nl(A,{autoFocus:!1});B.useEffect(()=>{if(A){const V=eA.getAllSorted();a(V),d(V[0]?.id||null),v(0),p(!1)}},[A]),Gr({enabled:A&&!f,onEscape:t}),P1({enabled:A&&!f&&l.length>0,itemCount:l.length,activeIndex:m,setActiveIndex:v,onSelect:V=>{d(l[V]?.id)}}),B.useEffect(()=>{l[m]&&d(l[m].id)},[m,l]);const b=B.useMemo(()=>l.find(V=>V.id===c)||null,[l,c]),S=B.useCallback((V,lt)=>{const dt=eA.captureCurrentLayout(e,V,lt),At=eA.save(dt);At.success?(a(eA.getAllSorted()),d(At.template.id),p(!1),n?.("Template saved successfully","success")):n?.(At.error||"Failed to save template","error")},[e,n]),x=B.useCallback(V=>{s?.(V),t(),n?.(`Loaded template: ${V.name}`,"success")},[s,t,n]),U=B.useCallback(V=>{const lt=l.find(dt=>dt.id===V);if(lt&&window.confirm(`Delete template "${lt.name}"?`)){const dt=eA.delete(V);if(dt.success){const At=eA.getAllSorted();a(At),d(At[0]?.id||null),n?.("Template deleted","success")}else n?.(dt.error||"Failed to delete template","error")}},[l,n]),M=B.useCallback(V=>{eA.toggleFavorite(V).success&&a(eA.getAllSorted())},[]),N=B.useCallback(()=>{const V=eA.exportAll(),lt=new Blob([V],{type:"application/json"}),dt=URL.createObjectURL(lt),At=document.createElement("a");At.href=dt,At.download=`layout-templates-${new Date().toISOString().split("T")[0]}.json`,At.click(),URL.revokeObjectURL(dt),n?.("Templates exported successfully","success")},[n]),I=B.useCallback(()=>{w.current?.click()},[]),R=B.useCallback(V=>{const lt=V.target.files?.[0];if(!lt)return;const dt=new FileReader;dt.onload=At=>{const ft=eA.importTemplates(At.target.result);ft.success?(a(eA.getAllSorted()),n?.(`Imported ${ft.imported} template(s)`,"success"),ft.errors&&console.warn("Import warnings:",ft.errors)):n?.(ft.error||"Failed to import templates","error")},dt.readAsText(lt),V.target.value=""},[n]),D=B.useCallback(V=>{V.target===V.currentTarget&&t()},[t]);return A?h.jsx("div",{className:re.overlay,onClick:D,role:"dialog","aria-modal":"true","aria-labelledby":"template-dialog-title",children:h.jsxs("div",{ref:y,className:re.modal,children:[h.jsxs("div",{className:re.header,children:[h.jsxs("h2",{id:"template-dialog-title",className:re.title,children:[h.jsx(I1,{size:20}),"Layout Templates"]}),h.jsx("button",{onClick:t,className:re.closeBtn,"aria-label":"Close",children:h.jsx(ji,{size:20})})]}),h.jsxs("div",{className:re.content,children:[h.jsxs("div",{className:re.sidebar,children:[h.jsxs("div",{className:re.sidebarHeader,children:[h.jsx("span",{className:re.sidebarTitle,children:"Templates"}),h.jsxs("span",{className:re.templateCount,children:[l.length,"/",eA.MAX_TEMPLATES]})]}),h.jsx("div",{className:re.templateList,children:l.length===0?h.jsx("div",{className:re.emptyList,children:h.jsx("p",{children:"No templates saved yet"})}):l.map((V,lt)=>h.jsxs("button",{onClick:()=>{d(V.id),v(lt)},className:`${re.templateItem} ${c===V.id?re.templateItemActive:""}`,children:[V.isFavorite&&h.jsx(Hr,{size:14,className:re.starIcon,fill:"currentColor"}),h.jsx("span",{className:re.templateName,children:V.name}),h.jsx("span",{className:re.templateLayout,children:V.layout})]},V.id))}),h.jsxs("div",{className:re.sidebarActions,children:[h.jsxs("button",{onClick:()=>p(!0),className:re.sidebarBtn,disabled:eA.isAtMaxCapacity(),title:eA.isAtMaxCapacity()?"Max templates reached":"Save current layout",children:[h.jsx(Ql,{size:16}),"New Template"]}),h.jsx("div",{className:re.sidebarDivider}),h.jsxs("button",{onClick:I,className:re.sidebarBtn,children:[h.jsx(z2,{size:16}),"Import"]}),h.jsxs("button",{onClick:N,className:re.sidebarBtn,disabled:l.length===0,children:[h.jsx(L2,{size:16}),"Export All"]})]})]}),h.jsx("div",{className:re.main,children:f?h.jsxs("div",{className:re.saveFormContainer,children:[h.jsxs("h3",{className:re.saveFormTitle,children:[h.jsx(wE,{size:18}),"Save Current Layout"]}),h.jsx(Gz,{onSave:S,onCancel:()=>p(!1)})]}):h.jsx(Wz,{template:b,onLoad:x,onDelete:U,onToggleFavorite:M})})]}),h.jsx("div",{className:re.footer,children:h.jsx("button",{onClick:t,className:re.btnSecondary,children:"Close"})}),h.jsx("input",{ref:w,type:"file",accept:".json",onChange:R,style:{display:"none"}})]})}):null},Xz="_overlay_13pp0_3",Yz="_modal_13pp0_51",Jz="_header_13pp0_103",qz="_title_13pp0_119",Zz="_closeBtn_13pp0_139",tV="_content_13pp0_179",eV="_category_13pp0_227",sV="_categoryHeader_13pp0_235",iV="_categoryIcon_13pp0_259",AV="_shortcutRow_13pp0_269",nV="_shortcutLabel_13pp0_293",rV="_shortcutKey_13pp0_303",lV="_shortcutKeys_13pp0_329",oV="_keyPlus_13pp0_341",aV="_footer_13pp0_353",cV="_footerText_13pp0_371",Hi={overlay:Xz,modal:Yz,header:Jz,title:qz,closeBtn:Zz,content:tV,category:eV,categoryHeader:sV,categoryIcon:iV,shortcutRow:AV,shortcutLabel:nV,shortcutKey:rV,shortcutKeys:lV,keyPlus:oV,footer:aV,footerText:cV},hV=A=>({[fs.NAVIGATION]:nE,[fs.CHART]:U1,[fs.DRAWING]:cE,[fs.ZOOM]:jE,[fs.ACTIONS]:V2})[A]||k2,uV=({formatted:A})=>{if(!A)return null;if(A.includes("+")){const t=A.split("+");return h.jsx("div",{className:Hi.shortcutKeys,children:t.map((e,s)=>h.jsxs("span",{children:[h.jsx("span",{className:Hi.shortcutKey,children:e}),s<t.length-1&&h.jsx("span",{className:Hi.keyPlus,children:"+"})]},s))})}return h.jsx("span",{className:Hi.shortcutKey,children:A})},dV=({category:A,shortcuts:t})=>{const e=hV(A),s=lR[A]||A;return!t||t.length===0?null:h.jsxs("div",{className:Hi.category,children:[h.jsxs("div",{className:Hi.categoryHeader,children:[h.jsx(e,{size:14,className:Hi.categoryIcon}),s]}),t.map(n=>h.jsxs("div",{className:Hi.shortcutRow,children:[h.jsx("span",{className:Hi.shortcutLabel,children:n.label}),h.jsx(uV,{formatted:n.formatted})]},n.id))]})},fV=({isOpen:A,onClose:t})=>{const e=Nl(A,{autoFocus:!1});Gr({enabled:A,onEscape:t});const s=B.useMemo(()=>aR(),[]),n=B.useCallback(l=>{l.target===l.currentTarget&&t()},[t]);return A?h.jsx("div",{className:Hi.overlay,onClick:n,role:"dialog","aria-modal":"true","aria-labelledby":"shortcuts-dialog-title",children:h.jsxs("div",{ref:e,className:Hi.modal,children:[h.jsxs("div",{className:Hi.header,children:[h.jsxs("h2",{id:"shortcuts-dialog-title",className:Hi.title,children:[h.jsx(k2,{size:20}),"Keyboard Shortcuts"]}),h.jsx("button",{onClick:t,className:Hi.closeBtn,"aria-label":"Close",children:h.jsx(ji,{size:20})})]}),h.jsx("div",{className:Hi.content,children:Object.entries(s).map(([l,a])=>h.jsx(dV,{category:l,shortcuts:a},l))}),h.jsx("div",{className:Hi.footer,children:h.jsxs("span",{className:Hi.footerText,children:["Press ",h.jsx("kbd",{children:"?"})," to toggle this dialog"]})})]})}):null},xl={straddle:{name:"Straddle",shortName:"STR",description:"Buy ATM CE + Buy ATM PE (same strike)",legs:[{type:"CE",strikeOffset:0,direction:"buy",quantity:1},{type:"PE",strikeOffset:0,direction:"buy",quantity:1}],minLegs:2,maxLegs:2},strangle:{name:"Strangle",shortName:"STRG",description:"Buy OTM CE + Buy OTM PE (different strikes)",legs:[{type:"CE",strikeOffset:1,direction:"buy",quantity:1},{type:"PE",strikeOffset:-1,direction:"buy",quantity:1}],minLegs:2,maxLegs:2},"iron-condor":{name:"Iron Condor",shortName:"IC",description:"Sell OTM strangle, buy further OTM protection",legs:[{type:"PE",strikeOffset:-2,direction:"buy",quantity:1},{type:"PE",strikeOffset:-1,direction:"sell",quantity:1},{type:"CE",strikeOffset:1,direction:"sell",quantity:1},{type:"CE",strikeOffset:2,direction:"buy",quantity:1}],minLegs:4,maxLegs:4},butterfly:{name:"Butterfly",shortName:"BF",description:"Buy 1 ITM, Sell 2 ATM, Buy 1 OTM (CE)",legs:[{type:"CE",strikeOffset:-1,direction:"buy",quantity:1},{type:"CE",strikeOffset:0,direction:"sell",quantity:2},{type:"CE",strikeOffset:1,direction:"buy",quantity:1}],minLegs:3,maxLegs:3},"bull-call-spread":{name:"Bull Call Spread",shortName:"BCS",description:"Buy lower strike CE, Sell higher strike CE",legs:[{type:"CE",strikeOffset:0,direction:"buy",quantity:1},{type:"CE",strikeOffset:1,direction:"sell",quantity:1}],minLegs:2,maxLegs:2},"bear-put-spread":{name:"Bear Put Spread",shortName:"BPS",description:"Buy higher strike PE, Sell lower strike PE",legs:[{type:"PE",strikeOffset:0,direction:"buy",quantity:1},{type:"PE",strikeOffset:-1,direction:"sell",quantity:1}],minLegs:2,maxLegs:2},custom:{name:"Custom",shortName:"CUST",description:"Build your own strategy (2-4 legs)",legs:[],minLegs:2,maxLegs:4}},Nb=()=>`leg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,f2=(A,t,e,s)=>{const n=xl[A];if(!n||A==="custom")return null;const l=[];for(const a of n.legs){const c=t+a.strikeOffset*e,d=s.find(p=>p.strike===c);if(console.log("[StrategyTemplates] Strike lookup:",{legType:a.type,direction:a.direction,atmStrike:t,strikeOffset:a.strikeOffset,strikeGap:e,targetStrike:c,found:!!d,availableStrikes:s.map(p=>p.strike).slice(0,10)}),!d){console.error("[StrategyTemplates] Strike NOT FOUND:",{targetStrike:c,calculation:`${t} + (${a.strikeOffset} * ${e})`,nearestStrikes:s.map(p=>({strike:p.strike,diff:Math.abs(p.strike-c)})).sort((p,m)=>p.diff-m.diff).slice(0,3)});continue}const f=a.type==="CE"?d.ce:d.pe;if(!f?.symbol){console.error("[StrategyTemplates] Option symbol missing:",{legType:a.type,strike:c,rowCE:d.ce?{symbol:d.ce.symbol,ltp:d.ce.ltp}:null,rowPE:d.pe?{symbol:d.pe.symbol,ltp:d.pe.ltp}:null});continue}l.push({id:Nb(),type:a.type,strike:c,symbol:f.symbol,direction:a.direction,quantity:a.quantity||1,ltp:f.ltp||0})}return l.length!==n.legs.length?(console.warn(`[StrategyTemplates] Could not create all legs for ${A}`),null):l},pV=A=>{if(!A||!Array.isArray(A))return{valid:!1,error:"Invalid legs array"};if(A.length<2)return{valid:!1,error:"Minimum 2 legs required"};if(A.length>4)return{valid:!1,error:"Maximum 4 legs allowed"};for(let t=0;t<A.length;t++){const e=A[t];if(!e.symbol)return{valid:!1,error:`Leg ${t+1} missing symbol`};if(!e.type||!["CE","PE"].includes(e.type))return{valid:!1,error:`Leg ${t+1} has invalid type`};if(!e.direction||!["buy","sell"].includes(e.direction))return{valid:!1,error:`Leg ${t+1} has invalid direction`};if(!e.strike||e.strike<=0)return{valid:!1,error:`Leg ${t+1} has invalid strike`}}return{valid:!0,error:null}},gV=A=>A?.length?A.reduce((t,e)=>{const s=e.direction==="buy"?1:-1,n=e.quantity||1,l=e.ltp||0;return t+s*n*l},0):0,mV=A=>{const{strategyType:t,underlying:e,legs:s,expiry:n}=A;if(!e)return"Unknown Strategy";const l=n?`(${n.slice(0,2)} ${n.slice(2,5)})`:"";if(t&&t!=="custom"&&xl[t])return`${e} ${xl[t].name} ${l}`.trim();if(s?.length){const a=s.map(c=>`${c.direction==="buy"?"+":"-"}${c.strike}${c.type}`).join("/");return`${e} ${a} ${l}`.trim()}return`${e} Custom ${l}`.trim()},_V="_overlay_e87p9_99",vV="_modal_e87p9_119",BV="_header_e87p9_149",wV="_headerLeft_e87p9_169",yV="_underlyingSelect_e87p9_203",CV="_headerStats_e87p9_225",bV="_spotPrice_e87p9_237",xV="_aggregatedOI_e87p9_261",SV="_ceOIHeader_e87p9_279",EV="_peOIHeader_e87p9_289",TV="_oiLoading_e87p9_299",QV="_closeButton_e87p9_311",FV="_expiryTabs_e87p9_351",UV="_scrollBtn_e87p9_369",MV="_tabsContainer_e87p9_407",IV="_loadingTabs_e87p9_421",NV="_expiryTab_e87p9_351",LV="_activeTab_e87p9_469",HV="_tabDate_e87p9_481",DV="_tabDte_e87p9_501",kV="_refreshBtn_e87p9_521",jV="_metricsBar_e87p9_573",OV="_metric_e87p9_573",RV="_metricLabel_e87p9_603",zV="_metricValue_e87p9_615",VV="_oiSummary_e87p9_627",PV="_ceOI_e87p9_279",KV="_peOI_e87p9_289",GV="_oiLabel_e87p9_671",WV="_oiDivider_e87p9_681",$V="_active_e87p9_469",XV="_content_e87p9_747",YV="_loadingState_e87p9_761",JV="_errorState_e87p9_763",qV="_emptyState_e87p9_765",ZV="_subText_e87p9_787",tP="_strikeTable_e87p9_819",eP="_tableHeader_e87p9_827",sP="_colOIBar_e87p9_869",iP="_colOI_e87p9_869",AP="_colLTP_e87p9_885",nP="_colStrike_e87p9_893",rP="_colPremium_e87p9_901",lP="_tableBody_e87p9_925",oP="_tableRow_e87p9_933",aP="_atmRow_e87p9_963",cP="_itmRowCE_e87p9_981",hP="_ceCell_e87p9_981",uP="_itmRowPE_e87p9_983",dP="_peCell_e87p9_983",fP="_oiBarCE_e87p9_1009",pP="_oiBarPE_e87p9_1025",gP="_strikeValue_e87p9_1149",mP="_strikeOffset_e87p9_1163",_P="_premiumValue_e87p9_1197",vP="_clickable_e87p9_1213",BP="_selected_e87p9_1233",wP="_footer_e87p9_1245",yP="_selection_e87p9_1263",CP="_hint_e87p9_1273",bP="_premiumInfo_e87p9_1281",xP="_actions_e87p9_1291",SP="_cancelBtn_e87p9_1301",EP="_createBtn_e87p9_1303",TP="_spinning_e87p9_1373",QP="_addOnsWrapper_e87p9_1403",FP="_addOnsBtn_e87p9_1411",UP="_rotated_e87p9_1453",MP="_addOnsMenu_e87p9_1461",IP="_addOnsItem_e87p9_1489",NP="_addOnsDivider_e87p9_1533",LP="_strikeCountItem_e87p9_1545",HP="_strikeSelect_e87p9_1565",DP="_hideOI_e87p9_1607",kP="_hideOIBars_e87p9_1617",jP="_hidePremium_e87p9_1627",OP="_delta_e87p9_1679",RP="_colIV_e87p9_1693",zP="_strategySelector_e87p9_1745",VP="_strategyBtn_e87p9_1763",PP="_legBuilder_e87p9_1813",KP="_legBuilderHeader_e87p9_1825",GP="_netPremium_e87p9_1843",WP="_credit_e87p9_1853",$P="_legsList_e87p9_1861",XP="_legItem_e87p9_1873",YP="_legDirection_e87p9_1895",JP="_buy_e87p9_1921",qP="_sell_e87p9_1931",ZP="_legStrike_e87p9_1941",tK="_legType_e87p9_1951",eK="_ce_e87p9_279",sK="_pe_e87p9_289",iK="_legLtp_e87p9_1985",AK="_legRemove_e87p9_1995",nK="_addLegHint_e87p9_2033",rK="_legIndicator_e87p9_2059",lK="_buySelected_e87p9_2083",oK="_sellSelected_e87p9_2103",ut={overlay:_V,modal:vV,header:BV,headerLeft:wV,underlyingSelect:yV,headerStats:CV,spotPrice:bV,aggregatedOI:xV,ceOIHeader:SV,peOIHeader:EV,oiLoading:TV,closeButton:QV,expiryTabs:FV,scrollBtn:UV,tabsContainer:MV,loadingTabs:IV,expiryTab:NV,activeTab:LV,tabDate:HV,tabDte:DV,refreshBtn:kV,metricsBar:jV,metric:OV,metricLabel:RV,metricValue:zV,oiSummary:VV,ceOI:PV,peOI:KV,oiLabel:GV,oiDivider:WV,active:$V,content:XV,loadingState:YV,errorState:JV,emptyState:qV,subText:ZV,strikeTable:tP,tableHeader:eP,colOIBar:sP,colOI:iP,colLTP:AP,colStrike:nP,colPremium:rP,tableBody:lP,tableRow:oP,atmRow:aP,itmRowCE:cP,ceCell:hP,itmRowPE:uP,peCell:dP,oiBarCE:fP,oiBarPE:pP,strikeValue:gP,strikeOffset:mP,premiumValue:_P,clickable:vP,selected:BP,footer:wP,selection:yP,hint:CP,premiumInfo:bP,actions:xP,cancelBtn:SP,createBtn:EP,spinning:TP,addOnsWrapper:QP,addOnsBtn:FP,rotated:UP,addOnsMenu:MP,addOnsItem:IP,addOnsDivider:NP,strikeCountItem:LP,strikeSelect:HP,hideOI:DP,hideOIBars:kP,hidePremium:jP,delta:OP,colIV:RP,strategySelector:zP,strategyBtn:VP,legBuilder:PP,legBuilderHeader:KP,netPremium:GP,credit:WP,legsList:$P,legItem:XP,legDirection:YP,buy:JP,sell:qP,legStrike:ZP,legType:tK,ce:eK,pe:sK,legLtp:iK,legRemove:AK,addLegHint:nK,legIndicator:rK,buySelected:lK,sellSelected:oK},aK=({isOpen:A,onClose:t,onSelect:e})=>{const[s,n]=B.useState(kr[0]),[l,a]=B.useState(null),[c,d]=B.useState([]),[f,p]=B.useState(null),[m,v]=B.useState(!1),[w,y]=B.useState(!1),[b,S]=B.useState(null),[x,U]=B.useState(0),[M,N]=B.useState([]),[I,R]=B.useState("straddle"),[D,V]=B.useState(!0),[lt,dt]=B.useState(!0),[At,ft]=B.useState(!0),[mt,at]=B.useState(!0),[Ut,W]=B.useState(!1),[E,K]=B.useState(!1),ot=B.useRef(null),[pt,Q]=B.useState(()=>{const Y=localStorage.getItem("optionChainStrikeCount");return Y?parseInt(Y,10):15}),j=[10,15,20,25,30,50],Z=B.useRef(null),[rt,Et]=B.useState({}),[xt,Qt]=B.useState(!1),[se,oe]=B.useState({totalCeOI:0,totalPeOI:0,isLoading:!1,loadedCount:0,totalExpiries:0}),He=B.useRef(!1);B.useEffect(()=>{const Y=vt=>{ot.current&&!ot.current.contains(vt.target)&&K(!1)};return E&&document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[E]);const Nt=B.useCallback(async()=>{y(!0);try{const Y=await rC(s.symbol);d(Y),Y.length>0&&(p(Y[0]),U(0))}catch(Y){console.error("Failed to fetch expiries:",Y),d([])}finally{y(!1)}},[s]),Wt=B.useCallback(async(Y=!1)=>{if(f){v(!0),S(null),Et({});try{const vt=await t1(s.symbol,s.exchange,f,pt,Y);if(console.log("[OptionChainPicker] API returned:",{isNull:vt===null,isUndefined:vt===void 0,type:typeof vt,hasChainArray:!!vt?.chain,chainArrayLength:vt?.chain?.length,underlying:vt?.underlying,atmStrike:vt?.atmStrike,underlyingLTP:vt?.underlyingLTP,keys:vt?Object.keys(vt):[]}),!vt||vt.chain?.length===0){const Xt=vt?vt.chain?"empty_chain_array":"missing_chain_array":"null_response";console.error("[OptionChainPicker] Empty chain:",{reason:Xt,chainValue:vt,underlying:s.symbol,expiry:f}),S(` No data available (${Xt}). Please wait 30-60 seconds and try again.`),a(null);return}a(vt),N([])}catch(vt){console.error("[OptionChainPicker] Fetch error:",{message:vt.message,name:vt.name,underlying:s.symbol,expiry:f,fullError:vt}),vt.message?.includes("500")||vt.message?.includes("rate limit")?S(" Broker rate limit hit. Please wait 30-60 seconds and try again."):S("Failed to fetch option chain")}finally{v(!1)}}},[s,f,pt]),Je=B.useCallback(()=>{AM(s.symbol,f),Wt(!0)},[s.symbol,f,Wt]),tt=B.useCallback(async()=>{if(!c.length)return;He.current=!1,oe({totalCeOI:0,totalPeOI:0,isLoading:!0,loadedCount:0,totalExpiries:c.length});let Y=0,vt=0;for(let Xt=0;Xt<c.length;Xt++){if(He.current){console.log("[OI Aggregation] Fetch aborted");break}const we=c[Xt];try{const ce=await t1(s.symbol,s.exchange,we,pt,!1);ce?.chain&&ce.chain.forEach(be=>{Y+=be.ce?.oi||0,vt+=be.pe?.oi||0}),oe(be=>({...be,totalCeOI:Y,totalPeOI:vt,loadedCount:Xt+1})),Xt<c.length-1&&await new Promise(be=>setTimeout(be,2e3))}catch(ce){console.warn("[OI Aggregation] Failed for expiry:",we,ce.message)}}oe(Xt=>({...Xt,isLoading:!1}))},[c,s,pt]),Ht=Y=>new Promise(vt=>setTimeout(vt,Y)),Ae=B.useCallback(async Y=>{if(!Y?.length)return;Qt(!0);const vt={},Xt=Y.slice(0,Math.min(Y.length,15));console.log("[Greeks] Fetching Greeks for",Xt.length,"strikes");for(const we of Xt){if(we.ce?.symbol){try{const ce=await HB(we.ce.symbol,s.exchange);ce&&(vt[we.ce.symbol]={delta:ce.greeks?.delta,iv:ce.implied_volatility})}catch(ce){console.warn("[Greeks] CE failed:",we.ce.symbol,ce.message)}await Ht(2e3)}if(we.pe?.symbol){try{const ce=await HB(we.pe.symbol,s.exchange);ce&&(vt[we.pe.symbol]={delta:ce.greeks?.delta,iv:ce.implied_volatility})}catch(ce){console.warn("[Greeks] PE failed:",we.pe.symbol,ce.message)}await Ht(2e3)}Et({...vt})}console.log("[Greeks] Results:",Object.keys(vt).length,"symbols loaded"),Qt(!1)},[s.exchange]);B.useEffect(()=>{A&&Nt()},[A,Nt]),B.useEffect(()=>{A&&f&&Wt()},[A,f,Wt]),B.useEffect(()=>(A&&c.length>0&&tt(),()=>{He.current=!0}),[A,c,tt]),B.useEffect(()=>{oe({totalCeOI:0,totalPeOI:0,isLoading:!1,loadedCount:0,totalExpiries:0})},[s]),B.useEffect(()=>{},[l,rt,Ae]),B.useEffect(()=>{if(!A||!l?.chain?.length)return;Z.current&&(Z.current.close(),Z.current=null);const Y=l.chain.flatMap(vt=>[vt.ce?.symbol&&{symbol:vt.ce.symbol,exchange:"NFO"},vt.pe?.symbol&&{symbol:vt.pe.symbol,exchange:"NFO"}].filter(Boolean));if(Y.length!==0)return console.log("[OptionChainPicker] Subscribing to",Y.length,"option symbols via WebSocket"),Z.current=uc(Y,vt=>{a(Xt=>{if(!Xt)return Xt;const we=Xt.chain.map(ce=>ce.ce?.symbol===vt.symbol?{...ce,ce:{...ce.ce,ltp:vt.last}}:ce.pe?.symbol===vt.symbol?{...ce,pe:{...ce.pe,ltp:vt.last}}:ce);return{...Xt,chain:we}})}),()=>{Z.current&&(console.log("[OptionChainPicker] Unsubscribing from option chain WebSocket"),Z.current.close(),Z.current=null)}},[A,l?.underlying,l?.expiryDate]);const te=B.useMemo(()=>l?.chain||[],[l]),le=l?.atmStrike||0,Ft=B.useMemo(()=>{if(te.length<2)return 50;const Y=te.map(vt=>vt.strike).sort((vt,Xt)=>vt-Xt);return Y[1]-Y[0]},[te]),Qe=B.useMemo(()=>{if(!te.length||!le)return null;let Y=0,vt=0,Xt=0;te.forEach(is=>{const Oi=is.ce?.oi||0,De=is.pe?.oi||0;Y+=Oi,vt+=De,Xt=Math.max(Xt,Oi,De)});const we=te.find(is=>is.strike===le),ce=we?(parseFloat(we.ce?.ltp||0)+parseFloat(we.pe?.ltp||0)).toFixed(2):"-",be=Y>0?(vt/Y).toFixed(2):"-",js=is=>is>=1e7?(is/1e7).toFixed(1)+"Cr":is>=1e5?(is/1e5).toFixed(1)+"L":is.toLocaleString("en-IN");return{totalCeOI:Y,totalPeOI:vt,totalCeOIFormatted:js(Y),totalPeOIFormatted:js(vt),maxOI:Xt,straddlePrem:ce,pcr:be}},[te,le]),qe=B.useMemo(()=>{if(!le||!te.length||Object.keys(rt).length===0)return null;const Y=te.find(we=>we.strike===le);if(!Y)return null;const vt=rt[Y.ce?.symbol]?.iv,Xt=rt[Y.pe?.symbol]?.iv;return vt&&Xt?((vt+Xt)/2).toFixed(1):vt?vt.toFixed(1):Xt?Xt.toFixed(1):null},[rt,le,te]),Qs=B.useMemo(()=>gV(M),[M]),Xs=(Y,vt)=>{const Xt=Zg(Y);return vt===0?"CW":vt===1?"NW":Xt<=7?"W"+(vt+1):Xt<=35?"CM":"NM"},Fe=(Y,vt)=>{const Xt=pc(Y);if(!Xt)return Y;const we=Xt.getDate(),ce=Xt.toLocaleDateString("en-IN",{month:"short"}).toUpperCase(),be=Xt.getFullYear().toString().slice(-2),js=Zg(Y),is=Xs(Y,vt);return{display:`${we} ${ce} '${be}`,dte:js,label:is}},ss=Y=>{if(!le)return"";const vt=Y-le;return vt===0?"(ATM)":vt>0?`(ATM + ${vt})`:`(ATM - ${Math.abs(vt)})`},Ss=B.useMemo(()=>c.slice(x,x+5),[c,x]),wt=x>0,jt=x+5<c.length,he=B.useCallback(Y=>{if(R(Y),Y!=="custom"&&le&&te.length>0){const vt=f2(Y,le,Ft,te);vt&&N(vt)}},[le,Ft,te]),Zt=B.useCallback((Y,vt,Xt)=>{if(I!=="custom"){const be=f2(I,Y,Ft,te);be&&N(be);return}if(M.length>=4){console.warn("Maximum 4 legs allowed");return}if(M.find(be=>be.symbol===Xt.symbol)){N(M.filter(be=>be.symbol!==Xt.symbol));return}const ce={id:Nb(),type:vt,strike:Y,symbol:Xt.symbol,direction:"buy",quantity:1,ltp:Xt.ltp||0};N([...M,ce])},[I,M,Ft,te]),Ue=B.useCallback(Y=>{N(M.map(vt=>vt.id===Y?{...vt,direction:vt.direction==="buy"?"sell":"buy"}:vt))},[M]),Ze=B.useCallback(Y=>{N(M.filter(vt=>vt.id!==Y))},[M]);B.useCallback(Y=>M.some(vt=>vt.symbol===Y),[M]);const $e=B.useCallback(Y=>M.find(vt=>vt.symbol===Y),[M]),ls=B.useCallback(()=>{const Y=pV(M);if(!Y.valid){console.error("Invalid strategy:",Y.error);return}const vt={strategyType:I,underlying:s.symbol,exchange:s.exchange,expiry:f,legs:M,displayName:mV({strategyType:I,underlying:s.symbol,legs:M,expiry:f})};e(vt),t()},[M,I,s,f,e,t]),Pt=Y=>!Y&&Y!==0?"-":Y.toLocaleString("en-IN"),hs=Y=>!Y&&Y!==0?"-":Y.toFixed(1),ke=Y=>!Y&&Y!==0?"-":Y>=1e7?(Y/1e7).toFixed(1)+"Cr":Y>=1e5?(Y/1e5).toFixed(1)+"L":Y.toLocaleString("en-IN");if(!A)return null;const ui=["straddle","strangle","iron-condor","butterfly","bull-call-spread","bear-put-spread","custom"];return h.jsx("div",{className:ut.overlay,onClick:t,children:h.jsxs("div",{className:ut.modal,onClick:Y=>Y.stopPropagation(),children:[h.jsxs("div",{className:ut.header,children:[h.jsxs("div",{className:ut.headerLeft,children:[h.jsx(wc,{size:18}),h.jsx("h3",{children:"Option Strategy"}),h.jsx("select",{className:ut.underlyingSelect,value:s.symbol,onChange:Y=>{const vt=kr.find(Xt=>Xt.symbol===Y.target.value);vt&&(n(vt),p(null),a(null),N([]))},children:kr.map(Y=>h.jsx("option",{value:Y.symbol,children:Y.symbol},Y.symbol))})]}),h.jsxs("div",{className:ut.addOnsWrapper,ref:ot,children:[h.jsxs("button",{className:Tt(ut.addOnsBtn,{[ut.active]:E}),onClick:()=>K(!E),children:[h.jsx(SE,{size:14}),h.jsx("span",{children:"Add ons"}),h.jsx(Bc,{size:14,className:E?ut.rotated:""})]}),E&&h.jsxs("div",{className:ut.addOnsMenu,children:[h.jsxs("label",{className:ut.addOnsItem,children:[h.jsx("input",{type:"checkbox",checked:mt,onChange:Y=>at(Y.target.checked)}),h.jsx("span",{children:"Delta"})]}),h.jsxs("label",{className:ut.addOnsItem,children:[h.jsx("input",{type:"checkbox",checked:Ut,onChange:Y=>W(Y.target.checked)}),h.jsx("span",{children:"IV"})]}),h.jsxs("label",{className:ut.addOnsItem,children:[h.jsx("input",{type:"checkbox",checked:D,onChange:Y=>V(Y.target.checked)}),h.jsx("span",{children:"OI"})]}),h.jsxs("label",{className:ut.addOnsItem,children:[h.jsx("input",{type:"checkbox",checked:lt,onChange:Y=>dt(Y.target.checked)}),h.jsx("span",{children:"OI Bars"})]}),h.jsxs("label",{className:ut.addOnsItem,children:[h.jsx("input",{type:"checkbox",checked:At,onChange:Y=>ft(Y.target.checked)}),h.jsx("span",{children:"Premium"})]}),h.jsx("div",{className:ut.addOnsDivider}),h.jsxs("div",{className:ut.strikeCountItem,children:[h.jsx("span",{children:"Strikes:"}),h.jsx("select",{value:pt,onChange:Y=>{const vt=parseInt(Y.target.value,10);Q(vt),localStorage.setItem("optionChainStrikeCount",vt.toString())},className:ut.strikeSelect,children:j.map(Y=>h.jsx("option",{value:Y,children:Y===50?"All":`${Y}`},Y))})]})]})]}),l&&h.jsxs("div",{className:ut.headerStats,children:[h.jsxs("div",{className:ut.spotPrice,children:["Spot: ",h.jsx("strong",{children:Pt(l.underlyingLTP)})]}),h.jsx("div",{className:ut.aggregatedOI,children:se.isLoading?h.jsxs("span",{className:ut.oiLoading,children:["OI: Loading (",se.loadedCount,"/",se.totalExpiries,")..."]}):se.totalExpiries>0?h.jsxs(h.Fragment,{children:[h.jsxs("span",{className:ut.ceOIHeader,children:["CE: ",ke(se.totalCeOI)]}),h.jsxs("span",{className:ut.peOIHeader,children:["PE: ",ke(se.totalPeOI)]})]}):null})]}),h.jsx("button",{className:ut.closeButton,onClick:t,children:h.jsx(ji,{size:18})})]}),h.jsxs("div",{className:ut.expiryTabs,children:[wt&&h.jsx("button",{className:ut.scrollBtn,onClick:()=>U(Y=>Math.max(0,Y-1)),children:h.jsx(Wg,{size:16})}),h.jsx("div",{className:ut.tabsContainer,children:w?h.jsx("div",{className:ut.loadingTabs,children:"Loading expiries..."}):Ss.map((Y,vt)=>{const{display:Xt,dte:we,label:ce}=Fe(Y,x+vt);return h.jsxs("button",{className:Tt(ut.expiryTab,{[ut.activeTab]:f===Y}),onClick:()=>p(Y),children:[h.jsx("span",{className:ut.tabDate,children:Xt}),h.jsxs("span",{className:ut.tabDte,children:["(",ce,": ",we," DTE)"]})]},Y)})}),jt&&h.jsx("button",{className:ut.scrollBtn,onClick:()=>U(Y=>Y+1),children:h.jsx(N2,{size:16})}),h.jsx("button",{className:ut.refreshBtn,onClick:Je,disabled:m||!f,title:"Refresh (clears cache)",children:h.jsx(R2,{size:14,className:m?ut.spinning:""})})]}),h.jsx("div",{className:ut.strategySelector,children:ui.map(Y=>h.jsx("button",{className:Tt(ut.strategyBtn,{[ut.active]:I===Y}),onClick:()=>he(Y),title:xl[Y]?.description,children:xl[Y]?.shortName||Y},Y))}),M.length>0&&h.jsxs("div",{className:ut.legBuilder,children:[h.jsxs("div",{className:ut.legBuilderHeader,children:[h.jsxs("span",{children:["Selected Legs (",M.length,"/4)"]}),h.jsxs("span",{className:Tt(ut.netPremium,{[ut.credit]:Qs<0}),children:["Net: ",Qs>=0?`${Qs.toFixed(2)} Debit`:`${Math.abs(Qs).toFixed(2)} Credit`]})]}),h.jsxs("div",{className:ut.legsList,children:[M.map(Y=>h.jsxs("div",{className:ut.legItem,children:[h.jsx("button",{className:Tt(ut.legDirection,{[ut.buy]:Y.direction==="buy",[ut.sell]:Y.direction==="sell"}),onClick:()=>Ue(Y.id),children:Y.direction==="buy"?"B":"S"}),h.jsx("span",{className:ut.legStrike,children:Y.strike}),h.jsx("span",{className:Tt(ut.legType,{[ut.ce]:Y.type==="CE",[ut.pe]:Y.type==="PE"}),children:Y.type}),h.jsxs("span",{className:ut.legLtp,children:["",hs(Y.ltp)]}),h.jsx("button",{className:ut.legRemove,onClick:()=>Ze(Y.id),children:h.jsx(Il,{size:12})})]},Y.id)),M.length<4&&I==="custom"&&h.jsxs("div",{className:ut.addLegHint,children:[h.jsx(Ql,{size:14}),h.jsx("span",{children:"Click options to add legs"})]})]})]}),Qe&&h.jsxs("div",{className:ut.metricsBar,children:[qe&&h.jsxs("div",{className:ut.metric,children:[h.jsx("span",{className:ut.metricLabel,children:"ATM IV"}),h.jsxs("span",{className:ut.metricValue,children:[qe,"%"]})]}),h.jsxs("div",{className:ut.metric,children:[h.jsx("span",{className:ut.metricLabel,children:"PCR"}),h.jsx("span",{className:ut.metricValue,children:Qe.pcr})]}),h.jsxs("div",{className:ut.metric,children:[h.jsx("span",{className:ut.metricLabel,children:"Straddle"}),h.jsx("span",{className:ut.metricValue,children:Qe.straddlePrem})]}),h.jsxs("div",{className:ut.oiSummary,children:[h.jsx("span",{className:ut.ceOI,children:Qe.totalCeOIFormatted}),h.jsx("span",{className:ut.oiLabel,children:"CE OI"}),h.jsx("div",{className:ut.oiDivider}),h.jsx("span",{className:ut.oiLabel,children:"PE OI"}),h.jsx("span",{className:ut.peOI,children:Qe.totalPeOIFormatted})]})]}),h.jsx("div",{className:ut.content,children:m?h.jsxs("div",{className:ut.loadingState,children:[h.jsx(O2,{size:24,className:ut.spinning}),h.jsx("p",{children:"Loading option chain..."})]}):b?h.jsxs("div",{className:ut.errorState,children:[h.jsx("p",{children:b}),h.jsx("button",{onClick:Je,children:"Retry (Clear Cache)"})]}):te.length===0?h.jsxs("div",{className:ut.emptyState,children:[h.jsxs("p",{children:["No options found for ",s.symbol]}),h.jsx("p",{className:ut.subText,children:"Select an expiry to load option chain"})]}):h.jsxs("div",{className:Tt(ut.strikeTable,{[ut.hideOI]:!D,[ut.hideOIBars]:!lt,[ut.hidePremium]:!At}),children:[h.jsxs("div",{className:ut.tableHeader,children:[lt&&h.jsx("div",{className:ut.colOIBar}),D&&h.jsx("div",{className:ut.colOI,children:"CE OI"}),h.jsx("div",{className:ut.colLTP,children:mt?"CE LTP ()":"CE LTP"}),Ut&&h.jsx("div",{className:ut.colIV,children:"CE IV"}),h.jsx("div",{className:ut.colStrike,children:"Strike"}),At&&h.jsx("div",{className:ut.colPremium,children:"Prem"}),Ut&&h.jsx("div",{className:ut.colIV,children:"PE IV"}),h.jsx("div",{className:ut.colLTP,children:mt?"PE LTP ()":"PE LTP"}),D&&h.jsx("div",{className:ut.colOI,children:"PE OI"}),lt&&h.jsx("div",{className:ut.colOIBar})]}),h.jsx("div",{className:ut.tableBody,children:te.map(Y=>{const vt=Y.strike===le,Xt=Y.strike<le,we=Y.strike>le,ce=Qe?.maxOI?(Y.ce?.oi||0)/Qe.maxOI*100:0,be=Qe?.maxOI?(Y.pe?.oi||0)/Qe.maxOI*100:0,js=Y.ce?.symbol?$e(Y.ce.symbol):null,is=Y.pe?.symbol?$e(Y.pe.symbol):null;return h.jsxs("div",{className:Tt(ut.tableRow,{[ut.atmRow]:vt,[ut.itmRowCE]:Xt&&!vt,[ut.itmRowPE]:we&&!vt}),children:[lt&&h.jsx("div",{className:ut.colOIBar,children:h.jsx("div",{className:ut.oiBarCE,style:{width:`${ce}%`}})}),D&&h.jsx("div",{className:Tt(ut.colOI,ut.ceCell),children:Pt(Y.ce?.oi)}),h.jsxs("div",{className:Tt(ut.colLTP,ut.clickable,ut.ceCell,{[ut.selected]:!!js,[ut.buySelected]:js?.direction==="buy",[ut.sellSelected]:js?.direction==="sell"}),onClick:()=>Y.ce&&Zt(Y.strike,"CE",Y.ce),children:[js&&h.jsx("span",{className:ut.legIndicator,children:js.direction==="buy"?"B":"S"}),h.jsx("span",{children:hs(Y.ce?.ltp)}),mt&&rt[Y.ce?.symbol]?.delta!==void 0&&h.jsxs("span",{className:ut.delta,children:["(",rt[Y.ce.symbol].delta.toFixed(2),")"]})]}),Ut&&h.jsx("div",{className:Tt(ut.colIV,ut.ceCell),children:rt[Y.ce?.symbol]?.iv!==void 0?`${rt[Y.ce.symbol].iv.toFixed(1)}%`:"-"}),h.jsxs("div",{className:ut.colStrike,children:[h.jsx("span",{className:ut.strikeValue,children:Y.strike}),h.jsx("span",{className:ut.strikeOffset,children:ss(Y.strike)})]}),At&&h.jsx("div",{className:ut.colPremium,children:h.jsx("span",{className:ut.premiumValue,children:Y.straddlePremium})}),Ut&&h.jsx("div",{className:Tt(ut.colIV,ut.peCell),children:rt[Y.pe?.symbol]?.iv!==void 0?`${rt[Y.pe.symbol].iv.toFixed(1)}%`:"-"}),h.jsxs("div",{className:Tt(ut.colLTP,ut.clickable,ut.peCell,{[ut.selected]:!!is,[ut.buySelected]:is?.direction==="buy",[ut.sellSelected]:is?.direction==="sell"}),onClick:()=>Y.pe&&Zt(Y.strike,"PE",Y.pe),children:[mt&&rt[Y.pe?.symbol]?.delta!==void 0&&h.jsxs("span",{className:ut.delta,children:["(",rt[Y.pe.symbol].delta.toFixed(2),")"]}),h.jsx("span",{children:hs(Y.pe?.ltp)}),is&&h.jsx("span",{className:ut.legIndicator,children:is.direction==="buy"?"B":"S"})]}),D&&h.jsx("div",{className:Tt(ut.colOI,ut.peCell),children:Pt(Y.pe?.oi)}),lt&&h.jsx("div",{className:ut.colOIBar,children:h.jsx("div",{className:ut.oiBarPE,style:{width:`${be}%`}})})]},Y.strike)})})]})}),h.jsxs("div",{className:ut.footer,children:[h.jsx("div",{className:ut.selection,children:M.length>=2?h.jsxs("span",{children:[h.jsx("strong",{children:s.symbol})," ",xl[I]?.name||"Custom"," ",h.jsxs("span",{className:ut.premiumInfo,children:["| Net: ",Qs>=0?`${Qs.toFixed(2)}`:`-${Math.abs(Qs).toFixed(2)}`]})]}):h.jsx("span",{className:ut.hint,children:I==="custom"?"Click options to add at least 2 legs":`Click on chain to place ${xl[I]?.name||"strategy"}`})}),h.jsxs("div",{className:ut.actions,children:[h.jsx("button",{className:ut.cancelBtn,onClick:t,children:"Cancel"}),h.jsx("button",{className:ut.createBtn,onClick:ls,disabled:M.length<2,children:"Create Chart"})]})]})]})})},cK="_overlay_bu2i6_139",hK="_modal_bu2i6_161",uK="_header_bu2i6_189",dK="_headerLeft_bu2i6_207",fK="_headerRight_bu2i6_219",pK="_backIcon_bu2i6_231",gK="_headerSelect_bu2i6_249",mK="_headerTitle_bu2i6_291",_K="_refreshBtnHeader_bu2i6_305",vK="_closeBtn_bu2i6_351",BK="_expiryPicker_bu2i6_389",wK="_expiryGrid_bu2i6_407",yK="_monthColumn_bu2i6_421",CK="_monthLabel_bu2i6_447",bK="_dateGroup_bu2i6_465",xK="_dateBtn_bu2i6_489",SK="_activeDate_bu2i6_533",EK="_scrollBtn_bu2i6_547",TK="_colHeaders_bu2i6_589",QK="_colHeaderCalls_bu2i6_605",FK="_colHeaderPuts_bu2i6_619",UK="_colHeaderLabel_bu2i6_633",MK="_colHeaderSub_bu2i6_663",IK="_colHeaderStrike_bu2i6_675",NK="_tableContainer_bu2i6_697",LK="_loading_bu2i6_741",HK="_error_bu2i6_743",DK="_empty_bu2i6_745",kK="_tableBody_bu2i6_797",jK="_row_bu2i6_807",OK="_itmCE_bu2i6_833",RK="_cell_bu2i6_833",zK="_itmPE_bu2i6_843",VK="_combinedCell_bu2i6_885",PK="_combinedCellLeft_bu2i6_905",KK="_oiSection_bu2i6_915",GK="_ltpSection_bu2i6_927",WK="_combinedCellRight_bu2i6_939",$K="_oiBarWrapperLeft_bu2i6_1007",XK="_oiBarWrapperRight_bu2i6_1033",YK="_oiBarGreen_bu2i6_1057",JK="_oiBarRed_bu2i6_1071",qK="_oiValue_bu2i6_1085",ZK="_ltpValue_bu2i6_1105",tG="_ltpChange_bu2i6_1119",eG="_changePositive_bu2i6_1129",sG="_changeNegative_bu2i6_1137",iG="_strikeCell_bu2i6_1147",AG="_clickable_bu2i6_1165",nG="_spotBar_bu2i6_1187",rG="_spotLine_bu2i6_1201",lG="_spotBadge_bu2i6_1213",oG="_spotChange_bu2i6_1251",aG="_positive_bu2i6_1259",cG="_negative_bu2i6_1267",hG="_spin_bu2i6_1277",Kt={overlay:cK,modal:hK,header:uK,headerLeft:dK,headerRight:fK,backIcon:pK,headerSelect:gK,headerTitle:mK,refreshBtnHeader:_K,closeBtn:vK,expiryPicker:BK,expiryGrid:wK,monthColumn:yK,monthLabel:CK,dateGroup:bK,dateBtn:xK,activeDate:SK,scrollBtn:EK,colHeaders:TK,colHeaderCalls:QK,colHeaderPuts:FK,colHeaderLabel:UK,colHeaderSub:MK,colHeaderStrike:IK,tableContainer:NK,loading:LK,error:HK,empty:DK,tableBody:kK,row:jK,itmCE:OK,cell:RK,itmPE:zK,combinedCell:VK,combinedCellLeft:PK,oiSection:KK,ltpSection:GK,combinedCellRight:WK,oiBarWrapperLeft:$K,oiBarWrapperRight:XK,oiBarGreen:YK,oiBarRed:JK,oiValue:qK,ltpValue:ZK,ltpChange:tG,changePositive:eG,changeNegative:sG,strikeCell:iG,clickable:AG,spotBar:nG,spotLine:rG,spotBadge:lG,spotChange:oG,positive:aG,negative:cG,spin:hG},uG=({isOpen:A,onClose:t,onSelectOption:e,initialSymbol:s})=>{const[n,l]=B.useState(kr[0]),[a,c]=B.useState(!1),[d,f]=B.useState(null),[p,m]=B.useState([]),[v,w]=B.useState(null),[y,b]=B.useState(!1),[S,x]=B.useState(!1),[U,M]=B.useState(null),[N,I]=B.useState(0),[R,D]=B.useState(new Map),V=B.useRef(null),lt=B.useRef(null);B.useEffect(()=>{if(A&&s){const tt=kr.find(Ht=>Ht.symbol===s.symbol);tt?(l(tt),c(!1)):(l({symbol:s.symbol,name:s.symbol,exchange:"NFO",indexExchange:"NSE"}),c(!0)),f(null),m([]),w(null),I(0)}},[A,s]);const dt=tt=>{const Ht=new Date(tt);if(!isNaN(Ht.getTime())){const Ae=Ht.getDate(),te=Ht.toLocaleString("en-US",{month:"short"}),le=Ht.getFullYear();return{day:Ae,month:te,year:le}}return{day:tt,month:"",year:0}},At=B.useMemo(()=>{const tt=[];let Ht="",Ae=0,te=new Date().getFullYear();return p.forEach(le=>{const Ft=dt(le);if(`${Ft.month}-${Ft.year}`!==`${Ht}-${Ae}`){const qe=Ft.year!==te,Qs=qe?`${Ft.month} '${String(Ft.year).slice(-2)}`:Ft.month;tt.push({monthYear:Qs,dates:[{expiry:le,day:Ft.day}]}),Ht=Ft.month,Ae=Ft.year,qe&&(te=Ft.year)}else tt[tt.length-1].dates.push({expiry:le,day:Ft.day})}),tt},[p]),ft=B.useMemo(()=>{const Ht=[];let Ae=0,te=N,le=new Date().getFullYear();for(const Qe of At){if(Ae>=12)break;if(te>=Qe.dates.length){te-=Qe.dates.length;continue}const qe=te;te=0;const Qs=12-Ae,Xs=Math.min(Qe.dates.length-qe,Qs),Fe=Qe.dates[qe],ss=new Date(Fe.expiry),Ss=ss.toLocaleString("en-US",{month:"short"}),wt=ss.getFullYear(),jt=wt!==le,he=jt?`${Ss} '${String(wt).slice(-2)}`:Ss;jt&&(le=wt),Ht.push({monthYear:he,dates:Qe.dates.slice(qe,qe+Xs)}),Ae+=Xs}return{groups:Ht,scrollAmount:Math.max(1,Ae-1)}},[At,N]),mt=p.length,at=N>0,Ut=N+12<mt,W=B.useCallback(async()=>{x(!0);try{const tt=await rC(n.symbol);m(tt),tt.length>0&&(w(tt[0]),I(0))}catch(tt){console.error("Failed to fetch expiries:",tt),m([])}finally{x(!1)}},[n]),E=B.useCallback(async()=>{if(v){b(!0),M(null);try{const tt=await t1(n.symbol,n.exchange,v,15);f(tt)}catch(tt){M("Failed to fetch option chain"),console.error(tt)}finally{b(!1)}}},[n,v]);B.useEffect(()=>{A&&W()},[A,W]),B.useEffect(()=>{A&&v&&E()},[A,v,E]),B.useEffect(()=>{if(d?.atmStrike&&V.current){const tt=V.current.querySelector('[data-spot-bar="true"]');tt&&tt.scrollIntoView({behavior:"smooth",block:"center"})}},[d]),B.useEffect(()=>{if(lt.current&&(lt.current.close(),lt.current=null),!A||!d?.chain?.length)return;const tt=[{symbol:n.symbol,exchange:n.indexExchange}];if(d.chain.forEach(Ht=>{Ht.ce?.symbol&&tt.push({symbol:Ht.ce.symbol,exchange:n.exchange}),Ht.pe?.symbol&&tt.push({symbol:Ht.pe.symbol,exchange:n.exchange})}),tt.length!==0)return console.log("[OptionChain] Subscribing to",tt.length,"option symbols for live LTP"),lt.current=uc(tt,Ht=>{D(Ae=>{const te=new Map(Ae);return te.set(Ht.symbol,{ltp:Ht.last,volume:Ht.volume,timestamp:Date.now()}),te})}),()=>{lt.current&&(console.log("[OptionChain] Unsubscribing from live LTP"),lt.current.close(),lt.current=null),D(new Map)}},[A,d?.chain,n.exchange]);const K=B.useMemo(()=>d?.chain||[],[d]),ot=d?.atmStrike||0,pt=d?.underlyingLTP||0,Q=B.useMemo(()=>{let tt=0;return K.forEach(Ht=>{Ht.ce?.oi>tt&&(tt=Ht.ce.oi),Ht.pe?.oi>tt&&(tt=Ht.pe.oi)}),tt||1},[K]),j=B.useMemo(()=>K.findIndex(tt=>tt.strike===ot),[K,ot]),{aboveATM:Z,belowATM:rt}=B.useMemo(()=>j===-1?{aboveATM:K,belowATM:[]}:{aboveATM:K.slice(0,j+1),belowATM:K.slice(j+1)},[K,j]),Et=B.useCallback(tt=>{tt&&(e(tt,n.exchange),t())},[n.exchange,e,t]),xt=tt=>!tt&&tt!==0?"-":tt>=1e5?(tt/1e5).toFixed(2)+"L":tt>=1e3?(tt/1e3).toFixed(2)+"K":tt.toLocaleString("en-IN"),Qt=tt=>!tt&&tt!==0?"-":tt.toFixed(2),se=tt=>tt?Math.min(tt/Q*100,100):0,oe=()=>{const Ht=R.get(n.symbol)?.ltp??pt,Ae=d?.underlyingPrevClose||0,te=Ae>0?Ht-Ae:d?.change||0,le=Ae>0?te/Ae*100:d?.changePercent||0,Ft=te>=0;return{price:Ht.toLocaleString("en-IN",{minimumFractionDigits:2}),change:(Ft?"+":"")+te.toFixed(2),percent:(Ft?"+":"")+le.toFixed(2)+"%",isPositive:Ft}},He=tt=>!tt?.ltp||!tt?.prevClose?null:(tt.ltp-tt.prevClose)/tt.prevClose*100,Nt=tt=>tt==null?null:(tt>=0?"+":"")+tt.toFixed(2)+"%",Wt=(tt,Ht,Ae)=>{const te=R.get(tt.ce?.symbol),le=R.get(tt.pe?.symbol),Ft=te?.ltp??tt.ce?.ltp,Qe=le?.ltp??tt.pe?.ltp,qe=se(tt.ce?.oi),Qs=se(tt.pe?.oi),Xs=()=>Et(tt.ce?.symbol),Fe=()=>Et(tt.pe?.symbol),ss=tt.ce?.prevClose&&Ft?(Ft-tt.ce.prevClose)/tt.ce.prevClose*100:He(tt.ce),Ss=tt.pe?.prevClose&&Qe?(Qe-tt.pe.prevClose)/tt.pe.prevClose*100:He(tt.pe);return h.jsxs("div",{className:Tt(Kt.row,{[Kt.itmCE]:Ht,[Kt.itmPE]:Ae}),children:[h.jsxs("div",{className:Tt(Kt.cell,Kt.combinedCell,Kt.combinedCellLeft,Kt.clickable),onClick:Xs,children:[h.jsxs("div",{className:Kt.oiSection,children:[h.jsx("div",{className:Kt.oiBarWrapperLeft,children:h.jsx("div",{className:Kt.oiBarGreen,style:{width:`${qe}%`}})}),h.jsx("span",{className:Kt.oiValue,children:xt(tt.ce?.oi)})]}),h.jsxs("div",{className:Kt.ltpSection,children:[h.jsx("span",{className:Kt.ltpValue,children:Qt(Ft)}),ss!==null&&h.jsx("span",{className:Tt(Kt.ltpChange,ss>=0?Kt.changePositive:Kt.changeNegative),children:Nt(ss)})]})]}),h.jsx("div",{className:Tt(Kt.cell,Kt.strikeCell),children:tt.strike.toLocaleString("en-IN")}),h.jsxs("div",{className:Tt(Kt.cell,Kt.combinedCell,Kt.combinedCellRight,Kt.clickable),onClick:Fe,children:[h.jsxs("div",{className:Kt.ltpSection,children:[h.jsx("span",{className:Kt.ltpValue,children:Qt(Qe)}),Ss!==null&&h.jsx("span",{className:Tt(Kt.ltpChange,Ss>=0?Kt.changePositive:Kt.changeNegative),children:Nt(Ss)})]}),h.jsxs("div",{className:Kt.oiSection,children:[h.jsx("div",{className:Kt.oiBarWrapperRight,children:h.jsx("div",{className:Kt.oiBarRed,style:{width:`${Qs}%`}})}),h.jsx("span",{className:Kt.oiValue,children:xt(tt.pe?.oi)})]})]})]},tt.strike)};if(!A)return null;const Je=oe();return h.jsx("div",{className:Kt.overlay,onClick:t,children:h.jsxs("div",{className:Kt.modal,onClick:tt=>tt.stopPropagation(),children:[h.jsxs("div",{className:Kt.header,children:[h.jsxs("div",{className:Kt.headerLeft,children:[h.jsx(Wg,{size:20,className:Kt.backIcon,onClick:t}),h.jsxs("select",{className:Kt.headerSelect,value:n.symbol,onChange:tt=>{const Ht=kr.find(Ae=>Ae.symbol===tt.target.value);Ht&&(l(Ht),c(!1),w(null),f(null))},children:[a&&h.jsx("option",{value:n.symbol,children:n.symbol},n.symbol),kr.map(tt=>h.jsx("option",{value:tt.symbol,children:tt.symbol},tt.symbol))]}),h.jsx("span",{className:Kt.headerTitle,children:"Options"}),h.jsx("button",{className:Kt.refreshBtnHeader,onClick:E,disabled:y||!v,children:h.jsx(R2,{size:16,className:y?Kt.spin:""})})]}),h.jsx("div",{className:Kt.headerRight,children:h.jsx("button",{className:Kt.closeBtn,onClick:t,children:h.jsx(ji,{size:20})})})]}),h.jsxs("div",{className:Kt.expiryPicker,children:[at&&h.jsx("button",{className:Kt.scrollBtn,onClick:()=>I(tt=>Math.max(0,tt-11)),children:h.jsx(Wg,{size:14})}),h.jsx("div",{className:Kt.expiryGrid,children:ft.groups.map((tt,Ht)=>h.jsxs("div",{className:Kt.monthColumn,children:[h.jsx("span",{className:Kt.monthLabel,children:tt.monthYear}),h.jsx("div",{className:Kt.dateGroup,children:tt.dates.map(Ae=>h.jsx("button",{className:Tt(Kt.dateBtn,{[Kt.activeDate]:v===Ae.expiry}),onClick:()=>w(Ae.expiry),children:Ae.day},Ae.expiry))})]},Ht))}),Ut&&h.jsx("button",{className:Kt.scrollBtn,onClick:()=>I(tt=>tt+ft.scrollAmount),children:h.jsx(N2,{size:14})})]}),h.jsxs("div",{className:Kt.colHeaders,children:[h.jsxs("div",{className:Kt.colHeaderCalls,children:[h.jsx("span",{className:Kt.colHeaderLabel,children:"CALLS"}),h.jsx("span",{className:Kt.colHeaderSub,children:"OI  LTP"})]}),h.jsx("span",{className:Kt.colHeaderStrike,children:"STRIKE"}),h.jsxs("div",{className:Kt.colHeaderPuts,children:[h.jsx("span",{className:Kt.colHeaderLabel,children:"PUTS"}),h.jsx("span",{className:Kt.colHeaderSub,children:"LTP  OI"})]})]}),h.jsx("div",{className:Kt.tableContainer,children:y?h.jsxs("div",{className:Kt.loading,children:[h.jsx(O2,{size:28,className:Kt.spin}),h.jsx("p",{children:"Loading option chain..."})]}):U?h.jsxs("div",{className:Kt.error,children:[h.jsx("p",{children:U}),h.jsx("button",{onClick:E,children:"Retry"})]}):K.length===0?h.jsxs("div",{className:Kt.empty,children:[h.jsx("p",{children:"No options found"}),h.jsx("span",{children:"Select an expiry to load option chain"})]}):h.jsxs("div",{className:Kt.tableBody,ref:V,children:[Z.map(tt=>Wt(tt,tt.strike<ot,!1)),d&&h.jsxs("div",{className:Kt.spotBar,"data-spot-bar":"true",children:[h.jsx("div",{className:Kt.spotLine}),h.jsxs("div",{className:Kt.spotBadge,children:[h.jsx("span",{children:"Spot price"}),h.jsx("strong",{children:Je.price}),h.jsxs("span",{className:Tt(Kt.spotChange,{[Kt.positive]:Je.isPositive,[Kt.negative]:!Je.isPositive}),children:[Je.change," (",Je.percent,")"]})]}),h.jsx("div",{className:Kt.spotLine})]}),rt.map(tt=>Wt(tt,!1,tt.strike>ot))]})})]})})},dG=2e3,p2=5e3,vu=["tv_saved_layout","tv_watchlists","tv_theme","tv_fav_intervals_v2","tv_custom_intervals","tv_drawing_defaults","tv_alerts","tv_alert_logs","tv_last_nonfav_interval","tv_interval","tv_chart_appearance","tv_drawing_templates","tv_template_favorites","tv_symbol_favorites","tv_recent_symbols","tv_layout_templates","tv_favorite_drawing_tools","tv_floating_toolbar_pos","tv_recent_commands"],fG=A=>{const[t,e]=B.useState("uninitialized"),[s,n]=B.useState(!1),[l,a]=B.useState(0),c=B.useRef({}),d=B.useRef({}),f=B.useRef(null),p=B.useRef(!1),m=A!==null&&t===A;return B.useEffect(()=>{if(A===null){kt.debug("[CloudSync] Auth checking, waiting...");return}if(A===!1){kt.debug("[CloudSync] Not authenticated, skipping cloud sync"),e(!1);return}if(p.current){kt.debug("[CloudSync] Already loaded from server, skipping"),e(!0);return}if(localStorage.getItem("_cloud_sync_done")==="true"){kt.info("[CloudSync] Preferences already loaded during login, skipping fetch"),localStorage.removeItem("_cloud_sync_done"),p.current=!0,vu.forEach(S=>{c.current[S]=localStorage.getItem(S)}),e(!0);return}p.current=!0,kt.info("[CloudSync] User authenticated, loading preferences from server...");let w=!1,y=null;(async()=>{try{const S=Ev.fetchUserPreferences(),x=new Promise(N=>{y=setTimeout(()=>{w||(kt.warn(`[CloudSync] Fetch timeout (${p2/1e3}s), proceeding with local state`),N({data:null,invalidApiKey:!1,timeout:!0}))},p2)}),U=await Promise.race([S,x]);y&&clearTimeout(y),w=!0,kt.debug("[CloudSync] Server response:",U),U.invalidApiKey&&kt.warn("[CloudSync] Invalid API key detected, using local state");const M=U.data;if(M&&typeof M=="object"&&Object.keys(M).length>0){let N=0;Object.entries(M).forEach(([I,R])=>{try{R!=null&&(localStorage.setItem(I,R),c.current[I]=R,N++)}catch(D){kt.error(`[CloudSync] Error applying key ${I}:`,D)}}),kt.info(`[CloudSync] Applied ${N} preferences from cloud.`),a(I=>I+1)}else kt.info("[CloudSync] No cloud preferences, using local state."),vu.forEach(N=>{c.current[N]=localStorage.getItem(N)})}catch(S){kt.error("[CloudSync] Failed to load preferences:",S),vu.forEach(x=>{c.current[x]=localStorage.getItem(x)})}kt.info("[CloudSync] Cloud sync complete, allowing render"),e(!0)})()},[A]),B.useEffect(()=>{if(A!==!0||!m)return;const w=setInterval(()=>{const y={};let b=!1;if(vu.forEach(S=>{const x=localStorage.getItem(S),U=c.current[S];if(x!==U){if(x==null&&U==null)return;y[S]=x||"",b=!0}}),b){const S=Object.keys(d.current).sort().join(","),x=Object.keys(y).sort().join(",");(S!==x||!f.current)&&(kt.debug("[CloudSync] New changes detected:",Object.keys(y)),d.current={...y},f.current&&clearTimeout(f.current),f.current=setTimeout(async()=>{const M={...d.current};kt.info("[CloudSync] Executing auto-save for keys:",Object.keys(M)),n(!0);try{await Ev.saveUserPreferences(M)?(Object.entries(M).forEach(([I,R])=>{c.current[I]=R}),d.current={},kt.info("[CloudSync] Auto-save complete!")):kt.error("[CloudSync] Auto-save returned false")}catch(N){kt.error("[CloudSync] Auto-save failed:",N)}finally{n(!1),f.current=null}},dG))}},1e3);return()=>{clearInterval(w),f.current&&clearTimeout(f.current)}},[A,m]),{isLoaded:m,isSyncing:s,syncKey:l}},pG="_overlay_19zjb_1",gG="_popup_19zjb_27",mG="_header_19zjb_51",_G="_title_19zjb_67",vG="_closeButton_19zjb_81",BG="_content_19zjb_117",wG="_sidebar_19zjb_131",yG="_sidebarItem_19zjb_147",CG="_active_19zjb_187",bG="_sidebarIcon_19zjb_197",xG="_sidebarLabel_19zjb_213",SG="_main_19zjb_221",EG="_section_19zjb_233",TG="_sectionTitle_19zjb_241",QG="_indicatorCard_19zjb_261",FG="_indicatorHeader_19zjb_277",UG="_indicatorName_19zjb_295",MG="_toggleLabel_19zjb_309",IG="_toggleInput_19zjb_325",NG="_toggleSwitch_19zjb_337",LG="_indicatorFields_19zjb_407",HG="_fieldRow_19zjb_419",DG="_fieldLabel_19zjb_431",kG="_numberInput_19zjb_441",jG="_colorInputWrapper_19zjb_487",OG="_colorInput_19zjb_487",RG="_hexInput_19zjb_547",zG="_footer_19zjb_593",VG="_cancelButton_19zjb_609",PG="_okButton_19zjb_611",KG="_light_19zjb_683",cs={overlay:pG,popup:gG,header:mG,title:_G,closeButton:vG,content:BG,sidebar:wG,sidebarItem:yG,active:CG,sidebarIcon:bG,sidebarLabel:xG,main:SG,section:EG,sectionTitle:TG,indicatorCard:QG,indicatorHeader:FG,indicatorName:UG,toggleLabel:MG,toggleInput:IG,toggleSwitch:NG,indicatorFields:LG,fieldRow:HG,fieldLabel:DG,numberInput:kG,colorInputWrapper:jG,colorInput:OG,hexInput:RG,footer:zG,cancelButton:VG,okButton:PG,light:KG},GG={sma:{name:"Simple Moving Average",shortName:"SMA",fields:[{key:"period",label:"Period",type:"number",min:1,max:500,step:1},{key:"color",label:"Line Color",type:"color"}]},ema:{name:"Exponential Moving Average",shortName:"EMA",fields:[{key:"period",label:"Period",type:"number",min:1,max:500,step:1},{key:"color",label:"Line Color",type:"color"}]},rsi:{name:"Relative Strength Index",shortName:"RSI",fields:[{key:"period",label:"Period",type:"number",min:1,max:100,step:1},{key:"color",label:"Line Color",type:"color"}]},stochastic:{name:"Stochastic",shortName:"STOCH",fields:[{key:"kPeriod",label:"%K Period",type:"number",min:1,max:100,step:1},{key:"dPeriod",label:"%D Period",type:"number",min:1,max:100,step:1},{key:"smooth",label:"Smooth",type:"number",min:1,max:10,step:1},{key:"kColor",label:"%K Color",type:"color"},{key:"dColor",label:"%D Color",type:"color"}]},macd:{name:"MACD",shortName:"MACD",fields:[{key:"fast",label:"Fast Period",type:"number",min:1,max:100,step:1},{key:"slow",label:"Slow Period",type:"number",min:1,max:100,step:1},{key:"signal",label:"Signal Period",type:"number",min:1,max:100,step:1},{key:"macdColor",label:"MACD Line",type:"color"},{key:"signalColor",label:"Signal Line",type:"color"}]},bollingerBands:{name:"Bollinger Bands",shortName:"BB",fields:[{key:"period",label:"Period",type:"number",min:1,max:200,step:1},{key:"stdDev",label:"Std Deviation",type:"number",min:.5,max:5,step:.5},{key:"color",label:"Line Color",type:"color"}]},atr:{name:"Average True Range",shortName:"ATR",fields:[{key:"period",label:"Period",type:"number",min:1,max:100,step:1},{key:"color",label:"Line Color",type:"color"}]},supertrend:{name:"Supertrend",shortName:"ST",fields:[{key:"period",label:"Period",type:"number",min:1,max:100,step:1},{key:"multiplier",label:"Multiplier",type:"number",min:.5,max:10,step:.5},{key:"upColor",label:"Up Color",type:"color"},{key:"downColor",label:"Down Color",type:"color"}]},volume:{name:"Volume",shortName:"VOL",fields:[{key:"colorUp",label:"Up Color",type:"color"},{key:"colorDown",label:"Down Color",type:"color"}]},vwap:{name:"VWAP",shortName:"VWAP",fields:[{key:"color",label:"Line Color",type:"color"}]}},g2=[{id:"moving-averages",label:"Moving Averages",indicators:["sma","ema"],icon:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})})},{id:"oscillators",label:"Oscillators",indicators:["rsi","stochastic"],icon:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("path",{d:"M2 12h4l3-9 6 18 3-9h4"})})},{id:"momentum",label:"Momentum",indicators:["macd"],icon:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[h.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"10"}),h.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"4"}),h.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"16"})]})},{id:"volatility",label:"Volatility",indicators:["bollingerBands","atr"],icon:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[h.jsx("path",{d:"M3 3v18h18"}),h.jsx("path",{d:"M18 9l-5 5-4-4-3 3"})]})},{id:"trend",label:"Trend",indicators:["supertrend"],icon:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[h.jsx("line",{x1:"7",y1:"17",x2:"17",y2:"7"}),h.jsx("polyline",{points:"7 7 17 7 17 17"})]})},{id:"volume",label:"Volume",indicators:["volume","vwap"],icon:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[h.jsx("rect",{x:"3",y:"12",width:"4",height:"8"}),h.jsx("rect",{x:"10",y:"8",width:"4",height:"12"}),h.jsx("rect",{x:"17",y:"4",width:"4",height:"16"})]})}],WG=({indicatorKey:A,config:t,value:e,onChange:s})=>{const n=()=>{s({...e,enabled:!e.enabled})},l=(a,c)=>{s({...e,[a]:c})};return h.jsxs("div",{className:cs.indicatorCard,children:[h.jsxs("div",{className:cs.indicatorHeader,children:[h.jsx("span",{className:cs.indicatorName,children:t.name}),h.jsxs("label",{className:cs.toggleLabel,children:[h.jsx("input",{type:"checkbox",checked:e.enabled,onChange:n,className:cs.toggleInput}),h.jsx("span",{className:cs.toggleSwitch})]})]}),h.jsx("div",{className:cs.indicatorFields,children:t.fields.map(a=>h.jsxs("div",{className:cs.fieldRow,children:[h.jsx("label",{className:cs.fieldLabel,children:a.label}),a.type==="number"?h.jsx("input",{type:"number",className:cs.numberInput,value:e[a.key]??"",min:a.min,max:a.max,step:a.step||1,onChange:c=>l(a.key,Number(c.target.value))}):a.type==="color"?h.jsxs("div",{className:cs.colorInputWrapper,children:[h.jsx("input",{type:"color",className:cs.colorInput,value:e[a.key]||"#2962FF",onChange:c=>l(a.key,c.target.value)}),h.jsx("input",{type:"text",className:cs.hexInput,value:e[a.key]||"#2962FF",onChange:c=>{let d=c.target.value;d.startsWith("#")||(d="#"+d),/^#[0-9A-Fa-f]{0,6}$/.test(d)&&l(a.key,d)},maxLength:7,placeholder:"#000000"})]}):null]},a.key))})]})},$G=({isOpen:A,onClose:t,theme:e="dark",indicators:s,onIndicatorSettingsChange:n})=>{const[l,a]=B.useState("moving-averages"),[c,d]=B.useState(s),[f,p]=B.useState(!1),m=B.useCallback(()=>{d(s),p(!1),t()},[s,t]),v=Nl(A);if(Gr({enabled:A,onEscape:m}),B.useEffect(()=>{A&&(d(s),p(!1))},[A,s]),B.useEffect(()=>{const x=JSON.stringify(c)!==JSON.stringify(s);p(x)},[c,s]),!A)return null;const w=()=>{n?.(c),t()},y=(x,U)=>{d(M=>({...M,[x]:U}))},b=g2.find(x=>x.id===l),S=b?.indicators||[];return h.jsx("div",{className:cs.overlay,onClick:m,children:h.jsxs("div",{ref:v,role:"dialog","aria-modal":"true","aria-labelledby":"indicator-settings-title",className:`${cs.popup} ${e==="light"?cs.light:""}`,onClick:x=>x.stopPropagation(),children:[h.jsxs("div",{className:cs.header,children:[h.jsx("h2",{id:"indicator-settings-title",className:cs.title,children:"Indicator Settings"}),h.jsx("button",{className:cs.closeButton,onClick:m,"aria-label":"Close indicator settings",children:h.jsx(ji,{size:20})})]}),h.jsxs("div",{className:cs.content,children:[h.jsx("div",{className:cs.sidebar,children:g2.map(x=>h.jsxs("button",{className:`${cs.sidebarItem} ${l===x.id?cs.active:""}`,onClick:()=>a(x.id),children:[h.jsx("span",{className:cs.sidebarIcon,children:x.icon}),h.jsx("span",{className:cs.sidebarLabel,children:x.label})]},x.id))}),h.jsx("div",{className:cs.main,children:h.jsxs("div",{className:cs.section,children:[h.jsx("h3",{className:cs.sectionTitle,children:b?.label?.toUpperCase()}),S.map(x=>{const U=GG[x],M=c[x];return!U||!M?null:h.jsx(WG,{indicatorKey:x,config:U,value:M,onChange:N=>y(x,N)},x)})]})})]}),h.jsxs("div",{className:cs.footer,children:[h.jsx("button",{className:cs.cancelButton,onClick:m,children:"Cancel"}),h.jsx("button",{className:cs.okButton,onClick:w,children:"Ok"})]})]})})},XG="_positionTracker_1u4zz_5",YG="_columnHeaders_1u4zz_27",JG="_colRank_1u4zz_53",qG="_colMove_1u4zz_65",ZG="_colSymbol_1u4zz_77",tW="_colLtp_1u4zz_89",eW="_colChange_1u4zz_101",sW="_colVolume_1u4zz_113",iW="_colAction_1u4zz_125",AW="_content_1u4zz_137",nW="_itemList_1u4zz_149",rW="_emptyState_1u4zz_161",lW="_emptyTitle_1u4zz_181",oW="_emptySubtitle_1u4zz_195",aW="_skeletonContainer_1u4zz_211",cW="_skeletonRow_1u4zz_219",hW="_skeletonCell_1u4zz_233",uW="_footer_1u4zz_279",dW="_addButton_1u4zz_291",fW="_addSymbolPanel_1u4zz_337",pW="_searchInputWrapper_1u4zz_349",gW="_searchIcon_1u4zz_367",mW="_searchInput_1u4zz_349",_W="_cancelBtn_1u4zz_405",vW="_addHint_1u4zz_441",es={positionTracker:XG,columnHeaders:YG,colRank:JG,colMove:qG,colSymbol:ZG,colLtp:tW,colChange:eW,colVolume:sW,colAction:iW,content:AW,itemList:nW,emptyState:rW,emptyTitle:lW,emptySubtitle:oW,skeletonContainer:aW,skeletonRow:cW,skeletonCell:hW,footer:uW,addButton:dW,addSymbolPanel:fW,searchInputWrapper:pW,searchIcon:gW,searchInput:mW,cancelBtn:_W,addHint:vW},BW="_item_1tyll_5",wW="_rank_1tyll_55",yW="_moveCol_1tyll_75",CW="_movement_1tyll_89",bW="_up_1tyll_105",xW="_down_1tyll_113",SW="_neutral_1tyll_121",EW="_changeNum_1tyll_129",TW="_symbolCol_1tyll_139",QW="_symbolName_1tyll_157",FW="_exchangeBadge_1tyll_175",UW="_ltp_1tyll_195",MW="_change_1tyll_129",IW="_volume_1tyll_267",NW="_removeBtn_1tyll_287",LW="_rankUp_1tyll_375",HW="_rankDown_1tyll_383",Ds={item:BW,rank:wW,moveCol:yW,movement:CW,up:bW,down:xW,neutral:SW,changeNum:EW,symbolCol:TW,symbolName:QW,exchangeBadge:FW,ltp:UW,change:MW,volume:IW,removeBtn:NW,rankUp:LW,rankDown:HW},Lb=B.memo(({item:A,onClick:t,onRemove:e,showRemove:s})=>{const{symbol:n,exchange:l,ltp:a,volume:c,percentChange:d,currentRank:f,rankChange:p,isVolumeSpike:m}=A,[v,w]=B.useState(""),y=B.useRef(p);B.useEffect(()=>{if(p!==y.current){p>0?w(Ds.rankUp):p<0&&w(Ds.rankDown);const I=setTimeout(()=>{w("")},500);return y.current=p,()=>clearTimeout(I)}},[p]);const b=()=>p>0?h.jsxs("span",{className:Tt(Ds.movement,Ds.up),children:[h.jsx(I2,{size:12}),h.jsx("span",{className:Ds.changeNum,children:p})]}):p<0?h.jsxs("span",{className:Tt(Ds.movement,Ds.down),children:[h.jsx(M2,{size:12}),h.jsx("span",{className:Ds.changeNum,children:Math.abs(p)})]}):h.jsx("span",{className:Tt(Ds.movement,Ds.neutral),children:h.jsx(iE,{size:12})}),S=I=>I==null?"--":I>=1e3?I.toFixed(1):I.toFixed(2),x=I=>I==null?"--":`${I>=0?"+":""}${I.toFixed(2)}%`,U=I=>I==null||I===0?"--":I>=1e7?`${(I/1e7).toFixed(1)}Cr`:I>=1e5?`${(I/1e5).toFixed(1)}L`:I>=1e3?`${(I/1e3).toFixed(1)}K`:I.toString(),M=I=>I===1?"":I===2?"":I===3?"":I,N=d>=0;return h.jsxs("div",{className:Tt(Ds.item,v),onClick:t,role:"button",tabIndex:0,onKeyDown:I=>{(I.key==="Enter"||I.key===" ")&&t()},children:[h.jsx("span",{className:Ds.rank,children:M(f)}),h.jsx("span",{className:Ds.moveCol,children:b()}),h.jsxs("span",{className:Ds.symbolCol,children:[h.jsx("span",{className:Ds.symbolName,children:n}),l&&l!=="NSE"&&h.jsx("span",{className:Ds.exchangeBadge,children:l})]}),h.jsx("span",{className:Tt(Ds.ltp,N?Ds.up:Ds.down),children:S(a)}),h.jsx("span",{className:Tt(Ds.change,N?Ds.up:Ds.down),children:x(d)}),h.jsxs("span",{className:Ds.volume,children:[m&&"",U(c)]}),s&&h.jsx("button",{className:Ds.removeBtn,onClick:I=>{I.stopPropagation(),e?.()},title:"Remove symbol",children:h.jsx(ji,{size:14})})]})});Lb.displayName="PositionTrackerItem";const DW="_header_yy14e_5",kW="_titleRow_yy14e_19",jW="_titleLeft_yy14e_33",OW="_titleIcon_yy14e_45",RW="_title_yy14e_19",zW="_count_yy14e_65",VW="_marketStatus_yy14e_87",PW="_statusDot_yy14e_99",KW="_open_yy14e_111",GW="_closed_yy14e_121",WW="_statusText_yy14e_129",$W="_toggleRow_yy14e_145",XW="_sourceToggle_yy14e_155",YW="_toggleBtn_yy14e_171",JW="_active_yy14e_205",Ii={header:DW,titleRow:kW,titleLeft:jW,titleIcon:OW,title:RW,count:zW,marketStatus:VW,statusDot:PW,open:KW,closed:GW,statusText:WW,toggleRow:$W,sourceToggle:XW,toggleBtn:YW,active:JW},Hb=B.memo(({sourceMode:A,onSourceModeChange:t,marketStatus:e,isMarketOpen:s,symbolCount:n})=>h.jsxs("div",{className:Ii.header,children:[h.jsxs("div",{className:Ii.titleRow,children:[h.jsxs("div",{className:Ii.titleLeft,children:[h.jsx(wc,{size:16,className:Ii.titleIcon}),h.jsx("span",{className:Ii.title,children:"Position Flow"}),h.jsx("span",{className:Ii.count,children:n})]}),h.jsxs("div",{className:Ii.marketStatus,children:[h.jsx("span",{className:Tt(Ii.statusDot,s?Ii.open:Ii.closed)}),h.jsx("span",{className:Ii.statusText,children:e})]})]}),h.jsx("div",{className:Ii.toggleRow,children:h.jsxs("div",{className:Ii.sourceToggle,children:[h.jsx("button",{className:Tt(Ii.toggleBtn,{[Ii.active]:A==="watchlist"}),onClick:()=>t("watchlist"),children:"Watchlist"}),h.jsx("button",{className:Tt(Ii.toggleBtn,{[Ii.active]:A==="custom"}),onClick:()=>t("custom"),children:"Custom"})]})})]}));Hb.displayName="PositionTrackerHeader";const m2={hour:9,minute:15},_2={hour:15,minute:30},v2=()=>{const A=new Date,t=A.getHours(),e=A.getMinutes(),s=A.getDay();if(s===0||s===6)return{isOpen:!1,status:"Weekend"};const n=t*60+e,l=m2.hour*60+m2.minute,a=_2.hour*60+_2.minute;return n>=l&&n<=a?{isOpen:!0,status:"Market Open"}:n<l?{isOpen:!1,status:"Pre-Market"}:{isOpen:!1,status:"Market Closed"}},qW=({sourceMode:A,customSymbols:t,watchlistData:e,isLoading:s,onSourceModeChange:n,onCustomSymbolsChange:l,onSymbolSelect:a,isAuthenticated:c})=>{const[d,f]=B.useState(!1),[p,m]=B.useState(""),[v,w]=B.useState(()=>v2()),y=B.useRef(null),b=B.useRef(new Map),S=B.useRef(new Map),x=B.useRef(!1);B.useEffect(()=>{const At=setInterval(()=>w(v2()),6e4);return()=>clearInterval(At)},[]),B.useEffect(()=>{d&&y.current&&y.current.focus()},[d]);const U=dt=>{const At=parseFloat(dt.last)||0,ft=parseFloat(dt.open)||0;return ft>0&&At>0?(At-ft)/ft*100:parseFloat(dt.chgP)||0},M=B.useMemo(()=>{let dt=[];if(A==="watchlist")dt=(e||[]).map(ft=>({symbol:ft.symbol,exchange:ft.exchange||"NSE",ltp:parseFloat(ft.last)||0,openPrice:parseFloat(ft.open)||0,volume:parseFloat(ft.volume)||0,percentChange:U(ft)}));else{const ft=new Set((t||[]).map(mt=>`${mt.symbol}-${mt.exchange||"NSE"}`));dt=(e||[]).filter(mt=>ft.has(`${mt.symbol}-${mt.exchange||"NSE"}`)).map(mt=>({symbol:mt.symbol,exchange:mt.exchange||"NSE",ltp:parseFloat(mt.last)||0,openPrice:parseFloat(mt.open)||0,volume:parseFloat(mt.volume)||0,percentChange:U(mt)}))}return[...dt].sort((ft,mt)=>mt.percentChange-ft.percentChange).map((ft,mt)=>{const at=`${ft.symbol}-${ft.exchange}`,Ut=b.current.get(at)??mt+1,W=mt+1,E=Ut-W;return b.current.set(at,W),{...ft,currentRank:W,previousRank:Ut,rankChange:E}})},[e,A,t]);B.useEffect(()=>{v.isOpen&&M.length>0&&!x.current&&(M.forEach(dt=>{const At=`${dt.symbol}-${dt.exchange}`;S.current.set(At,dt.currentRank)}),x.current=!0),v.isOpen||(x.current=!1,S.current.clear())},[v.isOpen,M]);const N=B.useMemo(()=>{const dt=M.reduce((mt,at)=>mt+(at.volume||0),0),ft=(M.length>0?dt/M.length:0)*2;return M.map(mt=>{const at=`${mt.symbol}-${mt.exchange}`,Ut=S.current.get(at);return{...mt,rankChange:Ut!==void 0?Ut-mt.currentRank:0,isVolumeSpike:mt.volume>ft}})},[M]),I=B.useCallback((dt,At="NSE")=>{if(A!=="custom")return;(t||[]).some(mt=>mt.symbol===dt&&mt.exchange===At)||l([...t||[],{symbol:dt,exchange:At}]),m(""),f(!1)},[A,t,l]),R=B.useCallback((dt,At)=>{A==="custom"&&l((t||[]).filter(ft=>!(ft.symbol===dt&&ft.exchange===At)))},[A,t,l]),D=B.useCallback(dt=>{a({symbol:dt.symbol,exchange:dt.exchange})},[a]),V=()=>h.jsx("div",{className:es.skeletonContainer,children:[1,2,3,4,5].map(dt=>h.jsxs("div",{className:es.skeletonRow,children:[h.jsx("div",{className:es.skeletonCell,style:{width:"32px"}}),h.jsx("div",{className:es.skeletonCell,style:{width:"40px"}}),h.jsx("div",{className:es.skeletonCell,style:{width:"70px"}}),h.jsx("div",{className:es.skeletonCell,style:{width:"70px"}}),h.jsx("div",{className:es.skeletonCell,style:{width:"60px"}}),h.jsx("div",{className:es.skeletonCell,style:{width:"55px"}})]},dt))}),lt=()=>h.jsxs("div",{className:es.emptyState,children:[h.jsx("p",{className:es.emptyTitle,children:A==="watchlist"?"No symbols in watchlist":"No symbols added"}),h.jsx("p",{className:es.emptySubtitle,children:A==="watchlist"?"Add symbols to your watchlist to track positions":"Click + to add symbols to track"})]});return h.jsxs("div",{className:es.positionTracker,children:[h.jsx(Hb,{sourceMode:A,onSourceModeChange:n,marketStatus:v.status,isMarketOpen:v.isOpen,symbolCount:M.length}),h.jsxs("div",{className:es.columnHeaders,children:[h.jsx("span",{className:es.colRank,children:"#"}),h.jsx("span",{className:es.colMove,children:"Move"}),h.jsx("span",{className:es.colSymbol,children:"Symbol"}),h.jsx("span",{className:es.colLtp,children:"LTP"}),h.jsx("span",{className:es.colChange,children:"% Chg"}),h.jsx("span",{className:es.colVolume,children:"Vol"}),A==="custom"&&h.jsx("span",{className:es.colAction})]}),h.jsx("div",{className:es.content,children:c?s?V():N.length===0?lt():h.jsx("div",{className:es.itemList,children:N.map(dt=>h.jsx(Lb,{item:dt,onClick:()=>D(dt),onRemove:A==="custom"?()=>R(dt.symbol,dt.exchange):null,showRemove:A==="custom"},`${dt.symbol}-${dt.exchange}`))}):h.jsxs("div",{className:es.emptyState,children:[h.jsx("p",{className:es.emptyTitle,children:"API not connected"}),h.jsx("p",{className:es.emptySubtitle,children:"Connect to OpenAlgo API to track positions"})]})}),A==="custom"&&c&&h.jsx("div",{className:es.footer,children:d?h.jsxs("div",{className:es.addSymbolPanel,children:[h.jsxs("div",{className:es.searchInputWrapper,children:[h.jsx(N1,{size:14,className:es.searchIcon}),h.jsx("input",{ref:y,type:"text",className:es.searchInput,placeholder:"Enter symbol (e.g., RELIANCE)",value:p,onChange:dt=>m(dt.target.value.toUpperCase()),onKeyDown:dt=>{dt.key==="Enter"&&p.trim()?I(p.trim()):dt.key==="Escape"&&(f(!1),m(""))}}),h.jsx("button",{className:es.cancelBtn,onClick:()=>{f(!1),m("")},children:h.jsx(ji,{size:14})})]}),h.jsx("p",{className:es.addHint,children:"Press Enter to add, Escape to cancel"})]}):h.jsxs("button",{className:es.addButton,onClick:()=>f(!0),children:[h.jsx(Ql,{size:16}),h.jsx("span",{children:"Add Symbol"})]})})]})},Db=new Set(["s","m","h","d","w","M"]),kb=[],ko=A=>{if(!A||typeof A!="string")return!1;const t=A.trim();if(!t)return!1;if(/^\d+$/.test(t))return parseInt(t,10)>0;const e=/^([1-9]\d*)([smhdwM])$/.exec(t);if(!e)return!1;const s=e[2];return Db.has(s)},ZW=A=>{if(!Array.isArray(A))return kb;const t=A.filter(ko);return Array.from(new Set(t))},t$=A=>Array.isArray(A)?A.filter(t=>t&&typeof t=="object"&&ko(t.value)).map(t=>({value:t.value,label:t.label||t.value,isCustom:!0})):[],ZA=(A,t)=>{if(!A)return t;try{return JSON.parse(A)}catch(e){return console.error("Failed to parse JSON from localStorage:",e),t}},Bu=1440*60*1e3,Rg={id:"wl_default",name:"My Watchlist",symbols:[{symbol:"RELIANCE",exchange:"NSE"},{symbol:"TCS",exchange:"NSE"},{symbol:"INFY",exchange:"NSE"},{symbol:"HDFCBANK",exchange:"NSE"},{symbol:"ICICIBANK",exchange:"NSE"},{symbol:"SBIN",exchange:"NSE"},{symbol:"BHARTIARTL",exchange:"NSE"},{symbol:"ITC",exchange:"NSE"}]},e$=()=>{const A=ZA(localStorage.getItem("tv_watchlists"),null);if(A&&A.lists&&Array.isArray(A.lists))return A.lists=A.lists.filter(e=>e.id!=="wl_favorites"),A.lists.length===0&&(A.lists.push(Rg),A.activeListId="wl_default"),A.activeListId==="wl_favorites"&&(A.activeListId=A.lists[0].id),A;const t=ZA(localStorage.getItem("tv_watchlist"),null);return t&&Array.isArray(t)&&t.length>0?{lists:[{...Rg,symbols:t.map(e=>typeof e=="string"?{symbol:e,exchange:"NSE"}:e)}],activeListId:"wl_default"}:{lists:[Rg],activeListId:"wl_default"}},zg={candleUpColor:"#089981",candleDownColor:"#F23645",wickUpColor:"#089981",wickDownColor:"#F23645",showVerticalGridLines:!0,showHorizontalGridLines:!0,darkBackground:"#131722",lightBackground:"#ffffff",darkGridColor:"#2A2E39",lightGridColor:"#e0e3eb"},Vg={lineColor:"#2962FF",backgroundColor:"rgba(41, 98, 255, 0.2)",width:2,lineStyle:0,globalAlpha:1},s$=["TrendLine","HorizontalLine","VerticalLine","Rectangle","Circle","Path","Text","Callout","PriceRange","Arrow","Ray","ExtendedLine","ParallelChannel","FibonacciRetracement"],wu=A=>{const t=Number(A);return Number.isFinite(t)?t.toFixed(2):A},i$=()=>h.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"var(--tv-color-platform-background)",color:"var(--tv-color-text-primary)",fontFamily:"system-ui"},children:h.jsxs("div",{style:{textAlign:"center"},children:[h.jsx("h2",{children:"Synching Workspace..."}),h.jsx("p",{style:{color:"var(--tv-color-text-secondary)"},children:"Loading your cloud settings"})]})});function A$({isAuthenticated:A,setIsAuthenticated:t}){const[e,s]=B.useState(()=>{const F=ZA(localStorage.getItem("tv_saved_layout"),null);return F&&F.layout?F.layout:"1"}),[n,l]=B.useState(1),[a,c]=B.useState(()=>{const F=ZA(localStorage.getItem("tv_saved_layout"),null),L={sma:{enabled:!1,period:20,color:"#2196F3"},ema:{enabled:!1,period:20,color:"#FF9800"},rsi:{enabled:!1,period:14,color:"#7B1FA2"},stochastic:{enabled:!1,kPeriod:14,dPeriod:3,smooth:3,kColor:"#2962FF",dColor:"#FF6D00"},macd:{enabled:!1,fast:12,slow:26,signal:9,macdColor:"#2962FF",signalColor:"#FF6D00"},bollingerBands:{enabled:!1,period:20,stdDev:2,color:"#2962FF"},atr:{enabled:!1,period:14,color:"#FF9800"},supertrend:{enabled:!1,period:10,multiplier:3,upColor:"#089981",downColor:"#F23645"},volume:{enabled:!1,colorUp:"#089981",colorDown:"#F23645"},vwap:{enabled:!1,color:"#FF9800"},tpo:{enabled:!1,blockSize:"30m",tickSize:"auto"}},z=$=>{const yt={...$};return typeof yt.sma=="boolean"&&(yt.sma={enabled:yt.sma,period:20,color:"#2196F3"}),typeof yt.ema=="boolean"&&(yt.ema={enabled:yt.ema,period:20,color:"#FF9800"}),yt};return F&&Array.isArray(F.charts)?F.charts.map($=>({...$,indicators:z({...L,...$.indicators}),strategyConfig:$.strategyConfig??null})):[{id:1,symbol:"RELIANCE",exchange:"NSE",interval:localStorage.getItem("tv_interval")||"1d",indicators:L,comparisonSymbols:[],strategyConfig:null}]}),d=a.find(F=>F.id===n)||a[0],f=d.symbol,p=d.exchange||"NSE",m=d.interval,v=ks.useRef({}),w=ks.useRef(!1);B.useEffect(()=>{localStorage.setItem("tv_interval",m)},[m]),B.useEffect(()=>{if(w.current){w.current=!1;return}try{const F={layout:e,charts:a};localStorage.setItem("tv_saved_layout",JSON.stringify(F)),kt.debug("[App] Auto-saved layout:",{layout:e,chartsCount:a.length})}catch(F){console.error("Failed to auto-save layout:",F)}},[e,a]);const[y,b]=B.useState("candlestick"),[S,x]=B.useState(!1),[U,M]=B.useState("switch"),[N,I]=B.useState(!1),[R,D]=B.useState(!1),[V,lt]=B.useState(!1),[dt,At]=B.useState(!1),[ft,mt]=B.useState(!1),[at,Ut]=B.useState(null),[W,E]=B.useState([]),K=ks.useRef(0),ot=3,[pt,Q]=B.useState(null),[j,Z]=B.useState(!1),[rt,Et]=B.useState(null),[xt,Qt]=B.useState(()=>{const F=ZA(localStorage.getItem("tv_alerts"),[]);if(!Array.isArray(F))return[];const L=Date.now()-Bu;return F.filter(z=>{const $=z&&z.created_at?new Date(z.created_at).getTime():NaN;return Number.isFinite($)&&$>=L})}),se=ks.useRef(xt);ks.useEffect(()=>{se.current=xt},[xt]);const[oe,He]=B.useState(()=>{const F=ZA(localStorage.getItem("tv_alert_logs"),[]);if(!Array.isArray(F))return[];const L=Date.now()-Bu;return F.filter(z=>{const $=z&&z.time?new Date(z.time).getTime():NaN;return Number.isFinite($)&&$>=L})}),[Nt,Wt]=B.useState(0),Je=sR(),[tt,Ht]=B.useState("chart"),[Ae,te]=B.useState(!1),le=B.useCallback(F=>{Ht(F),te(F==="watchlist"),F==="settings"&&(Ns(!0),Ht("chart")),F==="alerts"&&(setIsAlertsPanelOpen(!0),Ht("chart"))},[]),[Ft,Qe]=B.useState("All"),[qe,Qs]=B.useState(!1),[Xs,Fe]=B.useState(!0),[ss,Ss]=B.useState("watchlist"),[wt,jt]=B.useState(()=>ZA(localStorage.getItem("tv_position_tracker_settings"),null)||{sourceMode:"watchlist",customSymbols:[]});B.useEffect(()=>{try{localStorage.setItem("tv_position_tracker_settings",JSON.stringify(wt))}catch(F){console.error("Failed to persist position tracker settings:",F)}},[wt]);const[he,Zt]=B.useState(()=>localStorage.getItem("tv_theme")||"dark");B.useEffect(()=>{document.documentElement.setAttribute("data-theme",he),localStorage.setItem("tv_theme",he)},[he]);const Ue=()=>{Zt(F=>F==="dark"?"light":"dark")},[Ze,$e]=B.useState(()=>{const F=ZA(localStorage.getItem("tv_chart_appearance"),null);return F?{...zg,...F}:zg});B.useEffect(()=>{try{localStorage.setItem("tv_chart_appearance",JSON.stringify(Ze))}catch(F){console.error("Failed to persist chart appearance:",F)}},[Ze]);const[ls,Pt]=B.useState(()=>{const F=ZA(localStorage.getItem("tv_drawing_defaults"),null);return F?{...Vg,...F}:Vg});B.useEffect(()=>{try{localStorage.setItem("tv_drawing_defaults",JSON.stringify(ls))}catch(F){console.error("Failed to persist drawing defaults:",F)}},[ls]);const hs=ks.useRef(null),ke=(F,L="error",z=null)=>{const $=++K.current,yt={id:$,message:F,type:L,action:z};E(Dt=>{const Jt=[...Dt,yt];return Jt.length>ot?Jt.slice(-ot):Jt}),setTimeout(()=>{E(Dt=>Dt.filter(Jt=>Jt.id!==$))},5e3)},ui=F=>{E(L=>L.filter(z=>z.id!==F))},Y=F=>{hs.current&&clearTimeout(hs.current),Q(F),hs.current=setTimeout(()=>Q(null),3e3)};B.useEffect(()=>()=>{hs.current&&clearTimeout(hs.current)},[]),B.useEffect(()=>{const F=()=>{xv()},L=()=>{xv()};return window.addEventListener("beforeunload",F),window.addEventListener("unload",L),()=>{window.removeEventListener("beforeunload",F),window.removeEventListener("unload",L),t4()}},[]);const[vt,Xt]=B.useState(()=>{const F=ZA(localStorage.getItem("tv_fav_intervals_v2"),null);return ZW(F)}),[we,ce]=B.useState(()=>{const F=ZA(localStorage.getItem("tv_custom_intervals"),[]);return t$(F)}),[be,js]=B.useState(()=>{const F=localStorage.getItem("tv_last_nonfav_interval");return ko(F)?F:null});B.useEffect(()=>{try{localStorage.setItem("tv_fav_intervals_v2",JSON.stringify(vt))}catch(F){console.error("Failed to persist favorite intervals:",F)}},[vt]),B.useEffect(()=>{try{localStorage.setItem("tv_custom_intervals",JSON.stringify(we))}catch(F){console.error("Failed to persist custom intervals:",F)}},[we]),B.useEffect(()=>{if(!(be&&!ko(be)))if(be)try{localStorage.setItem("tv_last_nonfav_interval",be)}catch(F){console.error("Failed to persist last non-favorite interval:",F)}else localStorage.removeItem("tv_last_nonfav_interval")},[be]);const is=F=>{c(L=>L.map(z=>z.id===n?{...z,interval:F}:z)),vt.includes(F)||js(F)},Oi=F=>{if(!ko(F)){ke("Invalid interval provided","error");return}Xt(L=>L.includes(F)?L.filter(z=>z!==F):[...L,F])},De=(F,L)=>{const z=parseInt(F,10);if(!Number.isFinite(z)||z<=0){ke("Enter a valid number greater than 0","error");return}const $=Db.has(L)?L:null;if(!$){ke("Invalid interval unit","error");return}const yt=`${z}${$}`;if(!ko(yt)){ke("Invalid interval format","error");return}if(kb.includes(yt)||we.some(Jt=>Jt.value===yt)){ke("Interval already available!","info");return}const Dt={value:yt,label:yt,isCustom:!0};ce(Jt=>[...Jt,Dt]),ke("Custom interval added successfully!","success")},AA=F=>{ce(L=>L.filter(z=>z.value!==F)),Xt(L=>L.filter(z=>z!==F)),m===F&&is("1d")},[Os,Rs]=B.useState(e$),EA=Os.lists.find(F=>F.id===Os.activeListId)||Os.lists[0],di=EA?.symbols||[],An=Os.lists.filter(F=>F.isFavorite),bt=ks.useMemo(()=>{const F=di.filter(L=>!(typeof L=="string"&&L.startsWith("###"))).map(L=>typeof L=="string"?`${L}-NSE`:`${L.symbol}-${L.exchange||"NSE"}`).sort().join(",");return`${Os.activeListId}:${F}`},[di,Os.activeListId]),[je,Se]=B.useState([]),[us,ue]=B.useState(!0),Ai=B.useRef([]);B.useEffect(()=>{Ai.current=di},[di]),B.useEffect(()=>{cM()},[]),B.useEffect(()=>{try{localStorage.setItem("tv_watchlists",JSON.stringify(Os))}catch(F){console.error("Failed to persist watchlists:",F)}},[Os]);const Ri=ks.useRef(null),VA=ks.useRef(null),fi=ks.useRef(!1);B.useEffect(()=>{if(console.log("=== WATCHLIST EFFECT ==="),console.log("isAuthenticated:",A),console.log("watchlistSymbols count:",di.length),console.log("watchlistSymbolsKey:",bt),kt.debug("[Watchlist Effect] Running, isAuthenticated:",A),A!==!0){console.log("=== SKIPPING - NOT AUTHENTICATED ==="),kt.debug("[Watchlist Effect] Skipping - not authenticated"),ue(!1);return}if(fi.current){kt.debug("[Watchlist Effect] Skipping - fetch already in progress");return}let F=null,L=!0,z=!1;const $=new AbortController,yt=di.filter(Xe=>!(typeof Xe=="string"&&Xe.startsWith("###"))).map(Xe=>typeof Xe=="string"?`${Xe}-NSE`:`${Xe.symbol}-${Xe.exchange||"NSE"}`);kt.debug("[Watchlist Effect] currentSymbolKeys:",yt);const Dt=new Set(yt),Jt=new Set(Ri.current||[]),de=VA.current!==Os.activeListId,Be=Ri.current===null;kt.debug("[Watchlist Effect] isInitialLoad:",Be,"isListSwitch:",de);const Ne=yt.filter(Xe=>!Jt.has(Xe)),Vi=(Ri.current||[]).filter(Xe=>!Dt.has(Xe));Ri.current=yt,VA.current=Os.activeListId;const rA=async Xe=>{let Pi,Ji;if(typeof Xe=="string"){const Vs=di.find(me=>(typeof me=="string"?me:me.symbol)===Xe);Pi=Xe,Ji=Vs&&typeof Vs=="object"&&Vs.exchange||"NSE"}else Pi=Xe.symbol,Ji=Xe.exchange||"NSE";const xi=await x2(Pi,Ji,$.signal);return xi&&L?{symbol:Pi,exchange:Ji,last:parseFloat(xi.lastPrice).toFixed(2),chg:parseFloat(xi.priceChange).toFixed(2),chgP:parseFloat(xi.priceChangePercent).toFixed(2)+"%",up:parseFloat(xi.priceChange)>=0}:null},ps=async()=>{console.log("=== HYDRATE WATCHLIST CALLED ==="),kt.debug("[Watchlist] hydrateWatchlist called"),fi.current=!0,ue(!0);try{const Xe=di.filter(me=>!(typeof me=="string"&&me.startsWith("###")));console.log("symbolObjs to fetch:",Xe.map(me=>typeof me=="string"?me:me.symbol)),kt.debug("[Watchlist] Processing symbols:",Xe);const Pi=Xe.filter(me=>typeof me=="object"&&me.last!==void 0&&me.last!=="--").map(me=>({symbol:me.symbol,exchange:me.exchange||"NSE",last:me.last,chg:me.chg,chgP:me.chgP,up:me.up}));kt.debug("[Watchlist] Symbols with cached data:",Pi.length),Pi.length>0&&L&&(Se(Pi),ue(!1),z=!0,kt.debug("[Watchlist] Displayed cached data, now fetching fresh prices...")),console.log("Fetching fresh quotes for",Xe.length,"symbols"),kt.debug("[Watchlist] Fetching fresh quotes for all",Xe.length,"symbols");const Ji=Xe.map(rA),xi=await Promise.all(Ji),Vs=xi.filter(me=>me!==null);console.log("=== API RESULTS ==="),console.log("Total results:",xi.length,"Valid results:",Vs.length),console.log("Sample result:",Vs[0]),kt.debug("[Watchlist] Fresh quotes received:",Vs.length),L&&Vs.length>0&&(console.log("=== SETTING WATCHLIST DATA ===",Vs.length,"items"),Se(Vs)),L&&(ue(!1),z=!0,F&&F.readyState===WebSocket.OPEN&&F.close(),console.log("=== SETTING UP WEBSOCKET for",Xe.length,"symbols ==="),F=uc(Xe,me=>{!L||!z||Se(qr=>{const Rl=me.exchange||"NSE",Zr=qr.findIndex(lA=>lA.symbol===me.symbol&&lA.exchange===Rl);if(Zr!==-1){const lA=[...qr];return lA[Zr]={...lA[Zr],last:me.last.toFixed(2),open:me.open,volume:me.volume,chg:me.chg.toFixed(2),chgP:me.chgP.toFixed(2)+"%",up:me.chg>=0},lA}return Ai.current.find(lA=>typeof lA=="string"?lA===me.symbol:lA.symbol===me.symbol&&lA.exchange===Rl)?(console.log("=== WEBSOCKET FALLBACK: Adding",me.symbol,"==="),[...qr,{symbol:me.symbol,exchange:Rl,last:me.last.toFixed(2),open:me.open,volume:me.volume,chg:me.chg.toFixed(2),chgP:me.chgP.toFixed(2)+"%",up:me.chg>=0}]):qr})}))}catch(Xe){Xe.name==="AbortError"?kt.debug("[Watchlist] Fetch aborted (expected during navigation)"):(console.error("Error fetching watchlist data:",Xe),L&&(ke("Failed to load watchlist data","error"),ue(!1),z=!0))}finally{fi.current=!1}},gA=async()=>{const Pi=di.filter(Vs=>{if(typeof Vs=="string"&&Vs.startsWith("###"))return!1;const me=typeof Vs=="string"?`${Vs}-NSE`:`${Vs.symbol}-${Vs.exchange||"NSE"}`;return Ne.includes(me)}).map(rA),xi=(await Promise.all(Pi)).filter(Vs=>Vs!==null);L&&xi.length>0&&Se(Vs=>[...Vs,...xi])},En=Be||de||yt.length>0&&je.length===0;return console.log("=== UPDATE STRATEGY ==="),console.log("isInitialLoad:",Be,"isListSwitch:",de),console.log("watchlistData.length:",je.length,"currentSymbolKeys.length:",yt.length),console.log("needsFullReload:",En),console.log("addedSymbolKeys:",Ne.length,"removedSymbolKeys:",Vi.length),En?(console.log(">>> Calling hydrateWatchlist()"),ps()):(Vi.length>0||Ne.length>0)&&(Vi.length>0&&Se(Xe=>Xe.filter(Pi=>{const Ji=`${Pi.symbol}-${Pi.exchange||"NSE"}`;return!Vi.includes(Ji)})),Ne.length>0&&gA()),()=>{L=!1,$.abort(),fi.current=!1,F&&F.readyState===WebSocket.OPEN&&F.close()}},[bt,Os.activeListId,A]),B.useEffect(()=>{const F=Date.now()-Bu,L=xt.filter(z=>{const $=z&&z.created_at?new Date(z.created_at).getTime():NaN;return Number.isFinite($)&&$>=F});if(L.length!==xt.length){Qt(L);return}try{localStorage.setItem("tv_alerts",JSON.stringify(L))}catch(z){console.error("Failed to persist alerts:",z)}},[xt]),B.useEffect(()=>{const F=Date.now()-Bu,L=oe.filter(z=>{const $=z&&z.time?new Date(z.time).getTime():NaN;return Number.isFinite($)&&$>=F});if(L.length!==oe.length){He(L);return}try{localStorage.setItem("tv_alert_logs",JSON.stringify(L))}catch(z){console.error("Failed to persist alert logs:",z)}},[oe]);const nn=ks.useRef([]);B.useEffect(()=>{const F=xt.filter($=>$.status==="Active"&&$._source!=="lineTools"),L=[...new Set(F.map($=>$.symbol))].sort(),z=nn.current;JSON.stringify(L)!==JSON.stringify(z)&&(nn.current=L)},[xt]);const[TA,bn]=B.useState([]);B.useEffect(()=>{const F=setInterval(()=>{const L=nn.current;JSON.stringify(L)!==JSON.stringify(TA)&&bn([...L])},1e3);return()=>clearInterval(F)},[TA]),B.useEffect(()=>{if(TA.length===0)return;const F=uc(TA,L=>{Qt(z=>{let $=!1;const yt=z.map(Dt=>{if(Dt._source==="lineTools")return Dt;const Jt=Dt.exchange||"NSE",de=L.exchange||"NSE";if(Dt.status!=="Active"||Dt.symbol!==L.symbol||Jt!==de)return Dt;const Be=parseFloat(L.last),Ne=parseFloat(Dt.price);if(!Number.isFinite(Be)||!Number.isFinite(Ne)||Ne===0)return Dt;const Vi=Ne*.001;if(Math.abs(Be-Ne)<=Vi){$=!0;const rA=wu(Ne),ps={id:Date.now(),alertId:Dt.id,symbol:Dt.symbol,exchange:Jt,message:`Alert triggered: ${Dt.symbol}:${Jt} crossed ${rA}`,time:new Date().toISOString()};return He(gA=>[ps,...gA]),Wt(gA=>gA+1),ke(`Alert Triggered: ${Dt.symbol}:${Jt} at ${rA}`,"info"),{...Dt,status:"Triggered"}}return Dt});return $?yt:z})});return()=>{F&&F.close()}},[TA]);const xn=F=>{Rs(L=>({...L,lists:L.lists.map(z=>z.id===L.activeListId?{...z,symbols:F}:z)})),Se(L=>{const z=new Map(L.map($=>[`${$.symbol}-${$.exchange||"NSE"}`,$]));return F.filter($=>typeof $!="string"||!$.startsWith("###")).map($=>{const yt=typeof $=="string"?`${$}-NSE`:`${$.symbol}-${$.exchange||"NSE"}`;return z.get(yt)}).filter(Boolean)})},PA=F=>{const L="wl_"+Date.now();Rs(z=>({...z,lists:[...z.lists,{id:L,name:F,symbols:[]}],activeListId:L}))},Ys=(F,L)=>{Rs(z=>({...z,lists:z.lists.map($=>$.id===F?{...$,name:L}:$)})),ke(`Watchlist renamed to: ${L}`,"success")},rn=F=>{Rs(L=>{if(L.lists.length<=1)return ke("Cannot delete the only watchlist","warning"),L;const z=L.lists.filter($=>$.id!==F);return L.lists.find($=>$.id===F),{lists:z,activeListId:L.activeListId===F?z[0]?.id||"wl_default":L.activeListId}})},ln=F=>{Rs(L=>({...L,activeListId:F}))},Ks=(F,L)=>{Rs(z=>({...z,lists:z.lists.map($=>$.id!==F?$:L?{...$,isFavorite:!0,favoriteEmoji:L}:{...$,isFavorite:!1,favoriteEmoji:void 0})}))},Wr=F=>{Rs(L=>({...L,lists:L.lists.map(z=>z.id===F?{...z,symbols:[],sections:[]}:z)})),Se([]),ke("Watchlist cleared","success")},$r=(F,L)=>{const z=Os.lists.find(Dt=>Dt.id===F);if(!z)return;const $="wl_"+Date.now(),yt={...z,id:$,name:L,isFavorite:!1,isFavorites:!1};Rs(Dt=>({...Dt,lists:[...Dt.lists,yt],activeListId:$})),ke(`Created copy: ${L}`,"success")},KA=F=>{const L=Os.lists.find(de=>de.id===F);if(!L)return;const z=L.symbols||[],$=z.filter(de=>typeof de!="string"||!de.startsWith("###")).map(de=>{const Be=typeof de=="string"?de:de.symbol,Ne=typeof de=="string"?"NSE":de.exchange||"NSE";return`${Be},${Ne}`}).join(`
`),yt=new Blob([`symbol,exchange
${$}`],{type:"text/csv"}),Dt=URL.createObjectURL(yt),Jt=document.createElement("a");Jt.href=Dt,Jt.download=`${L.name||"watchlist"}.csv`,document.body.appendChild(Jt),Jt.click(),document.body.removeChild(Jt),URL.revokeObjectURL(Dt),ke(`Exported ${z.filter(de=>typeof de!="string"||!de.startsWith("###")).length} symbols`,"success")},zi=(F,L)=>{!F||F.length===0||(Rs(z=>({...z,lists:z.lists.map($=>{if($.id!==L)return $;const yt=new Set(($.symbols||[]).filter(Jt=>typeof Jt!="string"||!Jt.startsWith("###")).map(Jt=>typeof Jt=="string"?Jt:Jt.symbol)),Dt=F.filter(Jt=>!yt.has(Jt.symbol));return{...$,symbols:[...$.symbols||[],...Dt]}})})),ke(`Imported ${F.length} symbols`,"success"))},Ll=(F,L)=>{Rs(z=>{const $=z.lists.find(Jt=>Jt.id===z.activeListId);if(!$)return z;const yt=[...$.symbols||[]],Dt=`###${F}`;return yt.splice(L,0,Dt),{...z,lists:z.lists.map(Jt=>Jt.id===z.activeListId?{...Jt,symbols:yt}:Jt)}})},Yi=F=>{Rs(L=>{const z=L.lists.find(Dt=>Dt.id===L.activeListId);if(!z)return L;const $=z.collapsedSections||[],yt=$.includes(F);return{...L,lists:L.lists.map(Dt=>Dt.id===L.activeListId?{...Dt,collapsedSections:yt?$.filter(Jt=>Jt!==F):[...$,F]}:Dt)}})},Hl=(F,L)=>{Rs(z=>{const $=z.lists.find(Ne=>Ne.id===z.activeListId);if(!$)return z;const yt=[...$.symbols||[]],Dt=`###${F}`,Jt=`###${L}`,de=yt.findIndex(Ne=>Ne===Dt);de!==-1&&(yt[de]=Jt);const Be=($.collapsedSections||[]).map(Ne=>Ne===F?L:Ne);return{...z,lists:z.lists.map(Ne=>Ne.id===z.activeListId?{...Ne,symbols:yt,collapsedSections:Be}:Ne)}})},GA=F=>{Rs(L=>{const z=L.lists.find(de=>de.id===L.activeListId);if(!z)return L;const $=[...z.symbols||[]],yt=`###${F}`,Dt=$.filter(de=>de!==yt),Jt=(z.collapsedSections||[]).filter(de=>de!==F);return{...L,lists:L.lists.map(de=>de.id===L.activeListId?{...de,symbols:Dt,collapsedSections:Jt}:de)}})},er=F=>{const L=typeof F=="string"?F:F.symbol,z=typeof F=="string"?"NSE":F.exchange||"NSE";if(U==="switch")c($=>$.map(yt=>yt.id===n?{...yt,symbol:L,exchange:z,strategyConfig:null}:yt));else if(U==="compare"){const $=["#f57f17","#e91e63","#9c27b0","#673ab7","#3f51b5"];c(yt=>yt.map(Dt=>{if(Dt.id===n){const Jt=Dt.comparisonSymbols||[];if(Jt.find(Be=>Be.symbol===L&&Be.exchange===z))return{...Dt,comparisonSymbols:Jt.filter(Be=>!(Be.symbol===L&&Be.exchange===z))};{const Be=$[Jt.length%$.length];return{...Dt,comparisonSymbols:[...Jt,{symbol:L,exchange:z,color:Be}]}}}return Dt}))}else di.some(yt=>typeof yt=="string"?yt===L:yt.symbol===L&&yt.exchange===z)||Rs(yt=>({...yt,lists:yt.lists.map(Dt=>Dt.id===yt.activeListId?{...Dt,symbols:[...Dt.symbols,{symbol:L,exchange:z}]}:Dt)})),x(!1)},sr=F=>{const L=typeof F=="string"?F:F.symbol,z=typeof F=="string"?null:F.exchange;Rs($=>({...$,lists:$.lists.map(yt=>yt.id===$.activeListId?{...yt,symbols:yt.symbols.filter(Dt=>typeof Dt=="string"?Dt!==L:z?!(Dt.symbol===L&&Dt.exchange===z):Dt.symbol!==L)}:yt)}))},ni=()=>{M("add"),x(!0)},yi=()=>{M("switch"),x(!0)},nA=()=>{M("compare"),x(!0)},WA=F=>{c(L=>L.map(z=>{if(z.id!==n)return z;const $=z.indicators[F];return typeof $=="object"&&$!==null?{...z,indicators:{...z.indicators,[F]:{...$,enabled:!$.enabled}}}:z}))},pi=B.useCallback(F=>{c(L=>L.map(z=>z.id!==n?z:{...z,indicators:F}))},[n]),Dl=F=>{c(L=>L.map(z=>{if(z.id!==n)return z;const $=z.indicators[F];return typeof $=="object"&&$!==null?{...z,indicators:{...z.indicators,[F]:{...$,enabled:!1}}}:typeof $=="boolean"?{...z,indicators:{...z.indicators,[F]:!1}}:z}))},ir=F=>{c(L=>L.map(z=>{if(z.id!==n)return z;const $=z.indicators[F];return typeof $=="object"&&$!==null?{...z,indicators:{...z.indicators,[F]:{...$,hidden:!$.hidden}}}:typeof $=="boolean"&&$?{...z,indicators:{...z.indicators,[F]:{enabled:!0,hidden:!0}}}:z}))},[Sn,Fs]=B.useState(null),[H,k]=B.useState(!1),[J,X]=B.useState(!0),ht=Sn&&s$.includes(Sn),[St,Bt]=B.useState(!1),[It,Ot]=B.useState(!1),[it,ne]=B.useState(!1),[Ee,Me]=B.useState(!1),[Ie,ge]=B.useState(!1),[ve,Ns]=B.useState(!1),[Us,Js]=B.useState(!1),[ri,zs]=B.useState(()=>localStorage.getItem("oa_ws_url")||"127.0.0.1:8765"),[Ci,qs]=B.useState(()=>localStorage.getItem("oa_apikey")||""),[Vt,os]=B.useState(()=>localStorage.getItem("oa_host_url")||"http://127.0.0.1:5000"),Lt=()=>{X(F=>!F)},Oe=F=>{if(F==="magnet")k(L=>!L);else if(F==="undo"){const L=v.current[n];L&&L.undo(),Fs(null)}else if(F==="redo"){const L=v.current[n];L&&L.redo(),Fs(null)}else if(F==="clear"){const L=v.current[n];L&&L.clearTools(),Fs(null)}else if(F==="clear_all"){const L=v.current[n];L&&L.clearTools(),ne(!1),Ot(!1),Fs(null)}else F==="lock_all"?(Ot(L=>!L),Fs(F)):F==="hide_drawings"?(ne(L=>!L),Fs(F)):(F==="show_timer"&&Me(L=>!L),Fs(F))},$A=ks.useCallback(()=>{Fs(null)},[]),bi=F=>{s(F);const L=parseInt(F);c(z=>{const $=[...z];if($.length<L){const yt={sma:!1,ema:!1,rsi:{enabled:!1,period:14,color:"#7B1FA2"},macd:{enabled:!1,fast:12,slow:26,signal:9,macdColor:"#2962FF",signalColor:"#FF6D00"},bollingerBands:{enabled:!1,period:20,stdDev:2},volume:{enabled:!1,colorUp:"#089981",colorDown:"#F23645"},atr:{enabled:!1,period:14,color:"#FF9800"},stochastic:{enabled:!1,kPeriod:14,dPeriod:3,smooth:3,kColor:"#2962FF",dColor:"#FF6D00"},vwap:{enabled:!1,color:"#FF9800"},supertrend:{enabled:!1,period:10,multiplier:3},tpo:{enabled:!1,blockSize:"30m",tickSize:"auto"}};for(let Dt=$.length;Dt<L;Dt++)$.push({id:Dt+1,symbol:d.symbol,interval:d.interval,indicators:{...yt},comparisonSymbols:[]})}else $.length>L&&$.splice(L);return $}),n>L&&l(1)},Ar=async()=>{const F={layout:e,charts:a};try{localStorage.setItem("tv_saved_layout",JSON.stringify(F));const L=["tv_saved_layout","tv_watchlists","tv_theme","tv_fav_intervals_v2","tv_custom_intervals","tv_drawing_defaults","tv_alerts","tv_alert_logs","tv_last_nonfav_interval","tv_interval","tv_chart_appearance","tv_drawing_templates","tv_template_favorites","tv_symbol_favorites","tv_recent_symbols","tv_layout_templates","tv_favorite_drawing_tools","tv_floating_toolbar_pos","tv_recent_commands"],z={};L.forEach(yt=>{const Dt=localStorage.getItem(yt);Dt!==null&&(z[yt]=Dt)});const $=await T2(z);Y($?"Layout saved to cloud":"Layout saved locally")}catch(L){console.error("Failed to save layout:",L),ke("Failed to save layout","error")}},on=()=>Oe("undo"),an=()=>Oe("redo"),kl=async()=>{const F=v.current[n];if(F){const L=F.getChartContainer();if(L)try{const $=(await c2(L,{useCORS:!0,allowTaint:!0,backgroundColor:"#131722"})).toDataURL("image/png"),yt=document.createElement("a"),Dt=new Date,Jt=Dt.toISOString().split("T")[0],de=Dt.toTimeString().split(" ")[0].replace(/:/g,"-"),Be=`${f}_${Jt}_${de}.png`;yt.href=$,yt.download=Be,yt.click()}catch(z){console.error("Screenshot failed:",z),ke("Failed to download image","error")}}},_i=async()=>{const F=v.current[n];if(F){const L=F.getChartContainer();if(L)try{(await c2(L,{useCORS:!0,allowTaint:!0,backgroundColor:"#131722"})).toBlob(async $=>{try{await navigator.clipboard.write([new ClipboardItem({"image/png":$})]),Y("Link to the chart image copied to clipboard")}catch(yt){console.error("Failed to copy to clipboard:",yt),ke("Failed to copy to clipboard","error")}})}catch(z){console.error("Screenshot failed:",z),ke("Failed to capture image","error")}}},pA=()=>{const F=v.current[n];if(F){const L=F.getChartContainer();L&&(L.requestFullscreen?L.requestFullscreen():L.webkitRequestFullscreen?L.webkitRequestFullscreen():L.msRequestFullscreen&&L.msRequestFullscreen())}},jl=()=>{const F=v.current[n];F&&F.toggleReplay()},Xr=(F,L)=>{F===n&&Bt(L)},Yr=()=>{const F=v.current[n];if(F){const L=F.getCurrentPrice();L!==null?(Et(L),Z(!0)):ke("No price data available","error")}},Yo=F=>{const L=wu(F.value),z={id:Date.now(),symbol:f,exchange:p,price:L,condition:`Crossing ${L}`,status:"Active",created_at:new Date().toISOString()};Qt(yt=>[...yt,z]),ke(`Alert created for ${f}:${p} at ${L}`,"success"),w.current={type:"add",alertId:z.id,chartId:n};const $=v.current[n];$&&typeof $.addPriceAlert=="function"&&$.addPriceAlert(z)},Jo=F=>{Qt(L=>{const z=L.find($=>$.id===F);if(z&&z._source==="lineTools"&&z.chartId!=null&&z.externalId){const $=v.current[z.chartId];$&&typeof $.removePriceAlert=="function"&&$.removePriceAlert(z.externalId)}return L.filter($=>$.id!==F)})},Jr=F=>{const L=xt.find($=>$.id===F);if(!L)return;let z="crossing";if(L.condition){const $=L.condition.toLowerCase();$.includes("crossing_down")||$.includes("crossing down")?z="crossing_down":($.includes("crossing_up")||$.includes("crossing up"))&&(z="crossing_up")}if(w.current={type:"resume",alertId:F,chartId:L.chartId},L._source==="lineTools"&&L.chartId!=null){const $=v.current[L.chartId];$&&typeof $.restartPriceAlert=="function"&&$.restartPriceAlert(L.price,z)}Qt($=>$.map(yt=>yt.id===F?{...yt,status:"Active"}:yt))},Ol=F=>{const L=xt.find(z=>z.id===F);if(L){if(w.current={type:"pause"},L._source==="lineTools"&&L.chartId!=null&&L.externalId){const z=v.current[L.chartId];z&&typeof z.removePriceAlert=="function"&&z.removePriceAlert(L.externalId)}Qt(z=>z.map($=>$.id===F?{...$,status:"Paused"}:$))}},xc=(F,L,z,$)=>{const yt=w.current;if(yt&&yt.type==="pause"){w.current=null;return}if(yt&&yt.type==="add"&&yt.chartId===F){w.current=null;const Dt=xt.filter(Be=>Be._source==="lineTools"&&Be.chartId===F&&Be.status==="Active"),Jt=new Set(Dt.map(Be=>Be.externalId)),de=($||[]).find(Be=>!Jt.has(Be.id));de&&Qt(Be=>Be.map(Ne=>Ne.id===yt.alertId?{...Ne,externalId:de.id,_source:"lineTools",chartId:F}:Ne));return}if(yt&&yt.type==="resume"&&yt.chartId===F){w.current=null;const Dt=xt.filter(Be=>Be._source==="lineTools"&&Be.chartId===F&&Be.status==="Active"),Jt=new Set(Dt.map(Be=>Be.externalId)),de=($||[]).find(Be=>!Jt.has(Be.id));de&&Qt(Be=>Be.map(Ne=>Ne.id===yt.alertId?{...Ne,externalId:de.id,status:"Active"}:Ne));return}Qt(Dt=>{const Jt=new Set(($||[]).map(ps=>ps.id)),de=Dt.filter(ps=>ps._source==="lineTools"&&ps.chartId===F),Be=new Set(de.map(ps=>ps.externalId)),Ne=Dt.filter(ps=>ps._source!=="lineTools"||ps.chartId!==F||ps.status==="Triggered"||ps.status==="Paused"?!0:Jt.has(ps.externalId)),rA=($||[]).filter(ps=>!Be.has(ps.id)).map(ps=>{const gA=wu(ps.price);let En=`Crossing ${gA}`;return ps.condition==="crossing_up"?En=`Crossing Up ${gA}`:ps.condition==="crossing_down"?En=`Crossing Down ${gA}`:ps.condition&&ps.condition!=="crossing"&&(En=ps.condition),ke(`Alert created for ${L}:${z} at ${gA}`,"success"),{id:`lt-${F}-${ps.id}`,externalId:ps.id,symbol:L,exchange:z,price:gA,condition:En,status:"Active",created_at:new Date().toISOString(),_source:"lineTools",chartId:F}});return[...Ne,...rA]})},md=(F,L,z,$)=>{const yt=wu($.price??$.alertPrice),Dt=$.timestamp?new Date($.timestamp).toISOString():new Date().toISOString(),Jt={id:Date.now(),alertId:$.externalId||$.alertId,symbol:L,exchange:z,message:`Alert triggered: ${L}:${z} crossed ${yt}`,time:Dt};He(de=>[Jt,...de]),Wt(de=>de+1),ke(`Alert Triggered: ${L}:${z} at ${yt}`,"info"),Qt(de=>{let Be=!1;const Ne=de.map(Vi=>Vi._source==="lineTools"&&Vi.chartId===F&&Vi.externalId===($.externalId||$.alertId)?(Be=!0,{...Vi,status:"Triggered"}):Vi);return Be||Ne.unshift({id:`lt-${F}-${$.externalId||$.alertId}-triggered-${Date.now()}`,externalId:$.externalId||$.alertId,symbol:L,exchange:z,price:yt,condition:$.condition||`Crossing ${yt}`,status:"Triggered",created_at:Dt,_source:"lineTools",chartId:F}),Ne})},_d=F=>{Ss(F),F==="alerts"&&Wt(0)},vd=()=>{Ns(!0)},qo=()=>{D(!0)},Bd=(F,L)=>{c(z=>z.map($=>$.id===n?{...$,symbol:F,exchange:L}:$)),mt(!1)},wd=B.useCallback((F,L)=>{Ut({symbol:F,exchange:L}),mt(!0)},[]),yd=B.useCallback(F=>{if(F){if(F.layout&&s(F.layout),F.chartType&&b(F.chartType),F.charts&&Array.isArray(F.charts)){const L={sma:!1,ema:!1,rsi:{enabled:!1,period:14,color:"#7B1FA2"},macd:{enabled:!1,fast:12,slow:26,signal:9,macdColor:"#2962FF",signalColor:"#FF6D00"},bollingerBands:{enabled:!1,period:20,stdDev:2},volume:{enabled:!1,colorUp:"#089981",colorDown:"#F23645"},atr:{enabled:!1,period:14,color:"#FF9800"},stochastic:{enabled:!1,kPeriod:14,dPeriod:3,smooth:3,kColor:"#2962FF",dColor:"#FF6D00"},vwap:{enabled:!1,color:"#FF9800"},supertrend:{enabled:!1,period:10,multiplier:3},tpo:{enabled:!1,blockSize:"30m",tickSize:"auto"}},z=F.charts.map(($,yt)=>({id:yt+1,symbol:$.symbol||"RELIANCE",exchange:$.exchange||"NSE",interval:$.interval||"1d",indicators:{...L,...$.indicators},comparisonSymbols:$.comparisonSymbols||[]}));c(z),l(1)}F.appearance&&(F.appearance.chartAppearance&&$e(L=>({...L,...F.appearance.chartAppearance})),F.appearance.theme&&Zt(F.appearance.theme))}},[]),Cd=()=>{Me(F=>!F)},bd=()=>{ge(F=>!F)},Sc=F=>{$e(L=>({...L,...F}))},xd=()=>{$e(zg)},Sd=B.useCallback((F,L)=>{Pt(z=>({...z,[F]:L}))},[]),Ed=B.useCallback(()=>{Pt(Vg)},[]),Td=F=>{qs(F),localStorage.setItem("oa_apikey",F)},Zo=F=>{zs(F),localStorage.setItem("oa_ws_url",F)},Qd=F=>{os(F),localStorage.setItem("oa_host_url",F)},Fd=ks.useMemo(()=>({onChartTypeChange:b,toggleIndicator:WA,onToolChange:Oe,openSymbolSearch:F=>{M(F),x(!0)},openSettings:()=>Ns(!0),openShortcutsDialog:()=>lt(!0),onUndo:on,onRedo:an,toggleTheme:Ue,toggleFullscreen:pA,takeScreenshot:kl,copyImage:_i,createAlert:Yr,clearDrawings:()=>Oe("clear_all")}),[WA,Oe,on,an,Ue,pA,kl,_i,Yr]),{commands:Ud,recentCommands:Ec,groupedCommands:Md,searchCommands:Id,executeCommand:Nd}=rR(Fd),Ld={Candlestick:"candlestick",Bar:"bar","Hollow candles":"hollow",Line:"line",Area:"area",Baseline:"baseline","Heikin Ashi":"heikinashi"},Hd=ks.useMemo(()=>({openCommandPalette:()=>I(F=>!F),openShortcutsHelp:()=>lt(F=>!F),openSymbolSearch:()=>{M("switch"),x(!0)},closeDialog:()=>{V?lt(!1):N?I(!1):S?x(!1):j?Z(!1):ve?Ns(!1):R&&D(!1)},setChartType:F=>{const L=Ld[F];L&&b(L)},activateDrawMode:()=>{Oe("TrendLine")},activateCursorMode:()=>{Fs(null)},zoomIn:()=>{const F=v.current[n];F&&typeof F.zoomIn=="function"&&F.zoomIn()},zoomOut:()=>{const F=v.current[n];F&&typeof F.zoomOut=="function"&&F.zoomOut()},undo:on,redo:an,createAlert:Yr,toggleFullscreen:pA}),[V,N,S,j,ve,R,Oe,on,an,Yr,pA,n]);if(uR(Hd,{enabled:A===!0,dialogOpen:N||S||j||ve||R||V}),A===null)return h.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"var(--tv-color-platform-background)",color:"var(--tv-color-text-primary)"},children:[h.jsx("div",{style:{fontSize:"18px",marginBottom:"10px"},children:"Connecting to OpenAlgo..."}),h.jsx("div",{style:{fontSize:"14px",color:"var(--tv-color-text-secondary)"},children:"Checking authentication"})]});if(A===!1){const F=L=>{localStorage.setItem("oa_apikey",L),qs(L);const z=localStorage.getItem("oa_host_url");z&&os(z),t(!0)};return h.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"var(--tv-color-platform-background)",color:"var(--tv-color-text-primary)"},children:h.jsx(tO,{onSave:F,onClose:()=>{}})})}return h.jsxs(h.Fragment,{children:[h.jsx(D5,{isLeftToolbarVisible:J,isMobile:Je,isWatchlistVisible:Ae,onWatchlistOverlayClick:()=>te(!1),mobileNav:h.jsx(ZO,{activeTab:tt,onTabChange:le,alertCount:Nt,theme:he}),topbar:h.jsx(RE,{symbol:f,interval:m,chartType:y,indicators:d.indicators,favoriteIntervals:vt,customIntervals:we,lastNonFavoriteInterval:be,onSymbolClick:yi,onIntervalChange:is,onChartTypeChange:b,onToggleIndicator:WA,onToggleFavorite:Oi,onAddCustomInterval:De,onRemoveCustomInterval:AA,onUndo:on,onRedo:an,onMenuClick:Lt,theme:he,onToggleTheme:Ue,onDownloadImage:kl,onCopyImage:_i,onFullScreen:pA,onReplayClick:jl,isReplayMode:St,onAlertClick:Yr,onCompareClick:nA,layout:e,onLayoutChange:bi,onSaveLayout:Ar,onSettingsClick:vd,onTemplatesClick:qo,onStraddleClick:()=>At(!0),strategyConfig:d?.strategyConfig,onIndicatorSettingsClick:()=>Js(!0),onOptionsClick:()=>mt(!0)}),leftToolbar:h.jsx(Ey,{activeTool:Sn,isMagnetMode:H,onToolChange:Oe,isDrawingsLocked:It,isDrawingsHidden:it,isTimerVisible:Ee}),drawingPropertiesPanel:h.jsx(Fy,{defaults:ls,onPropertyChange:Sd,onReset:Ed,isVisible:ht,activeTool:Sn}),bottomBar:h.jsx(Yk,{currentTimeRange:Ft,onTimeRangeChange:(F,L)=>{Qe(F),L&&is(L)},isLogScale:qe,isAutoScale:Xs,onToggleLogScale:()=>Qs(!qe),onToggleAutoScale:()=>Fe(!Xs),onResetZoom:()=>{const F=v.current[n];F&&F.resetZoom()},isToolbarVisible:J}),watchlist:ss==="watchlist"?h.jsx(GQ,{currentSymbol:f,currentExchange:p,items:(()=>{const F=EA?.symbols||[],L=new Map(je.map(z=>[`${z.symbol}-${z.exchange}`,z]));return F.map(z=>{if(typeof z=="string"&&z.startsWith("###"))return z;const $=typeof z=="string"?z:z.symbol,yt=typeof z=="string"?"NSE":z.exchange||"NSE",Dt=`${$}-${yt}`,Jt=L.get(Dt);return Jt?{...Jt,exchange:yt}:z})})(),isLoading:us,onSymbolSelect:F=>{const L=typeof F=="string"?F:F.symbol,z=typeof F=="string"?"NSE":F.exchange||"NSE";c($=>$.map(yt=>yt.id===n?{...yt,symbol:L,exchange:z,strategyConfig:null}:yt))},onAddClick:ni,onRemoveClick:sr,onReorder:xn,watchlists:Os.lists,activeWatchlistId:Os.activeListId,onSwitchWatchlist:ln,onCreateWatchlist:PA,onRenameWatchlist:Ys,onDeleteWatchlist:rn,onClearWatchlist:Wr,onCopyWatchlist:$r,favoriteWatchlists:An,onToggleFavorite:Ks,onAddSection:Ll,onRenameSection:Hl,onDeleteSection:GA,collapsedSections:EA?.collapsedSections||[],onToggleSection:Yi,onExport:KA,onImport:zi}):ss==="alerts"?h.jsx(qj,{alerts:xt,logs:oe,onRemoveAlert:Jo,onRestartAlert:Jr,onPauseAlert:Ol}):ss==="position_tracker"?h.jsx(qW,{sourceMode:wt.sourceMode,customSymbols:wt.customSymbols,watchlistData:je,isLoading:us,onSourceModeChange:F=>jt(L=>({...L,sourceMode:F})),onCustomSymbolsChange:F=>jt(L=>({...L,customSymbols:F})),onSymbolSelect:F=>{const L=typeof F=="string"?F:F.symbol,z=typeof F=="string"?"NSE":F.exchange||"NSE";c($=>$.map(yt=>yt.id===n?{...yt,symbol:L,exchange:z,strategyConfig:null}:yt))},isAuthenticated:A}):null,rightToolbar:h.jsx(bj,{activePanel:ss,onPanelChange:_d,badges:{alerts:Nt}}),chart:h.jsx(Aj,{charts:a,layout:e,activeChartId:n,onActiveChartChange:l,chartRefs:v,onAlertsSync:xc,onAlertTriggered:md,onReplayModeChange:Xr,chartType:y,activeTool:Sn,onToolUsed:$A,isLogScale:qe,isAutoScale:Xs,magnetMode:H,timeRange:Ft,isToolbarVisible:J,theme:he,isDrawingsLocked:It,isDrawingsHidden:it,isTimerVisible:Ee,isSessionBreakVisible:Ie,onIndicatorRemove:Dl,onIndicatorVisibilityToggle:ir,chartAppearance:Ze,onOpenOptionChain:wd})}),h.jsx(PN,{isOpen:S,onClose:()=>x(!1),onSelect:er,addedSymbols:U==="compare"?d.comparisonSymbols||[]:[],isCompareMode:U==="compare"}),h.jsx(HR,{isOpen:N,onClose:()=>I(!1),commands:Ud,recentCommands:Ec,groupedCommands:Md,searchCommands:Id,executeCommand:Nd}),h.jsx("div",{style:{position:"fixed",top:70,right:20,zIndex:1e4,display:"flex",flexDirection:"column",gap:8},children:W.map((F,L)=>h.jsx(yC,{message:F.message,type:F.type,action:F.action,onClose:()=>ui(F.id)},F.id))}),pt&&h.jsx(CC,{message:pt,onClose:()=>Q(null)}),h.jsx(vj,{isOpen:j,onClose:()=>Z(!1),onSave:Yo,initialPrice:rt,theme:he}),h.jsx(kO,{isOpen:ve,onClose:()=>Ns(!1),theme:he,isTimerVisible:Ee,onTimerToggle:Cd,isSessionBreakVisible:Ie,onSessionBreakToggle:bd,hostUrl:Vt,onHostUrlSave:Qd,apiKey:Ci,onApiKeySave:Td,websocketUrl:ri,onWebsocketUrlSave:Zo,chartAppearance:Ze,onChartAppearanceChange:Sc,onResetChartAppearance:xd}),h.jsx($G,{isOpen:Us,onClose:()=>Js(!1),theme:he,indicators:d.indicators,onIndicatorSettingsChange:pi}),h.jsx($z,{isOpen:R,onClose:()=>D(!1),currentState:{layout:e,charts:a,chartType:y,chartAppearance:Ze,theme:he},onLoadTemplate:yd,showToast:ke}),h.jsx(fV,{isOpen:V,onClose:()=>lt(!1)}),h.jsx(aK,{isOpen:dt,onClose:()=>At(!1),onSelect:F=>{c(L=>L.map(z=>z.id===n?{...z,strategyConfig:F}:z)),At(!1)},spotPrice:d?.ltp||null}),h.jsx(uG,{isOpen:ft,onClose:()=>{mt(!1),Ut(null)},onSelectOption:Bd,initialSymbol:at})]})}function n$(){const[A,t]=B.useState(null);B.useEffect(()=>{(async()=>{const l=await C2();t(l)})()},[]);const{isLoaded:e,syncKey:s}=fG(A);return e?h.jsx(A$,{isAuthenticated:A,setIsAuthenticated:t},s):h.jsx(i$,{})}class r$ extends ks.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,e){console.error("Error caught by boundary:",t,e)}render(){return this.state.hasError?h.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"#fff",backgroundColor:"#131722"},children:[h.jsx("h2",{children:"Something went wrong"}),h.jsx("p",{children:this.state.error?.message}),h.jsx("button",{onClick:()=>window.location.reload(),children:"Reload Application"})]}):this.props.children}}const l$=localStorage.getItem("tv_theme")||"dark";document.documentElement.setAttribute("data-theme",l$);v5.createRoot(document.getElementById("root")).render(h.jsx(B.StrictMode,{children:h.jsx(r$,{children:h.jsx(n$,{})})}));
